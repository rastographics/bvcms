function getISODateTime(t){var e=function(t){return(""+t).length<2?"0"+t:""+t};if("undefined"==typeof t)var t=new Date;return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}function dimOff(){$("#darkLayer").hide()}function dimOn(){$("#darkLayer").show()}!function(){var t,e=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();t=e?function(t,e,i){Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:i})}:function(t,e,i){t[e]=i},String.prototype.startsWith||t(String.prototype,"startsWith",function(t,e){return e=e||0,this.lastIndexOf(t,e)===e})}(),/*!
 * jQuery Migrate - v1.1.1 - 2013-02-16
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
function(t,e,i){function s(i){a[i]||(a[i]=!0,t.migrateWarnings.push(i),e.console&&console.warn&&!t.migrateMute&&(console.warn("JQMIGRATE: "+i),t.migrateTrace&&console.trace&&console.trace()))}function n(e,i,n,a){if(Object.defineProperty)try{return void Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:function(){return s(a),n},set:function(t){s(a),n=t}})}catch(o){}t._definePropertyBroken=!0,e[i]=n}var a={};t.migrateWarnings=[],!t.migrateMute&&e.console&&console.log&&console.log("JQMIGRATE: Logging is active"),t.migrateTrace===i&&(t.migrateTrace=!0),t.migrateReset=function(){a={},t.migrateWarnings.length=0},"BackCompat"===document.compatMode&&s("jQuery is not compatible with Quirks Mode");var o=t("<input/>",{size:1}).attr("size")&&t.attrFn,r=t.attr,l=t.attrHooks.value&&t.attrHooks.value.get||function(){return null},h=t.attrHooks.value&&t.attrHooks.value.set||function(){return i},c=/^(?:input|button)$/i,d=/^[238]$/,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,p=/^(?:checked|selected)$/i;n(t,"attrFn",o||{},"jQuery.attrFn is deprecated"),t.attr=function(e,n,a,l){var h=n.toLowerCase(),f=e&&e.nodeType;return l&&(r.length<4&&s("jQuery.fn.attr( props, pass ) is deprecated"),e&&!d.test(f)&&(o?n in o:t.isFunction(t.fn[n])))?t(e)[n](a):("type"===n&&a!==i&&c.test(e.nodeName)&&e.parentNode&&s("Can't change the 'type' of an input or button in IE 6/7/8"),!t.attrHooks[h]&&u.test(h)&&(t.attrHooks[h]={get:function(e,s){var n,a=t.prop(e,s);return a===!0||"boolean"!=typeof a&&(n=e.getAttributeNode(s))&&n.nodeValue!==!1?s.toLowerCase():i},set:function(e,i,s){var n;return i===!1?t.removeAttr(e,s):(n=t.propFix[s]||s,n in e&&(e[n]=!0),e.setAttribute(s,s.toLowerCase())),s}},p.test(h)&&s("jQuery.fn.attr('"+h+"') may use property instead of attribute")),r.call(t,e,n,a))},t.attrHooks.value={get:function(t,e){var i=(t.nodeName||"").toLowerCase();return"button"===i?l.apply(this,arguments):("input"!==i&&"option"!==i&&s("jQuery.fn.attr('value') no longer gets properties"),e in t?t.value:null)},set:function(t,e){var i=(t.nodeName||"").toLowerCase();return"button"===i?h.apply(this,arguments):("input"!==i&&"option"!==i&&s("jQuery.fn.attr('value', val) no longer sets properties"),void(t.value=e))}};var f,m,g=t.fn.init,v=t.parseJSON,b=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;t.fn.init=function(e,i,n){var a;return e&&"string"==typeof e&&!t.isPlainObject(i)&&(a=b.exec(e))&&a[1]&&("<"!==e.charAt(0)&&s("$(html) HTML strings must start with '<' character"),i&&i.context&&(i=i.context),t.parseHTML)?g.call(this,t.parseHTML(t.trim(e),i,!0),i,n):g.apply(this,arguments)},t.fn.init.prototype=t.fn,t.parseJSON=function(t){return t||null===t?v.apply(this,arguments):(s("jQuery.parseJSON requires a valid JSON string"),null)},t.uaMatch=function(t){t=t.toLowerCase();var e=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},t.browser||(f=t.uaMatch(navigator.userAgent),m={},f.browser&&(m[f.browser]=!0,m.version=f.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),t.browser=m),n(t,"browser",t.browser,"jQuery.browser is deprecated"),t.sub=function(){function e(t,i){return new e.fn.init(t,i)}t.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(s,n){return n&&n instanceof t&&!(n instanceof e)&&(n=e(n)),t.fn.init.call(this,s,n,i)},e.fn.init.prototype=e.fn;var i=e(document);return s("jQuery.sub() is deprecated"),e},t.ajaxSetup({converters:{"text json":t.parseJSON}});var y=t.fn.data;t.fn.data=function(e){var n,a,o=this[0];return!o||"events"!==e||1!==arguments.length||(n=t.data(o,e),a=t._data(o,e),n!==i&&n!==a||a===i)?y.apply(this,arguments):(s("Use of jQuery.fn.data('events') is deprecated"),a)};var w=/\/(java|ecma)script/i,C=t.fn.andSelf||t.fn.addBack;t.fn.andSelf=function(){return s("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),C.apply(this,arguments)},t.clean||(t.clean=function(e,i,n,a){i=i||document,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,s("jQuery.clean() is deprecated");var o,r,l,h,c=[];if(t.merge(c,t.buildFragment(e,i).childNodes),n)for(l=function(t){return!t.type||w.test(t.type)?a?a.push(t.parentNode?t.parentNode.removeChild(t):t):n.appendChild(t):void 0},o=0;null!=(r=c[o]);o++)t.nodeName(r,"script")&&l(r)||(n.appendChild(r),"undefined"!=typeof r.getElementsByTagName&&(h=t.grep(t.merge([],r.getElementsByTagName("script")),l),c.splice.apply(c,[o+1,0].concat(h)),o+=h.length));return c});var k=t.event.add,D=t.event.remove,x=t.event.trigger,$=t.fn.toggle,T=t.fn.live,S=t.fn.die,F="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",M=new RegExp("\\b(?:"+F+")\\b"),A=/(?:^|\s)hover(\.\S+|)\b/,E=function(e){return"string"!=typeof e||t.event.special.hover?e:(A.test(e)&&s("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),e&&e.replace(A,"mouseenter$1 mouseleave$1"))};t.event.props&&"attrChange"!==t.event.props[0]&&t.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),t.event.dispatch&&n(t.event,"handle",t.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),t.event.add=function(t,e,i,n,a){t!==document&&M.test(e)&&s("AJAX events should be attached to document: "+e),k.call(this,t,E(e||""),i,n,a)},t.event.remove=function(t,e,i,s,n){D.call(this,t,E(e)||"",i,s,n)},t.fn.error=function(){var t=Array.prototype.slice.call(arguments,0);return s("jQuery.fn.error() is deprecated"),t.splice(0,0,"error"),arguments.length?this.bind.apply(this,t):(this.triggerHandler.apply(this,t),this)},t.fn.toggle=function(e,i){if(!t.isFunction(e)||!t.isFunction(i))return $.apply(this,arguments);s("jQuery.fn.toggle(handler, handler...) is deprecated");var n=arguments,a=e.guid||t.guid++,o=0,r=function(i){var s=(t._data(this,"lastToggle"+e.guid)||0)%o;return t._data(this,"lastToggle"+e.guid,s+1),i.preventDefault(),n[s].apply(this,arguments)||!1};for(r.guid=a;o<n.length;)n[o++].guid=a;return this.click(r)},t.fn.live=function(e,i,n){return s("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(t(this.context).on(e,this.selector,i,n),this)},t.fn.die=function(e,i){return s("jQuery.fn.die() is deprecated"),S?S.apply(this,arguments):(t(this.context).off(e,this.selector||"**",i),this)},t.event.trigger=function(t,e,i,n){return i||M.test(t)||s("Global events are undocumented and deprecated"),x.call(this,t,e,i||document,n)},t.each(F.split("|"),function(e,i){t.event.special[i]={setup:function(){var e=this;return e!==document&&(t.event.add(document,i+"."+t.guid,function(){t.event.trigger(i,null,e,!0)}),t._data(this,i,t.guid++)),!1},teardown:function(){return this!==document&&t.event.remove(document,i+"."+t._data(this,i)),!1}}})}(jQuery,window),!function(t){"use strict";function e(t){return function(e){return this===e.target?t.apply(this,arguments):void 0}}var i=function(t,e){this.init(t,e)};i.prototype={constructor:i,init:function(e,i){if(this.$element=t(e),this.options=t.extend({},t.fn.modalmanager.defaults,this.$element.data(),"object"==typeof i&&i),this.stack=[],this.backdropCount=0,this.options.resize){var s,n=this;t(window).on("resize.modal",function(){s&&clearTimeout(s),s=setTimeout(function(){for(var t=0;t<n.stack.length;t++)n.stack[t].isShown&&n.stack[t].layout()},10)})}},createModal:function(e,i){t(e).modal(t.extend({manager:this},i))},appendModal:function(i){this.stack.push(i);var s=this;i.$element.on("show.modalmanager",e(function(e){var n=function(){i.isShown=!0;var e=t.support.transition&&i.$element.hasClass("fade");s.$element.toggleClass("modal-open",s.hasOpenModal()).toggleClass("page-overflow",t(window).height()<s.$element.height()),i.$parent=i.$element.parent(),i.$container=s.createContainer(i),i.$element.appendTo(i.$container),s.backdrop(i,function(){i.$element.show(),e&&i.$element[0].offsetWidth,i.layout(),i.$element.addClass("in").attr("aria-hidden",!1);var n=function(){s.setFocus(),i.$element.trigger("shown")};e?i.$element.one(t.support.transition.end,n):n()})};i.options.replace?s.replace(n):n()})),i.$element.on("hidden.modalmanager",e(function(e){s.backdrop(i),i.$backdrop&&t.support.transition&&i.$element.hasClass("fade")?i.$backdrop.one(t.support.transition.end,function(){s.destroyModal(i)}):s.destroyModal(i)})),i.$element.on("destroy.modalmanager",e(function(t){s.removeModal(i)}))},destroyModal:function(t){t.destroy();var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e),e||this.$element.removeClass("page-overflow"),this.removeContainer(t),this.setFocus()},hasOpenModal:function(){for(var t=0;t<this.stack.length;t++)if(this.stack[t].isShown)return!0;return!1},setFocus:function(){for(var t,e=0;e<this.stack.length;e++)this.stack[e].isShown&&(t=this.stack[e]);t&&t.focus()},removeModal:function(t){t.$element.off(".modalmanager"),t.$backdrop&&this.removeBackdrop(t),this.stack.splice(this.getIndexOfModal(t),1)},getModalAt:function(t){return this.stack[t]},getIndexOfModal:function(t){for(var e=0;e<this.stack.length;e++)if(t===this.stack[e])return e},replace:function(i){for(var s,n=0;n<this.stack.length;n++)this.stack[n].isShown&&(s=this.stack[n]);s?(this.$backdropHandle=s.$backdrop,s.$backdrop=null,i&&s.$element.one("hidden",e(t.proxy(i,this))),s.hide()):i&&i()},removeBackdrop:function(t){t.$backdrop.remove(),t.$backdrop=null},createBackdrop:function(e){var i;return this.$backdropHandle?(i=this.$backdropHandle,i.off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):i=t('<div class="modal-backdrop '+e+'" />').appendTo(this.$element),i},removeContainer:function(t){t.$container.remove(),t.$container=null},createContainer:function(i){var n;return n=t('<div class="modal-scrollable">').css("z-index",s("modal",i?this.getIndexOfModal(i):this.stack.length)).appendTo(this.$element),i&&"static"!=i.options.backdrop?n.on("click.modal",e(function(t){i.hide()})):i&&n.on("click.modal",e(function(t){i.attention()})),n},backdrop:function(e,i){var n=e.$element.hasClass("fade")?"fade":"",a=e.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(e.isShown&&a){var o=t.support.transition&&n&&!this.$backdropHandle;e.$backdrop=this.createBackdrop(n),e.$backdrop.css("z-index",s("backdrop",this.getIndexOfModal(e))),o&&e.$backdrop[0].offsetWidth,e.$backdrop.addClass("in"),this.backdropCount+=1,o?e.$backdrop.one(t.support.transition.end,i):i()}else if(!e.isShown&&e.$backdrop){e.$backdrop.removeClass("in"),this.backdropCount-=1;var r=this;t.support.transition&&e.$element.hasClass("fade")?e.$backdrop.one(t.support.transition.end,function(){r.removeBackdrop(e)}):r.removeBackdrop(e)}else i&&i()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(e){if(e=e||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",t(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var i=this;t.support.transition?this.$backdropHandle.one(t.support.transition.end,function(){i.removeLoading()}):i.removeLoading()}else e&&e(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade"),this.$backdropHandle[0].offsetWidth,this.$backdropHandle.css("z-index",s("backdrop",this.stack.length)).addClass("in");var n=t(this.options.spinner).css("z-index",s("modal",this.stack.length)).appendTo(this.$element).addClass("in");this.$spinner=t(this.createContainer()).append(n).on("click.modalmanager",t.proxy(this.loading,this)),this.isLoading=!0,t.support.transition?this.$backdropHandle.one(t.support.transition.end,e):e()}}};var s=function(){var e,i={};return function(s,n){if("undefined"==typeof e){var a=t('<div class="modal hide" />').appendTo("body"),o=t('<div class="modal-backdrop hide" />').appendTo("body");i.modal=+a.css("z-index"),i.backdrop=+o.css("z-index"),e=i.modal-i.backdrop,a.remove(),o.remove(),o=a=null}return i[s]+e*n}}();t.fn.modalmanager=function(e,s){return this.each(function(){var n=t(this),a=n.data("modalmanager");a||n.data("modalmanager",a=new i(this,e)),"string"==typeof e&&a[e].apply(a,[].concat(s))})},t.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'},t.fn.modalmanager.Constructor=i}(jQuery),!function(t){"use strict";var e=function(t,e){this.init(t,e)};e.prototype={constructor:e,init:function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote);var s="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;s=s.appendModal?s:t(s).modalmanager().data("modalmanager"),s.appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=t.Event("show");this.isShown||(this.$element.trigger(e),e.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(e){return e&&e.preventDefault(),e=t.Event("hide"),this.$element.trigger(e),!this.isShown||e.isDefaultPrevented()?this.isShown=!1:(this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),t(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),void(t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()))},layout:function(){var e=this.options.height?"height":"max-height",i=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var s=this;this.$element.css("margin-left",function(){return/%/gi.test(s.options.width)?-(parseInt(s.options.width)/2)+"%":-(t(this).width()/2)+"px"})}else this.$element.css("width",""),this.$element.css("margin-left","");this.$element.find(".modal-body").css("overflow","").css(e,""),i&&this.$element.find(".modal-body").css("overflow","auto").css(e,i);var n=t(window).height()-10<this.$element.height();n||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var e=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(i){if(i.keyCode&&9==i.keyCode){var s=t(this),n=t(this);e.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(e){s=e.shiftKey?s.data("tabindex")>t(this).data("tabindex")?s=t(this):n=t(this):s.data("tabindex")<t(this).data("tabindex")?s=t(this):n=t(this)}),s[0]!==t(this)[0]?s.focus():n.focus(),i.preventDefault()}}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var t=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){var t=this.options.height?"height":"max-height",e=this.options.height||this.options.maxHeight;e&&this.$element.find(".modal-body").css("overflow","").css(t,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(e){e=e||function(){};var i=this.$element.hasClass("fade")?"fade":"";if(this.isLoading)if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var s=this;t.support.transition&&this.$element.hasClass("fade")?this.$loading.one(t.support.transition.end,function(){s.removeLoading()}):s.removeLoading()}else e&&e(this.isLoading);else{var n=t.support.transition&&i;this.$loading=t('<div class="loading-mask '+i+'">').append(this.options.spinner).appendTo(this.$element),n&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,n?this.$loading.one(t.support.transition.end,e):e()}},focus:function(){var t=this.$element.find(this.options.focusOn);t=t.length?t:this.$element,t.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var t=this;setTimeout(function(){t.$element.addClass("animated").addClass(t.options.attentionAnimation)},0)}this.focus()},destroy:function(){var e=t.Event("destroy");this.$element.trigger(e),e.isDefaultPrevented()||this.teardown()},teardown:function(){return this.$parent.length?(this.$parent!==this.$element.parent()&&this.$element.appendTo(this.$parent),this.$element.off(".modal"),this.$element.removeData("modal"),void this.$element.removeClass("in").attr("aria-hidden",!0)):(this.$element.remove(),void(this.$element=null))}},t.fn.modal=function(i,s){return this.each(function(){var n=t(this),a=n.data("modal"),o=t.extend({},t.fn.modal.defaults,n.data(),"object"==typeof i&&i);a||n.data("modal",a=new e(this,o)),"string"==typeof i?a[i].apply(a,[].concat(s)):o.show&&a.show()})},t.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'},t.fn.modal.Constructor=e,t(function(){t(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),s=i.attr("href"),n=t(i.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},n.data(),i.data());e.preventDefault(),n.modal(a).one("hide",function(){i.focus()})})})}(window.jQuery),/*! X-editable - v1.5.0 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.editableform.defaults,i),this.$div=t(e),this.options.scope||(this.options.scope=this)};e.prototype={constructor:e,initInput:function(){this.input=this.options.input,this.value=this.input.str2value(this.options.value),this.input.prerender()},initTemplate:function(){this.$form=t(t.fn.editableform.template)},initButtons:function(){var e=this.$form.find(".editable-buttons");e.append(t.fn.editableform.buttons),"bottom"===this.options.showbuttons&&e.addClass("editable-buttons-bottom")},render:function(){this.$loading=t(t.fn.editableform.loading),this.$div.empty().append(this.$loading),this.initTemplate(),this.options.showbuttons?this.initButtons():this.$form.find(".editable-buttons").remove(),this.showLoading(),this.isSaving=!1,this.$div.triggerHandler("rendering"),this.initInput(),this.$form.find("div.editable-input").append(this.input.$tpl),this.$div.append(this.$form),t.when(this.input.render()).then(t.proxy(function(){if(this.options.showbuttons||this.input.autosubmit(),this.$form.find(".editable-cancel").click(t.proxy(this.cancel,this)),this.input.error)this.error(this.input.error),this.$form.find(".editable-submit").attr("disabled",!0),this.input.$input.attr("disabled",!0),this.$form.submit(function(t){t.preventDefault()});else{this.error(!1),this.input.$input.removeAttr("disabled"),this.$form.find(".editable-submit").removeAttr("disabled");var e=null===this.value||void 0===this.value||""===this.value?this.options.defaultValue:this.value;this.input.value2input(e),this.$form.submit(t.proxy(this.submit,this))}this.$div.triggerHandler("rendered"),this.showForm(),this.input.postrender&&this.input.postrender()},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var t,e;this.$form?(t=this.$form.outerWidth(),e=this.$form.outerHeight(),t&&this.$loading.width(t),e&&this.$loading.height(e),this.$form.hide()):(t=this.$loading.parent().width(),t&&this.$loading.width(t)),this.$loading.show()},showForm:function(t){this.$loading.hide(),this.$form.show(),t!==!1&&this.input.activate(),this.$div.triggerHandler("show")},error:function(e){var i,s=this.$form.find(".control-group"),n=this.$form.find(".editable-error-block");if(e===!1)s.removeClass(t.fn.editableform.errorGroupClass),n.removeClass(t.fn.editableform.errorBlockClass).empty().hide();else{if(e){i=e.split("\n");for(var a=0;a<i.length;a++)i[a]=t("<div>").text(i[a]).html();e=i.join("<br>")}s.addClass(t.fn.editableform.errorGroupClass),n.addClass(t.fn.editableform.errorBlockClass).html(e).show()}},submit:function(e){e.stopPropagation(),e.preventDefault();var i,s=this.input.input2value();if(i=this.validate(s))return this.error(i),void this.showForm();if(!this.options.savenochange&&this.input.value2str(s)==this.input.value2str(this.value))return void this.$div.triggerHandler("nochange");var n=this.input.value2submit(s);this.isSaving=!0,t.when(this.save(n)).done(t.proxy(function(t){this.isSaving=!1;var e="function"==typeof this.options.success?this.options.success.call(this.options.scope,t,s):null;return e===!1?(this.error(!1),void this.showForm(!1)):"string"==typeof e?(this.error(e),void this.showForm()):(e&&"object"==typeof e&&e.hasOwnProperty("newValue")&&(s=e.newValue),this.error(!1),this.value=s,void this.$div.triggerHandler("save",{newValue:s,submitValue:n,response:t}))},this)).fail(t.proxy(function(t){this.isSaving=!1;var e;e="function"==typeof this.options.error?this.options.error.call(this.options.scope,t,s):"string"==typeof t?t:t.responseText||t.statusText||"Unknown error!",this.error(e),this.showForm()},this))},save:function(e){this.options.pk=t.fn.editableutils.tryParseJson(this.options.pk,!0);var i,s="function"==typeof this.options.pk?this.options.pk.call(this.options.scope):this.options.pk,n=!!("function"==typeof this.options.url||this.options.url&&("always"===this.options.send||"auto"===this.options.send&&null!==s&&void 0!==s));return n?(this.showLoading(),i={name:this.options.name||"",value:e,pk:s},"function"==typeof this.options.params?i=this.options.params.call(this.options.scope,i):(this.options.params=t.fn.editableutils.tryParseJson(this.options.params,!0),t.extend(i,this.options.params)),"function"==typeof this.options.url?this.options.url.call(this.options.scope,i):t.ajax(t.extend({url:this.options.url,data:i,type:"POST"},this.options.ajaxOptions))):void 0},validate:function(t){return void 0===t&&(t=this.value),"function"==typeof this.options.validate?this.options.validate.call(this.options.scope,t):void 0},option:function(t,e){t in this.options&&(this.options[t]=e),"value"===t&&this.setValue(e)},setValue:function(t,e){e?this.value=this.input.str2value(t):this.value=t,this.$form&&this.$form.is(":visible")&&this.input.value2input(this.value)}},t.fn.editableform=function(i){var s=arguments;return this.each(function(){var n=t(this),a=n.data("editableform"),o="object"==typeof i&&i;a||n.data("editableform",a=new e(this,o)),"string"==typeof i&&a[i].apply(a,Array.prototype.slice.call(s,1))})},t.fn.editableform.Constructor=e,t.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:!0,scope:null,savenochange:!1},t.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>',t.fn.editableform.loading='<div class="editableform-loading"></div>',t.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>',t.fn.editableform.errorGroupClass=null,t.fn.editableform.errorBlockClass="editable-error",t.fn.editableform.engine="jquery"}(window.jQuery),function(t){"use strict";t.fn.editableutils={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.superclass=e.prototype},setCursorPosition:function(t,e){if(t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select()}},tryParseJson:function(t,e){if("string"==typeof t&&t.length&&t.match(/^[\{\[].*[\}\]]$/))if(e)try{t=new Function("return "+t)()}catch(i){}finally{return t}else t=new Function("return "+t)();return t},sliceObj:function(e,i,s){var n,a,o={};if(!t.isArray(i)||!i.length)return o;for(var r=0;r<i.length;r++)n=i[r],e.hasOwnProperty(n)&&(o[n]=e[n]),s!==!0&&(a=n.toLowerCase(),e.hasOwnProperty(a)&&(o[n]=e[a]));return o},getConfigData:function(e){var i={};return t.each(e.data(),function(t,e){("object"!=typeof e||e&&"object"==typeof e&&(e.constructor===Object||e.constructor===Array))&&(i[t]=e)}),i},objectKeys:function(t){if(Object.keys)return Object.keys(t);if(t!==Object(t))throw new TypeError("Object.keys called on a non-object");var e,i=[];for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.push(e);return i},escape:function(e){return t("<div>").text(e).html()},itemsByValue:function(e,i,s){if(!i||null===e)return[];if("function"!=typeof s){var n=s||"value";s=function(t){return t[n]}}var a=t.isArray(e),o=[],r=this;return t.each(i,function(i,n){if(n.children)o=o.concat(r.itemsByValue(e,n.children,s));else if(a)t.grep(e,function(t){return t==(n&&"object"==typeof n?s(n):n)}).length&&o.push(n);else{var l=n&&"object"==typeof n?s(n):n;e==l&&o.push(n)}}),o},createInput:function(e){var i,s,n,a=e.type;return"date"===a&&("inline"===e.mode?t.fn.editabletypes.datefield?a="datefield":t.fn.editabletypes.dateuifield&&(a="dateuifield"):t.fn.editabletypes.date?a="date":t.fn.editabletypes.dateui&&(a="dateui"),"date"!==a||t.fn.editabletypes.date||(a="combodate")),"datetime"===a&&"inline"===e.mode&&(a="datetimefield"),"wysihtml5"!==a||t.fn.editabletypes[a]||(a="textarea"),"function"==typeof t.fn.editabletypes[a]?(i=t.fn.editabletypes[a],s=this.sliceObj(e,this.objectKeys(i.defaults)),n=new i(s)):(t.error("Unknown type: "+a),!1)},supportsTransitions:function(){var t=document.body||document.documentElement,e=t.style,i="transition",s=["Moz","Webkit","Khtml","O","ms"];if("string"==typeof e[i])return!0;i=i.charAt(0).toUpperCase()+i.substr(1);for(var n=0;n<s.length;n++)if("string"==typeof e[s[n]+i])return!0;return!1}}}(window.jQuery),function(t){"use strict";var e=function(t,e){this.init(t,e)},i=function(t,e){this.init(t,e)};e.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(i,s){this.$element=t(i),this.options=t.extend({},t.fn.editableContainer.defaults,s),this.splitOptions(),this.formOptions.scope=this.$element[0],this.initContainer(),this.delayedHide=!1,this.$element.on("destroyed",t.proxy(function(){this.destroy()},this)),t(document).data("editable-handlers-attached")||(t(document).on("keyup.editable",function(e){27===e.which&&t(".editable-open").editableContainer("hide")}),t(document).on("click.editable",function(i){var s,n=t(i.target),a=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(t.contains(document.documentElement,i.target)&&!n.is(document)){for(s=0;s<a.length;s++)if(n.is(a[s])||n.parents(a[s]).length)return;e.prototype.closeOthers(i.target)}}),t(document).data("editable-handlers-attached",!0))},splitOptions:function(){if(this.containerOptions={},this.formOptions={},!t.fn[this.containerName])throw new Error(this.containerName+" not found. Have you included corresponding js file?");for(var e in this.options)e in this.defaults?this.containerOptions[e]=this.options[e]:this.formOptions[e]=this.options[e]},tip:function(){return this.container()?this.container().$tip:null},container:function(){var t;return this.containerDataName&&(t=this.$element.data(this.containerDataName))?t:t=this.$element.data(this.containerName)},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:t.proxy(this.save,this),nochange:t.proxy(function(){this.hide("nochange")},this),cancel:t.proxy(function(){this.hide("cancel")},this),show:t.proxy(function(){this.delayedHide?(this.hide(this.delayedHide.reason),this.delayedHide=!1):this.setPosition()},this),rendering:t.proxy(this.setPosition,this),resize:t.proxy(this.setPosition,this),rendered:t.proxy(function(){this.$element.triggerHandler("shown",t(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(e){this.$element.addClass("editable-open"),e!==!1&&this.closeOthers(this.$element[0]),this.innerShow(),this.tip().addClass(this.containerClass),this.$form,this.$form=t("<div>"),this.tip().is(this.innerCss)?this.tip().append(this.$form):this.tip().find(this.innerCss).append(this.$form),this.renderForm()},hide:function(t){if(this.tip()&&this.tip().is(":visible")&&this.$element.hasClass("editable-open")){if(this.$form.data("editableform").isSaving)return void(this.delayedHide={reason:t});this.delayedHide=!1,this.$element.removeClass("editable-open"),this.innerHide(),this.$element.triggerHandler("hidden",t||"manual")}},innerShow:function(){},innerHide:function(){},toggle:function(t){this.container()&&this.tip()&&this.tip().is(":visible")?this.hide():this.show(t)},setPosition:function(){},save:function(t,e){this.$element.triggerHandler("save",e),this.hide("save")},option:function(t,e){this.options[t]=e,t in this.containerOptions?(this.containerOptions[t]=e,this.setContainerOption(t,e)):(this.formOptions[t]=e,this.$form&&this.$form.editableform("option",t,e))},setContainerOption:function(t,e){this.call("option",t,e)},destroy:function(){this.hide(),this.innerDestroy(),this.$element.off("destroyed"),this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(e){t(".editable-open").each(function(i,s){if(s!==e&&!t(s).find(e).length){var n=t(s),a=n.data("editableContainer");a&&("cancel"===a.options.onblur?n.data("editableContainer").hide("onblur"):"submit"===a.options.onblur&&n.data("editableContainer").tip().find("form").submit())}})},activate:function(){this.tip&&this.tip().is(":visible")&&this.$form&&this.$form.data("editableform").input.activate()}},t.fn.editableContainer=function(s){var n=arguments;return this.each(function(){var a=t(this),o="editableContainer",r=a.data(o),l="object"==typeof s&&s,h="inline"===l.mode?i:e;r||a.data(o,r=new h(this,l)),"string"==typeof s&&r[s].apply(r,Array.prototype.slice.call(n,1))})},t.fn.editableContainer.Popup=e,t.fn.editableContainer.Inline=i,t.fn.editableContainer.defaults={value:null,placement:"top",autohide:!0,onblur:"cancel",anim:!1,mode:"popup"},jQuery.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Inline.prototype,t.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=t("<span></span>"),this.options.anim||(this.options.anim=0)},splitOptions:function(){this.containerOptions={},this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide(),this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,t.proxy(function(){this.$element.show(),this.innerDestroy()},this))},innerDestroy:function(){this.tip()&&this.tip().empty().remove()}})}(window.jQuery),function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.editable.defaults,i,t.fn.editableutils.getConfigData(this.$element)),this.options.selector?this.initLive():this.init(),this.options.highlight&&!t.fn.editableutils.supportsTransitions()&&(this.options.highlight=!1)};e.prototype={constructor:e,init:function(){var e,i=!1;if(this.options.name=this.options.name||this.$element.attr("id"),this.options.scope=this.$element[0],this.input=t.fn.editableutils.createInput(this.options),this.input){switch(void 0===this.options.value||null===this.options.value?(this.value=this.input.html2value(t.trim(this.$element.html())),i=!0):(this.options.value=t.fn.editableutils.tryParseJson(this.options.value,!0),"string"==typeof this.options.value?this.value=this.input.str2value(this.options.value):this.value=this.options.value),this.$element.addClass("editable"),"textarea"===this.input.type&&this.$element.addClass("editable-pre-wrapped"),"manual"!==this.options.toggle?(this.$element.addClass("editable-click"),this.$element.on(this.options.toggle+".editable",t.proxy(function(t){if(this.options.disabled||t.preventDefault(),"mouseenter"===this.options.toggle)this.show();else{var e="click"!==this.options.toggle;this.toggle(e)}},this))):this.$element.attr("tabindex",-1),"function"==typeof this.options.display&&(this.options.autotext="always"),this.options.autotext){case"always":e=!0;break;case"auto":e=!t.trim(this.$element.text()).length&&null!==this.value&&void 0!==this.value&&!i;break;default:e=!1}t.when(e?this.render():!0).then(t.proxy(function(){this.options.disabled?this.disable():this.enable(),this.$element.triggerHandler("init",this)},this))}},initLive:function(){var e=this.options.selector;this.options.selector=!1,this.options.autotext="never",this.$element.on(this.options.toggle+".editable",e,t.proxy(function(e){var i=t(e.target);i.data("editable")||(i.hasClass(this.options.emptyclass)&&i.empty(),i.editable(this.options).trigger(e))},this))},render:function(t){return this.options.display!==!1?this.input.value2htmlFinal?this.input.value2html(this.value,this.$element[0],this.options.display,t):"function"==typeof this.options.display?this.options.display.call(this.$element[0],this.value,t):this.input.value2html(this.value,this.$element[0]):void 0},enable:function(){this.options.disabled=!1,this.$element.removeClass("editable-disabled"),this.handleEmpty(this.isEmpty),"manual"!==this.options.toggle&&"-1"===this.$element.attr("tabindex")&&this.$element.removeAttr("tabindex")},disable:function(){this.options.disabled=!0,this.hide(),this.$element.addClass("editable-disabled"),this.handleEmpty(this.isEmpty),this.$element.attr("tabindex",-1)},toggleDisabled:function(){this.options.disabled?this.enable():this.disable()},option:function(e,i){return e&&"object"==typeof e?void t.each(e,t.proxy(function(e,i){this.option(t.trim(e),i)},this)):(this.options[e]=i,"disabled"===e?i?this.disable():this.enable():("value"===e&&this.setValue(i),this.container&&this.container.option(e,i),void(this.input.option&&this.input.option(e,i))))},handleEmpty:function(e){this.options.display!==!1&&(void 0!==e?this.isEmpty=e:"function"==typeof this.input.isEmpty?this.isEmpty=this.input.isEmpty(this.$element):this.isEmpty=""===t.trim(this.$element.html()),this.options.disabled?this.isEmpty&&(this.$element.empty(),this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass)):this.isEmpty?(this.$element.html(this.options.emptytext),this.options.emptyclass&&this.$element.addClass(this.options.emptyclass)):this.options.emptyclass&&this.$element.removeClass(this.options.emptyclass))},show:function(e){if(!this.options.disabled){if(this.container){if(this.container.tip().is(":visible"))return}else{var i=t.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(i),this.$element.on("save.internal",t.proxy(this.save,this)),this.container=this.$element.data("editableContainer")}this.container.show(e)}},hide:function(){this.container&&this.container.hide()},toggle:function(t){this.container&&this.container.tip().is(":visible")?this.hide():this.show(t)},save:function(t,e){if(this.options.unsavedclass){var i=!1;i=i||"function"==typeof this.options.url,i=i||this.options.display===!1,i=i||void 0!==e.response,i=i||this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(e.newValue),i?this.$element.removeClass(this.options.unsavedclass):this.$element.addClass(this.options.unsavedclass)}if(this.options.highlight){var s=this.$element,n=s.css("background-color");s.css("background-color",this.options.highlight),setTimeout(function(){"transparent"===n&&(n=""),s.css("background-color",n),s.addClass("editable-bg-transition"),setTimeout(function(){s.removeClass("editable-bg-transition")},1700)},10)}this.setValue(e.newValue,!1,e.response)},validate:function(){return"function"==typeof this.options.validate?this.options.validate.call(this,this.value):void 0},setValue:function(e,i,s){i?this.value=this.input.str2value(e):this.value=e,this.container&&this.container.option("value",this.value),t.when(this.render(s)).then(t.proxy(function(){this.handleEmpty()},this))},activate:function(){this.container&&this.container.activate()},destroy:function(){this.disable(),this.container&&this.container.destroy(),this.input.destroy(),"manual"!==this.options.toggle&&(this.$element.removeClass("editable-click"),this.$element.off(this.options.toggle+".editable")),this.$element.off("save.internal"),this.$element.removeClass("editable editable-open editable-disabled"),this.$element.removeData("editable")}},t.fn.editable=function(i){var s={},n=arguments,a="editable";switch(i){case"validate":return this.each(function(){var e,i=t(this),n=i.data(a);n&&(e=n.validate())&&(s[n.options.name]=e)}),s;case"getValue":return 2===arguments.length&&arguments[1]===!0?s=this.eq(0).data(a).value:this.each(function(){var e=t(this),i=e.data(a);i&&void 0!==i.value&&null!==i.value&&(s[i.options.name]=i.input.value2submit(i.value))}),s;case"submit":var o,r=arguments[1]||{},l=this,h=this.editable("validate");return t.isEmptyObject(h)?(o=this.editable("getValue"),r.data&&t.extend(o,r.data),t.ajax(t.extend({url:r.url,data:o,type:"POST"},r.ajaxOptions)).success(function(t){"function"==typeof r.success&&r.success.call(l,t,r)}).error(function(){"function"==typeof r.error&&r.error.apply(l,arguments)})):"function"==typeof r.error&&r.error.call(l,h),this}return this.each(function(){var s=t(this),o=s.data(a),r="object"==typeof i&&i;return r&&r.selector?void(o=new e(this,r)):(o||s.data(a,o=new e(this,r)),void("string"==typeof i&&o[i].apply(o,Array.prototype.slice.call(n,1))))})},t.fn.editable.defaults={type:"text",disabled:!1,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery),function(t){"use strict";t.fn.editabletypes={};var e=function(){};e.prototype={init:function(e,i,s){this.type=e,this.options=t.extend({},s,i)},prerender:function(){this.$tpl=t(this.options.tpl),this.$input=this.$tpl,this.$clear=null,this.error=null},render:function(){},value2html:function(e,i){t(i)[this.options.escape?"text":"html"](t.trim(e))},html2value:function(e){return t("<div>").html(e).text()},value2str:function(t){return t},str2value:function(t){return t},value2submit:function(t){return t},value2input:function(t){this.$input.val(t)},input2value:function(){return this.$input.val()},activate:function(){this.$input.is(":visible")&&this.$input.focus()},clear:function(){this.$input.val(null)},escape:function(e){return t("<div>").text(e).html()},autosubmit:function(){},destroy:function(){},setClass:function(){this.options.inputclass&&this.$input.addClass(this.options.inputclass)},setAttr:function(t){void 0!==this.options[t]&&null!==this.options[t]&&this.$input.attr(t,this.options[t])},option:function(t,e){this.options[t]=e}},e.defaults={tpl:"",inputclass:null,escape:!0,scope:null,showbuttons:!0},t.extend(t.fn.editabletypes,{abstractinput:e})}(window.jQuery),function(t){"use strict";var e=function(t){};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){var e=t.Deferred();return this.error=null,this.onSourceReady(function(){this.renderList(),e.resolve()},function(){this.error=this.options.sourceError,e.resolve()}),e.promise()},html2value:function(t){return null},value2html:function(e,i,s,n){var a=t.Deferred(),o=function(){"function"==typeof s?s.call(i,e,this.sourceData,n):this.value2htmlFinal(e,i),a.resolve()};return null===e?o.call(this):this.onSourceReady(o,function(){a.resolve()}),a.promise()},onSourceReady:function(e,i){var s;if(t.isFunction(this.options.source)?(s=this.options.source.call(this.options.scope),this.sourceData=null):s=this.options.source,this.options.sourceCache&&t.isArray(this.sourceData))return void e.call(this);try{s=t.fn.editableutils.tryParseJson(s,!1)}catch(n){return void i.call(this)}if("string"==typeof s){if(this.options.sourceCache){var a,o=s;if(t(document).data(o)||t(document).data(o,{}),a=t(document).data(o),a.loading===!1&&a.sourceData)return this.sourceData=a.sourceData,this.doPrepend(),void e.call(this);if(a.loading===!0)return a.callbacks.push(t.proxy(function(){this.sourceData=a.sourceData,this.doPrepend(),e.call(this)},this)),void a.err_callbacks.push(t.proxy(i,this));a.loading=!0,a.callbacks=[],a.err_callbacks=[]}var r=t.extend({url:s,type:"get",cache:!1,dataType:"json",success:t.proxy(function(s){a&&(a.loading=!1),this.sourceData=this.makeArray(s),t.isArray(this.sourceData)?(a&&(a.sourceData=this.sourceData,t.each(a.callbacks,function(){this.call()})),this.doPrepend(),e.call(this)):(i.call(this),a&&t.each(a.err_callbacks,function(){this.call()}))},this),error:t.proxy(function(){i.call(this),a&&(a.loading=!1,t.each(a.err_callbacks,function(){this.call()}))},this)},this.options.sourceOptions);t.ajax(r)}else this.sourceData=this.makeArray(s),t.isArray(this.sourceData)?(this.doPrepend(),e.call(this)):i.call(this)},doPrepend:function(){null!==this.options.prepend&&void 0!==this.options.prepend&&(t.isArray(this.prependData)||(t.isFunction(this.options.prepend)&&(this.options.prepend=this.options.prepend.call(this.options.scope)),this.options.prepend=t.fn.editableutils.tryParseJson(this.options.prepend,!0),"string"==typeof this.options.prepend&&(this.options.prepend={"":this.options.prepend}),this.prependData=this.makeArray(this.options.prepend)),t.isArray(this.prependData)&&t.isArray(this.sourceData)&&(this.sourceData=this.prependData.concat(this.sourceData)))},renderList:function(){},value2htmlFinal:function(t,e){},makeArray:function(e){var i,s,n,a,o=[];if(!e||"string"==typeof e)return null;if(t.isArray(e)){a=function(t,e){return s={value:t,text:e},i++>=2?!1:void 0};for(var r=0;r<e.length;r++)n=e[r],"object"==typeof n?(i=0,t.each(n,a),1===i?o.push(s):i>1&&(n.children&&(n.children=this.makeArray(n.children)),o.push(n))):o.push({value:n,text:n})}else t.each(e,function(t,e){o.push({value:t,text:e})});return o},option:function(t,e){this.options[t]=e,"source"===t&&(this.sourceData=null),"prepend"===t&&(this.prependData=null)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{source:null,prepend:!1,sourceError:"Error when loading list",sourceCache:!0,sourceOptions:null}),t.fn.editabletypes.list=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("text",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.renderClear(),this.setClass(),this.setAttr("placeholder")},activate:function(){this.$input.is(":visible")&&(this.$input.focus(),t.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length),this.toggleClear&&this.toggleClear())},renderClear:function(){this.options.clear&&(this.$clear=t('<span class="editable-clear-x"></span>'),this.$input.after(this.$clear).css("padding-right",24).keyup(t.proxy(function(e){if(!~t.inArray(e.keyCode,[40,38,9,13,27])){clearTimeout(this.t);var i=this;this.t=setTimeout(function(){i.toggleClear(e)},100)}},this)).parent().css("position","relative"),this.$clear.click(t.proxy(this.clear,this)))},postrender:function(){},toggleClear:function(t){if(this.$clear){var e=this.$input.val().length,i=this.$clear.is(":visible");e&&!i&&this.$clear.show(),!e&&i&&this.$clear.hide()}},clear:function(){this.$clear.hide(),this.$input.val("").focus()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:!0}),t.fn.editabletypes.text=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("textarea",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.setAttr("placeholder"),this.setAttr("rows"),this.$input.keydown(function(e){e.ctrlKey&&13===e.which&&t(this).closest("form").submit()})},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7}),t.fn.editabletypes.textarea=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("select",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input.empty();var e=function(i,s){var n;if(t.isArray(s))for(var a=0;a<s.length;a++)n={},s[a].children?(n.label=s[a].text,i.append(e(t("<optgroup>",n),s[a].children))):(n.value=s[a].value,s[a].disabled&&(n.disabled=!0),i.append(t("<option>",n).text(s[a].text)));return i};e(this.$input,this.sourceData),this.setClass(),this.$input.on("keydown.editable",function(e){13===e.which&&t(this).closest("form").submit()})},value2htmlFinal:function(e,i){var s="",n=t.fn.editableutils.itemsByValue(e,this.sourceData);n.length&&(s=n[0].text),t.fn.editabletypes.abstractinput.prototype.value2html.call(this,s,i)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:"<select></select>"}),t.fn.editabletypes.select=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("checklist",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){var e;if(this.$tpl.empty(),t.isArray(this.sourceData)){for(var i=0;i<this.sourceData.length;i++)e=t("<label>").append(t("<input>",{type:"checkbox",value:this.sourceData[i].value})).append(t("<span>").text(" "+this.sourceData[i].text)),t("<div>").append(e).appendTo(this.$tpl);this.$input=this.$tpl.find('input[type="checkbox"]'),this.setClass()}},value2str:function(e){return t.isArray(e)?e.sort().join(t.trim(this.options.separator)):""},str2value:function(e){var i,s=null;return"string"==typeof e&&e.length?(i=new RegExp("\\s*"+t.trim(this.options.separator)+"\\s*"),s=e.split(i)):s=t.isArray(e)?e:[e],s},value2input:function(e){this.$input.prop("checked",!1),t.isArray(e)&&e.length&&this.$input.each(function(i,s){var n=t(s);t.each(e,function(t,e){n.val()==e&&n.prop("checked",!0)})})},input2value:function(){var e=[];return this.$input.filter(":checked").each(function(i,s){e.push(t(s).val())}),e},value2htmlFinal:function(e,i){var s=[],n=t.fn.editableutils.itemsByValue(e,this.sourceData),a=this.options.escape;n.length?(t.each(n,function(e,i){var n=a?t.fn.editableutils.escape(i.text):i.text;s.push(n)}),t(i).html(s.join("<br>"))):t(i).empty()},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(e){13===e.which&&t(this).closest("form").submit()})}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","}),t.fn.editabletypes.checklist=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("password",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{value2html:function(e,i){e?t(i).text("[hidden]"):t(i).empty()},html2value:function(t){return null}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="password">'}),t.fn.editabletypes.password=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("email",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="email">'}),t.fn.editabletypes.email=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("url",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="url">'}),t.fn.editabletypes.url=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("tel",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'}),t.fn.editabletypes.tel=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("number",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.text),t.extend(e.prototype,{render:function(){e.superclass.render.call(this),this.setAttr("min"),this.setAttr("max"),this.setAttr("step")},postrender:function(){this.$clear&&this.$clear.css({right:24})}}),e.defaults=t.extend({},t.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null}),t.fn.editabletypes.number=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("range",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.number),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.filter("input"),this.setClass(),this.setAttr("min"),this.setAttr("max"),this.setAttr("step"),this.$input.on("input",function(){t(this).siblings("output").text(t(this).val())})},activate:function(){this.$input.focus()}}),e.defaults=t.extend({},t.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"}),t.fn.editabletypes.range=e}(window.jQuery),function(t){"use strict";var e=function(t){
this.init("time",t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass()}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'}),t.fn.editabletypes.time=e}(window.jQuery),function(t){"use strict";var e=function(i){if(this.init("select2",i,e.defaults),i.select2=i.select2||{},this.sourceData=null,i.placeholder&&(i.select2.placeholder=i.placeholder),!i.select2.tags&&i.source){var s=i.source;t.isFunction(i.source)&&(s=i.source.call(i.scope)),"string"==typeof s?(i.select2.ajax=i.select2.ajax||{},i.select2.ajax.data||(i.select2.ajax.data=function(t){return{query:t}}),i.select2.ajax.results||(i.select2.ajax.results=function(t){return{results:t}}),i.select2.ajax.url=s):(this.sourceData=this.convertSource(s),i.select2.data=this.sourceData)}if(this.options.select2=t.extend({},e.defaults.select2,i.select2),this.isMultiple=this.options.select2.tags||this.options.select2.multiple,this.isRemote="ajax"in this.options.select2,this.idFunc=this.options.select2.id,"function"!=typeof this.idFunc){var n=this.idFunc||"id";this.idFunc=function(t){return t[n]}}this.formatSelection=this.options.select2.formatSelection,"function"!=typeof this.formatSelection&&(this.formatSelection=function(t){return t.text})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.setClass(),this.isRemote&&this.$input.on("select2-loaded",t.proxy(function(t){this.sourceData=t.items.results},this)),this.isMultiple&&this.$input.on("change",function(){t(this).closest("form").parent().triggerHandler("resize")})},value2html:function(i,s){var n,a="",o=this;this.options.select2.tags?n=i:this.sourceData&&(n=t.fn.editableutils.itemsByValue(i,this.sourceData,this.idFunc)),t.isArray(n)?(a=[],t.each(n,function(t,e){a.push(e&&"object"==typeof e?o.formatSelection(e):e)})):n&&(a=o.formatSelection(n)),a=t.isArray(a)?a.join(this.options.viewseparator):a,e.superclass.value2html.call(this,a,s)},html2value:function(t){return this.options.select2.tags?this.str2value(t,this.options.viewseparator):null},value2input:function(e){if(this.$input.data("select2")?this.$input.val(e).trigger("change",!0):(this.$input.val(e),this.$input.select2(this.options.select2)),this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var i=this.options.select2.id,s=this.options.select2.formatSelection;if(!i&&!s){var n={id:e,text:t(this.options.scope).text()};this.$input.select2("data",n)}}},input2value:function(){return this.$input.select2("val")},str2value:function(e,i){if("string"!=typeof e||!this.isMultiple)return e;i=i||this.options.select2.separator||t.fn.select2.defaults.separator;var s,n,a;if(null===e||e.length<1)return null;for(s=e.split(i),n=0,a=s.length;a>n;n+=1)s[n]=t.trim(s[n]);return s},autosubmit:function(){this.$input.on("change",function(e,i){i||t(this).closest("form").submit()})},convertSource:function(e){if(t.isArray(e)&&e.length&&void 0!==e[0].value)for(var i=0;i<e.length;i++)void 0!==e[i].value&&(e[i].id=e[i].value,delete e[i].value);return e},destroy:function(){this.$input.data("select2")&&this.$input.select2("destroy")}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "}),t.fn.editabletypes.select2=e}(window.jQuery),function(t){var e=function(e,i){return this.$element=t(e),this.$element.is("input")?(this.options=t.extend({},t.fn.combodate.defaults,i,this.$element.data()),void this.init()):void t.error("Combodate should be applied to INPUT element")};e.prototype={constructor:e,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]},this.$widget=t('<span class="combodate"></span>').html(this.getTemplate()),this.initCombos(),this.$widget.on("change","select",t.proxy(function(){this.$element.val(this.getValue())},this)),this.$widget.find("select").css("width","auto"),this.$element.hide().after(this.$widget),this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var e=this.options.template;return t.each(this.map,function(t,i){i=i[0];var s=new RegExp(i+"+"),n=i.length>1?i.substring(1,2):i;e=e.replace(s,"{"+n+"}")}),e=e.replace(/ /g,"&nbsp;"),t.each(this.map,function(t,i){i=i[0];var s=i.length>1?i.substring(1,2):i;e=e.replace("{"+s+"}",'<select class="'+t+'"></select>')}),e},initCombos:function(){var e=this;t.each(this.map,function(t,i){var s,n,a=e.$widget.find("."+t);a.length&&(e["$"+t]=a,s="fill"+t.charAt(0).toUpperCase()+t.slice(1),n=e[s](),e["$"+t].html(e.renderItems(n)))})},initItems:function(t){var e,i=[];if("name"===this.options.firstItem){e=moment.relativeTime||moment.langData()._relativeTime;var s="function"==typeof e[t]?e[t](1,!0,t,!1):e[t];s=s.split(" ").reverse()[0],i.push(["",s])}else"empty"===this.options.firstItem&&i.push(["",""]);return i},renderItems:function(t){for(var e=[],i=0;i<t.length;i++)e.push('<option value="'+t[i][0]+'">'+t[i][1]+"</option>");return e.join("\n")},fillDay:function(){var t,e,i=this.initItems("d"),s=-1!==this.options.template.indexOf("DD");for(e=1;31>=e;e++)t=s?this.leadZero(e):e,i.push([e,t]);return i},fillMonth:function(){var t,e,i=this.initItems("M"),s=-1!==this.options.template.indexOf("MMMM"),n=-1!==this.options.template.indexOf("MMM"),a=-1!==this.options.template.indexOf("MM");for(e=0;11>=e;e++)t=s?moment().date(1).month(e).format("MMMM"):n?moment().date(1).month(e).format("MMM"):a?this.leadZero(e+1):e+1,i.push([e,t]);return i},fillYear:function(){var t,e,i=[],s=-1!==this.options.template.indexOf("YYYY");for(e=this.options.maxYear;e>=this.options.minYear;e--)t=s?e:(e+"").substring(2),i[this.options.yearDescending?"push":"unshift"]([e,t]);return i=this.initItems("y").concat(i)},fillHour:function(){var t,e,i=this.initItems("h"),s=-1!==this.options.template.indexOf("h"),n=(-1!==this.options.template.indexOf("H"),-1!==this.options.template.toLowerCase().indexOf("hh")),a=s?1:0,o=s?12:23;for(e=a;o>=e;e++)t=n?this.leadZero(e):e,i.push([e,t]);return i},fillMinute:function(){var t,e,i=this.initItems("m"),s=-1!==this.options.template.indexOf("mm");for(e=0;59>=e;e+=this.options.minuteStep)t=s?this.leadZero(e):e,i.push([e,t]);return i},fillSecond:function(){var t,e,i=this.initItems("s"),s=-1!==this.options.template.indexOf("ss");for(e=0;59>=e;e+=this.options.secondStep)t=s?this.leadZero(e):e,i.push([e,t]);return i},fillAmpm:function(){var t=-1!==this.options.template.indexOf("a"),e=(-1!==this.options.template.indexOf("A"),[["am",t?"am":"AM"],["pm",t?"pm":"PM"]]);return e},getValue:function(e){var i,s={},n=this,a=!1;return t.each(this.map,function(t,e){if("ampm"!==t){var i="day"===t?1:0;return s[t]=n["$"+t]?parseInt(n["$"+t].val(),10):i,isNaN(s[t])?(a=!0,!1):void 0}}),a?"":(this.$ampm&&(12===s.hour?s.hour="am"===this.$ampm.val()?0:12:s.hour="am"===this.$ampm.val()?s.hour:s.hour+12),i=moment([s.year,s.month,s.day,s.hour,s.minute,s.second]),this.highlight(i),e=void 0===e?this.options.format:e,null===e?i.isValid()?i:null:i.isValid()?i.format(e):"")},setValue:function(e){function i(e,i){var s={};return e.children("option").each(function(e,n){var a,o=t(n).attr("value");""!==o&&(a=Math.abs(o-i),("undefined"==typeof s.distance||a<s.distance)&&(s={value:o,distance:a}))}),s.value}if(e){var s="string"==typeof e?moment(e,this.options.format):moment(e),n=this,a={};s.isValid()&&(t.each(this.map,function(t,e){"ampm"!==t&&(a[t]=s[e[1]]())}),this.$ampm&&(a.hour>=12?(a.ampm="pm",a.hour>12&&(a.hour-=12)):(a.ampm="am",0===a.hour&&(a.hour=12))),t.each(a,function(t,e){n["$"+t]&&("minute"===t&&n.options.minuteStep>1&&n.options.roundTime&&(e=i(n["$"+t],e)),"second"===t&&n.options.secondStep>1&&n.options.roundTime&&(e=i(n["$"+t],e)),n["$"+t].val(e))}),this.$element.val(s.format(this.options.format)))}},highlight:function(t){t.isValid()?this.options.errorClass?this.$widget.removeClass(this.options.errorClass):this.$widget.find("select").css("border-color",this.borderColor):this.options.errorClass?this.$widget.addClass(this.options.errorClass):(this.borderColor||(this.borderColor=this.$widget.find("select").css("border-color")),this.$widget.find("select").css("border-color","red"))},leadZero:function(t){return 9>=t?"0"+t:t},destroy:function(){this.$widget.remove(),this.$element.removeData("combodate").show()}},t.fn.combodate=function(i){var s,n=Array.apply(null,arguments);return n.shift(),"getValue"===i&&this.length&&(s=this.eq(0).data("combodate"))?s.getValue.apply(s,n):this.each(function(){var s=t(this),a=s.data("combodate"),o="object"==typeof i&&i;a||s.data("combodate",a=new e(this,o)),"string"==typeof i&&"function"==typeof a[i]&&a[i].apply(a,n)})},t.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:!0,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:!0}}(window.jQuery),function(t){"use strict";var e=function(i){this.init("combodate",i,e.defaults),this.options.viewformat||(this.options.viewformat=this.options.format),i.combodate=t.fn.editableutils.tryParseJson(i.combodate,!0),this.options.combodate=t.extend({},e.defaults.combodate,i.combodate,{format:this.options.format,template:this.options.template})};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{render:function(){this.$input.combodate(this.options.combodate),"bs3"===t.fn.editableform.engine&&this.$input.siblings().find("select").addClass("form-control"),this.options.inputclass&&this.$input.siblings().find("select").addClass(this.options.inputclass)},value2html:function(t,i){var s=t?t.format(this.options.viewformat):"";e.superclass.value2html.call(this,s,i)},html2value:function(t){return t?moment(t,this.options.viewformat):null},value2str:function(t){return t?t.format(this.options.format):""},str2value:function(t){return t?moment(t,this.options.format):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.combodate("setValue",t)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null}),t.fn.editabletypes.combodate=e}(window.jQuery),function(t){"use strict";var e=t.fn.editableform.Constructor.prototype.initInput;t.extend(t.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=t(t.fn.editableform.template),this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){e.apply(this);var i=null===this.input.options.inputclass||this.input.options.inputclass===!1,s="input-medium",n="text,select,textarea,password,email,url,tel,number,range,time".split(",");~t.inArray(this.input.type,n)&&i&&(this.input.options.inputclass=s,this.input.$input.addClass(s))}}),t.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>',t.fn.editableform.errorGroupClass="error",t.fn.editableform.errorBlockClass=null,t.fn.editableform.engine="bs2"}(window.jQuery),function(t){"use strict";t.extend(t.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:t.fn.popover&&t(t.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",defaults:t.fn.popover.defaults,initContainer:function(){t.extend(this.containerOptions,{trigger:"manual",selector:!1,content:" ",template:this.defaults.template});var e;this.$element.data("template")&&(e=this.$element.data("template"),this.$element.removeData("template")),this.call(this.containerOptions),e&&this.$element.data("template",e)},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(t,e){this.container().options[t]=e},setPosition:function(){(function(){var e,i,s,n,a,o,r,l,h,c,d=this.tip();switch(a="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,e=/in/.test(a),d.removeClass("top right bottom left").css({top:0,left:0,display:"block"}),i=this.getPosition(e),s=d[0].offsetWidth,n=d[0].offsetHeight,a=e?a.split(" ")[1]:a,l={top:i.top+i.height,left:i.left+i.width/2-s/2},r={top:i.top-n,left:i.left+i.width/2-s/2},h={top:i.top+i.height/2-n/2,left:i.left-s},c={top:i.top+i.height/2-n/2,left:i.left+i.width},a){case"bottom":l.top+n>t(window).scrollTop()+t(window).height()&&(a=r.top>t(window).scrollTop()?"top":c.left+s<t(window).scrollLeft()+t(window).width()?"right":h.left>t(window).scrollLeft()?"left":"right");break;case"top":r.top<t(window).scrollTop()&&(a=l.top+n<t(window).scrollTop()+t(window).height()?"bottom":c.left+s<t(window).scrollLeft()+t(window).width()?"right":h.left>t(window).scrollLeft()?"left":"right");break;case"left":h.left<t(window).scrollLeft()&&(a=c.left+s<t(window).scrollLeft()+t(window).width()?"right":r.top>t(window).scrollTop()?"top":r.top>t(window).scrollTop()?"bottom":"right");break;case"right":c.left+s>t(window).scrollLeft()+t(window).width()&&(h.left>t(window).scrollLeft()?a="left":r.top>t(window).scrollTop()?a="top":r.top>t(window).scrollTop()&&(a="bottom"))}switch(a){case"bottom":o=l;break;case"top":o=r;break;case"left":o=h;break;case"right":o=c}d.offset(o).addClass(a).addClass("in")}).call(this.container())}})}(window.jQuery),function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(e,i){var s,n=t(e).data(),a={},o=new RegExp("^"+i.toLowerCase()+"([A-Z])"),i=new RegExp("^"+i.toLowerCase());for(var r in n)i.test(r)&&(s=r.replace(o,function(t,e){return e.toLowerCase()}),a[s]=n[r]);return a}function s(e){var i={};if(c[e]||(e=e.split("-")[0],c[e])){var s=c[e];return t.each(h,function(t,e){e in s&&(i[e]=s[e])}),i}}var n=function(e,i){this._process_options(i),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(d.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&(this.picker.addClass("datepicker-rtl"),this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this.o.startDate),this.setEndDate(this.o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};n.prototype={constructor:n,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),s=i.language;switch(c[s]||(s=s.split("-")[0],c[s]||(s=l.language)),i.language=s,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var n=d.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate=d.parseDate(i.startDate,n,i.language)),i.endDate!==1/0&&(i.endDate=d.parseDate(i.endDate,n,i.language)),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,s=0;s<t.length;s++)e=t[s][0],i=t[s][1],e.on(i)},_unapplyEvents:function(t){for(var e,i,s=0;s<t.length;s++)e=t[s][0],i=t[s][1],e.off(i)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{mousedown:t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).size()||this.picker.is(t.target)||this.picker.find(t.target).size()||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var s=i||this.date,n=new Date(s.getTime()+6e4*s.getTimezoneOffset());this.element.trigger({type:e,date:n,format:t.proxy(function(t){var e=t||this.o.format;return d.formatDate(s,e,this.o.language)},this)})},show:function(t){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),this._attachSecondaryEvents(),t&&t.preventDefault(),this._trigger("show")},hide:function(t){this.isInline||this.picker.is(":visible")&&(this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){this.date=t,this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):this.component&&this.element.find("input").val(t)},getFormattedDate:function(t){return void 0===t&&(t=this.o.format),d.formatDate(this.date,t,this.o.language)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=parseInt(this.element.parents().filter(function(){return"auto"!=t(this).css("z-index")}).first().css("z-index"))+10,i=this.component?this.component.parent().offset():this.element.offset(),s=this.component?this.component.outerHeight(!0):this.element.outerHeight(!0);this.picker.css({top:i.top+s,left:i.left,zIndex:e})}},_allow_update:!0,update:function(){if(this._allow_update){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),delete this.element.data().date),this.date=d.parseDate(t,this.o.format,this.o.language),e&&this.setValue(),this.date<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.date>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=new Date(this.date),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+c[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+c[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],s=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),a=this.date.valueOf(),o=new Date;return e.getUTCFullYear()<s||e.getUTCFullYear()==s&&e.getUTCMonth()<n?i.push("old"):(e.getUTCFullYear()>s||e.getUTCFullYear()==s&&e.getUTCMonth()>n)&&i.push("new"),this.o.todayHighlight&&e.getUTCFullYear()==o.getFullYear()&&e.getUTCMonth()==o.getMonth()&&e.getUTCDate()==o.getDate()&&i.push("today"),a&&e.valueOf()==a&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||-1!==t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled))&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),-1!=t.inArray(e.valueOf(),this.range)&&i.push("selected")),i},fill:function(){var i,s=new Date(this.viewDate),n=s.getUTCFullYear(),a=s.getUTCMonth(),o=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),r=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0;this.date&&this.date.valueOf();this.picker.find(".datepicker-days thead th.datepicker-switch").text(c[this.o.language].months[a]+" "+n),this.picker.find("tfoot th.today").text(c[this.o.language].today).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(c[this.o.language].clear).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=e(n,a-1,28,0,0,0,0),p=d.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(p),u.setUTCDate(p-(u.getUTCDay()-this.o.weekStart+7)%7);var f=new Date(u);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var m,g=[];u.valueOf()<f;){if(u.getUTCDay()==this.o.weekStart&&(g.push("<tr>"),this.o.calendarWeeks)){var v=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*864e5),b=new Date(+v+(11-v.getUTCDay())%7*864e5),y=new Date(+(y=e(b.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),w=(b-y)/864e5/7+1;g.push('<td class="cw">'+w+"</td>")}m=this.getClassNames(u),m.push("day");var C=this.o.beforeShowDay(u);void 0===C?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),C.enabled===!1&&m.push("disabled"),C.classes&&(m=m.concat(C.classes.split(/\s+/))),C.tooltip&&(i=C.tooltip),m=t.unique(m),g.push('<td class="'+m.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+u.getUTCDate()+"</td>"),u.getUTCDay()==this.o.weekEnd&&g.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var k=this.date&&this.date.getUTCFullYear(),D=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");k&&k==n&&D.eq(this.date.getUTCMonth()).addClass("active"),(o>n||n>l)&&D.addClass("disabled"),n==o&&D.slice(0,r).addClass("disabled"),n==l&&D.slice(h+1).addClass("disabled"),g="",n=10*parseInt(n/10,10);var x=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var $=-1;11>$;$++)g+='<span class="year'+(-1==$?" old":10==$?" new":"")+(k==n?" active":"")+(o>n||n>l?" disabled":"")+'">'+n+"</span>",n+=1;x.html(g)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var s=t(i.target).closest("span, td, th");if(1==s.length)switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var n=d.modes[this.viewMode].navStep*("prev"==s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,n);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,n)}this.fill();break;case"today":var a=new Date;a=e(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var o="linked"==this.o.todayBtn?null:"view";this._setDate(a,o);break;case"clear":var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.val("").change(),this._trigger("changeDate"),this.update(),this.o.autoclose&&this.hide()}break;case"span":if(!s.is(".disabled")){if(this.viewDate.setUTCDate(1),s.is(".month")){var l=1,h=s.parent().find("span").index(s),c=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(h),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(c,h,l,0,0,0,0))}else{var c=parseInt(s.text(),10)||0,l=1,h=0;this.viewDate.setUTCFullYear(c),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(c,h,l,0,0,0,0))}this.showMode(-1),this.fill()}break;case"td":if(s.is(".day")&&!s.is(".disabled")){var l=parseInt(s.text(),10)||1,c=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth();s.is(".old")?0===h?(h=11,c-=1):h-=1:s.is(".new")&&(11==h?(h=0,c+=1):h+=1),this._setDate(e(c,h,l,0,0,0,0))}}},_setDate:function(t,e){e&&"date"!=e||(this.date=new Date(t)),e&&"view"!=e||(this.viewDate=new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),!this.o.autoclose||e&&"date"!=e||this.hide())},moveMonth:function(t,e){if(!e)return t;var i,s,n=new Date(t.valueOf()),a=n.getUTCDate(),o=n.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1==r)s=-1==e?function(){return n.getUTCMonth()==o}:function(){return n.getUTCMonth()!=i},i=o+e,n.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;r>l;l++)n=this.moveMonth(n,e);i=n.getUTCMonth(),n.setUTCDate(a),s=function(){return i!=n.getUTCMonth()}}for(;s();)n.setUTCDate(--a),n.setUTCMonth(i);return n},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,s,n=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),s=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),s=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+e),s=new Date(this.viewDate),s.setUTCDate(this.viewDate.getUTCDate()+e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),t.preventDefault(),n=!0);break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38==t.keyCode?-1:1,t.ctrlKey?(i=this.moveYear(this.date,e),s=this.moveYear(this.viewDate,e)):t.shiftKey?(i=this.moveMonth(this.date,e),s=this.moveMonth(this.viewDate,e)):(i=new Date(this.date),i.setUTCDate(this.date.getUTCDate()+7*e),s=new Date(this.viewDate),s.setUTCDate(this.viewDate.getUTCDate()+7*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),t.preventDefault(),n=!0);break;case 13:this.hide(),t.preventDefault();break;case 9:this.hide()}if(n){this._trigger("changeDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+d.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.date}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){var i=t(e.target).data("datepicker"),s=i.getUTCDate(),n=t.inArray(e.target,this.inputs),a=this.inputs.length;if(-1!=n){if(s<this.dates[n])for(;n>=0&&s<this.dates[n];)this.pickers[n--].setUTCDate(s);else if(s>this.dates[n])for(;a>n&&s>this.dates[n];)this.pickers[n++].setUTCDate(s);this.updateDates()}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var o=t.fn.datepicker,r=t.fn.datepicker=function(e){var o=Array.apply(null,arguments);o.shift();var r;return this.each(function(){var h=t(this),c=h.data("datepicker"),d="object"==typeof e&&e;if(!c){var u=i(this,"date"),p=t.extend({},l,u,d),f=s(p.language),m=t.extend({},l,f,u,d);if(h.is(".input-daterange")||m.inputs){var g={inputs:m.inputs||h.find("input").toArray()};h.data("datepicker",c=new a(this,t.extend(m,g)))}else h.data("datepicker",c=new n(this,m))}return"string"==typeof e&&"function"==typeof c[e]&&(r=c[e].apply(c,o),void 0!==r)?!1:void 0}),void 0!==r?r:this},l=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},h=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=n;var c=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},d={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,d.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\x00").split("\x00"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,s,a){if(i instanceof Date)return i;if("string"==typeof s&&(s=d.parseFormat(s)),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){var o,r,l=/([\-+]\d+)([dmwy])/,h=i.match(/([\-+]\d+)([dmwy])/g);
i=new Date;for(var u=0;u<h.length;u++)switch(o=l.exec(h[u]),r=parseInt(o[1]),o[2]){case"d":i.setUTCDate(i.getUTCDate()+r);break;case"m":i=n.prototype.moveMonth.call(n.prototype,i,r);break;case"w":i.setUTCDate(i.getUTCDate()+7*r);break;case"y":i=n.prototype.moveYear.call(n.prototype,i,r)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}var p,f,o,h=i&&i.match(this.nonpunctuation)||[],i=new Date,m={},g=["yyyy","yy","M","MM","m","mm","d","dd"],v={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};v.M=v.MM=v.mm=v.m,v.dd=v.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=s.parts.slice();if(h.length!=b.length&&(b=t(b).filter(function(e,i){return-1!==t.inArray(i,g)}).toArray()),h.length==b.length){for(var u=0,y=b.length;y>u;u++){if(p=parseInt(h[u],10),o=b[u],isNaN(p))switch(o){case"MM":f=t(c[a].months).filter(function(){var t=this.slice(0,h[u].length),e=h[u].slice(0,t.length);return t==e}),p=t.inArray(f[0],c[a].months)+1;break;case"M":f=t(c[a].monthsShort).filter(function(){var t=this.slice(0,h[u].length),e=h[u].slice(0,t.length);return t==e}),p=t.inArray(f[0],c[a].monthsShort)+1}m[o]=p}for(var w,u=0;u<g.length;u++)w=g[u],w in m&&!isNaN(m[w])&&v[w](i,m[w])}return i},formatDate:function(e,i,s){"string"==typeof i&&(i=d.parseFormat(i));var n={d:e.getUTCDate(),D:c[s].daysShort[e.getUTCDay()],DD:c[s].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:c[s].monthsShort[e.getUTCMonth()],MM:c[s].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m;for(var e=[],a=t.extend([],i.separators),o=0,r=i.parts.length;r>=o;o++)a.length&&e.push(a.shift()),e.push(n[i.parts[o]]);return e.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};d.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=d,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=o,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),r.call(i,"show"))}),t(function(){r.call(t('[data-provide="datepicker-inline"]'))})}(window.jQuery),function(t){"use strict";t.fn.bdatepicker=t.fn.datepicker.noConflict(),t.fn.datepicker||(t.fn.datepicker=t.fn.bdatepicker);var e=function(t){this.init("date",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datepicker=t.fn.editableutils.tryParseJson(e.datepicker,!0),this.options.datepicker=t.extend({},i.datepicker,e.datepicker,{format:this.options.viewformat}),this.options.datepicker.language=this.options.datepicker.language||"en",this.dpg=t.fn.bdatepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var s=t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):"";e.superclass.value2html.call(this,s,i)},html2value:function(t){return this.parseDate(t,this.parsedViewFormat)},value2str:function(t){return t?this.dpg.formatDate(t,this.parsedFormat,this.options.datepicker.language):""},str2value:function(t){return this.parseDate(t,this.parsedFormat)},value2submit:function(t){return this.value2str(t)},value2input:function(t){this.$input.bdatepicker("update",t)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".day",function(e){if(!t(e.currentTarget).is(".old")&&!t(e.currentTarget).is(".new")){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)}})},parseDate:function(t,e){var i,s=null;return t&&(s=this.dpg.parseDate(t,e,this.options.datepicker.language),"string"==typeof t&&(i=this.dpg.formatDate(s,e,this.options.datepicker.language),t!==i&&(s=null))),s}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.date=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.date),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.bdatepicker(this.options.datepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.bdatepicker("update")},this))},value2input:function(t){this.$input.val(t?this.dpg.formatDate(t,this.parsedViewFormat,this.options.datepicker.language):""),this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:!0}}),t.fn.editabletypes.datefield=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetime",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.abstractinput),t.extend(e.prototype,{initPicker:function(e,i){this.options.viewformat||(this.options.viewformat=this.options.format),e.datetimepicker=t.fn.editableutils.tryParseJson(e.datetimepicker,!0),this.options.datetimepicker=t.extend({},i.datetimepicker,e.datetimepicker,{format:this.options.viewformat}),this.options.datetimepicker.language=this.options.datetimepicker.language||"en",this.dpg=t.fn.datetimepicker.DPGlobal,this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType),this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker),this.$input.on("changeMode",function(e){var i=t(this).closest("form").parent();setTimeout(function(){i.triggerHandler("resize")},0)}),this.options.clear&&(this.$clear=t('<a href="#"></a>').html(this.options.clear).click(t.proxy(function(t){t.preventDefault(),t.stopPropagation(),this.clear()},this)),this.$tpl.parent().append(t('<div class="editable-clear">').append(this.$clear)))},value2html:function(t,i){var s=t?this.dpg.formatDate(this.toUTC(t),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";return i?void e.superclass.value2html.call(this,s,i):s},html2value:function(t){var e=this.parseDate(t,this.parsedViewFormat);return e?this.fromUTC(e):null},value2str:function(t){return t?this.dpg.formatDate(this.toUTC(t),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(t){var e=this.parseDate(t,this.parsedFormat);return e?this.fromUTC(e):null},value2submit:function(t){return this.value2str(t)},value2input:function(t){t&&this.$input.data("datetimepicker").setDate(t)},input2value:function(){var t=this.$input.data("datetimepicker");return t.date?t.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null,this.$input.find(".active").removeClass("active"),this.options.showbuttons||this.$input.closest("form").submit()},autosubmit:function(){this.$input.on("mouseup",".minute",function(e){var i=t(this).closest("form");setTimeout(function(){i.submit()},200)})},toUTC:function(t){return t?new Date(t.valueOf()-6e4*t.getTimezoneOffset()):t},fromUTC:function(t){return t?new Date(t.valueOf()+6e4*t.getTimezoneOffset()):t},parseDate:function(t,e){var i,s=null;return t&&(s=this.dpg.parseDate(t,e,this.options.datetimepicker.language,this.options.formatType),"string"==typeof t&&(i=this.dpg.formatDate(s,e,this.options.datetimepicker.language,this.options.formatType),t!==i&&(s=null))),s}}),e.defaults=t.extend({},t.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:!1,autoclose:!1},clear:"&times; clear"}),t.fn.editabletypes.datetime=e}(window.jQuery),function(t){"use strict";var e=function(t){this.init("datetimefield",t,e.defaults),this.initPicker(t,e.defaults)};t.fn.editableutils.inherit(e,t.fn.editabletypes.datetime),t.extend(e.prototype,{render:function(){this.$input=this.$tpl.find("input"),this.setClass(),this.setAttr("placeholder"),this.$tpl.datetimepicker(this.options.datetimepicker),this.$input.off("focus keydown"),this.$input.keyup(t.proxy(function(){this.$tpl.removeData("date"),this.$tpl.datetimepicker("update")},this))},value2input:function(t){this.$input.val(this.value2html(t)),this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){t.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}}),e.defaults=t.extend({},t.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:!1,autoclose:!0}}),t.fn.editabletypes.datetimefield=e}(window.jQuery),function(t){"use strict";var e=function(i){this.init("typeahead",i,e.defaults),this.options.typeahead=t.extend({},e.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},i.typeahead)};t.fn.editableutils.inherit(e,t.fn.editabletypes.list),t.extend(e.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]'),this.options.typeahead.source=this.sourceData,this.$input.typeahead(this.options.typeahead);var e=this.$input.data("typeahead");e.render=t.proxy(this.typeaheadRender,e),e.select=t.proxy(this.typeaheadSelect,e),e.move=t.proxy(this.typeaheadMove,e),this.renderClear(),this.setClass(),this.setAttr("placeholder")},value2htmlFinal:function(e,i){if(this.getIsObjects()){var s=t.fn.editableutils.itemsByValue(e,this.sourceData);e=s.length?s[0].text:""}t.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,i)},html2value:function(t){return t?t:null},value2input:function(e){if(this.getIsObjects()){var i=t.fn.editableutils.itemsByValue(e,this.sourceData);this.$input.data("value",e).val(i.length?i[0].text:"")}else this.$input.val(e)},input2value:function(){if(this.getIsObjects()){var e=this.$input.data("value"),i=t.fn.editableutils.itemsByValue(e,this.sourceData);return i.length&&i[0].text.toLowerCase()===this.$input.val().toLowerCase()?e:null}return this.$input.val()},getIsObjects:function(){if(void 0===this.isObjects){this.isObjects=!1;for(var t=0;t<this.sourceData.length;t++)if(this.sourceData[t].value!==this.sourceData[t].text){this.isObjects=!0;break}}return this.isObjects},activate:t.fn.editabletypes.text.prototype.activate,renderClear:t.fn.editabletypes.text.prototype.renderClear,postrender:t.fn.editabletypes.text.prototype.postrender,toggleClear:t.fn.editabletypes.text.prototype.toggleClear,clear:function(){t.fn.editabletypes.text.prototype.clear.call(this),this.$input.data("value","")},matcher:function(e){return t.fn.typeahead.Constructor.prototype.matcher.call(this,e.text)},sorter:function(t){for(var e,i,s=[],n=[],a=[];e=t.shift();)i=e.text,i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?n.push(e):a.push(e):s.push(e);return s.concat(n,a)},highlighter:function(e){return t.fn.typeahead.Constructor.prototype.highlighter.call(this,e.text)},updater:function(t){return this.$element.data("value",t.value),t.text},typeaheadRender:function(e){var i=this;return e=t(e).map(function(e,s){return e=t(i.options.item).data("item",s),e.find("a").html(i.highlighter(s)),e[0]}),this.options.autoSelect&&e.first().addClass("active"),this.$menu.html(e),this},typeaheadSelect:function(){var t=this.$menu.find(".active").data("item");return(this.options.autoSelect||t)&&this.$element.val(this.updater(t)).change(),this.hide()},typeaheadMove:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length)return;t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}}}),e.defaults=t.extend({},t.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:!0}),t.fn.editabletypes.typeahead=e}(window.jQuery);var bootbox=window.bootbox||function(t,e){function i(t,e){return"undefined"==typeof e&&(e=s),"string"==typeof u[e][t]?u[e][t]:e!=n?i(t,n):t}var s="en",n="en",a=!0,o="static",r="javascript:;",l="",h={},c={},d={};d.setLocale=function(t){for(var e in u)if(e==t)return void(s=t);throw new Error("Invalid locale: "+t)},d.addLocale=function(t,e){"undefined"==typeof u[t]&&(u[t]={});for(var i in e)u[t][i]=e[i]},d.setIcons=function(t){c=t,("object"!=typeof c||null===c)&&(c={})},d.setBtnClasses=function(t){h=t,("object"!=typeof h||null===h)&&(h={})},d.alert=function(){var t="",e=i("OK"),s=null;switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"function"==typeof arguments[1]?s=arguments[1]:e=arguments[1];break;case 3:t=arguments[0],e=arguments[1],s=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return d.dialog(t,{label:e,icon:c.OK,"class":h.OK,callback:s},{onEscape:s||!0})},d.confirm=function(){var t="",e=i("CANCEL"),s=i("CONFIRM"),n=null;switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"function"==typeof arguments[1]?n=arguments[1]:e=arguments[1];break;case 3:t=arguments[0],e=arguments[1],"function"==typeof arguments[2]?n=arguments[2]:s=arguments[2];break;case 4:t=arguments[0],e=arguments[1],s=arguments[2],n=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var a=function(){return"function"==typeof n?n(!1):void 0},o=function(){return"function"==typeof n?n(!0):void 0};return d.dialog(t,[{label:e,icon:c.CANCEL,"class":h.CANCEL,callback:a},{label:s,icon:c.CONFIRM,"class":h.CONFIRM,callback:o}],{onEscape:a})},d.prompt=function(){var t="",s=i("CANCEL"),n=i("CONFIRM"),a=null,o="";switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"function"==typeof arguments[1]?a=arguments[1]:s=arguments[1];break;case 3:t=arguments[0],s=arguments[1],"function"==typeof arguments[2]?a=arguments[2]:n=arguments[2];break;case 4:t=arguments[0],s=arguments[1],n=arguments[2],a=arguments[3];break;case 5:t=arguments[0],s=arguments[1],n=arguments[2],a=arguments[3],o=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var r=t,l=e("<form></form>");l.append("<input autocomplete=off type=text value='"+o+"' />");var u=function(){return"function"==typeof a?a(null):void 0},p=function(){return"function"==typeof a?a(l.find("input[type=text]").val()):void 0},f=d.dialog(l,[{label:s,icon:c.CANCEL,"class":h.CANCEL,callback:u},{label:n,icon:c.CONFIRM,"class":h.CONFIRM,callback:p}],{header:r,show:!1,onEscape:u});return f.on("shown",function(){l.find("input[type=text]").focus(),l.on("submit",function(t){t.preventDefault(),f.find(".btn-primary").click()})}),f.modal("show"),f},d.dialog=function(i,s,n){function h(t){var e=null;"function"==typeof n.onEscape&&(e=n.onEscape()),e!==!1&&D.modal("hide")}var c="",d=[];n||(n={}),"undefined"==typeof s?s=[]:"undefined"==typeof s.length&&(s=[s]);for(var u=s.length;u--;){var p=null,f=null,m=null,g="",v=null;if("undefined"==typeof s[u].label&&"undefined"==typeof s[u]["class"]&&"undefined"==typeof s[u].callback){var b=0,y=null;for(var w in s[u])if(y=w,++b>1)break;1==b&&"function"==typeof s[u][w]&&(s[u].label=y,s[u].callback=s[u][w])}"function"==typeof s[u].callback&&(v=s[u].callback),s[u]["class"]?m=s[u]["class"]:u==s.length-1&&s.length<=2&&(m="btn-primary"),p=s[u].label?s[u].label:"Option "+(u+1),s[u].icon&&(g="<i class='"+s[u].icon+"'></i> "),f=s[u].href?s[u].href:r,c="<a data-handler='"+u+"' class='btn "+m+"' href='"+f+"'>"+g+p+"</a>"+c,d[u]=v}var C=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(n.header){var k="";("undefined"==typeof n.headerCloseButton||n.headerCloseButton)&&(k="<a href='"+r+"' class='close'>&times;</a>"),C.push("<div class='modal-header'>"+k+"<h3>"+n.header+"</h3></div>")}C.push("<div class='modal-body'></div>"),c&&C.push("<div class='modal-footer'>"+c+"</div>"),C.push("</div>");var D=e(C.join("\n")),x="undefined"==typeof n.animate?a:n.animate;x&&D.addClass("fade");var $="undefined"==typeof n.classes?l:n.classes;return $&&D.addClass($),D.find(".modal-body").html(i),D.on("keyup.dismiss.modal",function(t){27===t.which&&n.onEscape&&h("escape")}),D.on("click","a.close",function(t){t.preventDefault(),h("close")}),D.on("shown",function(){D.find("a.btn-primary:first").focus()}),D.on("hidden",function(){D.remove()}),D.on("click",".modal-footer a",function(t){var i=e(this).data("handler"),n=d[i],a=null;("undefined"==typeof i||"undefined"==typeof s[i].href)&&(t.preventDefault(),"function"==typeof n&&(a=n()),a!==!1&&D.modal("hide"))}),e("body").append(D),D.modal({backdrop:"undefined"==typeof n.backdrop?o:n.backdrop,keyboard:!1,show:!1}),D.on("show",function(i){e(t).off("focusin.modal")}),("undefined"==typeof n.show||n.show===!0)&&D.modal("show"),D},d.modal=function(){var t,i,s,n={onEscape:null,keyboard:!0,backdrop:o};switch(arguments.length){case 1:t=arguments[0];break;case 2:t=arguments[0],"object"==typeof arguments[1]?s=arguments[1]:i=arguments[1];break;case 3:t=arguments[0],i=arguments[1],s=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return n.header=i,s="object"==typeof s?e.extend(n,s):n,d.dialog(t,[],s)},d.hideAll=function(){e(".bootbox").modal("hide")},d.animate=function(t){a=t},d.backdrop=function(t){o=t},d.classes=function(t){l=t};var u={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"}};return d}(document,window.jQuery);window.bootbox=bootbox,!function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}var i=function(e,i){var s=this;this.element=t(e),this.container=i.container||"body",this.language=i.language||this.element.data("date-language")||"en",this.language=this.language in n?this.language:"en",this.isRTL=n[this.language].rtl||!1,this.formatType=i.formatType||this.element.data("format-type")||"standard",this.format=a.parseFormat(i.format||this.element.data("date-format")||n[this.language].format||a.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=i.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=i.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove .fa-times").parent():this.element.find(".add-on .icon-remove .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=i.linkField||this.element.data("link-field")||!1,this.linkFormat=a.parseFormat(i.linkFormat||this.element.data("link-format")||a.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=i.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=i.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=i.initialDate||new Date,this.zIndex=i.zIndex||this.element.data("z-index")||void 0,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.formatViewType="datetime","formatViewType"in i?this.formatViewType=i.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in i?this.minView=i.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=a.convertViewMode(this.minView),this.maxView=a.modes.length-1,"maxView"in i?this.maxView=i.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=a.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in i?this.wheelViewModeNavigation=i.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in i?this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in i?this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in i?this.startViewMode=i.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=a.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in i?this.viewSelect=i.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=a.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in i?this.forceParse=i.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var o=3===this.bootcssVer?a.templateV3:a.template;-1!==o.indexOf("{iconType}");)o=o.replace("{iconType}",this.icontype);for(;-1!==o.indexOf("{leftArrow}");)o=o.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==o.indexOf("{rightArrow}");)o=o.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=t(o).appendTo(this.isInline?this.element:this.container).on({click:t.proxy(this.click,this),mousedown:t.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(t.fn.mousewheel?this.picker.on({mousewheel:t.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var r=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(r).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}t(document).on("mousedown",function(e){0===t(e.target).closest(".datetimepicker").length&&s.hide()}),this.autoclose=!1,"autoclose"in i?this.autoclose=i.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in i?this.keyboardNavigation=i.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=i.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=i.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(i.weekStart||this.element.data("date-weekstart")||n[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(i.startDate||this.element.data("date-startdate")),this.setEndDate(i.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(i.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(i.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};i.prototype={constructor:i,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(this.update,this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:t.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]];for(var e,i,s=0;s<this._events.length;s++)e=this._events[s][0],i=this._events[s][1],e.on(i)},_detachEvents:function(){for(var t,e,i=0;i<this._events.length;i++)t=this._events[i][0],e=this._events[i][1],t.off(e);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),t(window).on("resize",t.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(e){this.isVisible&&(this.isInline||(this.picker.hide(),t(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||t(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var t=this.getUTCDate();return new Date(t.getTime()+6e4*t.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(t){this.setUTCDate(new Date(t.getTime()-6e4*t.getTimezoneOffset()))},setUTCDate:function(t){t>=this.startDate&&t<=this.endDate?(this.date=t,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:t,startDate:this.startDate,endDate:this.endDate})},setFormat:function(t){this.format=a.parseFormat(t,this.formatType);var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&t("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(t){return void 0==t&&(t=this.format),a.formatDate(this.date,t,this.language,this.formatType)},setStartDate:function(t){this.startDate=t||-(1/0),this.startDate!==-(1/0)&&(this.startDate=a.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(t){this.endDate=t||1/0,this.endDate!==1/0&&(this.endDate=a.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],t.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=t.map(this.daysOfWeekDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(e){this.minutesDisabled=e||[],t.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=t.map(this.minutesDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(e){this.hoursDisabled=e||[],t.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=t.map(this.hoursDisabled,function(t){return parseInt(t,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var e=0;t("div").each(function(){var i=parseInt(t(this).css("zIndex"),10);i>e&&(e=i)}),this.zIndex=e+10}var i,s,n,a;a=this.container instanceof t?this.container.offset():t(this.container).offset(),this.component?(i=this.component.offset(),n=i.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(n+=this.component.outerWidth()-this.picker.outerWidth())):(i=this.element.offset(),n=i.left),n+220>document.body.clientWidth&&(n=document.body.clientWidth-220),s="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?i.top-this.picker.outerHeight():i.top+this.height,s-=a.top,n-=a.left,this.picker.css({top:s,left:n,zIndex:this.zIndex})}},update:function(){var t,e=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(t=arguments[0],e=!0):(t=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof t||t instanceof String)&&(t=t.replace(/^\s+|\s+$/g,""))),t||(t=new Date,e=!1),this.date=a.parseDate(t,this.format,this.language,this.formatType),e&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){
for(var t=this.weekStart,e="<tr>";t<this.weekStart+7;)e+='<th class="dow">'+n[this.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datetimepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;12>e;)t+='<span class="month">'+n[this.language].monthsShort[e++]+"</span>";this.picker.find(".datetimepicker-months td").html(t)},fill:function(){if(null!=this.date&&null!=this.viewDate){var i=new Date(this.viewDate),s=i.getUTCFullYear(),o=i.getUTCMonth(),r=i.getUTCDate(),l=i.getUTCHours(),h=i.getUTCMinutes(),c=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),d=this.startDate!==-(1/0)?this.startDate.getUTCMonth()+1:-(1/0),u=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,p=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,f=new e(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),m=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(n[this.language].months[o]+" "+s),"time"==this.formatViewType){var g=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(g),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(g)}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r+" "+n[this.language].months[o]+" "+s),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r+" "+n[this.language].months[o]+" "+s);this.picker.find("tfoot th.today").text(n[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var v=e(s,o-1,28,0,0,0,0),b=a.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(b),v.setUTCDate(b-(v.getUTCDay()-this.weekStart+7)%7);var y=new Date(v);y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var w,C=[];v.valueOf()<y;)v.getUTCDay()==this.weekStart&&C.push("<tr>"),w="",v.getUTCFullYear()<s||v.getUTCFullYear()==s&&v.getUTCMonth()<o?w+=" old":(v.getUTCFullYear()>s||v.getUTCFullYear()==s&&v.getUTCMonth()>o)&&(w+=" new"),this.todayHighlight&&v.getUTCFullYear()==m.getFullYear()&&v.getUTCMonth()==m.getMonth()&&v.getUTCDate()==m.getDate()&&(w+=" today"),v.valueOf()==f&&(w+=" active"),(v.valueOf()+864e5<=this.startDate||v.valueOf()>this.endDate||-1!==t.inArray(v.getUTCDay(),this.daysOfWeekDisabled))&&(w+=" disabled"),C.push('<td class="day'+w+'">'+v.getUTCDate()+"</td>"),v.getUTCDay()==this.weekEnd&&C.push("</tr>"),v.setUTCDate(v.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(C.join("")),C=[];for(var k="",D="",x="",$=this.hoursDisabled||[],T=0;24>T;T++)if(-1===$.indexOf(T)){var S=e(s,o,r,T);w="",S.valueOf()+36e5<=this.startDate||S.valueOf()>this.endDate?w+=" disabled":l==T&&(w+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(D=12>T?n[this.language].meridiem[0]:n[this.language].meridiem[1],D!=x&&(""!=x&&C.push("</fieldset>"),C.push('<fieldset class="hour"><legend>'+D.toUpperCase()+"</legend>")),x=D,k=T%12?T%12:12,C.push('<span class="hour'+w+" hour_"+(12>T?"am":"pm")+'">'+k+"</span>"),23==T&&C.push("</fieldset>")):(k=T+":00",C.push('<span class="hour'+w+'">'+k+"</span>"))}this.picker.find(".datetimepicker-hours td").html(C.join("")),C=[],k="",D="",x="";for(var F=this.minutesDisabled||[],T=0;60>T;T+=this.minuteStep)if(-1===F.indexOf(T)){var S=e(s,o,r,l,T,0);w="",S.valueOf()<this.startDate||S.valueOf()>this.endDate?w+=" disabled":Math.floor(h/this.minuteStep)==Math.floor(T/this.minuteStep)&&(w+=" active"),this.showMeridian&&2==n[this.language].meridiem.length?(D=12>l?n[this.language].meridiem[0]:n[this.language].meridiem[1],D!=x&&(""!=x&&C.push("</fieldset>"),C.push('<fieldset class="minute"><legend>'+D.toUpperCase()+"</legend>")),x=D,k=l%12?l%12:12,C.push('<span class="minute'+w+'">'+k+":"+(10>T?"0"+T:T)+"</span>"),59==T&&C.push("</fieldset>")):(k=T+":00",C.push('<span class="minute'+w+'">'+l+":"+(10>T?"0"+T:T)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(C.join(""));var M=this.date.getUTCFullYear(),A=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");M==s&&A.eq(this.date.getUTCMonth()+2).addClass("active"),(c>s||s>u)&&A.addClass("disabled"),s==c&&A.slice(0,d+1).addClass("disabled"),s==u&&A.slice(p).addClass("disabled"),C="",s=10*parseInt(s/10,10);var E=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var T=-1;11>T;T++)C+='<span class="year'+(-1==T||10==T?" old":"")+(M==s?" active":"")+(c>s||s>u?" disabled":"")+'">'+s+"</span>",s+=1;E.html(C),this.place()}},updateNavArrows:function(){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth(),s=t.getUTCDate(),n=t.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&s<=this.startDate.getUTCDate()&&n<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&s>=this.endDate.getUTCDate()&&n>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&s<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&s>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&e<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&e>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=e.originalEvent,s=i.wheelDelta,n=s>0?1:0===s?0:-1;this.wheelViewModeNavigationInverseDirection&&(n=-n),this.showMode(n),setTimeout(t.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(i){i.stopPropagation(),i.preventDefault();var s=t(i.target).closest("span, td, th, legend");if(s.is("."+this.icontype)&&(s=t(s).parent().closest("span, td, th, legend")),1==s.length){if(s.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(s[0].nodeName.toLowerCase()){case"th":switch(s[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var n=a.modes[this.viewMode].navStep*("prev"==s[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,n);break;case 1:this.viewDate=this.moveDate(this.viewDate,n);break;case 2:this.viewDate=this.moveMonth(this.viewDate,n);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,n)}this.fill(),this.element.trigger({type:s[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var o=new Date;o=e(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),0),o<this.startDate?o=this.startDate:o>this.endDate&&(o=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(o),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!s.is(".disabled")){var r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),h=this.viewDate.getUTCDate(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();if(s.is(".month")?(this.viewDate.setUTCDate(1),l=s.parent().find("span").index(s),h=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(l),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(e(r,l,h,c,d,u,0))):s.is(".year")?(this.viewDate.setUTCDate(1),r=parseInt(s.text(),10)||0,this.viewDate.setUTCFullYear(r),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(e(r,l,h,c,d,u,0))):s.is(".hour")?(c=parseInt(s.text(),10)||0,(s.hasClass("hour_am")||s.hasClass("hour_pm"))&&(12==c&&s.hasClass("hour_am")?c=0:12!=c&&s.hasClass("hour_pm")&&(c+=12)),this.viewDate.setUTCHours(c),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(e(r,l,h,c,d,u,0))):s.is(".minute")&&(d=parseInt(s.text().substr(s.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(d),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(e(r,l,h,c,d,u,0))),0!=this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(s.is(".day")&&!s.is(".disabled")){var h=parseInt(s.text(),10)||1,r=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),c=this.viewDate.getUTCHours(),d=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();s.is(".old")?0===l?(l=11,r-=1):l-=1:s.is(".new")&&(11==l?(l=0,r+=1):l+=1),this.viewDate.setUTCFullYear(r),this.viewDate.setUTCMonth(l,h),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(e(r,l,h,c,d,u,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(t,e){e&&"date"!=e||(this.date=t),e&&"view"!=e||(this.viewDate=t),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&(i.change(),this.autoclose&&(!e||"date"==e)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+e*this.minuteStep),i},moveHour:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCHours(i.getUTCHours()+e),i},moveDate:function(t,e){if(!e)return t;var i=new Date(t.valueOf());return i.setUTCDate(i.getUTCDate()+e),i},moveMonth:function(t,e){if(!e)return t;var i,s,n=new Date(t.valueOf()),a=n.getUTCDate(),o=n.getUTCMonth(),r=Math.abs(e);if(e=e>0?1:-1,1==r)s=-1==e?function(){return n.getUTCMonth()==o}:function(){return n.getUTCMonth()!=i},i=o+e,n.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;r>l;l++)n=this.moveMonth(n,e);i=n.getUTCMonth(),n.setUTCDate(a),s=function(){return i!=n.getUTCMonth()}}for(;s();)n.setUTCDate(--a),n.setUTCMonth(i);return n},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.startDate&&t<=this.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27==t.keyCode&&this.show());var e,i,s,n=!1;switch(t.keyCode){case 27:this.hide(),t.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;e=37==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),s=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),s=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,e),s=this.moveDate(this.viewDate,e)):1==viewMode?(i=this.moveHour(this.date,e),s=this.moveHour(this.viewDate,e)):0==viewMode&&(i=this.moveMinute(this.date,e),s=this.moveMinute(this.viewDate,e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),t.preventDefault(),n=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;e=38==t.keyCode?-1:1,viewMode=this.viewMode,t.ctrlKey?viewMode+=2:t.shiftKey&&(viewMode+=1),4==viewMode?(i=this.moveYear(this.date,e),s=this.moveYear(this.viewDate,e)):3==viewMode?(i=this.moveMonth(this.date,e),s=this.moveMonth(this.viewDate,e)):2==viewMode?(i=this.moveDate(this.date,7*e),s=this.moveDate(this.viewDate,7*e)):1==viewMode?this.showMeridian?(i=this.moveHour(this.date,6*e),s=this.moveHour(this.viewDate,6*e)):(i=this.moveHour(this.date,4*e),s=this.moveHour(this.viewDate,4*e)):0==viewMode&&(i=this.moveMinute(this.date,4*e),s=this.moveMinute(this.viewDate,4*e)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),t.preventDefault(),n=!0);break;case 13:if(0!=this.viewMode){var a=this.viewMode;this.showMode(-1),this.fill(),a==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();t.preventDefault();break;case 9:this.hide()}if(n){var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(t){if(t){var e=Math.max(0,Math.min(a.modes.length-1,this.viewMode+t));e>=this.minView&&e<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:e}),this.viewMode=e)}this.picker.find(">div").hide().filter(".datetimepicker-"+a.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(t){this._setDate(null,"date")},convertViewModeText:function(t){switch(t){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var s=t.fn.datetimepicker;t.fn.datetimepicker=function(e){var s=Array.apply(null,arguments);s.shift();var n;return this.each(function(){var a=t(this),o=a.data("datetimepicker"),r="object"==typeof e&&e;return o||a.data("datetimepicker",o=new i(this,t.extend({},t.fn.datetimepicker.defaults,r))),"string"==typeof e&&"function"==typeof o[e]&&(n=o[e].apply(o,s),void 0!==n)?!1:void 0}),void 0!==n?n:this},t.fn.datetimepicker.defaults={},t.fn.datetimepicker.Constructor=i;var n=t.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},a={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,a.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},getDefaultFormat:function(t,e){if("standard"==t)return"input"==e?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==t)return"input"==e?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(t){if("standard"==t)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==t)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(t,e){var i=t.replace(this.validParts(e),"\x00").split("\x00"),s=t.match(this.validParts(e));if(!i||!i.length||!s||0==s.length)throw new Error("Invalid date format.");return{separators:i,parts:s}},parseDate:function(s,a,o,r){if(s instanceof Date){var l=new Date(s.valueOf()-6e4*s.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(s)&&(a=this.parseFormat("yyyy-mm-dd",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(s)&&(a=this.parseFormat("yyyy-mm-dd hh:ii",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(s)&&(a=this.parseFormat("yyyy-mm-dd hh:ii:ss",r)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(s)){var h,c,d=/([-+]\d+)([dmwy])/,u=s.match(/([-+]\d+)([dmwy])/g);s=new Date;for(var p=0;p<u.length;p++)switch(h=d.exec(u[p]),c=parseInt(h[1]),h[2]){case"d":s.setUTCDate(s.getUTCDate()+c);break;case"m":s=i.prototype.moveMonth.call(i.prototype,s,c);break;case"w":s.setUTCDate(s.getUTCDate()+7*c);break;case"y":s=i.prototype.moveYear.call(i.prototype,s,c)}return e(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0)}var f,m,h,u=s&&s.toString().match(this.nonpunctuation)||[],s=new Date(0,0,0,0,0,0,0),g={},v=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],b={hh:function(t,e){return t.setUTCHours(e)},h:function(t,e){return t.setUTCHours(e)},HH:function(t,e){return t.setUTCHours(12==e?0:e)},H:function(t,e){return t.setUTCHours(12==e?0:e)},ii:function(t,e){return t.setUTCMinutes(e)},i:function(t,e){return t.setUTCMinutes(e)},ss:function(t,e){return t.setUTCSeconds(e)},s:function(t,e){return t.setUTCSeconds(e)},yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){for(e-=1;0>e;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!=e;){if(isNaN(t.getUTCMonth()))return t;t.setUTCDate(t.getUTCDate()-1)}return t},d:function(t,e){return t.setUTCDate(e)},p:function(t,e){return t.setUTCHours(1==e?t.getUTCHours()+12:t.getUTCHours())}};if(b.M=b.MM=b.mm=b.m,b.dd=b.d,b.P=b.p,s=e(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds()),u.length==a.parts.length){for(var p=0,y=a.parts.length;y>p;p++){if(f=parseInt(u[p],10),h=a.parts[p],isNaN(f))switch(h){case"MM":m=t(n[o].months).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t==e}),f=t.inArray(m[0],n[o].months)+1;break;case"M":m=t(n[o].monthsShort).filter(function(){var t=this.slice(0,u[p].length),e=u[p].slice(0,t.length);return t.toLowerCase()==e.toLowerCase()}),f=t.inArray(m[0],n[o].monthsShort)+1;break;case"p":case"P":f=t.inArray(u[p].toLowerCase(),n[o].meridiem)}g[h]=f}for(var w,p=0;p<v.length;p++)w=v[p],w in g&&!isNaN(g[w])&&b[w](s,g[w])}return s},formatDate:function(e,i,s,o){if(null==e)return"";var r;if("standard"==o)r={yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:n[s].monthsShort[e.getUTCMonth()],MM:n[s].months[e.getUTCMonth()],d:e.getUTCDate(),D:n[s].daysShort[e.getUTCDay()],DD:n[s].days[e.getUTCDay()],p:2==n[s].meridiem.length?n[s].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},2==n[s].meridiem.length?r.H=r.h%12==0?12:r.h%12:r.H=r.h,r.HH=(r.H<10?"0":"")+r.H,r.P=r.p.toUpperCase(),r.hh=(r.h<10?"0":"")+r.h,r.ii=(r.i<10?"0":"")+r.i,r.ss=(r.s<10?"0":"")+r.s,r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m;else{if("php"!=o)throw new Error("Invalid format type.");r={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:n[s].months[e.getUTCMonth()],M:n[s].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:a.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:n[s].days[e.getUTCDay()],D:n[s].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0==e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=n[s].suffix.length?n[s].suffix[e.getUTCDate()%10-1]:"",a:2==n[s].meridiem.length?n[s].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()},r.m=(r.n<10?"0":"")+r.n,r.d=(r.j<10?"0":"")+r.j,r.A=r.a.toString().toUpperCase(),r.h=(r.g<10?"0":"")+r.g,r.H=(r.G<10?"0":"")+r.G,r.i=(r.i<10?"0":"")+r.i,r.s=(r.s<10?"0":"")+r.s}for(var e=[],l=t.extend([],i.separators),h=0,c=i.parts.length;c>h;h++)l.length&&e.push(l.shift()),e.push(r[i.parts[h]]);return l.length&&e.push(l.shift()),e.join("")},convertViewMode:function(t){switch(t){case 4:case"decade":t=4;break;case 3:case"year":t=3;break;case 2:case"month":t=2;break;case 1:case"day":t=1;break;case 0:case"hour":t=0}return t},headTemplate:'<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};a.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+a.headTemplate+"<tbody></tbody>"+a.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+a.headTemplate+a.contTemplate+a.footTemplate+"</table></div></div>",a.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+a.headTemplateV3+"<tbody></tbody>"+a.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+a.headTemplateV3+a.contTemplate+a.footTemplate+"</table></div></div>",t.fn.datetimepicker.DPGlobal=a,t.fn.datetimepicker.noConflict=function(){return t.fn.datetimepicker=s,this},t(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var i=t(this);i.data("datetimepicker")||(e.preventDefault(),i.datetimepicker("show"))}),t(function(){t('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),jQuery.cookie=function(t,e,i){if(arguments.length>1&&"[object Object]"!==String(e)){if(i=jQuery.extend({},i),(null===e||void 0===e)&&(i.expires=-1),"number"==typeof i.expires){var s=i.expires,n=i.expires=new Date;n.setDate(n.getDate()+s)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",i.raw?e:encodeURIComponent(e),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}i=e||{};var a,o=i.raw?function(t){return t}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?o(a[1]):null},function(){"use strict";function t(t){function e(e,s){var a,m,g=e==window,v=s&&void 0!==s.message?s.message:void 0;if(s=t.extend({},t.blockUI.defaults,s||{}),!s.ignoreIfBlocked||!t(e).data("blockUI.isBlocked")){if(s.overlayCSS=t.extend({},t.blockUI.defaults.overlayCSS,s.overlayCSS||{}),a=t.extend({},t.blockUI.defaults.css,s.css||{}),s.onOverlayClick&&(s.overlayCSS.cursor="pointer"),m=t.extend({},t.blockUI.defaults.themedCSS,s.themedCSS||{}),v=void 0===v?s.message:v,g&&p&&i(window,{fadeOut:0}),v&&"string"!=typeof v&&(v.parentNode||v.jquery)){var b=v.jquery?v[0]:v,y={};t(e).data("blockUI.history",y),y.el=b,y.parent=b.parentNode,y.display=b.style.display,y.position=b.style.position,y.parent&&y.parent.removeChild(b)}t(e).data("blockUI.onUnblock",s.onUnblock);var w,C,k,D,x=s.baseZ;w=t(c||s.forceIframe?'<iframe class="blockUI" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+s.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),C=t(s.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+x++ +';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),s.theme&&g?(D='<div class="blockUI '+s.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:fixed">',s.title&&(D+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(s.title||"&nbsp;")+"</div>"),D+='<div class="ui-widget-content ui-dialog-content"></div>',D+="</div>"):s.theme?(D='<div class="blockUI '+s.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:absolute">',s.title&&(D+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(s.title||"&nbsp;")+"</div>"),D+='<div class="ui-widget-content ui-dialog-content"></div>',D+="</div>"):D=g?'<div class="blockUI '+s.blockMsgClass+' blockPage" style="z-index:'+(x+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+s.blockMsgClass+' blockElement" style="z-index:'+(x+10)+';display:none;position:absolute"></div>',k=t(D),v&&(s.theme?(k.css(m),k.addClass("ui-widget-content")):k.css(a)),s.theme||C.css(s.overlayCSS),C.css("position",g?"fixed":"absolute"),(c||s.forceIframe)&&w.css("opacity",0);var $=[w,C,k],T=t(g?"body":e);t.each($,function(){this.appendTo(T)}),s.theme&&s.draggable&&t.fn.draggable&&k.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var S=u&&(!t.support.boxModel||t("object,embed",g?null:e).length>0);if(d||S){if(g&&s.allowBodyStretch&&t.support.boxModel&&t("html,body").css("height","100%"),(d||!t.support.boxModel)&&!g)var F=l(e,"borderTopWidth"),M=l(e,"borderLeftWidth"),A=F?"(0 - "+F+")":0,E=M?"(0 - "+M+")":0;t.each($,function(t,e){var i=e[0].style;if(i.position="absolute",2>t)g?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+s.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),g?i.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),E&&i.setExpression("left",E),A&&i.setExpression("top",A);else if(s.centerY)g&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0;else if(!s.centerY&&g){var n=s.css&&s.css.top?parseInt(s.css.top,10):0,a="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+n+') + "px"';i.setExpression("top",a)}})}if(v&&(s.theme?k.find(".ui-widget-content").append(v):k.append(v),(v.jquery||v.nodeType)&&t(v).show()),(c||s.forceIframe)&&s.showOverlay&&w.show(),s.fadeIn){var I=s.onBlock?s.onBlock:h,U=s.showOverlay&&!v?I:h,O=v?I:h;s.showOverlay&&C._fadeIn(s.fadeIn,U),v&&k._fadeIn(s.fadeIn,O)}else s.showOverlay&&C.show(),v&&k.show(),s.onBlock&&s.onBlock();if(n(1,e,s),g?(p=k[0],f=t(":input:enabled:visible",p),s.focusInput&&setTimeout(o,20)):r(k[0],s.centerX,s.centerY),s.timeout){var P=setTimeout(function(){g?t.unblockUI(s):t(e).unblock(s)},s.timeout);t(e).data("blockUI.timeout",P)}}}function i(e,i){var a=e==window,o=t(e),r=o.data("blockUI.history"),l=o.data("blockUI.timeout");l&&(clearTimeout(l),o.removeData("blockUI.timeout")),i=t.extend({},t.blockUI.defaults,i||{}),n(0,e,i),null===i.onUnblock&&(i.onUnblock=o.data("blockUI.onUnblock"),o.removeData("blockUI.onUnblock"));var h;h=a?t("body").children().filter(".blockUI").add("body > .blockUI"):o.find(">.blockUI"),i.cursorReset&&(h.length>1&&(h[1].style.cursor=i.cursorReset),h.length>2&&(h[2].style.cursor=i.cursorReset)),a&&(p=f=null),i.fadeOut?(h.fadeOut(i.fadeOut),setTimeout(function(){s(h,r,i,e)},i.fadeOut)):s(h,r,i,e)}function s(e,i,s,n){var a=t(n);e.each(function(t,e){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),a.removeData("blockUI.history")),a.data("blockUI.static")&&a.css("position","static"),"function"==typeof s.onUnblock&&s.onUnblock(n,s);var o=t(document.body),r=o.width(),l=o[0].style.width;o.width(r-1).width(r),o[0].style.width=l}function n(e,i,s){var n=i==window,o=t(i);if((e||(!n||p)&&(n||o.data("blockUI.isBlocked")))&&(o.data("blockUI.isBlocked",e),s.bindEvents&&(!e||s.showOverlay))){var r="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";e?t(document).bind(r,s,a):t(document).unbind(r,a)}}function a(e){if(e.keyCode&&9==e.keyCode&&p&&e.data.constrainTabKey){var i=f,s=!e.shiftKey&&e.target===i[i.length-1],n=e.shiftKey&&e.target===i[0];if(s||n)return setTimeout(function(){o(n)},10),!1}var a=e.data,r=t(e.target);return r.hasClass("blockOverlay")&&a.onOverlayClick&&a.onOverlayClick(),r.parents("div."+a.blockMsgClass).length>0?!0:0===r.parents().children().filter("div.blockUI").length}function o(t){if(f){var e=f[t===!0?f.length-1:0];e&&e.focus()}}function r(t,e,i){var s=t.parentNode,n=t.style,a=(s.offsetWidth-t.offsetWidth)/2-l(s,"borderLeftWidth"),o=(s.offsetHeight-t.offsetHeight)/2-l(s,"borderTopWidth");e&&(n.left=a>0?a+"px":"0"),i&&(n.top=o>0?o+"px":"0")}function l(e,i){return parseInt(t.css(e,i),10)||0}t.fn._fadeIn=t.fn.fadeIn;var h=t.noop||function(){},c=/MSIE/.test(navigator.userAgent),d=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),u=(document.documentMode||0,t.isFunction(document.createElement("div").style.setExpression));t.blockUI=function(t){e(window,t)},t.unblockUI=function(t){i(window,t)},t.growlUI=function(e,i,s,n){var a=t('<div class="growlUI"></div>');e&&a.append("<h1>"+e+"</h1>"),i&&a.append("<h2>"+i+"</h2>"),void 0===s&&(s=3e3),t.blockUI({message:a,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:s,showOverlay:!1,onUnblock:n,css:t.blockUI.defaults.growlCSS})},t.fn.block=function(i){var s=t.extend({},t.blockUI.defaults,i||{});return this.each(function(){var e=t(this);s.ignoreIfBlocked&&e.data("blockUI.isBlocked")||e.unblock({fadeOut:0})}),this.each(function(){"static"==t.css(this,"position")&&(this.style.position="relative",t(this).data("blockUI.static",!0)),this.style.zoom=1,e(this,i)})},t.fn.unblock=function(t){return this.each(function(){i(this,t)})},t.blockUI.version=2.56,t.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var p=null,f=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],t):t(jQuery)}(),/*! Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.4
 * 
 * Requires: 1.2.2+
 */
function(t){function e(e){var i=e||window.event,s=[].slice.call(arguments,1),n=0,a=0,o=0;return e=t.event.fix(i),e.type="mousewheel",e.wheelDelta&&(n=e.wheelDelta/120),e.detail&&(n=-e.detail/3),o=n,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(o=0,a=-1*n),void 0!==i.wheelDeltaY&&(o=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(a=-1*i.wheelDeltaX/120),s.unshift(e,n,a,o),t.event.handle.apply(this,s)}var i=["DOMMouseScroll","mousewheel"];t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),/*!
 * jQuery Validation Plugin v1.13.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jrn Zaefferer
 * Released under the MIT license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function s(){var s,n;return i.settings.submitHandler?(i.submitButton&&(s=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),n=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&s.remove(),void 0!==n?n:!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},s=this;return t.each(e.split(/\s/),function(t,e){i[e]=s.attr(e),s.removeAttr(e)}),i},rules:function(e,i){var s,n,a,o,r,l,h=this[0];if(e)switch(s=t.data(h.form,"validator").settings,n=s.rules,a=t.validator.staticRules(h),e){case"add":t.extend(a,t.validator.normalizeRule(i)),delete a.messages,n[h.name]=a,i.messages&&(s.messages[h.name]=t.extend(s.messages[h.name],i.messages));break;case"remove":return i?(l={},t.each(i.split(/\s/),function(e,i){l[i]=a[i],delete a[i],"required"===i&&t(h).removeAttr("aria-required")}),l):(delete n[h.name],a)}return o=t.validator.normalizeRules(t.extend({},t.validator.classRules(h),t.validator.attributeRules(h),t.validator.dataRules(h),t.validator.staticRules(h)),h),o.required&&(r=o.required,delete o.required,o=t.extend({required:r},o),t(h).attr("aria-required","true")),o.remote&&(r=o.remote,delete o.remote,o=t.extend(o,{remote:r})),o}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(s):t(e).addClass(i).removeClass(s)},unhighlight:function(e,i,s){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(s):t(e).removeClass(i).addClass(s)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),s="on"+e.type.replace(/^validate/,""),n=i.settings;n[s]&&!this.is(n.ignore)&&n[s].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){s[i]=e})}),i=this.settings.rules,t.each(i,function(e,s){i[e]=t.validator.normalizeRule(s)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),s=this.validationTargetFor(i),n=!0;return this.lastElement=s,void 0===s?delete this.invalid[i.name]:(this.prepareElement(s),this.currentElements=t(s),n=this.check(s)!==!1,n?delete this.invalid[s.name]:this.invalid[s.name]=!0),t(e).attr("aria-invalid",!n),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,s=t(e),n=e.type;return"radio"===n||"checkbox"===n?t("input[name='"+e.name+"']:checked").val():"number"===n&&"undefined"!=typeof e.validity?e.validity.badInput?!1:s.val():(i=s.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,s,n,a=t(e).rules(),o=t.map(a,function(t,e){return e}).length,r=!1,l=this.elementValue(e);for(s in a){n={method:s,parameters:a[s]};try{if(i=t.validator.methods[s].call(this,l,e,n.parameters),"dependency-mismatch"===i&&1===o){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,n),!1}catch(h){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+n.method+"' method.",h),h}}if(!r)return this.objectLength(a)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var s=this.defaultMessage(e,i.method),n=/\$?\{(\d+)\}/g;"function"==typeof s?s=s.call(this,i.parameters,e):n.test(s)&&(s=t.validator.format(s.replace(n,"{$1}"),i.parameters)),this.errorList.push({message:s,element:e,method:i.method}),this.errorMap[e.name]=s,this.submitted[e.name]=s},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var s,n,a,o=this.errorsFor(e),r=this.idOrName(e),l=t(e).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(i)):(o=t("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass).html(i||""),s=o,this.settings.wrapper&&(s=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,t(e)):s.insertAfter(e),o.is("label")?o.attr("for",r):0===o.parents("label[for='"+r+"']").length&&(a=o.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+a+"\\b"))||(l+=" "+a):l=a,t(e).attr("aria-describedby",l),n=this.groups[e.name],n&&t.each(this.groups,function(e,i){i===n&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!i&&this.settings.success&&(o.text(""),"string"==typeof this.settings.success?o.addClass(this.settings.success):this.settings.success(o,e)),this.toShow=this.toShow.add(o)},errorsFor:function(e){var i=this.idOrName(e),s=t(e).attr("aria-describedby"),n="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(n=n+", #"+s.replace(/\s+/g,", #")),this.errors().filter(n)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},s=t(e).attr("class");return s&&t.each(s.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,s,n={},a=t(e),o=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(s=e.getAttribute(i),""===s&&(s=!0),s=!!s):s=a.attr(i),/min|max/.test(i)&&(null===o||/number|range|text/.test(o))&&(s=Number(s)),s||0===s?n[i]=s:o===i&&"range"!==o&&(n[i]=!0);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var i,s,n={},a=t(e);for(i in t.validator.methods)s=a.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==s&&(n[i]=s);return n},staticRules:function(e){var i={},s=t.data(e.form,"validator");return s.settings.rules&&(i=t.validator.normalizeRule(s.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(s,n){if(n===!1)return void delete e[s];if(n.param||n.depends){var a=!0;switch(typeof n.depends){case"string":a=!!t(n.depends,i.form).length;break;case"function":a=n.depends.call(i,i)}a?e[s]=void 0!==n.param?n.param:!0:delete e[s]}}),t.each(e,function(s,n){e[s]=t.isFunction(n)?n(i):n}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,s){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==s?s:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var n=t(i).val();return n&&n.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,s,n=0,a=0,o=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)s=t.charAt(i),a=parseInt(s,10),o&&(a*=2)>9&&(a-=9),n+=a,o=!o;return n%10===0},minlength:function(e,i,s){var n=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||n>=s},maxlength:function(e,i,s){var n=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||s>=n},rangelength:function(e,i,s){var n=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||n>=s[0]&&n<=s[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,s){var n=t(s);return this.settings.onfocusout&&n.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===n.val()},remote:function(e,i,s){if(this.optional(i))return"dependency-mismatch";var n,a,o=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),o.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=o.message,s="string"==typeof s&&{url:s}||s,o.old===e?o.valid:(o.old=e,n=this,this.startRequest(i),a={},a[i.name]=e,t.ajax(t.extend(!0,{url:s,mode:"abort",port:"validate"+i.name,dataType:"json",data:a,context:n.currentForm,success:function(s){var a,r,l,h=s===!0||"true"===s;n.settings.messages[i.name].remote=o.originalMessage,h?(l=n.formSubmitted,n.prepareElement(i),n.formSubmitted=l,n.successList.push(i),delete n.invalid[i.name],n.showErrors()):(a={},r=s||n.defaultMessage(i,"remote"),a[i.name]=o.message=t.isFunction(r)?r(e):r,n.invalid[i.name]=!0,n.showErrors(a)),o.valid=h,n.stopRequest(i,h)}},s)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,s){var n=t.port;"abort"===t.mode&&(i[n]&&i[n].abort(),i[n]=s)}):(e=t.ajax,t.ajax=function(s){var n=("mode"in s?s:t.ajaxSettings).mode,a=("port"in s?s:t.ajaxSettings).port;return"abort"===n?(i[a]&&i[a].abort(),i[a]=e.apply(this,arguments),i[a]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,s){return this.bind(i,function(i){var n=t(i.target);return n.is(e)?s.apply(n,arguments):void 0})}})}),/*!
 * jQuery Validation Plugin v1.13.1
 *
 * http://jqueryvalidation.org/
 *
 * Copyright (c) 2014 Jrn Zaefferer
 * Released under the MIT license
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","./jquery.validate"],t):t(jQuery)}(function(t){!function(){function e(t){return t.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[.(),;:!?%#$'\"_+=\/\-]*/g,"")}t.validator.addMethod("maxWords",function(t,i,s){return this.optional(i)||e(t).match(/\b\w+\b/g).length<=s},t.validator.format("Please enter {0} words or less.")),t.validator.addMethod("minWords",function(t,i,s){return this.optional(i)||e(t).match(/\b\w+\b/g).length>=s},t.validator.format("Please enter at least {0} words.")),t.validator.addMethod("rangeWords",function(t,i,s){var n=e(t),a=/\b\w+\b/g;return this.optional(i)||n.match(a).length>=s[0]&&n.match(a).length<=s[1]},t.validator.format("Please enter between {0} and {1} words."))}(),t.validator.addMethod("accept",function(e,i,s){var n,a,o="string"==typeof s?s.replace(/\s/g,"").replace(/,/g,"|"):"image/*",r=this.optional(i);if(r)return r;if("file"===t(i).attr("type")&&(o=o.replace(/\*/g,".*"),i.files&&i.files.length))for(n=0;n<i.files.length;n++)if(a=i.files[n],!a.type.match(new RegExp(".?("+o+")$","i")))return!1;return!0},t.validator.format("Please enter a value with a valid mimetype.")),t.validator.addMethod("alphanumeric",function(t,e){return this.optional(e)||/^\w+$/i.test(t)},"Letters, numbers, and underscores only please"),t.validator.addMethod("bankaccountNL",function(t,e){if(this.optional(e))return!0;if(!/^[0-9]{9}|([0-9]{2} ){3}[0-9]{3}$/.test(t))return!1;var i,s,n,a=t.replace(/ /g,""),o=0,r=a.length;for(i=0;r>i;i++)s=r-i,n=a.substring(i,i+1),o+=s*n;return o%11===0},"Please specify a valid bank account number"),t.validator.addMethod("bankorgiroaccountNL",function(e,i){return this.optional(i)||t.validator.methods.bankaccountNL.call(this,e,i)||t.validator.methods.giroaccountNL.call(this,e,i)},"Please specify a valid bank or giro account number"),t.validator.addMethod("bic",function(t,e){return this.optional(e)||/^([A-Z]{6}[A-Z2-9][A-NP-Z1-2])(X{3}|[A-WY-Z0-9][A-Z0-9]{2})?$/.test(t)},"Please specify a valid BIC code"),t.validator.addMethod("cifES",function(t){"use strict";var e,i,s,n,a,o,r=[];if(t=t.toUpperCase(),!t.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)"))return!1;for(s=0;9>s;s++)r[s]=parseInt(t.charAt(s),10);for(i=r[2]+r[4]+r[6],n=1;8>n;n+=2)a=(2*r[n]).toString(),o=a.charAt(1),i+=parseInt(a.charAt(0),10)+(""===o?0:parseInt(o,10));return/^[ABCDEFGHJNPQRSUVW]{1}/.test(t)?(i+="",e=10-parseInt(i.charAt(i.length-1),10),t+=e,r[8].toString()===String.fromCharCode(64+e)||r[8].toString()===t.charAt(t.length-1)):!1},"Please specify a valid CIF number."),t.validator.addMethod("creditcardtypes",function(t,e,i){if(/[^0-9\-]+/.test(t))return!1;t=t.replace(/\D/g,"");var s=0;return i.mastercard&&(s|=1),i.visa&&(s|=2),i.amex&&(s|=4),i.dinersclub&&(s|=8),i.enroute&&(s|=16),i.discover&&(s|=32),i.jcb&&(s|=64),i.unknown&&(s|=128),i.all&&(s=255),1&s&&/^(5[12345])/.test(t)?16===t.length:2&s&&/^(4)/.test(t)?16===t.length:4&s&&/^(3[47])/.test(t)?15===t.length:8&s&&/^(3(0[012345]|[68]))/.test(t)?14===t.length:16&s&&/^(2(014|149))/.test(t)?15===t.length:32&s&&/^(6011)/.test(t)?16===t.length:64&s&&/^(3)/.test(t)?16===t.length:64&s&&/^(2131|1800)/.test(t)?15===t.length:128&s?!0:!1},"Please enter a valid credit card number."),t.validator.addMethod("currency",function(t,e,i){var s,n="string"==typeof i,a=n?i:i[0],o=n?!0:i[1];return a=a.replace(/,/g,""),a=o?a+"]":a+"]?",s="^["+a+"([1-9]{1}[0-9]{0,2}(\\,[0-9]{3})*(\\.[0-9]{0,2})?|[1-9]{1}[0-9]{0,}(\\.[0-9]{0,2})?|0(\\.[0-9]{0,2})?|(\\.[0-9]{1,2})?)$",s=new RegExp(s),this.optional(e)||s.test(t)},"Please specify a valid currency"),t.validator.addMethod("dateFA",function(t,e){return this.optional(e)||/^[1-4]\d{3}\/((0?[1-6]\/((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))\/(30|([1-2][0-9])|(0?[1-9]))))$/.test(t)},"Please enter a correct date"),t.validator.addMethod("dateITA",function(t,e){var i,s,n,a,o,r=!1,l=/^\d{1,2}\/\d{1,2}\/\d{4}$/;return l.test(t)?(i=t.split("/"),s=parseInt(i[0],10),n=parseInt(i[1],10),a=parseInt(i[2],10),o=new Date(a,n-1,s,12,0,0,0),r=o.getUTCFullYear()===a&&o.getUTCMonth()===n-1&&o.getUTCDate()===s?!0:!1):r=!1,this.optional(e)||r},"Please enter a correct date"),t.validator.addMethod("dateNL",function(t,e){return this.optional(e)||/^(0?[1-9]|[12]\d|3[01])[\.\/\-](0?[1-9]|1[012])[\.\/\-]([12]\d)?(\d\d)$/.test(t)},"Please enter a correct date"),t.validator.addMethod("extension",function(t,e,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(e)||t.match(new RegExp(".("+i+")$","i"))},t.validator.format("Please enter a value with a valid extension.")),t.validator.addMethod("giroaccountNL",function(t,e){return this.optional(e)||/^[0-9]{1,7}$/.test(t)},"Please specify a valid giro account number"),t.validator.addMethod("iban",function(t,e){if(this.optional(e))return!0;var i,s,n,a,o,r,l,h,c,d=t.replace(/ /g,"").toUpperCase(),u="",p=!0,f="",m="";if(!/^([a-zA-Z0-9]{4} ){2,8}[a-zA-Z0-9]{1,4}|[a-zA-Z0-9]{12,34}$/.test(d))return!1;if(i=d.substring(0,2),r={AL:"\\d{8}[\\dA-Z]{16}",AD:"\\d{8}[\\dA-Z]{12}",AT:"\\d{16}",AZ:"[\\dA-Z]{4}\\d{20}",BE:"\\d{12}",BH:"[A-Z]{4}[\\dA-Z]{14}",BA:"\\d{16}",BR:"\\d{23}[A-Z][\\dA-Z]",BG:"[A-Z]{4}\\d{6}[\\dA-Z]{8}",CR:"\\d{17}",HR:"\\d{17}",CY:"\\d{8}[\\dA-Z]{16}",CZ:"\\d{20}",DK:"\\d{14}",DO:"[A-Z]{4}\\d{20}",EE:"\\d{16}",FO:"\\d{14}",FI:"\\d{14}",FR:"\\d{10}[\\dA-Z]{11}\\d{2}",GE:"[\\dA-Z]{2}\\d{16}",DE:"\\d{18}",GI:"[A-Z]{4}[\\dA-Z]{15}",GR:"\\d{7}[\\dA-Z]{16}",GL:"\\d{14}",GT:"[\\dA-Z]{4}[\\dA-Z]{20}",HU:"\\d{24}",IS:"\\d{22}",IE:"[\\dA-Z]{4}\\d{14}",IL:"\\d{19}",IT:"[A-Z]\\d{10}[\\dA-Z]{12}",KZ:"\\d{3}[\\dA-Z]{13}",KW:"[A-Z]{4}[\\dA-Z]{22}",LV:"[A-Z]{4}[\\dA-Z]{13}",LB:"\\d{4}[\\dA-Z]{20}",LI:"\\d{5}[\\dA-Z]{12}",LT:"\\d{16}",LU:"\\d{3}[\\dA-Z]{13}",MK:"\\d{3}[\\dA-Z]{10}\\d{2}",MT:"[A-Z]{4}\\d{5}[\\dA-Z]{18}",MR:"\\d{23}",MU:"[A-Z]{4}\\d{19}[A-Z]{3}",MC:"\\d{10}[\\dA-Z]{11}\\d{2}",MD:"[\\dA-Z]{2}\\d{18}",ME:"\\d{18}",NL:"[A-Z]{4}\\d{10}",NO:"\\d{11}",PK:"[\\dA-Z]{4}\\d{16}",PS:"[\\dA-Z]{4}\\d{21}",PL:"\\d{24}",PT:"\\d{21}",RO:"[A-Z]{4}[\\dA-Z]{16}",SM:"[A-Z]\\d{10}[\\dA-Z]{12}",SA:"\\d{2}[\\dA-Z]{18}",RS:"\\d{18}",SK:"\\d{20}",SI:"\\d{15}",ES:"\\d{20}",SE:"\\d{20}",CH:"\\d{5}[\\dA-Z]{12}",TN:"\\d{20}",TR:"\\d{5}[\\dA-Z]{17}",AE:"\\d{3}\\d{16}",GB:"[A-Z]{4}\\d{14}",VG:"[\\dA-Z]{4}\\d{16}"},o=r[i],"undefined"!=typeof o&&(l=new RegExp("^[A-Z]{2}\\d{2}"+o+"$",""),!l.test(d)))return!1;for(s=d.substring(4,d.length)+d.substring(0,4),h=0;h<s.length;h++)n=s.charAt(h),"0"!==n&&(p=!1),p||(u+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ".indexOf(n));for(c=0;c<u.length;c++)a=u.charAt(c),m=""+f+a,f=m%97;return 1===f},"Please specify a valid IBAN"),t.validator.addMethod("integer",function(t,e){return this.optional(e)||/^-?\d+$/.test(t)},"A positive or negative non-decimal number please"),t.validator.addMethod("ipv4",function(t,e){return this.optional(e)||/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i.test(t)},"Please enter a valid IP v4 address."),t.validator.addMethod("ipv6",function(t,e){return this.optional(e)||/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i.test(t)},"Please enter a valid IP v6 address."),t.validator.addMethod("lettersonly",function(t,e){return this.optional(e)||/^[a-z]+$/i.test(t)},"Letters only please"),t.validator.addMethod("letterswithbasicpunc",function(t,e){return this.optional(e)||/^[a-z\-.,()'"\s]+$/i.test(t)},"Letters or punctuation only please"),t.validator.addMethod("mobileNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)6((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid mobile number"),t.validator.addMethod("mobileUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)7(?:[1345789]\d{2}|624)\s?\d{3}\s?\d{3})$/)},"Please specify a valid mobile number"),t.validator.addMethod("nieES",function(t){"use strict";return t=t.toUpperCase(),t.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[T]{1}/.test(t)?t[8]===/^[T]{1}[A-Z0-9]{8}$/.test(t):/^[XYZ]{1}/.test(t)?t[8]==="TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.replace("X","0").replace("Y","1").replace("Z","2").substring(0,8)%23):!1:!1},"Please specify a valid NIE number."),t.validator.addMethod("nifES",function(t){"use strict";return t=t.toUpperCase(),t.match("((^[A-Z]{1}[0-9]{7}[A-Z0-9]{1}$|^[T]{1}[A-Z0-9]{8}$)|^[0-9]{8}[A-Z]{1}$)")?/^[0-9]{8}[A-Z]{1}$/.test(t)?"TRWAGMYFPDXBNJZSQVHLCKE".charAt(t.substring(8,0)%23)===t.charAt(8):/^[KLM]{1}/.test(t)?t[8]===String.fromCharCode(64):!1:!1},"Please specify a valid NIF number."),t.validator.addMethod("nowhitespace",function(t,e){return this.optional(e)||/^\S+$/i.test(t)},"No white space please"),t.validator.addMethod("pattern",function(t,e,i){return this.optional(e)?!0:("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(t))},"Invalid format."),t.validator.addMethod("phoneNL",function(t,e){return this.optional(e)||/^((\+|00(\s|\s?\-\s?)?)31(\s|\s?\-\s?)?(\(0\)[\-\s]?)?|0)[1-9]((\s|\s?\-\s?)?[0-9]){8}$/.test(t)},"Please specify a valid phone number."),t.validator.addMethod("phoneUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?)|(?:\(?0))(?:\d{2}\)?\s?\d{4}\s?\d{4}|\d{3}\)?\s?\d{3}\s?\d{3,4}|\d{4}\)?\s?(?:\d{5}|\d{3}\s?\d{3})|\d{5}\)?\s?\d{4,5})$/)},"Please specify a valid phone number"),t.validator.addMethod("phoneUS",function(t,e){return t=t.replace(/\s+/g,""),this.optional(e)||t.length>9&&t.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/)},"Please specify a valid phone number"),t.validator.addMethod("phonesUK",function(t,e){return t=t.replace(/\(|\)|\s+|-/g,""),this.optional(e)||t.length>9&&t.match(/^(?:(?:(?:00\s?|\+)44\s?|0)(?:1\d{8,9}|[23]\d{9}|7(?:[1345789]\d{8}|624\d{6})))$/)},"Please specify a valid uk phone number"),t.validator.addMethod("postalCodeCA",function(t,e){return this.optional(e)||/^[ABCEGHJKLMNPRSTVXY]\d[A-Z] \d[A-Z]\d$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeBR",function(t,e){return this.optional(e)||/^\d{2}.\d{3}-\d{3}?$|^\d{5}-?\d{3}?$/.test(t)},"Informe um CEP vlido."),t.validator.addMethod("postalcodeIT",function(t,e){return this.optional(e)||/^\d{5}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postalcodeNL",function(t,e){return this.optional(e)||/^[1-9][0-9]{3}\s?[a-zA-Z]{2}$/.test(t)},"Please specify a valid postal code"),t.validator.addMethod("postcodeUK",function(t,e){return this.optional(e)||/^((([A-PR-UWYZ][0-9])|([A-PR-UWYZ][0-9][0-9])|([A-PR-UWYZ][A-HK-Y][0-9])|([A-PR-UWYZ][A-HK-Y][0-9][0-9])|([A-PR-UWYZ][0-9][A-HJKSTUW])|([A-PR-UWYZ][A-HK-Y][0-9][ABEHMNPRVWXY]))\s?([0-9][ABD-HJLNP-UW-Z]{2})|(GIR)\s?(0AA))$/i.test(t)},"Please specify a valid UK postcode"),t.validator.addMethod("require_from_group",function(e,i,s){var n=t(s[1],i.form),a=n.eq(0),o=a.data("valid_req_grp")?a.data("valid_req_grp"):t.extend({},this),r=n.filter(function(){return o.elementValue(this)}).length>=s[0];return a.data("valid_req_grp",o),t(i).data("being_validated")||(n.data("being_validated",!0),n.each(function(){o.element(this)}),n.data("being_validated",!1)),r},t.validator.format("Please fill at least {0} of these fields.")),t.validator.addMethod("skip_or_fill_minimum",function(e,i,s){var n=t(s[1],i.form),a=n.eq(0),o=a.data("valid_skip")?a.data("valid_skip"):t.extend({},this),r=n.filter(function(){return o.elementValue(this)}).length,l=0===r||r>=s[0];return a.data("valid_skip",o),t(i).data("being_validated")||(n.data("being_validated",!0),n.each(function(){o.element(this)}),n.data("being_validated",!1)),l},t.validator.format("Please either skip these fields or fill at least {0} of them.")),jQuery.validator.addMethod("stateUS",function(t,e,i){var s,n="undefined"==typeof i,a=n||"undefined"==typeof i.caseSensitive?!1:i.caseSensitive,o=n||"undefined"==typeof i.includeTerritories?!1:i.includeTerritories,r=n||"undefined"==typeof i.includeMilitary?!1:i.includeMilitary;return s=o||r?o&&r?"^(A[AEKLPRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":o?"^(A[KLRSZ]|C[AOT]|D[CE]|FL|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEINOPST]|N[CDEHJMVY]|O[HKR]|P[AR]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$":"^(A[AEKLPRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$":"^(A[KLRZ]|C[AOT]|D[CE]|FL|GA|HI|I[ADLN]|K[SY]|LA|M[ADEINOST]|N[CDEHJMVY]|O[HKR]|PA|RI|S[CD]|T[NX]|UT|V[AT]|W[AIVY])$",s=a?new RegExp(s):new RegExp(s,"i"),this.optional(e)||s.test(t)},"Please specify a valid state"),t.validator.addMethod("strippedminlength",function(e,i,s){return t(e).text().length>=s},t.validator.format("Please enter at least {0} characters")),t.validator.addMethod("time",function(t,e){return this.optional(e)||/^([01]\d|2[0-3])(:[0-5]\d){1,2}$/.test(t)},"Please enter a valid time, between 00:00 and 23:59"),t.validator.addMethod("time12h",function(t,e){return this.optional(e)||/^((0?[1-9]|1[012])(:[0-5]\d){1,2}(\ ?[AP]M))$/i.test(t)},"Please enter a valid time in 12-hour am/pm format"),t.validator.addMethod("url2",function(t,e){return this.optional(e)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},t.validator.messages.url),t.validator.addMethod("vinUS",function(t){if(17!==t.length)return!1;var e,i,s,n,a,o,r=["A","B","C","D","E","F","G","H","J","K","L","M","N","P","R","S","T","U","V","W","X","Y","Z"],l=[1,2,3,4,5,6,7,8,1,2,3,4,5,7,9,2,3,4,5,6,7,8,9],h=[8,7,6,5,4,3,2,10,0,9,8,7,6,5,4,3,2],c=0;for(e=0;17>e;e++){if(n=h[e],s=t.slice(e,e+1),8===e&&(o=s),isNaN(s)){for(i=0;i<r.length;i++)if(s.toUpperCase()===r[i]){s=l[i],s*=n,isNaN(o)&&8===i&&(o=r[i]);break}}else s*=n;c+=s}return a=c%11,10===a&&(a="X"),a===o?!0:!1},"The specified vehicle identification number (VIN) is invalid."),t.validator.addMethod("zipcodeUS",function(t,e){return this.optional(e)||/^\d{5}(-\d{4})?$/.test(t)},"The specified US ZIP Code is invalid"),t.validator.addMethod("ziprange",function(t,e){return this.optional(e)||/^90[2-5]\d\{2\}-\d{4}$/.test(t)},"Your ZIP-code must be in the range 902xx-xxxx to 905xx-xxxx")}),/*!
** An extension to the jQuery Validation Plugin which makes it use Globalize.js for number and date parsing 
** Copyright (c) 2013 John Reilly
*/
function(t,e){var i={min:t.validator.methods.min,max:t.validator.methods.max,range:t.validator.methods.range};t.validator.methods.number=function(i,s){var n=e.parseFloat(i);return this.optional(s)||t.isNumeric(n)},t.validator.methods.date=function(t,i){var s=e.parseDate(t);return this.optional(i)||s},t.validator.methods.min=function(t,s,n){var a=e.parseFloat(t);return i.min.call(this,a,s,n)},t.validator.methods.max=function(t,s,n){var a=e.parseFloat(t);return i.max.call(this,a,s,n)},t.validator.methods.range=function(t,s,n){var a=e.parseFloat(t);return i.range.call(this,a,s,n)}}(jQuery,Globalize),jQuery.fn.sortElements=function(){var t=[].sort;return function(e,i){i=i||function(){return this};var s=this.map(function(){var t=i.call(this),e=t.parentNode,s=e.insertBefore(document.createTextNode(""),t.nextSibling);return function(){if(e===this)throw new Error("You can't sort elements if any one is a descendant of another.");e.insertBefore(this,s),e.removeChild(s)}});return t.call(this,e).each(function(t){s[t].call(i.call(this))})}}(),function(t){function e(t,e,n){var a=t.scrollTop;t.setSelectionRange?i(t,e,n):document.selection&&s(t,e,n),t.scrollTop=a}function i(t,e,i){var s=t.selectionStart,n=t.selectionEnd;if(s==n)e?"	"==t.value.substring(s-i.tabString.length,s)?(t.value=t.value.substring(0,s-i.tabString.length)+t.value.substring(s),t.focus(),t.setSelectionRange(s-i.tabString.length,s-i.tabString.length)):"	"==t.value.substring(s,s+i.tabString.length)&&(t.value=t.value.substring(0,s)+t.value.substring(s+i.tabString.length),t.focus(),t.setSelectionRange(s,s)):(t.value=t.value.substring(0,s)+i.tabString+t.value.substring(s),t.focus(),t.setSelectionRange(s+i.tabString.length,s+i.tabString.length));else{var a=t.value.split("\n"),o=new Array,r=0,l=0;for(var h in a)l=r+a[h].length,o.push({start:r,end:l,selected:s>=r&&l>s||l>=n&&n>r||r>s&&n>l}),r=l+1;var c=0;for(var h in o)if(o[h].selected){var d=o[h].start+c;e&&i.tabString==t.value.substring(d,d+i.tabString.length)?(t.value=t.value.substring(0,d)+t.value.substring(d+i.tabString.length),c-=i.tabString.length):e||(t.value=t.value.substring(0,d)+i.tabString+t.value.substring(d),c+=i.tabString.length)}t.focus();var u=s+(c>0?i.tabString.length:0>c?-i.tabString.length:0),p=n+c;t.setSelectionRange(u,p)}}function s(e,i,s){var n=document.selection.createRange();if(e==n.parentElement())if(""==n.text)if(i){var a=n.getBookmark();n.moveStart("character",-s.tabString.length),s.tabString==n.text?n.text="":(n.moveToBookmark(a),n.moveEnd("character",s.tabString.length),s.tabString==n.text&&(n.text="")),n.collapse(!0),n.select()}else n.text=s.tabString,n.collapse(!1),n.select();else{var o=n.text,r=o.length,l=o.split("\r\n"),h=document.body.createTextRange();h.moveToElementText(e),h.setEndPoint("EndToStart",n);var c=h.text,d=c.split("\r\n"),u=c.length,p=document.body.createTextRange();p.moveToElementText(e),p.setEndPoint("StartToEnd",n);var f=p.text,m=document.body.createTextRange();m.moveToElementText(e),m.setEndPoint("StartToEnd",h);var g=m.text,v=t(e).html();t("#r3").text(u+" + "+r+" + "+f.length+" = "+v.length),u+g.length<v.length?(d.push(""),u+=2,i&&s.tabString==l[0].substring(0,s.tabString.length)?l[0]=l[0].substring(s.tabString.length):i||(l[0]=s.tabString+l[0])):i&&s.tabString==d[d.length-1].substring(0,s.tabString.length)?d[d.length-1]=d[d.length-1].substring(s.tabString.length):i||(d[d.length-1]=s.tabString+d[d.length-1]);for(var b=1;b<l.length;b++)i&&s.tabString==l[b].substring(0,s.tabString.length)?l[b]=l[b].substring(s.tabString.length):i||(l[b]=s.tabString+l[b]);1==d.length&&0==u&&(i&&s.tabString==l[0].substring(0,s.tabString.length)?l[0]=l[0].substring(s.tabString.length):i||(l[0]=s.tabString+l[0])),u+r+f.length<v.length&&(l.push(""),r+=2),h.text=d.join("\r\n"),n.text=l.join("\r\n");var y=document.body.createTextRange();y.moveToElementText(e),u>0?y.setEndPoint("StartToEnd",h):y.setEndPoint("StartToStart",h),y.setEndPoint("EndToEnd",n),y.select()}}t.fn.tabby=function(i){var s=t.extend({},t.fn.tabby.defaults,i),n=t.fn.tabby.pressed;return this.each(function(){$this=t(this);var i=t.meta?t.extend({},s,$this.data()):s;$this.bind("keydown",function(s){var a=t.fn.tabby.catch_kc(s);return 16==a&&(n.shft=!0),17==a&&(n.ctrl=!0,setTimeout("$.fn.tabby.pressed.ctrl = false;",1e3)),18==a&&(n.alt=!0,setTimeout("$.fn.tabby.pressed.alt = false;",1e3)),9!=a||n.ctrl||n.alt?void 0:(s.preventDefault,n.last=a,setTimeout("$.fn.tabby.pressed.last = null;",0),e(t(s.target).get(0),n.shft,i),!1)}).bind("keyup",function(e){16==t.fn.tabby.catch_kc(e)&&(n.shft=!1)}).bind("blur",function(e){9==n.last&&t(e.target).one("focus",function(t){n.last=null}).get(0).focus()})})},t.fn.tabby.catch_kc=function(t){return t.keyCode?t.keyCode:t.charCode?t.charCode:t.which},t.fn.tabby.pressed={shft:!1,ctrl:!1,alt:!1,last:null},t.fn.tabby.defaults={tabString:String.fromCharCode(9)}}(jQuery),function(t){function e(e){u.parent||(u.parent=t('<div id="'+e.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),t.fn.bgiframe&&u.parent.bgiframe(),u.title=t("h3",u.parent),u.body=t("div.body",u.parent),u.url=t("div.url",u.parent))}function i(e){return t.data(e,"tooltip")}function s(e){i(this).delay?d=setTimeout(a,i(this).delay):a(),f=!!i(this).track,t(document.body).bind("mousemove",o),o(e)}function n(){if(!t.tooltip.blocked&&this!=h&&(this.tooltipText||i(this).bodyHandler)){if(h=this,c=this.tooltipText,i(this).bodyHandler){u.title.hide();var e=i(this).bodyHandler.call(this);e.nodeType||e.jquery?u.body.empty().append(e):u.body.html(e),u.body.show()}else if(i(this).showBody){var n=c.split(i(this).showBody);u.title.html(n.shift()).show(),u.body.empty();for(var a,o=0;a=n[o];o++)o>0&&u.body.append("<br/>"),u.body.append(a);u.body.hideWhenEmpty()}else u.title.html(c).show(),u.body.hide();i(this).showURL&&t(this).url()?u.url.html(t(this).url().replace("http://","")).show():u.url.hide(),u.parent.addClass(i(this).extraClass),i(this).fixPNG&&u.parent.fixPNG(),s.apply(this,arguments)}}function a(){d=null;var e=i(h);p&&t.fn.bgiframe||!e||!e.fade?u.parent.show():u.parent.is(":animated")?u.parent.stop().show().fadeTo(i(h).fade,h.tOpacity):u.parent.is(":visible")?u.parent.fadeTo(i(h).fade,h.tOpacity):u.parent.fadeIn(i(h).fade),o()}function o(e){if(!(t.tooltip.blocked||e&&"OPTION"==e.target.tagName)){if(!f&&u.parent.is(":visible")&&t(document.body).unbind("mousemove",o),null==h)return void t(document.body).unbind("mousemove",o);u.parent.removeClass("viewport-right").removeClass("viewport-bottom");var s=u.parent[0].offsetLeft,n=u.parent[0].offsetTop;if(e){var a=i(h);null==a?(s=0,n=0):(s=e.pageX+i(h).left,n=e.pageY+i(h).top);var l="auto",c=i(h);c&&c.positionLeft&&(l=t(window).width()-s,s="auto"),u.parent.css({left:s,right:l,top:n})}var d=r(),p=u.parent[0];d.x+d.cx<p.offsetLeft+p.offsetWidth&&(s-=p.offsetWidth+20+i(h).left,u.parent.css({left:s+"px"}).addClass("viewport-right")),d.y+d.cy<p.offsetTop+p.offsetHeight&&(n-=p.offsetHeight+20+i(h).top,u.parent.css({top:n+"px"}).addClass("viewport-bottom"))}}function r(){return{x:t(window).scrollLeft(),y:t(window).scrollTop(),cx:t(window).width(),cy:t(window).height()}}function l(e){function s(){u.parent.removeClass(n.extraClass).hide().css("opacity","")}if(!t.tooltip.blocked){d&&clearTimeout(d),h=null;var n=i(this);p&&t.fn.bgiframe||!n.fade?s():u.parent.is(":animated")?u.parent.stop().fadeTo(n.fade,0,s):u.parent.stop().fadeOut(n.fade,s),i(this).fixPNG&&u.parent.unfixPNG()}}var h,c,d,u={},p=t.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),f=!1;t.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){t.tooltip.blocked=!t.tooltip.blocked}},t.fn.extend({tooltip:function(i){return i=t.extend({},t.tooltip.defaults,i),e(i),this.each(function(){t.data(this,"tooltip",i),this.tOpacity=u.parent.css("opacity"),this.tooltipText=this.title,t(this).removeAttr("title"),this.alt=""}).mouseover(n).mouseout(l).click(l)},fixPNG:p?function(){return this.each(function(){var e=t(this).css("backgroundImage");e.match(/^url\(["']?(.*\.png)["']?\)$/i)&&(e=RegExp.$1,t(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+e+"')"}).each(function(){var e=t(this).css("position");"absolute"!=e&&"relative"!=e&&t(this).css("position","relative")}))})}:function(){return this},unfixPNG:p?function(){return this.each(function(){t(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){t(this)[t(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})}(jQuery),function(t){function e(e,a){var h=d(e),c=d(t(a.of)),u=l(a.my),f=l(a.at),m=r(a.offset);p("my",u),p("at",f),p("myDims",h),p("targetDims",c);var g=o(c);switch(f.h){case"center":g.left+=c.width/2;break;case"right":g.left+=c.width}switch(f.v){case"center":g.top+=c.height/2;break;case"bottom":g.top+=c.height}switch(u.h){case"center":g.left-=h.width/2;break;case"right":g.left-=h.width}switch(u.v){case"center":g.top-=h.height/2;break;case"bottom":g.top-=h.height}g.top+=m.v,g.left+=m.h,g=n(e,g,h,u,f,a),"relative"==h.position&&(g=s(e,g,h)),a.using?a.using(g,e):i(e,g)}function i(t,e){t.css("left",e.left+"px").css("top",e.top+"px")}function s(t,e,i){return p("to coordinates",e),p("dims",i),e.top-=i.offsetTop-i.top,e.left-=i.offsetLeft-i.left,p("transformed coordinates",e),e}function n(e,i,s,n,o,r){if(r.collision.match(/flip|fit/g)){u("CHECK COLLISION!",r.collision);var l={h:"none",v:"none"},h=r.collision.split(" ");1==h.length?(l.h=h[0],l.v=h[0]):h.length>1&&(l.h=h[0],l.v=h[1]);var c=null;c=r.viewport?d(t(r.viewport)):{position:"absolute",top:0,left:0,offsetTop:0,offsetLeft:0,width:t(window).width(),height:t(window).height(),innerWidth:t(window).width(),innerHeight:t(window).height()},p("viewport",c),i=a(l.h,"h",e,i,s,c,n,o),i=a(l.v,"v",e,i,s,c,n,o)}return i}function a(t,e,i,s,n,a,r,l){if("none"!=t){var h=o(a);"h"==e?s.left<h.left?"fit"==t?s.left=h.left:"flip"==t&&"right"==r.h&&s.left+n.width>=h.left&&(s.left+=n.width):s.left+n.width>h.left+a.innerWidth&&("fit"==t?s.left-=s.left+n.width-(h.left+a.innerWidth):"flip"==t&&"left"==r.h&&s.left<=h.left+a.innerWidth&&(s.left-=n.width)):"v"==e&&(s.top<h.top?"fit"==t?s.top=h.top:"flip"==t&&"bottom"==r.v&&s.top+n.height>=h.top&&(s.top+=n.height):s.top+n.height>h.top+a.innerHeight&&("fit"==t?s.top-=s.top+n.height-(h.top+a.innerHeight):"flip"==t&&"top"==r.v&&s.top<=h.top+a.innerHeight&&(s.top-=n.height)))}return s}function o(t){var e={top:t.offsetTop,left:t.offsetLeft};return("absolute"==t.position||"fixed"==t.position)&&(t.top&&(e.top=t.top),t.left&&(e.left=t.left)),e}function r(t){var e={h:0,v:0};if(t){var i=t.split(" ");i.length>0&&(e.h=Number(i[0])),i.length>1&&(e.v=Number(i[1]))}return e}function l(t){var e={h:"center",v:"center"};if(t){var i=t.split(" ");i.length>0&&(e=h(i[0],e)),i.length>1&&(e=h(i[1],e))}return e}function h(t,e){switch(t){case"top":e.v="top";break;case"bottom":e.v="bottom";break;case"left":e.h="left";break;case"right":e.h="right"}return e}function c(e){var i=t(e).offset();return{position:t(e).css("position"),top:Number(t(e).css("top").replace(/[^\d\.-]/g,"")),left:Number(t(e).css("left").replace(/[^\d\.-]/g,"")),offsetTop:i.top,offsetLeft:i.left,width:t(e).outerWidth(),height:t(e).outerHeight(),innerWidth:t(e).innerWidth(),innerHeight:t(e).innerHeight()}}function d(e){for(var i,s=null,n=0;i=e[n++];){var a=t(i).parents().andSelf().filter(":hidden");if(a.length){u("hidden");var o=[];a.each(function(){var e=t(this).attr("style");e="undefined"==typeof e?"":e,u("style",e),o.push(e),t(this).attr("style",e+" ; display: block !important;"),u("style",t(this).attr("style"))});var r=a.eq(0).css("left");u("left",r),a.eq(0).css("left",-1e4),s=c(i),a.eq(0).css("top",-1e4).css("left",r),s.offsetLeft=c(i).offsetLeft,s.left=c(i).left,a.each(function(){t(this).attr("style",o.shift())})}else s=c(i)}return s}function u(t,e){try{f&&window.console&&window.console.log&&window.console.log(t+": "+e)}catch(i){}}function p(e,i){try{i||(i=e),u(e,i),f&&window.console&&window.console.log&&(t.browser.msie||t.browser.opera)?window.console.log(t.param(i)):f&&window.console&&window.console.debug&&window.console.debug(i)}catch(s){}}var f=!1;t.fn.hiddenPosition=function(i){var s=t.extend({},t.fn.hiddenPosition.defaults,i);return this.each(function(){var i=t(this),n=t.metadata?t.extend({},s,i.metadata()):s;e(i,n)})},t.fn.hiddenPosition.defaults={my:"center",at:"center",of:null,offset:null,using:null,collision:"flip",viewport:null},t.fn.hiddenPosition.getHiddenDimensions=function(t){return d(t)},t.fn.hiddenPosition.toggleDebug=function(){f=!f}}(jQuery),function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),s=-1,n=this.length;++s<n&&(i.context=i[0]=this[s])&&e.call(i[0],s,i)!==!1;);return this}})}(jQuery),function(t,e){"use strict";function i(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function s(t){function e(t){return H[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function n(t,e){for(var i=0,s=e.length;s>i;i+=1)if(o(t,e[i]))return i;return-1}function a(){var e=t(N);e.appendTo(document.body);var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}function o(t,i){return t===i?!0:t===e||i===e?!1:null===t||null===i?!1:t.constructor===String?t+""==i+"":i.constructor===String?i+""==t+"":!1}function r(t,e,i){var s,n,a;if(null===t||t.length<1)return[];for(s=t.split(e),n=0,a=s.length;a>n;n+=1)s[n]=i(s[n]);return s}function l(t){return t.outerWidth(!1)-t.width()}function h(i){var s="keyup-change-value";i.on("keydown",function(){t.data(i,s)===e&&t.data(i,s,i.val())}),i.on("keyup",function(){var n=t.data(i,s);n!==e&&i.val()!==n&&(t.removeData(i,s),i.trigger("keyup-change"))})}function c(i){i.on("mousemove",function(i){var s=_;(s===e||s.x!==i.pageX||s.y!==i.pageY)&&t(i.target).trigger("mousemove-filtered",i)})}function d(t,i,s){s=s||e;var n;return function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){i.apply(s,e)},t)}}function u(t,e){var i=d(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){n(t.target,e.get())>=0&&i(t)})}function p(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],s=t.val().length;t.focus();var n=i.offsetWidth>0||i.offsetHeight>0;n&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var i=0,s=0;if("selectionStart"in e)i=e.selectionStart,s=e.selectionEnd-i;else if("selection"in document){e.focus();var n=document.selection.createRange();s=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),i=n.text.length-s}return{offset:i,length:s}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!O){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);O=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),O.attr("class","select2-sizer"),t(document.body).append(O)}return O.text(e.val()),O.width()}function b(e,i,s){var n,a,o=[];n=t.trim(e.attr("class")),n&&(n=""+n,t(n.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),n=t.trim(i.attr("class")),n&&(n=""+n,t(n.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(a=s(this),a&&o.push(a))})),e.attr("class",o.join(" "))}function y(t,e,i,n){var a=s(t.toUpperCase()).indexOf(s(e.toUpperCase())),o=e.length;return 0>a?void i.push(n(t)):(i.push(n(t.substring(0,a))),i.push("<span class='select2-match'>"),i.push(n(t.substring(a,a+o))),i.push("</span>"),void i.push(n(t.substring(a+o,t.length))))}function w(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function C(i){var s,n=null,a=i.quietMillis||100,o=i.url,r=this;return function(l){window.clearTimeout(s),s=window.setTimeout(function(){var s=i.data,a=o,h=i.transport||t.fn.select2.ajaxDefaults.transport,c={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},d=t.extend({},t.fn.select2.ajaxDefaults.params,c);s=s?s.call(r,l.term,l.page,l.context):null,a="function"==typeof a?a.call(r,l.term,l.page,l.context):a,n&&"function"==typeof n.abort&&n.abort(),i.params&&(t.isFunction(i.params)?t.extend(d,i.params.call(r)):t.extend(d,i.params)),t.extend(d,{url:a,dataType:i.dataType,data:s,success:function(t){var e=i.results(t,l.page,l);l.callback(e)},error:function(t,e,i){var s={hasError:!0,jqXHR:t,textStatus:e,errorThrown:i};l.callback(s)}}),n=h.call(r,d)},a)}}function k(e){var i,s,n=e,a=function(t){return""+t.text};t.isArray(n)&&(s=n,n={results:s}),t.isFunction(n)===!1&&(s=n,n=function(){return s});var o=n();return o.text&&(a=o.text,t.isFunction(a)||(i=o.text,a=function(t){return t[i]})),function(e){var i,s=e.term,o={results:[]};return""===s?void e.callback(n()):(i=function(n,o){var r,l;if(n=n[0],n.children){r={};for(l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);r.children=[],t(n.children).each2(function(t,e){i(e,r.children)}),(r.children.length||e.matcher(s,a(r),n))&&o.push(r)}else e.matcher(s,a(n),n)&&o.push(n)},t(n().results).each2(function(t,e){i(e,o.results)}),void e.callback(o))}}function D(i){var s=t.isFunction(i);return function(n){var a=n.term,o={results:[]},r=s?i(n):i;t.isArray(r)&&(t(r).each(function(){var t=this.text!==e,i=t?this.text:this;(""===a||n.matcher(a,i))&&o.results.push(t?this:{id:this,text:this})}),n.callback(o))}}function x(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function $(e,i){if(t.isFunction(e)){var s=Array.prototype.slice.call(arguments,2);return e.apply(i,s)}return e}function T(e){var i=0;return t.each(e,function(t,e){e.children?i+=T(e.children):i++}),i}function S(t,i,s,n){var a,r,l,h,c,d=t,u=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return e;for(;;){for(r=-1,l=0,h=n.tokenSeparators.length;h>l&&(c=n.tokenSeparators[l],r=t.indexOf(c),!(r>=0));l++);if(0>r)break;if(a=t.substring(0,r),t=t.substring(r+c.length),a.length>0&&(a=n.createSearchChoice.call(this,a,i),a!==e&&null!==a&&n.id(a)!==e&&null!==n.id(a))){for(u=!1,l=0,h=i.length;h>l;l++)if(o(n.id(a),n.id(i[l]))){u=!0;break}u||s(a)}}return d!==t?t:void 0}function F(){var e=this;t.each(arguments,function(t,i){e[i].remove(),e[i]=null})}function M(e,i){var s=function(){};return s.prototype=new e,s.prototype.constructor=s,s.prototype.parent=e.prototype,s.prototype=t.extend(s.prototype,i),s}if(window.Select2===e){var A,E,I,U,O,P,V,_={x:0,y:0},L={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case L.LEFT:case L.RIGHT:case L.UP:case L.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case L.SHIFT:case L.CTRL:case L.ALT:return!0}return t.metaKey?!0:!1},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&123>=t}},N="<div class='select2-measure-scrollbar'></div>",H={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};P=t(document),U=function(){var t=1;return function(){return t++}}(),A=M(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var s,n,o=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t(".select2-hidden-accessible"),0==this.liveRegion.length&&(this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+U()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t(document.body),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css($(i.containerCss,this.opts.element)),this.container.addClass($(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass($(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=s=this.container.find(o),this.search=n=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),c(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),u(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&s.mousewheel(function(t,e,i,n){var a=s.scrollTop();n>0&&0>=a-n?(s.scrollTop(0),m(t)):0>n&&s.get(0).scrollHeight-s.scrollTop()+n<=s.height()&&(s.scrollTop(s.get(0).scrollHeight-s.height()),m(t))}),h(n),n.on("keyup-change input paste",this.bind(this.updateResults)),n.on("focus",function(){n.addClass("select2-focused")}),n.on("blur",function(){n.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var r=i.element.prop("disabled");r===e&&(r=!1),this.enable(!r);var l=i.element.prop("readonly");l===e&&(l=!1),this.readonly(l),V=V||a(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2"),s=this;this.close(),t.length&&t[0].detachEvent&&s._sync&&t.each(function(){s._sync&&this.detachEvent("onpropertychange",s._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),F.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:o(t.attr("locked"),"locked")||o(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var s,n,a,l,h=this;if(s=i.element,"select"===s.get(0).tagName.toLowerCase()&&(this.select=n=i.element),n&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(s,n,a){var o,r=this.opts.id,l=this.liveRegion;(o=function(s,n,c){var d,u,p,f,m,g,v,b,y,w;s=i.sortResults(s,n,a);var C=[];for(d=0,u=s.length;u>d;d+=1)p=s[d],m=p.disabled===!0,f=!m&&r(p)!==e,g=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+c),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(h.opts.formatResultCssClass(p)),v.attr("role","presentation"),b=t(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+U()),b.attr("role","option"),w=i.formatResult(p,b,a,h.opts.escapeMarkup),w!==e&&(b.html(w),v.append(b)),g&&(y=t("<ul></ul>"),
y.addClass("select2-result-sub"),o(p.children,y,c+1),v.append(y)),v.data("select2-data",p),C.push(v[0]);n.append(C),l.text(i.formatMatches(s.length))})(n,s,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(a=i.id,i.id=function(t){return t[a]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(n?(i.query=this.bind(function(t){var i,n,a,o={results:[],more:!1},r=t.term;a=function(e,i){var s;e.is("option")?t.matcher(r,e.text(),e)&&i.push(h.optionToData(e)):e.is("optgroup")&&(s=h.optionToData(e),e.children().each2(function(t,e){a(e,s.children)}),s.children.length>0&&i.push(s))},i=s.children(),this.getPlaceholder()!==e&&i.length>0&&(n=this.getPlaceholderOption(),n&&(i=i.not(n))),i.each2(function(t,e){a(e,o.results)}),t.callback(o)}),i.id=function(t){return t.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=C.call(i.element,i.ajax)):"data"in i?i.query=k(i.data):"tags"in i&&(i.query=D(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,s){var n=[];t(r(e.val(),i.separator,i.transformVal)).each(function(){var e={id:this,text:this},s=i.tags;t.isFunction(s)&&(s=s()),t(s).each(function(){return o(this.id,e.id)?(e=this,!1):void 0}),n.push(e)}),s(n)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,s=this.opts.element,n=this;s.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=s.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=s.prop("readonly");i===e&&(i=!1),this.readonly(i),this.container&&(b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass($(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass($(this.opts.dropdownCssClass,this.opts.element)))}),s.length&&s[0].attachEvent&&s.each(function(){this.attachEvent("onpropertychange",n._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,n._sync)}),this.propertyObserver.observe(s.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var e,i,s,n,a,o=this.dropdown,r=this.container,l=r.offset(),h=r.outerHeight(!1),c=r.outerWidth(!1),d=o.outerHeight(!1),u=t(window),p=u.width(),f=u.height(),m=u.scrollLeft()+p,g=u.scrollTop()+f,v=l.top+h,b=l.left,y=g>=v+d,w=l.top-d>=u.scrollTop(),C=o.outerWidth(!1),k=function(){return m>=b+C},D=function(){return l.left+m+r.outerWidth(!1)>C},x=o.hasClass("select2-drop-above");x?(i=!0,!w&&y&&(s=!0,i=!1)):(i=!1,!y&&w&&(s=!0,i=!0)),s&&(o.hide(),l=this.container.offset(),h=this.container.outerHeight(!1),c=this.container.outerWidth(!1),d=o.outerHeight(!1),m=u.scrollLeft()+p,g=u.scrollTop()+f,v=l.top+h,b=l.left,C=o.outerWidth(!1),o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(a=t(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),C=o.outerWidth(!1)+(a.scrollHeight===a.clientHeight?0:V.width),C>c?c=C:C=c,d=o.outerHeight(!1)):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),v-=e.top,b-=e.left),!k()&&D()&&(b=l.left+this.container.outerWidth(!1)-C),n={left:b,width:c},i?(n.top=l.top-d,n.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(n.top=v,n.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),n=t.extend(n,$(this.opts.dropdownCss,this.opts.element)),o.css(n)},shouldOpen:function(){var e;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),P.on("mousemove.select2Event",function(t){_.x=t.pageX,_.y=t.pageY}),!0):!1},opening:function(){var e,s=this.containerEventName,n="scroll."+s,a="resize."+s,o="orientationchange."+s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0===e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(s){i(e);var n,a=t("#select2-drop");a.length>0&&(n=a.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),s.preventDefault(),s.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){t(this).on(a+" "+n+" "+o,function(t){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,s="resize."+e,n="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(s).off(n)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),P.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return $(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,s,n,a,o,r,l,h=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return void h.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),s=t(e[i]),l=(s.offset()||{}).top||0,n=l+s.outerHeight(!0),i===e.length-1&&(r=h.find("li.select2-more-results"),r.length>0&&(n=r.offset().top+r.outerHeight(!0))),a=h.offset().top+h.outerHeight(!1),n>a&&h.scrollTop(h.scrollTop()+(n-a)),o=l-h.offset().top,0>o&&"none"!=s.css("display")&&h.scrollTop(h.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){s+=e;var n=t(i[s]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(e){var i,s,a=this.findHighlightableChoices();return 0===arguments.length?n(a.filter(".select2-highlighted")[0],a.get()):(e>=a.length&&(e=a.length-1),0>e&&(e=0),this.removeHighlight(),i=t(a[e]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),s=i.data("select2-data"),void(s&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,i=e.find("li.select2-more-results"),s=this.resultsPage+1,n=this,a=this.search.val(),o=this.context;0!==i.length&&(t=i.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:a,page:s,context:o,matcher:this.opts.matcher,callback:this.bind(function(t){n.opened()&&(n.opts.populateResults.call(this,e,t.results,{term:a,page:s,context:o}),n.postprocessResults(t,!1,!1),t.more===!0?(i.detach().appendTo(e).html(n.opts.escapeMarkup($(n.opts.formatLoadMore,n.opts.element,s+1))),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=s,n.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(i){function s(){h.removeClass("select2-active"),u.positionDropdown(),c.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.liveRegion.text(c.text()):u.liveRegion.text(u.opts.formatMatches(c.find('.select2-result-selectable:not(".select2-selected")').length))}function n(t){c.html(t),s()}var a,r,l,h=this.search,c=this.results,d=this.opts,u=this,p=h.val(),f=t.data(this.container,"select2-last-term");if((i===!0||!f||!o(p,f))&&(t.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(a=this.data(),t.isArray(a)&&a.length>=m&&x(d.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+$(d.formatSelectionTooBig,d.element,m)+"</li>");if(h.val().length<d.minimumInputLength)return n(x(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+$(d.formatInputTooShort,d.element,h.val(),d.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&h.val().length>d.maximumInputLength)return void n(x(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+$(d.formatInputTooLong,d.element,h.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+$(d.formatSearching,d.element)+"</li>"),h.addClass("select2-active"),this.removeHighlight(),r=this.tokenize(),r!=e&&null!=r&&h.val(r),this.resultsPage=1,d.query({element:d.element,term:h.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(a){var r;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(a.hasError!==e&&x(d.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+$(d.formatAjaxError,d.element,a.jqXHR,a.textStatus,a.errorThrown)+"</li>");if(this.context=a.context===e?null:a.context,this.opts.createSearchChoice&&""!==h.val()&&(r=this.opts.createSearchChoice.call(u,h.val(),a.results),r!==e&&null!==r&&u.id(r)!==e&&null!==u.id(r)&&0===t(a.results).filter(function(){return o(u.id(this),u.id(r))}).length&&this.opts.createSearchChoicePosition(a.results,r)),0===a.results.length&&x(d.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+$(d.formatNoMatches,d.element,h.val())+"</li>");c.empty(),u.opts.populateResults.call(this,c,a.results,{term:h.val(),page:this.resultsPage,context:null}),a.more===!0&&x(d.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+d.escapeMarkup($(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(a,i),s(),this.opts.element.trigger({type:"select2-loaded",items:a})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){p(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),i=this.results.find(".select2-highlighted"),s=i.closest(".select2-result").data("select2-data");s?(this.highlight(e),this.onSelect(s,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,s,n,a,o,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==e)for(s=i.split(";"),a=0,o=s.length;o>a;a+=1)if(r=s[a].replace(/\s/g,""),n=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var s=i.call(this);null!==s&&this.container.css("width",s)}}),E=M(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,s,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),i=this.search.get(0),i.createTextRange?(s=i.createTextRange(),s.collapse(!1),s.select()):i.setSelectionRange&&(n=this.search.val().length,i.setSelectionRange(n,n))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),F.call(this,"selection","focusser")},initContainer:function(){var e,s,n=this.container,a=this.dropdown,o=U();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),s=t("label[for='"+this.opts.element.attr("id")+"']"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(s.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||s.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&229!=t.keyCode){if(t.which===L.PAGE_UP||t.which===L.PAGE_DOWN)return void m(t);switch(t.which){case L.UP:case L.DOWN:return this.moveHighlight(t.which===L.UP?-1:1),void m(t);case L.ENTER:return this.selectHighlighted(),void m(t);case L.TAB:return void this.selectHighlighted({noFocus:!0});case L.ESC:return this.cancel(t),void m(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==L.TAB&&!L.isControl(t)&&!L.isFunctionKey(t)&&t.which!==L.ESC){if(this.opts.openOnEnter===!1&&t.which===L.ENTER)return void m(t);if(t.which==L.DOWN||t.which==L.UP||t.which==L.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==L.DELETE||t.which==L.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),h(this.focusser),this.focusser.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection&&this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(s){i(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(s)})),a.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var s=t.Event("select2-clearing");if(this.opts.element.trigger(s),s.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(i,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()===e?!1:(t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val()},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(s))}:"data"in e&&(e.initSelection=e.initSelection||function(i,s){var n=i.val(),a=null;e.query({matcher:function(t,i,s){var r=o(n,e.id(s));return r&&(a=s),r},callback:t.isFunction(s)?function(){s(a)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var s=0,n=this;if(this.findHighlightableChoices().each2(function(t,e){return o(n.id(e.data("select2-data")),n.opts.element.val())?(s=t,!1):void 0}),i!==!1&&(e===!0&&s>=0?this.highlight(s):this.highlight(0)),e===!0){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(T(t.results)>=a)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(i,this.id(t))||this.triggerChange({added:t,removed:s})}},updateSelection:function(t){var i,s,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),n.empty(),null!==t&&(i=this.opts.formatSelection(t,n,this.opts.escapeMarkup)),i!==e&&n.append(i),s=this.opts.formatSelectionCssClass(t,n),s!==e&&n.addClass(s),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,s=null,n=this,a=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return s=n.optionToData(e),!1}),this.updateSelection(s),this.setPlaceholder(),i&&this.triggerChange({added:s,removed:a});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder(),i&&n.triggerChange({added:t,removed:a})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,s=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):(arguments.length>1&&(s=arguments[1]),void(t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),s&&this.triggerChange({added:t,removed:i})):this.clear(s)))}}),I=M(A,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){s.push(i.optionToData(e))}),e(s)}:"data"in e&&(e.initSelection=e.initSelection||function(i,s){var n=r(i.val(),e.separator,e.transformVal),a=[];e.query({matcher:function(i,s,r){var l=t.grep(n,function(t){return o(t,e.id(r))}).length;return l&&a.push(r),l},callback:t.isFunction(s)?function(){for(var t=[],i=0;i<n.length;i++)for(var r=n[i],l=0;l<a.length;l++){var h=a[l];if(o(r,e.id(h))){t.push(h),a.splice(l,1);break}}s(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),F.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var s=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(e){s.search[0].focus(),s.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+U()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),s=i.prev(".select2-search-choice:not(.select2-locked)"),n=i.next(".select2-search-choice:not(.select2-locked)"),a=f(this.search);if(i.length&&(t.which==L.LEFT||t.which==L.RIGHT||t.which==L.BACKSPACE||t.which==L.DELETE||t.which==L.ENTER)){var o=i;return t.which==L.LEFT&&s.length?o=s:t.which==L.RIGHT?o=n.length?n:null:t.which===L.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),o=s.length?s:n):t.which==L.DELETE?this.unselect(i.first())&&(this.search.width(10),o=n.length?n:null):t.which==L.ENTER&&(o=null),this.selectChoice(o),m(t),void(o&&o.length||this.open())}if((t.which===L.BACKSPACE&&1==this.keydowns||t.which==L.LEFT)&&0==a.offset&&!a.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case L.UP:case L.DOWN:return this.moveHighlight(t.which===L.UP?-1:1),void m(t);case L.ENTER:return this.selectHighlighted(),void m(t);case L.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case L.ESC:return this.cancel(t),void m(t)}if(t.which!==L.TAB&&!L.isControl(t)&&!L.isFunctionKey(t)&&t.which!==L.BACKSPACE&&t.which!==L.ESC){if(t.which===L.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),(t.which===L.PAGE_UP||t.which===L.PAGE_DOWN)&&m(t),t.which===L.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(e){this.isInterfaceEnabled()&&(t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),
this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],s=[],a=this;t(e).each(function(){n(a.id(this),i)<0&&(i.push(a.id(this)),s.push(this))}),e=s,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){a.addSelectedChoice(this)}),a.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,i){this.triggerSelect(t)&&""!==t.text&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var s,n,a=!i.locked,o=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=a?o:r,h=this.id(i),c=this.getVal();s=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),s!=e&&l.find("div").replaceWith(t("<div></div>").html(s)),n=this.opts.formatSelectionCssClass(i,l.find("div")),n!=e&&l.addClass(n),a&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),c.push(h),this.setVal(c)},unselect:function(e){var i,s,a=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var o=t.Event("select2-removing");if(o.val=this.id(i),o.choice=i,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(s=n(this.id(i),a))>=0;)a.splice(s,1),this.setVal(a),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var s=this.getVal(),a=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),r=this;a.each2(function(t,e){var i=r.id(e.data("select2-data"));n(i,s)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),-1==this.highlight()&&i!==!1&&this.opts.closeOnSelect===!0&&r.highlight(0),!this.opts.createSearchChoice&&!a.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&x(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+$(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,i,s,n,a=l(this.search);t=v(this.search)+10,e=this.search.offset().left,i=this.selection.width(),s=this.selection.offset().left,n=i-(e-s)-a,t>n&&(n=i-a),40>n&&(n=i-a),0>=n&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),r(t,this.opts.separator,this.opts.transformVal))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var s=0;s<t.length;s++)o(this.opts.id(e[i]),this.opts.id(t[s]))&&(e.splice(i,1),i>0&&i--,t.splice(s,1),s--);return{added:e,removed:t}},val:function(i,s){var n,a=this;if(0===arguments.length)return this.getVal();if(n=this.data(),n.length||(n=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(s&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t.map(e,a.id);a.setVal(i),a.updateSelection(e),a.clearSearch(),s&&a.triggerChange(a.buildChangeDetails(n,a.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var s,n,a=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(n=this.data(),e||(e=[]),s=t.map(e,function(t){return a.opts.id(t)}),this.setVal(s),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(n,this.data())),void 0)}}),t.fn.select2=function(){var i,s,a,o,r,l=Array.prototype.slice.call(arguments,0),h=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],c=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:t.extend({},l[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?r=i.element.prop("multiple"):(r=i.multiple||!1,"tags"in i&&(i.multiple=r=!0)),s=r?new window.Select2["class"].multi:new window.Select2["class"].single,s.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(n(l[0],h)<0)throw"Unknown method: "+l[0];if(o=e,s=t(this).data("select2"),s===e)return;if(a=l[0],"container"===a?o=s.container:"dropdown"===a?o=s.dropdown:(u[a]&&(a=u[a]),o=s[a].apply(s,l.slice(1))),n(l[0],c)>=0||n(l[0],d)>=0&&1==l.length)return!1}}),o===e?this:o},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,s){var n=[];return y(this.text(t),i.term,n,s),n.join("")},transformVal:function(e){return t.trim(e)},formatSelection:function(t,i,s){return t?s(this.text(t)):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},text:function(e){return e&&this.data&&this.data.text?t.isFunction(this.data.text)?this.data.text(e):e[this.data.text]:e.text},matcher:function(t,e){return s(""+e).toUpperCase().indexOf(s(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:S,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return e&&t.opts.minimumResultsForSearch<0?!1:!0}},t.fn.select2.locales=[],t.fn.select2.locales.en={formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(t,e,i){return"Loading failed"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results"},formatSearching:function(){return"Searching"}},t.extend(t.fn.select2.defaults,t.fn.select2.locales.en),t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:C,local:k,tags:D},util:{debounce:d,markMatch:y,escapeMarkup:w,stripDiacritics:s},"class":{"abstract":A,single:E,multi:I}}}}(jQuery),$(function(){$("body").on("click","input[name='toggletarget']",function(t){0==$('a.target[target="people"]').length?($("a.target").attr("target","people"),$("input[name='toggletarget']").attr("checked",!0)):($("a.target").removeAttr("target"),$("input[name='toggletarget']").removeAttr("checked"))})}),$(document).ready(function(){var t=$("div.navbar-fixed-top").outerHeight();$("body").css("padding-top",t+"px")}),$(document).ready(function(){$.InitFunctions||($.InitFunctions={}),$.InitFunctions.TagAllCallBack=function(t){$(".taguntag:visible").text("Remove")},$("#singleemail").live("click",function(t){t.preventDefault();var e=$(this);return bootbox.confirm(e.data("confirm"),function(t){t&&(window.location=e[0].href)}),!1}),$("#UnTagAll").live("click",function(t){t.preventDefault();$(this);return $.block(),$.post(this.href,null,function(t){$(".taguntag:visible").text(t),$('[data-toggle="dropdown"]').parent().removeClass("open"),$.unblock()}),!1}),$(document).on("click","#AddContact",function(t){t.preventDefault();var e=this.href;return bootbox.confirm("Are you sure you want to add a contact for all these people?",function(t){t===!0&&($.block(),$.post(e,null,function(t){$.unblock(),0>t?$.growlUI("error","too many people to add to a contact (max 100)"):0==t?$.growlUI("error","no results"):window.location=t}))}),!1}),$(document).on("click","#AddTasks",function(t){t.preventDefault();var e="Are you sure you want to add a task for all these people?";window.location.pathname.contains("/Person")&&(e="Are you sure you want to add a task for this person?");var i=this.href;return bootbox.confirm(e,function(t){t===!0&&($.block(),$.post(i,null,function(t){$.unblock(),t>100?$.growlUI("error","too many people to add tasks for (max 100)"):0==t?$.growlUI("error","no results"):window.location="/Task"}))}),!1}),$.QueryString=function(t,e){var i=new Object;return $.each(t.split("&"),function(){var t=this.split("=");i[t[0]]=t[1]}),i[e]},$.block=function(t){t||(t="<h1>working on it...</h1>"),$.blockUI({message:t,overlayCSS:{opacity:0},css:{border:"3px",padding:"15px",backgroundColor:"#aaa","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.9,color:"#000",width:"500px"}})},$.unblock=function(){$.unblockUI()},$.navigate=function(t,e){t+=(t.match(/\?/)?"&":"?")+e,window.location=t},$.DateValid=function(t,e){var i=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i;$.dateFormat.startsWith("d")&&(i=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i);var s=!0;return i.test(t)||(1==e&&$.growlUI("error","enter valid date"),s=!1),s},$.SortableDate=function(t){var e;e=$.dateFormat.startsWith("d")?new Date(t.split("/")[2],t.split("/")[1]-1,t.split("/")[0]):new Date(t.split("/")[2],t.split("/")[0]-1,t.split("/")[1]);var i=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();return i},jQuery.fn.center=function(t){return t=t?this.parent():window,this.css({position:"absolute",top:($(t).height()-this.outerHeight())/2+$(t).scrollTop()+"px",left:($(t).width()-this.outerWidth())/2+$(t).scrollLeft()+"px"}),this}}),String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})}),$(function(){$("a.tutorial").click(function(t){t.preventDefault(),startTutorial($(this).attr("href"))}),$("a.hide-tip").live("click",function(t){t.preventDefault(),$.post("/HideTip",{tip:$(this).data("hidetip")})}),$(".warntip").tooltip({delay:150,showBody:"|",showURL:!1}),$.QueryString=function(t,e){var i=new Object;return $.each(t.split("&"),function(){var t=this.split("=");i[t[0]]=t[1]}),i[e]},$("#cleartag").click(function(t){t.preventDefault();var e=this.href;confirm("are you sure you want to empty the active tag?")&&$.post(e,{},function(){window.location.reload()})}),$.block=function(t){t||(t="<h1>working on it...</h1>"),$.blockUI({message:t,overlayCSS:{opacity:0},css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:.5,color:"#fff"}})},$.unblock=function(){$.unblockUI()},$.navigate=function(t,e){t+=(t.match(/\?/)?"&":"?")+e,window.location=t},$.validator.methods.date=function(t,e){return this.optional(e)||Globalize.parseDate(t,$.dtoptions.format,$.dtoptions.cul)},$.DateValid=function(t,e){var i=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i;$.dtoptions.format.startsWith("d")&&(i=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i);var s=!0;return i.test(t)||(1==e&&$.growlUI("error","enter valid date"),s=!1),s},jQuery.fn.center=function(t){return t=t?this.parent():window,this.css({position:"absolute",top:($(t).height()-this.outerHeight())/2+$(t).scrollTop()+"px",left:($(t).width()-this.outerWidth())/2+$(t).scrollLeft()+"px"}),this},$.fn.alert=function(t){this.html('<div class="alert"><a class="close" data-dismiss="alert"></a><span>'+t+"</span></div>")},$("button.dropdown-toggle").click(function(t){$("li.hideAlt").hide()}),$(document).keydown(function(t){17==t.keyCode&&$("ul.dropdown-menu").is(":visible")&&$("li.hideAlt").not(".hidy").show()})}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return this.slice(0,t.length)==t}),String.prototype.appendQuery=function(t){return this&&this.length>0?this.contains("&")||this.contains("?")?this+"&"+t:this+"?"+t:t},String.prototype.contains=function(t){return-1!=this.indexOf(t)},String.prototype.endsWith=function(t,e){return t==this.substring(this.length-t.length)},String.prototype.addCommas=function(){for(var t=this.split("."),e=t[0],i=t.length>1?"."+t[1]:"",s=/(\d+)(\d{3})/;s.test(e);)e=e.replace(s,"$1,$2");return e+i},String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})},/*!
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
function(t){var e="0.9.3",i={isMsie:function(){var t=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return t?parseInt(t[2],10):!1},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isFunction:function(t){return"function"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return"undefined"==typeof t},bind:t.proxy,bindAll:function(e){var i;for(var s in e)t.isFunction(i=e[s])&&(e[s]=t.proxy(i,e))},indexOf:function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},each:t.each,map:t.map,filter:t.grep,every:function(e,i){var s=!0;return e?(t.each(e,function(t,n){return(s=i.call(null,n,t,e))?void 0:!1}),!!s):s},some:function(e,i){var s=!1;return e?(t.each(e,function(t,n){return(s=i.call(null,n,t,e))?!1:void 0}),!!s):s},mixin:t.extend,getUniqueId:function(){var t=0;return function(){return t++}}(),defer:function(t){setTimeout(t,0)},debounce:function(t,e,i){var s,n;return function(){var a,o,r=this,l=arguments;return a=function(){s=null,i||(n=t.apply(r,l))},o=i&&!s,clearTimeout(s),s=setTimeout(a,e),o&&(n=t.apply(r,l)),n}},throttle:function(t,e){var i,s,n,a,o,r;return o=0,r=function(){o=new Date,n=null,a=t.apply(i,s)},function(){var l=new Date,h=e-(l-o);return i=this,s=arguments,0>=h?(clearTimeout(n),n=null,o=l,a=t.apply(i,s)):n||(n=setTimeout(r,h)),a}},tokenizeQuery:function(e){return t.trim(e).toLowerCase().split(/[\s]+/)},tokenizeText:function(e){return t.trim(e).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}},s=function(){var t=/\s+/;return{on:function(e,i){var s;if(!i)return this;for(this._callbacks=this._callbacks||{},e=e.split(t);s=e.shift();)this._callbacks[s]=this._callbacks[s]||[],this._callbacks[s].push(i);return this},trigger:function(e,i){var s,n;if(!this._callbacks)return this;for(e=e.split(t);s=e.shift();)if(n=this._callbacks[s])for(var a=0;a<n.length;a+=1)n[a].call(this,{type:s,data:i});return this}}}(),n=function(){function e(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var s="typeahead:";return i.mixin(e.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(s+t,e)}}),e}(),a=function(){function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function e(){return(new Date).getTime()}function s(t){return JSON.stringify(i.isUndefined(t)?null:t)}function n(t){return JSON.parse(t)}var a,o;try{a=window.localStorage,a.setItem("~~~","!"),a.removeItem("~~~")}catch(r){a=null}return o=a&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),n(a.getItem(this._prefix(t)))},set:function(t,n,o){return i.isNumber(o)?a.setItem(this._ttlKey(t),s(e()+o)):a.removeItem(this._ttlKey(t)),a.setItem(this._prefix(t),s(n))},remove:function(t){return a.removeItem(this._ttlKey(t)),a.removeItem(this._prefix(t)),this},clear:function(){var t,e,i=[],s=a.length;for(t=0;s>t;t++)(e=a.key(t)).match(this.keyMatcher)&&i.push(e.replace(this.keyMatcher,""));for(t=i.length;t--;)this.remove(i[t]);return this},isExpired:function(t){var s=n(a.getItem(this._ttlKey(t)));return i.isNumber(s)&&e()>s?!0:!1}}:{get:i.noop,set:i.noop,remove:i.noop,clear:i.noop,isExpired:i.noop},i.mixin(t.prototype,o),t}(),o=function(){function t(t){i.bindAll(this),t=t||{},this.sizeLimit=t.sizeLimit||10,this.cache={},this.cachedKeysByAge=[]}return i.mixin(t.prototype,{get:function(t){return this.cache[t]},set:function(t,e){var i;this.cachedKeysByAge.length===this.sizeLimit&&(i=this.cachedKeysByAge.shift(),delete this.cache[i]),this.cache[t]=e,this.cachedKeysByAge.push(t)}}),t}(),r=function(){function e(t){i.bindAll(this),t=i.isString(t)?{url:t}:t,l=l||new o,r=i.isNumber(t.maxParallelRequests)?t.maxParallelRequests:r||6,this.url=t.url,this.wildcard=t.wildcard||"%QUERY",this.filter=t.filter,this.replace=t.replace,this.ajaxSettings={type:"post",cache:t.cache,timeout:t.timeout,dataType:t.dataType||"json",beforeSend:t.beforeSend},this._get=(/^throttle$/i.test(t.rateLimitFn)?i.throttle:i.debounce)(this._get,t.rateLimitWait||300)}function s(){h++}function n(){h--}function a(){return r>h}var r,l,h=0,c={};return i.mixin(e.prototype,{_get:function(t,e){function i(i){var n=s.filter?s.filter(i):i;e&&e(n),l.set(t,i)}var s=this;a()?this._sendRequest(t).done(i):this.onDeckRequestArgs=[].slice.call(arguments,0)},_sendRequest:function(e){function i(){n(),c[e]=null,a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}var a=this,o=c[e];return o||(s(),o=c[e]=t.ajax(e,this.ajaxSettings).always(i)),o},get:function(t,e){var s,n,a=this,o=encodeURIComponent(t||"");return e=e||i.noop,s=this.replace?this.replace(this.url,o):this.url.replace(this.wildcard,o),(n=l.get(s))?i.defer(function(){e(a.filter?a.filter(n):n)}):this._get(s,e),!!n}}),e}(),l=function(){function s(e){i.bindAll(this),i.isString(e.template)&&!e.engine&&t.error("no template engine specified"),e.local||e.prefetch||e.remote||t.error("one of local, prefetch, or remote is required"),0!==e.minLength||e.local||e.prefetch||t.error("local or prefetch required to use default suggestions"),this.name=e.name||i.getUniqueId(),this.limit=e.limit||5,this.minLength=null==e.minLength?1:e.minLength,this.header=e.header,this.footer=e.footer,this.valueKey=e.valueKey||"value",this.template=n(e.template,e.engine,this.valueKey),this.defaultSort=e.defaultSort,this.local=e.local,this.prefetch=e.prefetch,this.remote=e.remote,this.itemHash={},this.adjacencyList={},this.defaultOrder=[],this.storage=e.name?new a(e.name):null}function n(t,e,s){var n,a;return i.isFunction(t)?n=t:i.isString(t)?(a=e.compile(t),n=i.bind(a.render,a)):n=function(t){return"<p>"+t[s]+"</p>"},n}var o={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};return i.mixin(s.prototype,{_processLocalData:function(t){this._mergeProcessedData(this._processData(t))},_loadPrefetchData:function(s){function n(t){var e=s.filter?s.filter(t):t,n=u._processData(e),a=n.itemHash,r=n.adjacencyList;u.storage&&(u.storage.set(o.itemHash,a,s.ttl),u.storage.set(o.adjacencyList,r,s.ttl),u.storage.set(o.thumbprint,p,s.ttl),u.storage.set(o.protocol,i.getProtocol(),s.ttl)),u._mergeProcessedData(n)}var a,r,l,h,c,d,u=this,p=e+(s.thumbprint||"");return this.storage&&(a=this.storage.get(o.thumbprint),r=this.storage.get(o.protocol),l=this.storage.get(o.itemHash),h=this.storage.get(o.adjacencyList)),c=a!==p||r!==i.getProtocol(),s=i.isString(s)?{url:s}:s,s.ttl=i.isNumber(s.ttl)?s.ttl:864e5,l&&h&&!c?(this._mergeProcessedData({itemHash:l,adjacencyList:h}),d=t.Deferred().resolve()):d=t.getJSON(s.url).done(n),d},_transformDatum:function(t){var e=i.isString(t)?t:t[this.valueKey],s=t.tokens||i.tokenizeText(e),n={value:e,tokens:s};return i.isString(t)?(n.datum={},n.datum[this.valueKey]=t):n.datum=t,n.tokens=i.filter(n.tokens,function(t){return!i.isBlankString(t)}),n.tokens=i.map(n.tokens,function(t){return t.toLowerCase()}),n},_processData:function(t){var e=this,s={},n={};return i.each(t,function(t,a){var o=e._transformDatum(a),r=i.getUniqueId(o.value);s[r]=o,i.each(o.tokens,function(t,e){var s=e.charAt(0),a=n[s]||(n[s]=[r]);!~i.indexOf(a,r)&&a.push(r)})}),{itemHash:s,adjacencyList:n}},_mergeProcessedData:function(t){var e=this;if(i.mixin(this.itemHash,t.itemHash),i.each(t.adjacencyList,function(t,i){var s=e.adjacencyList[t];e.adjacencyList[t]=s?s.concat(i):i}),0===this.minLength){for(var s in t.itemHash)this.defaultOrder.push(s);i.isFunction(this.defaultSort)&&this.defaultOrder.sort(function(t,i){return e.defaultSort(e.itemHash[t],e.itemHash[i])})}},_getDefaultList:function(){for(var t=[],e=0;e<this.limit;e++)t.push(this.itemHash[this.defaultOrder[e]]);return t},_getLocalSuggestions:function(t){var e,s=this,n=[],a=[],o=[];return i.each(t,function(t,e){var s=e.charAt(0);!~i.indexOf(n,s)&&n.push(s)}),i.each(n,function(t,i){var n=s.adjacencyList[i];return n?(a.push(n),void((!e||n.length<e.length)&&(e=n))):!1}),a.length<n.length?[]:(i.each(e,function(e,n){var r,l,h=s.itemHash[n];r=i.every(a,function(t){return~i.indexOf(t,n)}),l=r&&i.every(t,function(t){return i.some(h.tokens,function(e){return 0===e.indexOf(t)})}),l&&o.push(h)}),o)},initialize:function(){var e;return this.local&&this._processLocalData(this.local),this.transport=this.remote?new r(this.remote):null,e=this.prefetch?this._loadPrefetchData(this.prefetch):t.Deferred().resolve(),this.local=this.prefetch=this.remote=null,this.initialize=function(){return e},e},getSuggestions:function(t,e){function s(t){a=a.slice(0),i.each(t,function(t,e){var s,n=o._transformDatum(e);return s=i.some(a,function(t){return n.value===t.value}),!s&&a.push(n),a.length<o.limit}),e&&e(a)}var n,a,o=this,r=!1;if(!(t.length<this.minLength)){if(0==t.length)return e(this._getDefaultList());n=i.tokenizeQuery(t),a=this._getLocalSuggestions(n).slice(0,this.limit),a.length<this.limit&&this.transport&&(r=this.transport.get(t,s)),!r&&e&&e(a)}}}),s}(),h=function(){function e(e){var s=this;i.bindAll(this),this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},this.$hint=t(e.hint),this.$input=t(e.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent),i.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s.specialKeyCodeMap[t.which||t.keyCode]||i.defer(s._compareQueryToInputValue)}):this.$input.on("input.tt",this._compareQueryToInputValue),this.query=this.$input.val(),this.$overflowHelper=n(this.$input)}function n(e){return t("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}function a(t,e){return t=(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),e=(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," "),t===e}return i.mixin(e.prototype,s,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(t){var e=this.specialKeyCodeMap[t.which||t.keyCode];e&&this.trigger(e+"Keyed",t)},_compareQueryToInputValue:function(){var t=this.getInputValue(),e=a(this.query,t),i=e?this.query.length!==t.length:!1;i?this.trigger("whitespaceChanged",{value:this.query}):e||this.trigger("queryChanged",{value:this.query=t})},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){this.$input.val(t),!e&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(t){this.$hint.val(t)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var t,e=this.$input.val().length,s=this.$input[0].selectionStart;return i.isNumber(s)?s===e:document.selection?(t=document.selection.createRange(),t.moveStart("character",-e),e===t.text.length):!0}}),e}(),c=function(){function e(e){i.bindAll(this),this.isOpen=!1,this.isEmpty=!0,this.isMouseOverDropdown=!1,this.showDefaultSuggestions=e.showDefaultSuggestions,this.$menu=t(e.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}function n(t){return t.data("suggestion")}var a={suggestionsList:'<span class="tt-suggestions"></span>'},o={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"nowrap"}};return i.mixin(e.prototype,s,{_handleMouseenter:function(){this.isMouseOverDropdown=!0},_handleMouseleave:function(){this.isMouseOverDropdown=!1},_handleMouseover:function(e){var i=t(e.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor"),i.addClass("tt-is-under-cursor")},_handleSelection:function(e){var i=t(e.currentTarget);this.trigger("suggestionSelected",n(i))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var e,i,s,a;if(this.isVisible()){if(e=this._getSuggestions(),i=e.filter(".tt-is-under-cursor"),i.removeClass("tt-is-under-cursor"),s=e.index(i)+t,s=(s+1)%(e.length+1)-1,-1===s)return void this.trigger("cursorRemoved");-1>s&&(s=e.length-1),a=e.eq(s).addClass("tt-is-under-cursor"),this._ensureVisibility(a),this.trigger("cursorMoved",n(a))}},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(t){var e=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),i=this.$menu.scrollTop(),s=t.position().top,n=s+t.outerHeight(!0);0>s?this.$menu.scrollTop(i+s):n>e&&this.$menu.scrollTop(i+(n-e))},destroy:function(){this.$menu.off(".tt"),this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){this.isMouseOverDropdown||this.close()},close:function(){this.isOpen&&(this.isOpen=!1,this.isMouseOverDropdown=!1,this._hide(),this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor"),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,(this.showDefaultSuggestions||!this.isEmpty)&&this._show(),this.trigger("opened"))},setLanguageDirection:function(t){var e={left:"0",right:"auto"},i={left:"auto",right:" 0"};"ltr"===t?this.$menu.css(e):this.$menu.css(i)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getSuggestionUnderCursor:function(){var t=this._getSuggestions().filter(".tt-is-under-cursor").first();return t.length>0?n(t):null},getFirstSuggestion:function(){var t=this._getSuggestions().first();return t.length>0?n(t):null},renderSuggestions:function(e,s){var n,r,l,h,c,d="tt-dataset-"+e.name,u='<div class="tt-suggestion">%body</div>',p=this.$menu.find("."+d);0===p.length&&(r=t(a.suggestionsList).css(o.suggestionsList),p=t("<div></div>").addClass(d).append(e.header).append(r).append(e.footer).appendTo(this.$menu)),s.length>0?(this.isEmpty=!1,this.isOpen&&this._show(),l=document.createElement("div"),h=document.createDocumentFragment(),i.each(s,function(i,s){"undefined"!=typeof s&&(s.dataset=e.name,n=e.template(s.datum),l.innerHTML=u.replace("%body",n),c=t(l.firstChild).css(o.suggestion).data("suggestion",s),c.children().each(function(){t(this).css(o.suggestionChild)}),h.appendChild(c[0]))}),p.show().find(".tt-suggestions").html(h)):this.clearSuggestions(e.name),this.trigger("suggestionsRendered")},clearSuggestions:function(t){var e=t?this.$menu.find(".tt-dataset-"+t):this.$menu.find('[class^="tt-dataset-"]'),i=e.find(".tt-suggestions");e.hide(),i.empty(),0===this._getSuggestions().length&&(this.isEmpty=!0,this._hide())}}),e}(),d=function(){function e(t){var e,s,a;i.bindAll(this),this.$node=n(t.input),this.datasets=t.datasets,this.dir=null,this.showDefaultSuggestions=!1,this.eventBus=t.eventBus,e=this.$node.find(".tt-dropdown-menu"),s=this.$node.find(".tt-query"),a=this.$node.find(".tt-hint");for(var o=0;o<this.datasets.length;o++)0===this.datasets[o].minLength&&(this.showDefaultSuggestions=!0);this.dropdownView=new c({menu:e,showDefaultSuggestions:this.showDefaultSuggestions}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent),this.inputView=new h({input:s,hint:a}).on("focused",this._handleFocus).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}function n(e){var i=t(o.wrapper),s=t(o.dropdown),n=t(e),a=t(o.hint);i=i.css(r.wrapper),s=s.css(r.dropdown),a.css(r.hint).css({backgroundAttachment:n.css("background-attachment"),backgroundClip:n.css("background-clip"),backgroundColor:n.css("background-color"),backgroundImage:n.css("background-image"),backgroundOrigin:n.css("background-origin"),backgroundPosition:n.css("background-position"),backgroundRepeat:n.css("background-repeat"),backgroundSize:n.css("background-size")}),n.data("ttAttrs",{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-query").attr({autocomplete:"off",spellcheck:!1}).css(r.query);try{!n.attr("dir")&&n.attr("dir","auto")}catch(l){}return n.wrap(i).parent().prepend(a).append(s)}function a(t){var e=t.find(".tt-query");i.each(e.data("ttAttrs"),function(t,s){i.isUndefined(s)?e.removeAttr(t):e.attr(t,s)}),e.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(t),t.remove()}var o={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},r={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};return i.isMsie()&&i.mixin(r.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),i.isMsie()&&i.isMsie()<=7&&(i.mixin(r.wrapper,{display:"inline",zoom:"1"}),i.mixin(r.query,{marginTop:"-1px"})),i.mixin(e.prototype,s,{_managePreventDefault:function(t){var e,i,s=t.data,n=!1;switch(t.type){case"tabKeyed":e=this.inputView.getHintValue(),i=this.inputView.getInputValue(),n=e&&e!==i;break;case"upKeyed":case"downKeyed":n=!s.shiftKey&&!s.ctrlKey&&!s.metaKey}n&&s.preventDefault()},_setLanguageDirection:function(){var t=this.inputView.getLanguageDirection();t!==this.dir&&(this.dir=t,this.$node.css("direction",t),this.dropdownView.setLanguageDirection(t))},_updateHint:function(){var t,e,s,n,a,o=this.dropdownView.getFirstSuggestion(),r=o?o.value:null,l=this.dropdownView.isVisible(),h=this.inputView.isOverflow();if(r&&l&&!h){if(t=this.inputView.getInputValue(),!t)return;e=t.replace(/\s{2,}/g," ").replace(/^\s+/g,""),s=i.escapeRegExChars(e),n=new RegExp("^(?:"+s+")(.*$)","i"),a=n.exec(r),this.inputView.setHintValue(t+(a?a[1]:""))}},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(t){var e=t.data;this.inputView.setInputValue(e.value,!0)},_handleFocus:function(){this.showDefaultSuggestions&&this._getSuggestions(),this._openDropdown()},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(t){this.dropdownView["blured"===t.type?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(t){var e=t.data;e.shiftKey||e.ctrlKey||e.metaKey||this.dropdownView["upKeyed"===t.type?"moveCursorUp":"moveCursorDown"]()},_handleSelection:function(t){var e="suggestionSelected"===t.type,s=e?t.data:this.dropdownView.getSuggestionUnderCursor();s&&(this.inputView.setInputValue(s.value),e?this.inputView.focus():t.data.preventDefault(),e&&i.isMsie()?i.defer(this.dropdownView.close):this.dropdownView.close(),this.eventBus.trigger("selected",s.datum,s.dataset))},_getSuggestions:function(){var t=this,e=this.inputView.getQuery();(!i.isBlankString(e)||this.showDefaultSuggestions)&&i.each(this.datasets,function(i,s){s.getSuggestions(e,function(i){e===t.inputView.getQuery()&&t.dropdownView.renderSuggestions(s,i)})})},_autocomplete:function(t){var e,i,s,n,a;("rightKeyed"!==t.type&&"leftKeyed"!==t.type||(e=this.inputView.isCursorAtEnd(),i="ltr"===this.inputView.getLanguageDirection()?"leftKeyed"===t.type:"rightKeyed"===t.type,e&&!i))&&(s=this.inputView.getQuery(),n=this.inputView.getHintValue(),""!==n&&s!==n&&(a=this.dropdownView.getFirstSuggestion(),this.inputView.setInputValue(a.value),this.eventBus.trigger("autocompleted",a.datum,a.dataset)))},_propagateEvent:function(t){this.eventBus.trigger(t.type)},destroy:function(){this.inputView.destroy(),this.dropdownView.destroy(),a(this.$node),this.$node=null},setQuery:function(t){this.inputView.setQuery(t),this.inputView.setInputValue(t),this._clearHint(),this._clearSuggestions(),this._getSuggestions()}}),e}();!function(){var e,s={},a="ttView";e={initialize:function(e){function o(){var e,s=t(this),o=new n({el:s});e=i.map(r,function(t){return t.initialize()}),s.data(a,new d({input:s,eventBus:o=new n({el:s}),datasets:r})),t.when.apply(t,e).always(function(){i.defer(function(){o.trigger("initialized")})})}var r;return e=i.isArray(e)?e:[e],0===e.length&&t.error("no datasets provided"),r=i.map(e,function(t){var e=s[t.name]?s[t.name]:new l(t);return t.name&&(s[t.name]=e),e}),this.each(o)},destroy:function(){function e(){var e=t(this),i=e.data(a);i&&(i.destroy(),e.removeData(a))}return this.each(e)},setQuery:function(e){function i(){var i=t(this).data(a);i&&i.setQuery(e)}return this.each(i)}},jQuery.fn.typeahead=function(t){return e[t]?e[t].apply(this,[].slice.call(arguments,1)):e.initialize.apply(this,arguments)}}()}(window.jQuery),$(function(){$("#SearchText").typeahead({name:"search",valueKey:"url",limit:25,beforeSend:function(t,e){$.SetLoadingIndicator()},remote:"/FastSearch?q=%QUERY",prefetch:{url:"/FastSearchPrefetch",ttl:1},minLength:0,template:"dummy string",engine:{compile:function(t){return{render:function(t){var e="<div{2}>{0}{1}</div>".format(t.line1,t.line2?"<br>"+t.line2:"",t.addmargin?" style='margin-bottom:.7em'":"");return e}}}}}),$("#SearchText").bind("typeahead:selected",function(t,e,i){window.location=e.url})}),String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,i){return"undefined"!=typeof t[i]?t[i]:e})},$(function(){$.AttachFormElements=function(){$("form.ajax input.ajax-typeahead").typeahead({minLength:3,remote:{url:"test",beforeSend:function(t,e){$.SetLoadingIndicator()},replace:function(t,e){return $("input:focus").data("link")+"?query="+e}}}),$.DatePickersAndChosen()},$.DatePickers=function(){$("form .dateonly").datetimepicker({autoclose:!0,orientation:"auto",minView:2,forceParse:!1,format:$.dtoptions.format}),$("form .datetime").datetimepicker({autoclose:!0,showMeridian:!0,orientation:"auto",forceParse:!1,format:$.dtoptions.formatTime})},$.DatePickersAndChosen=function(){$.DatePickers(),$("form.ajax select:not([plain])").select2({dropdownAutoWidth:!0}),$("form.ajax a.editable").editable()},$("ul.nav-tabs a.ajax,a.ajax.ui-tabs-anchor").live("click",function(t){var e=$(this),i=e.data("clicked");if(i)return!1;e.data("clicked",!0);var s=e.attr("href")||e.data("target"),n=$(s),a=n.find("form.ajax"),o=a.serialize(),r=n.data("link");return n.hasClass("loaded")||$.ajax({type:"POST",url:r,data:o,success:function(t,e){n.addClass("loaded"),n.html(t).ready(function(){if(n.data("init")){var t=n.data("init").split(",");for(var e in t)t.hasOwnProperty(e)&&$.InitFunctions[t[e]]()}n.data("init2")&&$.InitFunctions[n.data("init2")]();var i=n.find("form.ajax");if(i.length>0&&(a=i),a.data("init")){var s=a.data("init").split(",");for(var o in s)s.hasOwnProperty(o)&&$.InitFunctions[s[o]]()}a.data("init2")&&$.InitFunctions[a.data("init2")]()})},error:function(t,e){n.html(t.responseText).ready(function(){})}}),!0}),$("div.tab-pane").on("click","a.ajax-refresh",function(t){t.preventDefault();var e=$(this).closest("div.tab-pane");return $.formAjaxClick($(this),e.data("link")),!1}),$("form.ajax a.submit").live("click",function(t){t.preventDefault();var e=$(this);return e.data("confirm")?bootbox.confirm(e.data("confirm"),function(t){1==t&&$.formAjaxSubmit(e)}):$.formAjaxSubmit(e),!1}),$.formAjaxSubmit=function(t){var e=t.closest("form.ajax");e.attr("action",t[0].href),e.submit()},$("form.ajax input.ajax").live("click",function(){$.formAjaxClick($(this))}),$("form.ajax a.ajax").live("click",function(t){t.preventDefault();var e=$(this);return e.data("confirm")?bootbox.confirm(e.data("confirm"),function(t){1==t&&$.formAjaxClick(e)}):$.formAjaxClick(e),!1}),$.formAjaxClick=function(t,e){var i=t.closest("form.ajax"),s=i.closest("div.tab-pane"),n=t.closest("div.modal-body"),a=t.attr("href");"#"===a&&(a=null);var o=e||t.data("link")||a||i[0].action||s.data("link")||n.data("target")||"#";t.data("size")&&$("input[name='PageSize']",i).val(t.data("size")),t.data("page")&&$("input[name='Page']",i).val(t.data("page")),t.data("sortby")&&$("input[name='Sort']",i).val(t.data("sortby")),t.data("dir")&&$("input[name='Direction']",i).val(t.data("dir"));var r=i.closest("div.tab-pane[data-init]"),l=i.serialize();return(0===l.length||"none"===t.data("data"))&&(l={}),(!t.hasClass("validate")||i.valid())&&$.ajax({type:"POST",url:o,data:l,success:function(e,s){if(t.data("redirect"))window.location=e;else if(i.hasClass("modal"))i.html(e).ready(function(){i.removeClass("hide");var e=($(window).height()-i.height())/2;10>e&&(e=10),i.css({"margin-top":e,top:"0"}),$.AttachFormElements(),t.data("callback")&&$.InitFunctions[t.data("callback")]()});else{var n=$(i.data("results")||i);n.replaceWith(e).ready(function(){if($.AttachFormElements(),r.data("init")){var e=r.data("init").split(",");for(var s in e)e.hasOwnProperty(s)&&$.InitFunctions[e[s]]()}if(i.data("init")){var n=i.data("init").split(",");for(var a in n)n.hasOwnProperty(a)&&$.InitFunctions[n[a]]()}r.data("init2")&&$.InitFunctions[r.data("init2")](),i.data("init2")&&$.InitFunctions[i.data("init2")](),t.data("callback")&&$.InitFunctions[t.data("callback")]()})}},error:function(t,e,s){i.html(t.responseText)}}),!1},$.validator.addMethod("unallowedcode",function(t,e,i){return t!==i.code},"required, select item"),$.validator.addMethod("dateandtimevalid",function(t,e){var i=t.split(" "),s=!/Invalid|NaN/.test(new Date(i[0]).toString()),n=/^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/i.test(i[1]);return this.optional(e)||s&&n},"Please enter a valid date and time."),$("a.dialog-options").live("click",function(t){t.preventDefault();var e=$(this),i=e.data("target")||this.href;$.dialogOptions(i,e)}),$.dialogOptions=function(t,e){return $("<div id='dialog-options' />").load(t,{},function(){var t=$(this),i=t.find("form");e[0].title&&i.find("h3.title").text(e[0].title),i.modal("show"),i.attr("action")||i.attr("action",e[0].href),i.on("hidden",function(){t.remove(),i.remove()}),$.DatePickers(),i.validate({submitHandler:function(t){if("GET"===t.method.toUpperCase())t.submit();else if($(t).hasClass("ajax")){var s=i.serialize();$.post(t.action,s,function(t){t&&$.growlUI("",t),e.data("callback")&&$.InitFunctions[e.data("callback")](e)})}else if(e.data("confirm")?bootbox.confirm(e.data("confirm"),function(e){e||t.submit()}):t.submit(),e.data("callback")){var s=i.serialize();$.InitFunctions[e.data("callback")](e,s)}i.modal("hide")},highlight:function(t){$(t).closest(".control-group").addClass("error")},unhighlight:function(t){$(t).closest(".control-group").removeClass("error")}})}),!1},$("a.longrunop").live("click",function(t){t.preventDefault();var e={};return $(this).data("post")&&(e=$(this).closest("form").serializeArray()),$('<form class="modal form-horizontal ajax validate fade hide" />').load(this.href,e,function(){var t=$(this),e=$("#callback",t).val();t.modal("show");var i=250;t.on("hidden",function(){i=0,t.remove(),e&&$.InitFunctions[e]()}),t.on("click","a.ajaxreloader",function(e){e.preventDefault();var s=this.href,n=t.serialize()||{},a=function(){$.post(s,n,function(e){t.html(e),$("#finished",t).val()&&(i=0),i>0&&(i+=500,i>3e3&&(i=3e3),setTimeout(a,i)),n=t.serialize()})};return setTimeout(a,i),!1})}),!1});var t=0;$.ajaxSetup({beforeSend:function(){$.SetLoadingIndicator()},complete:function(){t--,0===t&&$("#loading-indicator").hide()},error:function(){$("#loading-indicator").hide()}}),$.SetLoadingIndicator=function(){$("#loading-indicator").show().find("img").css({position:"absolute",left:$(window).width()/2,top:$(window).height()/2,"z-index":2001}),t++},$.InitFunctions||($.InitFunctions={}),$.fn.jqdatepicker=function(){return this.datepicker({autoclose:!0,orientation:"auto",forceParse:!1,format:$.dtoptions.format}),this}}),$(function(){$("a.extravalue").live("click",function(t){t.preventDefault();var e=$(this);$("<div />").load($(this).attr("href"),{},function(){var t=$(this),e=t.find("form");e.modal("show"),$.AttachFormElements(),$(this).validate({highlight:function(t){$(t).closest(".control-group").addClass("error")},unhighlight:function(t){$(t).closest(".control-group").removeClass("error")}}),e.on("hidden",function(){t.remove(),e.remove()});var i=function(){switch($("#ExtraValueBitPrefix").parent().parent().addClass("hide"),$("#ExtraValueCheckboxes").parent().parent().addClass("hide"),$("#ExtraValueCodes").parent().parent().addClass("hide"),$("#ExtraValueLink").parent().parent().addClass("hide"),$("#ExtraValueType_Value").val()){case"Code":$("#ExtraValueCodes").parent().parent().removeClass("hide");break;case"Bits":$("#ExtraValueBitPrefix").parent().parent().removeClass("hide"),$("#ExtraValueCheckboxes").parent().parent().removeClass("hide");break;case"Link":$("#ExtraValueLink").parent().parent().removeClass("hide");break;case"Codes":$("#ExtraValueCodes").parent().parent().removeClass("hide")}};$("#ExtraValueType_Value").live("change",i)}),$.InitFunctions.StandardExtraValueDialogCallback=function(){if(0===$("#StandardExtraValueError").length){$("#extravalue-dialog").modal("hide");var t=e.closest("form").find("a.ajax-refresh");t.length>0&&t.click()}},$.InitFunctions.EditStandardExtraValueDialogCallback=function(){if(0==$("#EditStandardExtraValueError").length){$("#editextravalue-dialog").modal("hide");var t=e.closest("form").find("a.ajax-refresh");t.length>0&&t.click()}},$.InitFunctions.DeleteStandardCallback=function(t){$(t.data("rowid")).remove(),$("#extravalue-dialog").modal("hide");var t=e.closest("form").find("a.ajax-refresh");t.length>0&&t.click()},$("#CloseListStandard").live("click",function(t){t.preventDefault(),$.InitFunctions.StandardExtraValueDialogCallback()})}),$("a.adhoc-extravalue").live("click",function(t){t.preventDefault();var e=$(this);$("<div />").load(e.attr("href"),{},function(){var t=$(this),e=t.find("form");e.modal("show"),$.AttachFormElements(),e.validate({highlight:function(t){$(t).closest(".control-group").addClass("error")},unhighlight:function(t){$(t).closest(".control-group").removeClass("error")}}),e.on("hidden",function(){t.remove(),e.remove()});var i=function(){switch($("#ExtraValueTextBox").parent().parent().addClass("hide"),
$("#ExtraValueTextArea").parent().parent().addClass("hide"),$("#ExtraValueCheckbox").parent().parent().addClass("hide"),$("#ExtraValueDate").parent().parent().parent().addClass("hide"),$("#ExtraValueInteger").parent().parent().addClass("hide"),$("#AdhocExtraValueType_Value").val()){case"Code":$("#ExtraValueTextBox").parent().parent().removeClass("hide");break;case"Text":$("#ExtraValueTextArea").parent().parent().removeClass("hide");break;case"Bit":$("#ExtraValueCheckbox").parent().parent().removeClass("hide");break;case"Date":$("#ExtraValueDate").parent().parent().parent().removeClass("hide");break;case"Int":$("#ExtraValueInteger").parent().parent().removeClass("hide")}};$("#AdhocExtraValueType_Value").live("change",i)}),$.InitFunctions.AdhocDialogCallback=function(){if(0==$("#ExtraValueError").length){$("#extravalue-dialog").modal("hide");var t=e.closest("form").find("a.ajax.reload");t.length>0&&t.click()}}}),$.InitFunctions.ExtraEditable=function(){$.fn.editabletypes.abstractinput.prototype.value2input=function(t){this.$input.val((t||"").toString())},$("a.click-Code").editable({mode:"inline"}),$("a.click-Text").editable({mode:"inline"}),$("a.click-Int").editable({mode:"inline"}),$("a.click-Text2,a.click-Data").editable({type:"textarea",mode:"inline",inputclass:"width100",showbuttons:"bottom"}).on("shown",function(t,e){e.input.$input.closest("span.editable-inline").css("width","100%"),e.input.$input.closest("div.editable-input").css("width","100%")}),$("a.click-Code-Select").editable({type:"select",mode:"inline"}),$("a.click-Bits").editable({type:"checklist",mode:"inline"}),$("a.click-Date").editable({type:"date",mode:"inline",format:$.dtoptions.format}),$("a.click-Bit").editable({type:"checklist",mode:"inline",source:{True:"True"},emptytext:"False"})}}),$(function(){$("a.searchadd").live("click",function(t){t.preventDefault(),$("<form id='search-add' class='modal fade hide validate ajax form-horizontal' data-width='700' data-keyboard='false' data-backdrop='static' />").load($(this).attr("href"),{},function(){$(this).modal("show"),$.AttachFormElements(),$(this).validate({highlight:function(t){$(t).closest(".control-group").addClass("error")},unhighlight:function(t){$(t).closest(".control-group").removeClass("error")}}),$(this).on("hidden",function(){$(this).remove()})})}),$("#search-add a.commit").live("click",function(t){t.preventDefault();var e=$(this),i=e.data("clicked");if(i)return!1;e.data("clicked",!0);var s=e.closest("form"),n=s.serialize(),a=e.attr("href");return $.post(a,n,function(t){s.modal("hide"),t.message?alert(t.message):"Menu"===t.from?window.location="/Person2/"+t.pid:AddSelected(t)}),!1}),$(document).on("shown","#search-add",function(){$("#search-add #Name").focus(),$("#search-add input").live("keydown",function(t){return 13===t.keyCode?(t.preventDefault(),$("#searchperson").click(),!1):!0})}),$.fn.loadWith=function(t,e){var i=$(this);$.post(t,function(t){i.replaceWith(t).ready(e)})},$("#search-add a.clear").live("click",function(t){return t.preventDefault(),$("#Name").val(""),$("#Phone").val(""),$("#Address").val(""),$("#dob").val(""),!1}),$("form.ajax tbody > tr a.reveal").live("click",function(t){t.stopPropagation()}),$.NotReveal=function(t){return $(t.target).is("a")&&!$(t.target).is(".reveal")?!0:!1},$("form.ajax tr.section").live("click",function(e){$.NotReveal(e)||(e.preventDefault(),t($(this)))}),$('form.ajax a[rel="reveal"]').live("click",function(e){e.preventDefault(),t($(this).parents("tr"))});var t=function(t){t.hasClass("notshown")?e(t):t.hasClass("shown")?i(t):t.next("tr").find("div.collapse").off("hidden").on("hidden",function(t){t.stopPropagation()}).collapse("toggle")},e=function(t){t.nextUntil("tr.section").find("div.collapse").off("hidden").on("hidden",function(t){t.stopPropagation()}).collapse("show"),t.removeClass("notshown").addClass("shown"),t.find("i").removeClass("fa-caret-right").addClass("fa-caret-down")},i=function(t){t.nextUntil("tr.section").find("div.collapse").off("hidden").on("hidden",function(t){t.stopPropagation()}).collapse("hide"),t.removeClass("shown").addClass("notshown"),t.find("i").removeClass("fa-caret-down").addClass("fa-caret-right")};$("form.ajax tr.master").live("click",function(t){$.NotReveal(t)||(t.preventDefault(),$(this).next("tr").find("div.collapse").off("hidden").on("hidden",function(t){t.stopPropagation()}).collapse("toggle"))}),$("form.ajax tr.details").live("click",function(t){$.NotReveal(t)||(t.preventDefault(),t.stopPropagation(),$(this).find("div.collapse").off("hidden").on("hidden",function(t){t.stopPropagation()}).collapse("hide"))})});