/*
 * jQuery Migrate - v1.1.1 - 2013-02-16
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
(function(h,F,B){var E={};h.migrateWarnings=[];if(!h.migrateMute&&F.console&&console.log){console.log("JQMIGRATE: Logging is active")}if(h.migrateTrace===B){h.migrateTrace=true}h.migrateReset=function(){E={};h.migrateWarnings.length=0};function j(G){if(!E[G]){E[G]=true;h.migrateWarnings.push(G);if(F.console&&console.warn&&!h.migrateMute){console.warn("JQMIGRATE: "+G);if(h.migrateTrace&&console.trace){console.trace()}}}}function k(I,J,K,H){if(Object.defineProperty){try{Object.defineProperty(I,J,{configurable:true,enumerable:true,get:function(){j(H);return K},set:function(L){j(H);K=L}});return}catch(G){}}h._definePropertyBroken=true;I[J]=K}if(document.compatMode==="BackCompat"){j("jQuery is not compatible with Quirks Mode")}var b=h("<input/>",{size:1}).attr("size")&&h.attrFn,l=h.attr,C=h.attrHooks.value&&h.attrHooks.value.get||function(){return null},D=h.attrHooks.value&&h.attrHooks.value.set||function(){return B},x=/^(?:input|button)$/i,w=/^[238]$/,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,A=/^(?:checked|selected)$/i;k(h,"attrFn",b||{},"jQuery.attrFn is deprecated");h.attr=function(G,I,L,K){var H=I.toLowerCase(),J=G&&G.nodeType;if(K){if(l.length<4){j("jQuery.fn.attr( props, pass ) is deprecated")}if(G&&!w.test(J)&&(b?I in b:h.isFunction(h.fn[I]))){return h(G)[I](L)}}if(I==="type"&&L!==B&&x.test(G.nodeName)&&G.parentNode){j("Can't change the 'type' of an input or button in IE 6/7/8")}if(!h.attrHooks[H]&&u.test(H)){h.attrHooks[H]={get:function(N,O){var M,P=h.prop(N,O);return P===true||typeof P!=="boolean"&&(M=N.getAttributeNode(O))&&M.nodeValue!==false?O.toLowerCase():B},set:function(M,P,N){var O;if(P===false){h.removeAttr(M,N)}else{O=h.propFix[N]||N;if(O in M){M[O]=true}M.setAttribute(N,N.toLowerCase())}return N}};if(A.test(H)){j("jQuery.fn.attr('"+H+"') may use property instead of attribute")}}return l.call(h,G,I,L)};h.attrHooks.value={get:function(G,H){var I=(G.nodeName||"").toLowerCase();if(I==="button"){return C.apply(this,arguments)}if(I!=="input"&&I!=="option"){j("jQuery.fn.attr('value') no longer gets properties")}return H in G?G.value:null},set:function(G,I){var H=(G.nodeName||"").toLowerCase();if(H==="button"){return D.apply(this,arguments)}if(H!=="input"&&H!=="option"){j("jQuery.fn.attr('value', val) no longer sets properties")}G.value=I}};var i,c,o=h.fn.init,q=h.parseJSON,y=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;h.fn.init=function(J,G,I){var H;if(J&&typeof J==="string"&&!h.isPlainObject(G)&&(H=y.exec(J))&&H[1]){if(J.charAt(0)!=="<"){j("$(html) HTML strings must start with '<' character")}if(G&&G.context){G=G.context}if(h.parseHTML){return o.call(this,h.parseHTML(h.trim(J),G,true),G,I)}}return o.apply(this,arguments)};h.fn.init.prototype=h.fn;h.parseJSON=function(G){if(!G&&G!==null){j("jQuery.parseJSON requires a valid JSON string");return null}return q.apply(this,arguments)};h.uaMatch=function(H){H=H.toLowerCase();var G=/(chrome)[ \/]([\w.]+)/.exec(H)||/(webkit)[ \/]([\w.]+)/.exec(H)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(H)||/(msie) ([\w.]+)/.exec(H)||H.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(H)||[];return{browser:G[1]||"",version:G[2]||"0"}};if(!h.browser){i=h.uaMatch(navigator.userAgent);c={};if(i.browser){c[i.browser]=true;c.version=i.version}if(c.chrome){c.webkit=true}else{if(c.webkit){c.safari=true}}h.browser=c}k(h,"browser",h.browser,"jQuery.browser is deprecated");h.sub=function(){function H(K,J){return new H.fn.init(K,J)}h.extend(true,H,this);H.superclass=this;H.fn=H.prototype=this();H.fn.constructor=H;H.sub=this.sub;H.fn.init=function G(K,J){if(J&&J instanceof h&&!(J instanceof H)){J=H(J)}return h.fn.init.call(this,K,J,I)};H.fn.init.prototype=H.fn;var I=H(document);j("jQuery.sub() is deprecated");return H};h.ajaxSetup({converters:{"text json":h.parseJSON}});var n=h.fn.data;h.fn.data=function(I){var J,H,G=this[0];if(G&&I==="events"&&arguments.length===1){J=h.data(G,I);H=h._data(G,I);if((J===B||J===H)&&H!==B){j("Use of jQuery.fn.data('events') is deprecated");return H}}return n.apply(this,arguments)};var z=/\/(java|ecma)script/i,r=h.fn.andSelf||h.fn.addBack;h.fn.andSelf=function(){j("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return r.apply(this,arguments)};if(!h.clean){h.clean=function(I,G,J,O){G=G||document;G=!G.nodeType&&G[0]||G;G=G.ownerDocument||G;j("jQuery.clean() is deprecated");var L,H,K,M,N=[];h.merge(N,h.buildFragment(I,G).childNodes);if(J){K=function(P){if(!P.type||z.test(P.type)){return O?O.push(P.parentNode?P.parentNode.removeChild(P):P):J.appendChild(P)}};for(L=0;(H=N[L])!=null;L++){if(!(h.nodeName(H,"script")&&K(H))){J.appendChild(H);if(typeof H.getElementsByTagName!=="undefined"){M=h.grep(h.merge([],H.getElementsByTagName("script")),K);N.splice.apply(N,[L+1,0].concat(M));L+=M.length}}}}return N}}var d=h.event.add,e=h.event.remove,f=h.event.trigger,s=h.fn.toggle,p=h.fn.live,m=h.fn.die,a="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",t=new RegExp("\\b(?:"+a+")\\b"),v=/(?:^|\s)hover(\.\S+|)\b/,g=function(G){if(typeof(G)!=="string"||h.event.special.hover){return G}if(v.test(G)){j("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'")}return G&&G.replace(v,"mouseenter$1 mouseleave$1")};if(h.event.props&&h.event.props[0]!=="attrChange"){h.event.props.unshift("attrChange","attrName","relatedNode","srcElement")}if(h.event.dispatch){k(h.event,"handle",h.event.dispatch,"jQuery.event.handle is undocumented and deprecated")}h.event.add=function(H,K,I,G,J){if(H!==document&&t.test(K)){j("AJAX events should be attached to document: "+K)}d.call(this,H,g(K||""),I,G,J)};h.event.remove=function(G,K,H,J,I){e.call(this,G,g(K)||"",H,J,I)};h.fn.error=function(){var G=Array.prototype.slice.call(arguments,0);j("jQuery.fn.error() is deprecated");G.splice(0,0,"error");if(arguments.length){return this.bind.apply(this,G)}this.triggerHandler.apply(this,G);return this};h.fn.toggle=function(H,I){if(!h.isFunction(H)||!h.isFunction(I)){return s.apply(this,arguments)}j("jQuery.fn.toggle(handler, handler...) is deprecated");var G=arguments,J=H.guid||h.guid++,K=0,L=function(M){var N=(h._data(this,"lastToggle"+H.guid)||0)%K;h._data(this,"lastToggle"+H.guid,N+1);M.preventDefault();return G[N].apply(this,arguments)||false};L.guid=J;while(K<G.length){G[K++].guid=J}return this.click(L)};h.fn.live=function(I,G,H){j("jQuery.fn.live() is deprecated");if(p){return p.apply(this,arguments)}h(this.context).on(I,this.selector,G,H);return this};h.fn.die=function(H,G){j("jQuery.fn.die() is deprecated");if(m){return m.apply(this,arguments)}h(this.context).off(H,this.selector||"**",G);return this};h.event.trigger=function(I,G,H,J){if(!H&&!t.test(I)){j("Global events are undocumented and deprecated")}return f.call(this,I,G,H||document,J)};h.each(a.split("|"),function(G,H){h.event.special[H]={setup:function(){var I=this;if(I!==document){h.event.add(document,H+"."+h.guid,function(){h.event.trigger(H,null,I,true)});h._data(this,H,h.guid++)}return false},teardown:function(){if(this!==document){h.event.remove(document,H+"."+h._data(this,H))}return false}}})})(jQuery,window);!function(a){var c=function(e,f){this.init(e,f)};c.prototype={constructor:c,init:function(e,f){this.$element=a(e);this.options=a.extend({},a.fn.modalmanager.defaults,this.$element.data(),typeof f=="object"&&f);this.stack=[];this.backdropCount=0;if(this.options.resize){var g,h=this;a(window).on("resize.modal",function(){g&&clearTimeout(g);g=setTimeout(function(){for(var j=0;j<h.stack.length;j++){h.stack[j].isShown&&h.stack[j].layout()}},10)})}},createModal:function(e,f){a(e).modal(a.extend({manager:this},f))},appendModal:function(e){this.stack.push(e);var f=this;e.$element.on("show.modalmanager",d(function(g){var h=function(){e.isShown=true;var i=a.support.transition&&e.$element.hasClass("fade");f.$element.toggleClass("modal-open",f.hasOpenModal()).toggleClass("page-overflow",a(window).height()<f.$element.height());e.$parent=e.$element.parent();e.$container=f.createContainer(e);e.$element.appendTo(e.$container);f.backdrop(e,function(){e.$element.show();if(i){e.$element[0].offsetWidth}e.layout();e.$element.addClass("in").attr("aria-hidden",false);var j=function(){f.setFocus();e.$element.trigger("shown")};i?e.$element.one(a.support.transition.end,j):j()})};e.options.replace?f.replace(h):h()}));e.$element.on("hidden.modalmanager",d(function(g){f.backdrop(e);if(e.$backdrop){a.support.transition&&e.$element.hasClass("fade")?e.$backdrop.one(a.support.transition.end,function(){f.destroyModal(e)}):f.destroyModal(e)}else{f.destroyModal(e)}}));e.$element.on("destroy.modalmanager",d(function(g){f.removeModal(e)}))},destroyModal:function(f){f.destroy();var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e);if(!e){this.$element.removeClass("page-overflow")}this.removeContainer(f);this.setFocus()},hasOpenModal:function(){for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){return true}}return false},setFocus:function(){var f;for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){f=this.stack[e]}}if(!f){return}f.focus()},removeModal:function(e){e.$element.off(".modalmanager");if(e.$backdrop){this.removeBackdrop(e)}this.stack.splice(this.getIndexOfModal(e),1)},getModalAt:function(e){return this.stack[e]},getIndexOfModal:function(f){for(var e=0;e<this.stack.length;e++){if(f===this.stack[e]){return e}}},replace:function(e){var g;for(var f=0;f<this.stack.length;f++){if(this.stack[f].isShown){g=this.stack[f]}}if(g){this.$backdropHandle=g.$backdrop;g.$backdrop=null;e&&g.$element.one("hidden",d(a.proxy(e,this)));g.hide()}else{if(e){e()}}},removeBackdrop:function(e){e.$backdrop.remove();e.$backdrop=null},createBackdrop:function(f){var e;if(!this.$backdropHandle){e=a('<div class="modal-backdrop '+f+'" />').appendTo(this.$element)}else{e=this.$backdropHandle;e.off(".modalmanager");this.$backdropHandle=null;this.isLoading&&this.removeSpinner()}return e},removeContainer:function(e){e.$container.remove();e.$container=null},createContainer:function(f){var e;e=a('<div class="modal-scrollable">').css("z-index",b("modal",f?this.getIndexOfModal(f):this.stack.length)).appendTo(this.$element);if(f&&f.options.backdrop!="static"){e.on("click.modal",d(function(g){f.hide()}))}else{if(f){e.on("click.modal",d(function(g){f.attention()}))}}return e},backdrop:function(h,f){var e=h.$element.hasClass("fade")?"fade":"",i=h.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(h.isShown&&i){var g=a.support.transition&&e&&!this.$backdropHandle;h.$backdrop=this.createBackdrop(e);h.$backdrop.css("z-index",b("backdrop",this.getIndexOfModal(h)));if(g){h.$backdrop[0].offsetWidth}h.$backdrop.addClass("in");this.backdropCount+=1;g?h.$backdrop.one(a.support.transition.end,f):f()}else{if(!h.isShown&&h.$backdrop){h.$backdrop.removeClass("in");this.backdropCount-=1;var j=this;a.support.transition&&h.$element.hasClass("fade")?h.$backdrop.one(a.support.transition.end,function(){j.removeBackdrop(h)}):j.removeBackdrop(h)}else{if(f){f()}}}},removeSpinner:function(){this.$spinner&&this.$spinner.remove();this.$spinner=null;this.isLoading=false},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove();this.$backdropHandle=null;this.removeSpinner()},loading:function(f){f=f||function(){};this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",a(window).height()<this.$element.height());if(!this.isLoading){this.$backdropHandle=this.createBackdrop("fade");this.$backdropHandle[0].offsetWidth;this.$backdropHandle.css("z-index",b("backdrop",this.stack.length)).addClass("in");var e=a(this.options.spinner).css("z-index",b("modal",this.stack.length)).appendTo(this.$element).addClass("in");this.$spinner=a(this.createContainer()).append(e).on("click.modalmanager",a.proxy(this.loading,this));this.isLoading=true;a.support.transition?this.$backdropHandle.one(a.support.transition.end,f):f()}else{if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var g=this;a.support.transition?this.$backdropHandle.one(a.support.transition.end,function(){g.removeLoading()}):g.removeLoading()}else{if(f){f(this.isLoading)}}}}};var b=(function(){var f,e={};return function(j,i){if(typeof f==="undefined"){var h=a('<div class="modal hide" />').appendTo("body"),g=a('<div class="modal-backdrop hide" />').appendTo("body");e.modal=+h.css("z-index");e.backdrop=+g.css("z-index");f=e.modal-e.backdrop;h.remove();g.remove();g=h=null}return e[j]+(f*i)}}());function d(e){return function(f){if(this===f.target){return e.apply(this,arguments)}}}a.fn.modalmanager=function(f,e){return this.each(function(){var g=a(this),h=g.data("modalmanager");if(!h){g.data("modalmanager",(h=new c(this,f)))}if(typeof f==="string"){h[f].apply(h,[].concat(e))}})};a.fn.modalmanager.defaults={backdropLimit:999,resize:true,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};a.fn.modalmanager.Constructor=c}(jQuery);!function(a){var b=function(c,d){this.init(c,d)};b.prototype={constructor:b,init:function(c,e){this.options=e;this.$element=a(c).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote);var d=typeof this.options.manager==="function"?this.options.manager.call(this):this.options.manager;d=d.appendModal?d:a(d).modalmanager().data("modalmanager");d.appendModal(this)},toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=a.Event("show");if(this.isShown){return}this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.escape();this.tab();this.options.loading&&this.loading()},hide:function(c){c&&c.preventDefault();c=a.Event("hide");this.$element.trigger(c);if(!this.isShown||c.isDefaultPrevented()){return(this.isShown=false)}this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();a(document).off("focusin.modal");this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",true);a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var d=this.options.height?"height":"max-height",f=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var e=this;this.$element.css("margin-left",function(){if(/%/ig.test(e.options.width)){return -(parseInt(e.options.width)/2)+"%"}else{return -(a(this).width()/2)+"px"}})}else{this.$element.css("width","");this.$element.css("margin-left","")}this.$element.find(".modal-body").css("overflow","").css(d,"");if(f){this.$element.find(".modal-body").css("overflow","auto").css(d,f)}var c=a(window).height()-10<this.$element.height();if(c||this.options.modalOverflow){this.$element.css("margin-top",0).addClass("modal-overflow")}else{this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")}},tab:function(){var c=this;if(this.isShown&&this.options.consumeTab){this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(g){if(g.keyCode&&g.keyCode==9){var d=a(this),f=a(this);c.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(h){if(!h.shiftKey){d=d.data("tabindex")<a(this).data("tabindex")?d=a(this):f=a(this)}else{d=d.data("tabindex")>a(this).data("tabindex")?d=a(this):f=a(this)}});d[0]!==a(this)[0]?d.focus():f.focus();g.preventDefault()}})}else{if(!this.isShown){this.$element.off("keydown.tabindex.modal")}}},escape:function(){var c=this;if(this.isShown&&this.options.keyboard){if(!this.$element.attr("tabindex")){this.$element.attr("tabindex",-1)}this.$element.on("keyup.dismiss.modal",function(d){d.which==27&&c.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(a.support.transition.end);c.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);c.hideModal()})},hideModal:function(){var c=this.options.height?"height":"max-height";var d=this.options.height||this.options.maxHeight;if(d){this.$element.find(".modal-body").css("overflow","").css(c,"")}this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false},loading:function(d){d=d||function(){};var c=this.$element.hasClass("fade")?"fade":"";if(!this.isLoading){var e=a.support.transition&&c;this.$loading=a('<div class="loading-mask '+c+'">').append(this.options.spinner).appendTo(this.$element);if(e){this.$loading[0].offsetWidth}this.$loading.addClass("in");this.isLoading=true;e?this.$loading.one(a.support.transition.end,d):d()}else{if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var f=this;a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){f.removeLoading()}):f.removeLoading()}else{if(d){d(this.isLoading)}}}},focus:function(){var c=this.$element.find(this.options.focusOn);c=c.length?c:this.$element;c.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var c=this;setTimeout(function(){c.$element.addClass("animated").addClass(c.options.attentionAnimation)},0)}this.focus()},destroy:function(){var c=a.Event("destroy");this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.teardown()},teardown:function(){if(!this.$parent.length){this.$element.remove();this.$element=null;return}if(this.$parent!==this.$element.parent()){this.$element.appendTo(this.$parent)}this.$element.off(".modal");this.$element.removeData("modal");this.$element.removeClass("in").attr("aria-hidden",true)}};a.fn.modal=function(d,c){return this.each(function(){var e=a(this),f=e.data("modal"),g=a.extend({},a.fn.modal.defaults,e.data(),typeof d=="object"&&d);if(!f){e.data("modal",(f=new b(this,g)))}if(typeof d=="string"){f[d].apply(f,[].concat(c))}else{if(g.show){f.show()}}})};a.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};a.fn.modal.Constructor=b;a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(f){var d=a(this),g=d.attr("href"),c=a(d.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,""))),h=c.data("modal")?"toggle":a.extend({remote:!/#/.test(g)&&g},c.data(),d.data());f.preventDefault();c.modal(h).one("hide",function(){d.focus()})})})}(window.jQuery);/* X-editable - v1.5.0 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
(function(a){var b=function(c,d){this.options=a.extend({},a.fn.editableform.defaults,d);this.$div=a(c);if(!this.options.scope){this.options.scope=this}};b.prototype={constructor:b,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var c=this.$form.find(".editable-buttons");c.append(a.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){c.addClass("editable-buttons-bottom")}},render:function(){this.$loading=a(a.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.isSaving=false;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);a.when(this.input.render()).then(a.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(d){d.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");var c=(this.value===null||this.value===undefined||this.value==="")?this.options.defaultValue:this.value;this.input.value2input(c);this.$form.submit(a.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var d,c;if(this.$form){d=this.$form.outerWidth();c=this.$form.outerHeight();if(d){this.$loading.width(d)}if(c){this.$loading.height(c)}this.$form.hide()}else{d=this.$loading.parent().width();if(d){this.$loading.width(d)}}this.$loading.show()},showForm:function(c){this.$loading.hide();this.$form.show();if(c!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(g){var d=this.$form.find(".control-group"),c=this.$form.find(".editable-error-block"),f;if(g===false){d.removeClass(a.fn.editableform.errorGroupClass);c.removeClass(a.fn.editableform.errorBlockClass).empty().hide()}else{if(g){f=g.split("\n");for(var e=0;e<f.length;e++){f[e]=a("<div>").text(f[e]).html()}g=f.join("<br>")}d.addClass(a.fn.editableform.errorGroupClass);c.addClass(a.fn.editableform.errorBlockClass).html(g).show()}},submit:function(c){c.stopPropagation();c.preventDefault();var d,f=this.input.input2value();if(d=this.validate(f)){this.error(d);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(f)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var g=this.input.value2submit(f);this.isSaving=true;a.when(this.save(g)).done(a.proxy(function(h){this.isSaving=false;var e=typeof this.options.success==="function"?this.options.success.call(this.options.scope,h,f):null;if(e===false){this.error(false);this.showForm(false);return}if(typeof e==="string"){this.error(e);this.showForm();return}if(e&&typeof e==="object"&&e.hasOwnProperty("newValue")){f=e.newValue}this.error(false);this.value=f;this.$div.triggerHandler("save",{newValue:f,submitValue:g,response:h})},this)).fail(a.proxy(function(h){this.isSaving=false;var e;if(typeof this.options.error==="function"){e=this.options.error.call(this.options.scope,h,f)}else{e=typeof h==="string"?h:h.responseText||h.statusText||"Unknown error!"}this.error(e);this.showForm()},this))},save:function(f){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,true);var d=(typeof this.options.pk==="function")?this.options.pk.call(this.options.scope):this.options.pk,e=!!(typeof this.options.url==="function"||(this.options.url&&((this.options.send==="always")||(this.options.send==="auto"&&d!==null&&d!==undefined)))),c;if(e){this.showLoading();c={name:this.options.name||"",value:f,pk:d};if(typeof this.options.params==="function"){c=this.options.params.call(this.options.scope,c)}else{this.options.params=a.fn.editableutils.tryParseJson(this.options.params,true);a.extend(c,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,c)}else{return a.ajax(a.extend({url:this.options.url,data:c,type:"POST"},this.options.ajaxOptions))}}},validate:function(c){if(c===undefined){c=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,c)}},option:function(c,d){if(c in this.options){this.options[c]=d}if(c==="value"){this.setValue(d)}},setValue:function(d,c){if(c){this.value=this.input.str2value(d)}else{this.value=d}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};a.fn.editableform=function(d){var c=arguments;return this.each(function(){var e=a(this),f=e.data("editableform"),g=typeof d==="object"&&d;if(!f){e.data("editableform",(f=new b(this,g)))}if(typeof d==="string"){f[d].apply(f,Array.prototype.slice.call(c,1))}})};a.fn.editableform.Constructor=b;a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';a.fn.editableform.loading='<div class="editableform-loading"></div>';a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';a.fn.editableform.errorGroupClass=null;a.fn.editableform.errorBlockClass="editable-error";a.fn.editableform.engine="jquery"}(window.jQuery));(function(a){a.fn.editableutils={inherit:function(b,d){var c=function(){};c.prototype=d.prototype;b.prototype=new c();b.prototype.constructor=b;b.superclass=d.prototype},setCursorPosition:function(b,c){if(b.setSelectionRange){b.setSelectionRange(c,c)}else{if(b.createTextRange){var d=b.createTextRange();d.collapse(true);d.moveEnd("character",c);d.moveStart("character",c);d.select()}}},tryParseJson:function(c,d){if(typeof c==="string"&&c.length&&c.match(/^[\{\[].*[\}\]]$/)){if(d){try{c=(new Function("return "+c))()}catch(b){}finally{return c}}else{c=(new Function("return "+c))()}}return c},sliceObj:function(h,f,b){var d,e,g={};if(!a.isArray(f)||!f.length){return g}for(var c=0;c<f.length;c++){d=f[c];if(h.hasOwnProperty(d)){g[d]=h[d]}if(b===true){continue}e=d.toLowerCase();if(h.hasOwnProperty(e)){g[d]=h[e]}}return g},getConfigData:function(b){var c={};a.each(b.data(),function(d,e){if(typeof e!=="object"||(e&&typeof e==="object"&&(e.constructor===Object||e.constructor===Array))){c[d]=e}});return c},objectKeys:function(c){if(Object.keys){return Object.keys(c)}else{if(c!==Object(c)){throw new TypeError("Object.keys called on a non-object")}var b=[],d;for(d in c){if(Object.prototype.hasOwnProperty.call(c,d)){b.push(d)}}return b}},escape:function(b){return a("<div>").text(b).html()},itemsByValue:function(g,e,h){if(!e||g===null){return[]}if(typeof(h)!=="function"){var b=h||"value";h=function(i){return i[b]}}var c=a.isArray(g),d=[],f=this;a.each(e,function(j,l){if(l.children){d=d.concat(f.itemsByValue(g,l.children,h))}else{if(c){if(a.grep(g,function(i){return i==(l&&typeof l==="object"?h(l):l)}).length){d.push(l)}}else{var k=(l&&(typeof l==="object"))?h(l):l;if(g==k){d.push(l)}}}});return d},createInput:function(c){var e,f,b,d=c.type;if(d==="date"){if(c.mode==="inline"){if(a.fn.editabletypes.datefield){d="datefield"}else{if(a.fn.editabletypes.dateuifield){d="dateuifield"}}}else{if(a.fn.editabletypes.date){d="date"}else{if(a.fn.editabletypes.dateui){d="dateui"}}}if(d==="date"&&!a.fn.editabletypes.date){d="combodate"}}if(d==="datetime"&&c.mode==="inline"){d="datetimefield"}if(d==="wysihtml5"&&!a.fn.editabletypes[d]){d="textarea"}if(typeof a.fn.editabletypes[d]==="function"){e=a.fn.editabletypes[d];f=this.sliceObj(c,this.objectKeys(e.defaults));b=new e(f);return b}else{a.error("Unknown type: "+d);return false}},supportsTransitions:function(){var c=document.body||document.documentElement,f=c.style,e="transition",g=["Moz","Webkit","Khtml","O","ms"];if(typeof f[e]==="string"){return true}e=e.charAt(0).toUpperCase()+e.substr(1);for(var d=0;d<g.length;d++){if(typeof f[g[d]+e]==="string"){return true}}return false}}}(window.jQuery));(function(a){var c=function(d,e){this.init(d,e)};var b=function(d,e){this.init(d,e)};c.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(d,e){this.$element=a(d);this.options=a.extend({},a.fn.editableContainer.defaults,e);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=false;this.$element.on("destroyed",a.proxy(function(){this.destroy()},this));if(!a(document).data("editable-handlers-attached")){a(document).on("keyup.editable",function(f){if(f.which===27){a(".editable-open").editableContainer("hide")}});a(document).on("click.editable",function(g){var f=a(g.target),j,h=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!a.contains(document.documentElement,g.target)){return}if(f.is(document)){return}for(j=0;j<h.length;j++){if(f.is(h[j])||f.parents(h[j]).length){return}}c.prototype.closeOthers(g.target)});a(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!a.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}for(var d in this.options){if(d in this.defaults){this.containerOptions[d]=this.options[d]}else{this.formOptions[d]=this.options[d]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){var d;if(this.containerDataName){if(d=this.$element.data(this.containerDataName)){return d}}d=this.$element.data(this.containerName);return d},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){if(this.delayedHide){this.hide(this.delayedHide.reason);this.delayedHide=false}else{this.setPosition()}},this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(d){this.$element.addClass("editable-open");if(d!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=a("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(d){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}if(this.$form.data("editableform").isSaving){this.delayedHide={reason:d};return}else{this.delayedHide=false}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",d||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(d){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(d)}},setPosition:function(){},save:function(d,f){this.$element.triggerHandler("save",f);this.hide("save")},option:function(d,e){this.options[d]=e;if(d in this.containerOptions){this.containerOptions[d]=e;this.setContainerOption(d,e)}else{this.formOptions[d]=e;if(this.$form){this.$form.editableform("option",d,e)}}},setContainerOption:function(d,e){this.call("option",d,e)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(d){a(".editable-open").each(function(h,g){if(g===d||a(g).find(d).length){return}var e=a(g),f=e.data("editableContainer");if(!f){return}if(f.options.onblur==="cancel"){e.data("editableContainer").hide("onblur")}else{if(f.options.onblur==="submit"){e.data("editableContainer").tip().find("form").submit()}}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};a.fn.editableContainer=function(e){var d=arguments;return this.each(function(){var f=a(this),i="editableContainer",h=f.data(i),j=typeof e==="object"&&e,g=(j.mode==="inline")?b:c;if(!h){f.data(i,(h=new g(this,j)))}if(typeof e==="string"){h[e].apply(h,Array.prototype.slice.call(d,1))}})};a.fn.editableContainer.Popup=c;a.fn.editableContainer.Inline=b;a.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(d){if(d.handler){d.handler()}}}}(window.jQuery));(function(a){a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})}(window.jQuery));(function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.editable.defaults,d,a.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}if(this.options.highlight&&!a.fn.editableutils.supportsTransitions()){this.options.highlight=false}};b.prototype={constructor:b,init:function(){var e=false,c,d;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=a.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(a.trim(this.$element.html()));e=true}else{this.options.value=a.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.input.type==="textarea"){this.$element.addClass("editable-pre-wrapped")}if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",a.proxy(function(g){if(!this.options.disabled){g.preventDefault()}if(this.options.toggle==="mouseenter"){this.show()}else{var f=(this.options.toggle!=="click");this.toggle(f)}},this))}else{this.$element.attr("tabindex",-1)}if(typeof this.options.display==="function"){this.options.autotext="always"}switch(this.options.autotext){case"always":c=true;break;case"auto":c=!a.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!e;break;default:c=false}a.when(c?this.render():true).then(a.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var c=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",c,a.proxy(function(f){var d=a(f.target);if(!d.data("editable")){if(d.hasClass(this.options.emptyclass)){d.empty()}d.editable(this.options).trigger(f)}},this))},render:function(c){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,c)}else{if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,c)}else{return this.input.value2html(this.value,this.$element[0])}}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable()}else{this.disable()}},option:function(c,d){if(c&&typeof c==="object"){a.each(c,a.proxy(function(e,f){this.option(a.trim(e),f)},this));return}this.options[c]=d;if(c==="disabled"){return d?this.disable():this.enable()}if(c==="value"){this.setValue(d)}if(this.container){this.container.option(c,d)}if(this.input.option){this.input.option(c,d)}},handleEmpty:function(c){if(this.options.display===false){return}if(c!==undefined){this.isEmpty=c}else{if(typeof(this.input.isEmpty)==="function"){this.isEmpty=this.input.isEmpty(this.$element)}else{this.isEmpty=a.trim(this.$element.html())===""}}if(!this.options.disabled){if(this.isEmpty){this.$element.html(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else{if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(c){if(this.options.disabled){return}if(!this.container){var d=a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(d);this.$element.on("save.internal",a.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else{if(this.container.tip().is(":visible")){return}}this.container.show(c)},hide:function(){if(this.container){this.container.hide()}},toggle:function(c){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(c)}},save:function(f,g){if(this.options.unsavedclass){var h=false;h=h||typeof this.options.url==="function";h=h||this.options.display===false;h=h||g.response!==undefined;h=h||(this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(g.newValue));if(h){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}if(this.options.highlight){var c=this.$element,d=c.css("background-color");c.css("background-color",this.options.highlight);setTimeout(function(){if(d==="transparent"){d=""}c.css("background-color",d);c.addClass("editable-bg-transition");setTimeout(function(){c.removeClass("editable-bg-transition")},1700)},10)}this.setValue(g.newValue,false,g.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(e,c,d){if(c){this.value=this.input.str2value(e)}else{this.value=e}if(this.container){this.container.option("value",this.value)}a.when(this.render(d)).then(a.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}this.input.destroy();if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};a.fn.editable=function(h){var i={},d=arguments,f="editable";switch(h){case"validate":this.each(function(){var k=a(this),l=k.data(f),m;if(l&&(m=l.validate())){i[l.options.name]=m}});return i;case"getValue":if(arguments.length===2&&arguments[1]===true){i=this.eq(0).data(f).value}else{this.each(function(){var k=a(this),l=k.data(f);if(l&&l.value!==undefined&&l.value!==null){i[l.options.name]=l.input.value2submit(l.value)}})}return i;case"submit":var e=arguments[1]||{},c=this,g=this.editable("validate"),j;if(a.isEmptyObject(g)){j=this.editable("getValue");if(e.data){a.extend(j,e.data)}a.ajax(a.extend({url:e.url,data:j,type:"POST"},e.ajaxOptions)).success(function(k){if(typeof e.success==="function"){e.success.call(c,k,e)}}).error(function(){if(typeof e.error==="function"){e.error.apply(c,arguments)}})}else{if(typeof e.error==="function"){e.error.call(c,g)}}return this}return this.each(function(){var k=a(this),l=k.data(f),m=typeof h==="object"&&h;if(m&&m.selector){l=new b(this,m);return}if(!l){k.data(f,(l=new b(this,m)))}if(typeof h==="string"){l[h].apply(l,Array.prototype.slice.call(d,1))}})};a.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery));(function(a){a.fn.editabletypes={};var b=function(){};b.prototype={init:function(e,d,c){this.type=e;this.options=a.extend({},c,d)},prerender:function(){this.$tpl=a(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(d,c){a(c)[this.options.escape?"text":"html"](a.trim(d))},html2value:function(c){return a("<div>").html(c).text()},value2str:function(c){return c},str2value:function(c){return c},value2submit:function(c){return c},value2input:function(c){this.$input.val(c)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(c){return a("<div>").text(c).html()},autosubmit:function(){},destroy:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(c){if(this.options[c]!==undefined&&this.options[c]!==null){this.$input.attr(c,this.options[c])}},option:function(c,d){this.options[c]=d}};b.defaults={tpl:"",inputclass:null,escape:true,scope:null,showbuttons:true};a.extend(a.fn.editabletypes,{abstractinput:b})}(window.jQuery));(function(a){var b=function(c){};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){var c=a.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();c.resolve()},function(){this.error=this.options.sourceError;c.resolve()});return c.promise()},html2value:function(c){return null},value2html:function(h,e,d,f){var c=a.Deferred(),g=function(){if(typeof d==="function"){d.call(e,h,this.sourceData,f)}else{this.value2htmlFinal(h,e)}c.resolve()};if(h===null){g.call(this)}else{this.onSourceReady(g,function(){c.resolve()})}return c.promise()},onSourceReady:function(j,h){var i;if(a.isFunction(this.options.source)){i=this.options.source.call(this.options.scope);this.sourceData=null}else{i=this.options.source}if(this.options.sourceCache&&a.isArray(this.sourceData)){j.call(this);return}try{i=a.fn.editableutils.tryParseJson(i,false)}catch(g){h.call(this);return}if(typeof i==="string"){if(this.options.sourceCache){var f=i,d;if(!a(document).data(f)){a(document).data(f,{})}d=a(document).data(f);if(d.loading===false&&d.sourceData){this.sourceData=d.sourceData;this.doPrepend();j.call(this);return}else{if(d.loading===true){d.callbacks.push(a.proxy(function(){this.sourceData=d.sourceData;this.doPrepend();j.call(this)},this));d.err_callbacks.push(a.proxy(h,this));return}else{d.loading=true;d.callbacks=[];d.err_callbacks=[]}}}var c=a.extend({url:i,type:"get",cache:false,dataType:"json",success:a.proxy(function(e){if(d){d.loading=false}this.sourceData=this.makeArray(e);if(a.isArray(this.sourceData)){if(d){d.sourceData=this.sourceData;a.each(d.callbacks,function(){this.call()})}this.doPrepend();j.call(this)}else{h.call(this);if(d){a.each(d.err_callbacks,function(){this.call()})}}},this),error:a.proxy(function(){h.call(this);if(d){d.loading=false;a.each(d.err_callbacks,function(){this.call()})}},this)},this.options.sourceOptions);a.ajax(c)}else{this.sourceData=this.makeArray(i);if(a.isArray(this.sourceData)){this.doPrepend();j.call(this)}else{h.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!a.isArray(this.prependData)){if(a.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(a.isArray(this.prependData)&&a.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(d,c){},makeArray:function(d){var c,h,j=[],f,g;if(!d||typeof d==="string"){return null}if(a.isArray(d)){g=function(i,l){h={value:i,text:l};if(c++>=2){return false}};for(var e=0;e<d.length;e++){f=d[e];if(typeof f==="object"){c=0;a.each(f,g);if(c===1){j.push(h)}else{if(c>1){if(f.children){f.children=this.makeArray(f.children)}j.push(f)}}}else{j.push({value:f,text:f})}}}else{a.each(d,function(i,l){j.push({value:i,text:l})})}return j},option:function(c,d){this.options[c]=d;if(c==="source"){this.sourceData=null}if(c==="prepend"){this.prependData=null}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true,sourceOptions:null});a.fn.editabletypes.list=b}(window.jQuery));(function(a){var b=function(c){this.init("text",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=a('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(c){if(~a.inArray(c.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var d=this;this.t=setTimeout(function(){d.toggleClear(c)},100)},this)).parent().css("position","relative");this.$clear.click(a.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(c){if(!this.$clear){return}var d=this.$input.val().length,f=this.$clear.is(":visible");if(d&&!f){this.$clear.show()}if(!d&&f){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});a.fn.editabletypes.text=b}(window.jQuery));(function(a){var b=function(c){this.init("textarea",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(c){if(c.ctrlKey&&c.which===13){a(this).closest("form").submit()}})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});a.fn.editabletypes.textarea=b}(window.jQuery));(function(a){var b=function(c){this.init("select",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){this.$input.empty();var c=function(d,f){var e;if(a.isArray(f)){for(var g=0;g<f.length;g++){e={};if(f[g].children){e.label=f[g].text;d.append(c(a("<optgroup>",e),f[g].children))}else{e.value=f[g].value;if(f[g].disabled){e.disabled=true}d.append(a("<option>",e).text(f[g].text))}}}return d};c(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(d){if(d.which===13){a(this).closest("form").submit()}})},value2htmlFinal:function(f,c){var e="",d=a.fn.editableutils.itemsByValue(f,this.sourceData);if(d.length){e=d[0].text}a.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,c)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"});a.fn.editabletypes.select=b}(window.jQuery));(function(a){var b=function(c){this.init("checklist",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){var d,c;this.$tpl.empty();if(!a.isArray(this.sourceData)){return}for(var e=0;e<this.sourceData.length;e++){d=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[e].value})).append(a("<span>").text(" "+this.sourceData[e].text));a("<div>").append(d).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(c){return a.isArray(c)?c.sort().join(a.trim(this.options.separator)):""},str2value:function(d){var c,e=null;if(typeof d==="string"&&d.length){c=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*");e=d.split(c)}else{if(a.isArray(d)){e=d}else{e=[d]}}return e},value2input:function(c){this.$input.prop("checked",false);if(a.isArray(c)&&c.length){this.$input.each(function(f,e){var d=a(e);a.each(c,function(g,h){if(d.val()==h){d.prop("checked",true)}})})}},input2value:function(){var c=[];this.$input.filter(":checked").each(function(e,d){c.push(a(d).val())});return c},value2htmlFinal:function(g,d){var f=[],c=a.fn.editableutils.itemsByValue(g,this.sourceData),e=this.options.escape;if(c.length){a.each(c,function(h,k){var j=e?a.fn.editableutils.escape(k.text):k.text;f.push(j)});a(d).html(f.join("<br>"))}else{a(d).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(c){if(c.which===13){a(this).closest("form").submit()}})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});a.fn.editabletypes.checklist=b}(window.jQuery));(function(a){var b=function(c){this.init("password",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{value2html:function(d,c){if(d){a(c).text("[hidden]")}else{a(c).empty()}},html2value:function(c){return null}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});a.fn.editabletypes.password=b}(window.jQuery));(function(a){var b=function(c){this.init("email",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});a.fn.editabletypes.email=b}(window.jQuery));(function(a){var b=function(c){this.init("url",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});a.fn.editabletypes.url=b}(window.jQuery));(function(a){var b=function(c){this.init("tel",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});a.fn.editabletypes.tel=b}(window.jQuery));(function(a){var b=function(c){this.init("number",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{render:function(){b.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});a.fn.editabletypes.number=b}(window.jQuery));(function(a){var b=function(c){this.init("range",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.number);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}});b.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});a.fn.editabletypes.range=b}(window.jQuery));(function(a){var b=function(c){this.init("time",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});a.fn.editabletypes.time=b}(window.jQuery));(function(a){var b=function(d){this.init("select2",d,b.defaults);d.select2=d.select2||{};this.sourceData=null;if(d.placeholder){d.select2.placeholder=d.placeholder}if(!d.select2.tags&&d.source){var e=d.source;if(a.isFunction(d.source)){e=d.source.call(d.scope)}if(typeof e==="string"){d.select2.ajax=d.select2.ajax||{};if(!d.select2.ajax.data){d.select2.ajax.data=function(f){return{query:f}}}if(!d.select2.ajax.results){d.select2.ajax.results=function(f){return{results:f}}}d.select2.ajax.url=e}else{this.sourceData=this.convertSource(e);d.select2.data=this.sourceData}}this.options.select2=a.extend({},b.defaults.select2,d.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote=("ajax" in this.options.select2);this.idFunc=this.options.select2.id;if(typeof(this.idFunc)!=="function"){var c=this.idFunc||"id";this.idFunc=function(f){return f[c]}}this.formatSelection=this.options.select2.formatSelection;if(typeof(this.formatSelection)!=="function"){this.formatSelection=function(f){return f.text}}};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();if(this.isRemote){this.$input.on("select2-loaded",a.proxy(function(c){this.sourceData=c.items.results},this))}if(this.isMultiple){this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(g,d){var e="",c,f=this;if(this.options.select2.tags){c=g}else{if(this.sourceData){c=a.fn.editableutils.itemsByValue(g,this.sourceData,this.idFunc)}else{}}if(a.isArray(c)){e=[];a.each(c,function(h,i){e.push(i&&typeof i==="object"?f.formatSelection(i):i)})}else{if(c){e=f.formatSelection(c)}}e=a.isArray(e)?e.join(this.options.viewseparator):e;b.superclass.value2html.call(this,e,d)},html2value:function(c){return this.options.select2.tags?this.str2value(c,this.options.viewseparator):null},value2input:function(f){if(!this.$input.data("select2")){this.$input.val(f);this.$input.select2(this.options.select2)}else{this.$input.val(f).trigger("change",true)}if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var c=this.options.select2.id,d=this.options.select2.formatSelection;if(!c&&!d){var e={id:f,text:a(this.options.scope).text()};this.$input.select2("data",e)}}},input2value:function(){return this.$input.select2("val")},str2value:function(f,e){if(typeof f!=="string"||!this.isMultiple){return f}e=e||this.options.select2.separator||a.fn.select2.defaults.separator;var g,c,d;if(f===null||f.length<1){return null}g=f.split(e);for(c=0,d=g.length;c<d;c=c+1){g[c]=a.trim(g[c])}return g},autosubmit:function(){this.$input.on("change",function(c,d){if(!d){a(this).closest("form").submit()}})},convertSource:function(d){if(a.isArray(d)&&d.length&&d[0].value!==undefined){for(var c=0;c<d.length;c++){if(d[c].value!==undefined){d[c].id=d[c].value;delete d[c].value}}}return d},destroy:function(){if(this.$input.data("select2")){this.$input.select2("destroy")}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});a.fn.editabletypes.select2=b}(window.jQuery));(function(a){var b=function(c,d){this.$element=a(c);if(!this.$element.is("input")){a.error("Combodate should be applied to INPUT element");return}this.options=a.extend({},a.fn.combodate.defaults,d,this.$element.data());this.init()};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=a('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",a.proxy(function(){this.$element.val(this.getValue())},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var c=this.options.template;a.each(this.map,function(d,g){g=g[0];var e=new RegExp(g+"+"),f=g.length>1?g.substring(1,2):g;c=c.replace(e,"{"+f+"}")});c=c.replace(/ /g,"&nbsp;");a.each(this.map,function(d,f){f=f[0];var e=f.length>1?f.substring(1,2):f;c=c.replace("{"+e+"}",'<select class="'+d+'"></select>')});return c},initCombos:function(){var c=this;a.each(this.map,function(h,i){var d=c.$widget.find("."+h),e,g;if(d.length){c["$"+h]=d;e="fill"+h.charAt(0).toUpperCase()+h.slice(1);g=c[e]();c["$"+h].html(c.renderItems(g))}})},initItems:function(d){var f=[],e;if(this.options.firstItem==="name"){e=moment.relativeTime||moment.langData()._relativeTime;var c=typeof e[d]==="function"?e[d](1,true,d,false):e[d];c=c.split(" ").reverse()[0];f.push(["",c])}else{if(this.options.firstItem==="empty"){f.push(["",""])}}return f},renderItems:function(d){var e=[];for(var c=0;c<d.length;c++){e.push('<option value="'+d[c][0]+'">'+d[c][1]+"</option>")}return e.join("\n")},fillDay:function(){var d=this.initItems("d"),e,c,f=this.options.template.indexOf("DD")!==-1;for(c=1;c<=31;c++){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillMonth:function(){var d=this.initItems("M"),f,c,e=this.options.template.indexOf("MMMM")!==-1,g=this.options.template.indexOf("MMM")!==-1,h=this.options.template.indexOf("MM")!==-1;for(c=0;c<=11;c++){if(e){f=moment().date(1).month(c).format("MMMM")}else{if(g){f=moment().date(1).month(c).format("MMM")}else{if(h){f=this.leadZero(c+1)}else{f=c+1}}}d.push([c,f])}return d},fillYear:function(){var d=[],f,c,e=this.options.template.indexOf("YYYY")!==-1;for(c=this.options.maxYear;c>=this.options.minYear;c--){f=e?c:(c+"").substring(2);d[this.options.yearDescending?"push":"unshift"]([c,f])}d=this.initItems("y").concat(d);return d},fillHour:function(){var f=this.initItems("h"),j,e,c=this.options.template.indexOf("h")!==-1,d=this.options.template.indexOf("H")!==-1,k=this.options.template.toLowerCase().indexOf("hh")!==-1,h=c?1:0,g=c?12:23;for(e=h;e<=g;e++){j=k?this.leadZero(e):e;f.push([e,j])}return f},fillMinute:function(){var d=this.initItems("m"),e,c,f=this.options.template.indexOf("mm")!==-1;for(c=0;c<=59;c+=this.options.minuteStep){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillSecond:function(){var d=this.initItems("s"),e,c,f=this.options.template.indexOf("ss")!==-1;for(c=0;c<=59;c+=this.options.secondStep){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillAmpm:function(){var c=this.options.template.indexOf("a")!==-1,d=this.options.template.indexOf("A")!==-1,e=[["am",c?"am":"AM"],["pm",c?"pm":"PM"]];return e},getValue:function(d){var c,g={},f=this,e=false;a.each(this.map,function(i,j){if(i==="ampm"){return}var h=i==="day"?1:0;g[i]=f["$"+i]?parseInt(f["$"+i].val(),10):h;if(isNaN(g[i])){e=true;return false}});if(e){return""}if(this.$ampm){if(g.hour===12){g.hour=this.$ampm.val()==="am"?0:12}else{g.hour=this.$ampm.val()==="am"?g.hour:g.hour+12}}c=moment([g.year,g.month,g.day,g.hour,g.minute,g.second]);this.highlight(c);d=d===undefined?this.options.format:d;if(d===null){return c.isValid()?c:null}else{return c.isValid()?c.format(d):""}},setValue:function(f){if(!f){return}var c=typeof f==="string"?moment(f,this.options.format):moment(f),e=this,g={};function d(h,j){var i={};h.children("option").each(function(l,m){var n=a(m).attr("value"),k;if(n===""){return}k=Math.abs(n-j);if(typeof i.distance==="undefined"||k<i.distance){i={value:n,distance:k}}});return i.value}if(c.isValid()){a.each(this.map,function(h,i){if(h==="ampm"){return}g[h]=c[i[1]]()});if(this.$ampm){if(g.hour>=12){g.ampm="pm";if(g.hour>12){g.hour-=12}}else{g.ampm="am";if(g.hour===0){g.hour=12}}}a.each(g,function(h,i){if(e["$"+h]){if(h==="minute"&&e.options.minuteStep>1&&e.options.roundTime){i=d(e["$"+h],i)}if(h==="second"&&e.options.secondStep>1&&e.options.roundTime){i=d(e["$"+h],i)}e["$"+h].val(i)}});this.$element.val(c.format(this.options.format))}},highlight:function(c){if(!c.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(c){return c<=9?"0"+c:c},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};a.fn.combodate=function(f){var e,c=Array.apply(null,arguments);c.shift();if(f==="getValue"&&this.length&&(e=this.eq(0).data("combodate"))){return e.getValue.apply(e,c)}return this.each(function(){var d=a(this),g=d.data("combodate"),h=typeof f=="object"&&f;if(!g){d.data("combodate",(g=new b(this,h)))}if(typeof f=="string"&&typeof g[f]=="function"){g[f].apply(g,c)}})};a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true}}(window.jQuery));(function(a){var b=function(c){this.init("combodate",c,b.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}c.combodate=a.fn.editableutils.tryParseJson(c.combodate,true);this.options.combodate=a.extend({},b.defaults.combodate,c.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.$input.combodate(this.options.combodate);if(a.fn.editableform.engine==="bs3"){this.$input.siblings().find("select").addClass("form-control")}if(this.options.inputclass){this.$input.siblings().find("select").addClass(this.options.inputclass)}},value2html:function(e,c){var d=e?e.format(this.options.viewformat):"";b.superclass.value2html.call(this,d,c)},html2value:function(c){return c?moment(c,this.options.viewformat):null},value2str:function(c){return c?c.format(this.options.format):""},str2value:function(c){return c?moment(c,this.options.format):null},value2submit:function(c){return this.value2str(c)},value2input:function(c){this.$input.combodate("setValue",c)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});a.fn.editabletypes.combodate=b}(window.jQuery));(function(a){var b=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template);this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){b.apply(this);var d=this.input.options.inputclass===null||this.input.options.inputclass===false;var c="input-medium";var e="text,select,textarea,password,email,url,tel,number,range,time".split(",");if(~a.inArray(this.input.type,e)&&d){this.input.options.inputclass=c;this.input.$input.addClass(c)}}});a.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>';a.fn.editableform.errorGroupClass="error";a.fn.editableform.errorBlockClass=null;a.fn.editableform.engine="bs2"}(window.jQuery));(function(a){a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:a.fn.popover&&a(a.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",defaults:a.fn.popover.defaults,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:this.defaults.template});var b;if(this.$element.data("template")){b=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(b){this.$element.data("template",b)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(b,c){this.container().options[b]=c},setPosition:function(){(function(){var b=this.tip(),e,g,d,c,f,h,l,i,j,k;f=typeof this.options.placement==="function"?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;e=/in/.test(f);b.removeClass("top right bottom left").css({top:0,left:0,display:"block"});g=this.getPosition(e);d=b[0].offsetWidth;c=b[0].offsetHeight;f=e?f.split(" ")[1]:f;i={top:g.top+g.height,left:g.left+g.width/2-d/2};l={top:g.top-c,left:g.left+g.width/2-d/2};j={top:g.top+g.height/2-c/2,left:g.left-d};k={top:g.top+g.height/2-c/2,left:g.left+g.width};switch(f){case"bottom":if((i.top+c)>(a(window).scrollTop()+a(window).height())){if(l.top>a(window).scrollTop()){f="top"}else{if((k.left+d)<(a(window).scrollLeft()+a(window).width())){f="right"}else{if(j.left>a(window).scrollLeft()){f="left"}else{f="right"}}}}break;case"top":if(l.top<a(window).scrollTop()){if((i.top+c)<(a(window).scrollTop()+a(window).height())){f="bottom"}else{if((k.left+d)<(a(window).scrollLeft()+a(window).width())){f="right"}else{if(j.left>a(window).scrollLeft()){f="left"}else{f="right"}}}}break;case"left":if(j.left<a(window).scrollLeft()){if((k.left+d)<(a(window).scrollLeft()+a(window).width())){f="right"}else{if(l.top>a(window).scrollTop()){f="top"}else{if(l.top>a(window).scrollTop()){f="bottom"}else{f="right"}}}}break;case"right":if((k.left+d)>(a(window).scrollLeft()+a(window).width())){if(j.left>a(window).scrollLeft()){f="left"}else{if(l.top>a(window).scrollTop()){f="top"}else{if(l.top>a(window).scrollTop()){f="bottom"}}}}break}switch(f){case"bottom":h=i;break;case"top":h=l;break;case"left":h=j;break;case"right":h=k;break}b.offset(h).addClass(f).addClass("in")}).call(this.container())}})}(window.jQuery));(function(a){function l(){return new Date(Date.UTC.apply(Date,arguments))}function m(){var n=new Date();return l(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())}var c=function(n,o){var p=this;this._process_options(o);this.element=a(n);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=a(g.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(q,r){return parseInt(r)+1})}this._allow_update=false;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};c.prototype={constructor:c,_process_options:function(r){this._o=a.extend({},this._o,r);var q=this.o=a.extend({},this._o);var p=q.language;if(!e[p]){p=p.split("-")[0];if(!e[p]){p=f.language}}q.language=p;switch(q.startView){case 2:case"decade":q.startView=2;break;case 1:case"year":q.startView=1;break;default:q.startView=0}switch(q.minViewMode){case 1:case"months":q.minViewMode=1;break;case 2:case"years":q.minViewMode=2;break;default:q.minViewMode=0}q.startView=Math.max(q.startView,q.minViewMode);q.weekStart%=7;q.weekEnd=((q.weekStart+6)%7);var n=g.parseFormat(q.format);if(q.startDate!==-Infinity){q.startDate=g.parseDate(q.startDate,n,q.language)}if(q.endDate!==Infinity){q.endDate=g.parseDate(q.endDate,n,q.language)}q.daysOfWeekDisabled=q.daysOfWeekDisabled||[];if(!a.isArray(q.daysOfWeekDisabled)){q.daysOfWeekDisabled=q.daysOfWeekDisabled.split(/[,\s]*/)}q.daysOfWeekDisabled=a.map(q.daysOfWeekDisabled,function(o){return parseInt(o,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(p){for(var q=0,n,o;q<p.length;q++){n=p[q][0];o=p[q][1];n.on(o)}},_unapplyEvents:function(p){for(var q=0,n,o;q<p.length;q++){n=p[q][0];o=p[q][1];n.off(o)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:a.proxy(this.show,this)}]]}}}this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(n){if(!(this.element.is(n.target)||this.element.find(n.target).size()||this.picker.is(n.target)||this.picker.find(n.target).size())){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(p,n){var o=n||this.date,q=new Date(o.getTime()+(o.getTimezoneOffset()*60000));this.element.trigger({type:p,date:q,format:a.proxy(function(r){var s=r||this.o.format;return g.formatDate(o,s,this.o.language)},this)})},show:function(n){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(n){n.preventDefault()}this._trigger("show")},hide:function(n){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var n=this.getUTCDate();return new Date(n.getTime()+(n.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(new Date(n.getTime()-(n.getTimezoneOffset()*60000)))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(n)}}else{this.element.val(n)}},getFormattedDate:function(n){if(n===undefined){n=this.o.format}return g.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var p=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!="auto"}).first().css("z-index"))+10;var o=this.component?this.component.parent().offset():this.element.offset();var n=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:o.top+n,left:o.left,zIndex:p})},_allow_update:true,update:function(){if(!this._allow_update){return}var n,o=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){n=arguments[0];o=true}else{n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=g.parseDate(n,this.o.format,this.o.language);if(o){this.setValue()}if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var o=this.o.weekStart,p="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';p+=n;this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(o<this.o.weekStart+7){p+='<th class="dow">'+e[this.o.language].daysMin[(o++)%7]+"</th>"}p+="</tr>";this.picker.find(".datepicker-days thead").append(p)},fillMonths:function(){var n="",o=0;while(o<12){n+='<span class="month">'+e[this.o.language].monthsShort[o++]+"</span>"}this.picker.find(".datepicker-months td").html(n)},setRange:function(n){if(!n||!n.length){delete this.range}else{this.range=a.map(n,function(o){return o.valueOf()})}this.fill()},getClassNames:function(p){var n=[],s=this.viewDate.getUTCFullYear(),q=this.viewDate.getUTCMonth(),o=this.date.valueOf(),r=new Date();if(p.getUTCFullYear()<s||(p.getUTCFullYear()==s&&p.getUTCMonth()<q)){n.push("old")}else{if(p.getUTCFullYear()>s||(p.getUTCFullYear()==s&&p.getUTCMonth()>q)){n.push("new")}}if(this.o.todayHighlight&&p.getUTCFullYear()==r.getFullYear()&&p.getUTCMonth()==r.getMonth()&&p.getUTCDate()==r.getDate()){n.push("today")}if(o&&p.valueOf()==o){n.push("active")}if(p.valueOf()<this.o.startDate||p.valueOf()>this.o.endDate||a.inArray(p.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){n.push("disabled")}if(this.range){if(p>this.range[0]&&p<this.range[this.range.length-1]){n.push("range")}if(a.inArray(p.valueOf(),this.range)!=-1){n.push("selected")}}return n},fill:function(){var s=new Date(this.viewDate),H=s.getUTCFullYear(),y=s.getUTCMonth(),D=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,C=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,v=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,q=this.date&&this.date.valueOf(),F;this.picker.find(".datepicker-days thead th.datepicker-switch").text(e[this.o.language].months[y]+" "+H);this.picker.find("tfoot th.today").text(e[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(e[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var B=l(H,y-1,28,0,0,0,0),t=g.getDaysInMonth(B.getUTCFullYear(),B.getUTCMonth());B.setUTCDate(t);B.setUTCDate(t-(B.getUTCDay()-this.o.weekStart+7)%7);var A=new Date(B);A.setUTCDate(A.getUTCDate()+42);A=A.valueOf();var w=[];var p;while(B.valueOf()<A){if(B.getUTCDay()==this.o.weekStart){w.push("<tr>");if(this.o.calendarWeeks){var G=new Date(+B+(this.o.weekStart-B.getUTCDay()-7)%7*86400000),E=new Date(+G+(7+4-G.getUTCDay())%7*86400000),J=new Date(+(J=l(E.getUTCFullYear(),0,1))+(7+4-J.getUTCDay())%7*86400000),o=(E-J)/86400000/7+1;w.push('<td class="cw">'+o+"</td>")}}p=this.getClassNames(B);p.push("day");var n=this.o.beforeShowDay(B);if(n===undefined){n={}}else{if(typeof(n)==="boolean"){n={enabled:n}}else{if(typeof(n)==="string"){n={classes:n}}}}if(n.enabled===false){p.push("disabled")}if(n.classes){p=p.concat(n.classes.split(/\s+/))}if(n.tooltip){F=n.tooltip}p=a.unique(p);w.push('<td class="'+p.join(" ")+'"'+(F?' title="'+F+'"':"")+">"+B.getUTCDate()+"</td>");if(B.getUTCDay()==this.o.weekEnd){w.push("</tr>")}B.setUTCDate(B.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var r=this.date&&this.date.getUTCFullYear();var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(H).end().find("span").removeClass("active");if(r&&r==H){z.eq(this.date.getUTCMonth()).addClass("active")}if(H<D||H>v){z.addClass("disabled")}if(H==D){z.slice(0,C).addClass("disabled")}if(H==v){z.slice(u+1).addClass("disabled")}w="";H=parseInt(H/10,10)*10;var I=this.picker.find(".datepicker-years").find("th:eq(1)").text(H+"-"+(H+9)).end().find("td");H-=1;for(var x=-1;x<11;x++){w+='<span class="year'+(x==-1?" old":x==10?" new":"")+(r==H?" active":"")+(H<D||H>v?" disabled":"")+'">'+H+"</span>";H+=1}I.html(w)},updateNavArrows:function(){if(!this._allow_update){return}var n=new Date(this.viewDate),p=n.getUTCFullYear(),o=n.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&p<=this.o.startDate.getUTCFullYear()&&o<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&p>=this.o.endDate.getUTCFullYear()&&o>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&p<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&p>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(q){q.preventDefault();var t=a(q.target).closest("span, td, th");if(t.length==1){switch(t[0].nodeName.toLowerCase()){case"th":switch(t[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var p=g.modes[this.viewMode].navStep*(t[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,p);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,p);break}this.fill();break;case"today":var n=new Date();n=l(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);this.showMode(-2);var u=this.o.todayBtn=="linked"?null:"view";this._setDate(n,u);break;case"clear":var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.val("").change()}this._trigger("changeDate");this.update();if(this.o.autoclose){this.hide()}break}break;case"span":if(!t.is(".disabled")){this.viewDate.setUTCDate(1);if(t.is(".month")){var o=1;var s=t.parent().find("span").index(t);var v=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(s);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(l(v,s,o,0,0,0,0))}}else{var v=parseInt(t.text(),10)||0;var o=1;var s=0;this.viewDate.setUTCFullYear(v);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(l(v,s,o,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(t.is(".day")&&!t.is(".disabled")){var o=parseInt(t.text(),10)||1;var v=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth();if(t.is(".old")){if(s===0){s=11;v-=1}else{s-=1}}else{if(t.is(".new")){if(s==11){s=0;v+=1}else{s+=1}}}this._setDate(l(v,s,o,0,0,0,0))}break}}},_setDate:function(n,p){if(!p||p=="date"){this.date=new Date(n)}if(!p||p=="view"){this.viewDate=new Date(n)}this.fill();this.setValue();this._trigger("changeDate");var o;if(this.isInput){o=this.element}else{if(this.component){o=this.element.find("input")}}if(o){o.change();if(this.o.autoclose&&(!p||p=="date")){this.hide()}}},moveMonth:function(n,p){if(!p){return n}var t=new Date(n.valueOf()),o=t.getUTCDate(),s=t.getUTCMonth(),r=Math.abs(p),u,v;p=p>0?1:-1;if(r==1){v=p==-1?function(){return t.getUTCMonth()==s}:function(){return t.getUTCMonth()!=u};u=s+p;t.setUTCMonth(u);if(u<0||u>11){u=(u+12)%12}}else{for(var q=0;q<r;q++){t=this.moveMonth(t,p)}u=t.getUTCMonth();t.setUTCDate(o);v=function(){return u!=t.getUTCMonth()}}while(v()){t.setUTCDate(--o);t.setUTCMonth(u)}return t},moveYear:function(n,o){return this.moveMonth(n,o*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(q){if(this.picker.is(":not(:visible)")){if(q.keyCode==27){this.show()}return}var n=false,p,o,s,t,u;switch(q.keyCode){case 27:this.hide();q.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}p=q.keyCode==37?-1:1;if(q.ctrlKey){t=this.moveYear(this.date,p);u=this.moveYear(this.viewDate,p)}else{if(q.shiftKey){t=this.moveMonth(this.date,p);u=this.moveMonth(this.viewDate,p)}else{t=new Date(this.date);t.setUTCDate(this.date.getUTCDate()+p);u=new Date(this.viewDate);u.setUTCDate(this.viewDate.getUTCDate()+p)}}if(this.dateWithinRange(t)){this.date=t;this.viewDate=u;this.setValue();this.update();q.preventDefault();n=true}break;case 38:case 40:if(!this.o.keyboardNavigation){break}p=q.keyCode==38?-1:1;if(q.ctrlKey){t=this.moveYear(this.date,p);u=this.moveYear(this.viewDate,p)}else{if(q.shiftKey){t=this.moveMonth(this.date,p);u=this.moveMonth(this.viewDate,p)}else{t=new Date(this.date);t.setUTCDate(this.date.getUTCDate()+p*7);u=new Date(this.viewDate);u.setUTCDate(this.viewDate.getUTCDate()+p*7)}}if(this.dateWithinRange(t)){this.date=t;this.viewDate=u;this.setValue();this.update();q.preventDefault();n=true}break;case 13:this.hide();q.preventDefault();break;case 9:this.hide();break}if(n){this._trigger("changeDate");var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.change()}}},showMode:function(n){if(n){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n))}this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var d=function(n,o){this.element=a(n);this.inputs=a.map(o.inputs,function(p){return p.jquery?p[0]:p});delete o.inputs;a(this.inputs).datepicker(o).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(p){return a(p).data("datepicker")});this.updateDates()};d.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var n=a.map(this.dates,function(o){return o.valueOf()});a.each(this.pickers,function(o,q){q.setRange(n)})},dateUpdated:function(o){var n=a(o.target).data("datepicker"),r=n.getUTCDate(),p=a.inArray(o.target,this.inputs),q=this.inputs.length;if(p==-1){return}if(r<this.dates[p]){while(p>=0&&r<this.dates[p]){this.pickers[p--].setUTCDate(r)}}else{if(r>this.dates[p]){while(p<q&&r>this.dates[p]){this.pickers[p++].setUTCDate(r)}}}this.updateDates()},remove:function(){a.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};function j(o,s){var n=a(o).data(),r={},p,t=new RegExp("^"+s.toLowerCase()+"([A-Z])"),s=new RegExp("^"+s.toLowerCase());for(var q in n){if(s.test(q)){p=q.replace(t,function(u,v){return v.toLowerCase()});r[p]=n[q]}}return r}function k(o){var p={};if(!e[o]){o=o.split("-")[0];if(!e[o]){return}}var n=e[o];a.each(h,function(q,r){if(r in n){p[r]=n[r]}});return p}var i=a.fn.datepicker;var b=a.fn.datepicker=function(p){var n=Array.apply(null,arguments);n.shift();var o,q;this.each(function(){var r=a(this),s=r.data("datepicker"),v=typeof p=="object"&&p;if(!s){var t=j(this,"date"),y=a.extend({},f,t,v),u=k(y.language),w=a.extend({},f,u,t,v);if(r.is(".input-daterange")||w.inputs){var x={inputs:w.inputs||r.find("input").toArray()};r.data("datepicker",(s=new d(this,a.extend(w,x))))}else{r.data("datepicker",(s=new c(this,w)))}}if(typeof p=="string"&&typeof s[p]=="function"){o=s[p].apply(s,n);if(o!==undefined){return false}}});if(o!==undefined){return o}else{return this}};var f=a.fn.datepicker.defaults={autoclose:false,beforeShowDay:a.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var h=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=c;var e=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return(((n%4===0)&&(n%100!==0))||(n%400===0))},getDaysInMonth:function(o,n){return[31,(g.isLeapYear(o)?29:28),31,30,31,30,31,31,30,31,30,31][n]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var p=n.replace(this.validParts,"\0").split("\0"),o=n.match(this.validParts);if(!p||!p.length||!o||o.length===0){throw new Error("Invalid date format.")}return{separators:p,parts:o}},parseDate:function(o,r,v){if(o instanceof Date){return o}if(typeof r==="string"){r=g.parseFormat(r)}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(o)){var y=/([\-+]\d+)([dmwy])/,z=o.match(/([\-+]\d+)([dmwy])/g),x,p;o=new Date();for(var u=0;u<z.length;u++){x=y.exec(z[u]);p=parseInt(x[1]);switch(x[2]){case"d":o.setUTCDate(o.getUTCDate()+p);break;case"m":o=c.prototype.moveMonth.call(c.prototype,o,p);break;case"w":o.setUTCDate(o.getUTCDate()+p*7);break;case"y":o=c.prototype.moveYear.call(c.prototype,o,p);break}}return l(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0)}var z=o&&o.match(this.nonpunctuation)||[],o=new Date(),w={},C=["yyyy","yy","M","MM","m","mm","d","dd"],B={yyyy:function(s,E){return s.setUTCFullYear(E)},yy:function(s,E){return s.setUTCFullYear(2000+E)},m:function(s,E){E-=1;while(E<0){E+=12}E%=12;s.setUTCMonth(E);while(s.getUTCMonth()!=E){s.setUTCDate(s.getUTCDate()-1)}return s},d:function(s,E){return s.setUTCDate(E)}},D,q,x;B.M=B.MM=B.mm=B.m;B.dd=B.d;o=l(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);var t=r.parts.slice();if(z.length!=t.length){t=a(t).filter(function(s,E){return a.inArray(E,C)!==-1}).toArray()}if(z.length==t.length){for(var u=0,n=t.length;u<n;u++){D=parseInt(z[u],10);x=t[u];if(isNaN(D)){switch(x){case"MM":q=a(e[v].months).filter(function(){var s=this.slice(0,z[u].length),E=z[u].slice(0,s.length);return s==E});D=a.inArray(q[0],e[v].months)+1;break;case"M":q=a(e[v].monthsShort).filter(function(){var s=this.slice(0,z[u].length),E=z[u].slice(0,s.length);return s==E});D=a.inArray(q[0],e[v].monthsShort)+1;break}}w[x]=D}for(var u=0,A;u<C.length;u++){A=C[u];if(A in w&&!isNaN(w[A])){B[A](o,w[A])}}}return o},formatDate:function(o,p,r){if(typeof p==="string"){p=g.parseFormat(p)}var t={d:o.getUTCDate(),D:e[r].daysShort[o.getUTCDay()],DD:e[r].days[o.getUTCDay()],m:o.getUTCMonth()+1,M:e[r].monthsShort[o.getUTCMonth()],MM:e[r].months[o.getUTCMonth()],yy:o.getUTCFullYear().toString().substring(2),yyyy:o.getUTCFullYear()};t.dd=(t.d<10?"0":"")+t.d;t.mm=(t.m<10?"0":"")+t.m;var o=[],s=a.extend([],p.separators);for(var q=0,n=p.parts.length;q<=n;q++){if(s.length){o.push(s.shift())}o.push(t[p.parts[q]])}return o.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=g;a.fn.datepicker.noConflict=function(){a.fn.datepicker=i;return this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(o){var n=a(this);if(n.data("datepicker")){return}o.preventDefault();b.call(n,"show")});a(function(){b.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery));(function(a){a.fn.bdatepicker=a.fn.datepicker.noConflict();if(!a.fn.datepicker){a.fn.datepicker=a.fn.bdatepicker}var b=function(c){this.init("date",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(d,c){if(!this.options.viewformat){this.options.viewformat=this.options.format}d.datepicker=a.fn.editableutils.tryParseJson(d.datepicker,true);this.options.datepicker=a.extend({},c.datepicker,d.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=a.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);if(this.options.clear){this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(c){c.preventDefault();c.stopPropagation();this.clear()},this));this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,c){var d=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html.call(this,d,c)},html2value:function(c){return this.parseDate(c,this.parsedViewFormat)},value2str:function(c){return c?this.dpg.formatDate(c,this.parsedFormat,this.options.datepicker.language):""},str2value:function(c){return this.parseDate(c,this.parsedFormat)},value2submit:function(c){return this.value2str(c)},value2input:function(c){this.$input.bdatepicker("update",c)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(d){if(a(d.currentTarget).is(".old")||a(d.currentTarget).is(".new")){return}var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},parseDate:function(f,d){var c=null,e;if(f){c=this.dpg.parseDate(f,d,this.options.datepicker.language);if(typeof f==="string"){e=this.dpg.formatDate(c,d,this.options.datepicker.language);if(f!==e){c=null}}}return c}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});a.fn.editabletypes.date=b}(window.jQuery));(function(a){var b=function(c){this.init("datefield",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.date);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(c){this.$input.val(c?this.dpg.formatDate(c,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});a.fn.editabletypes.datefield=b}(window.jQuery));(function(a){var b=function(c){this.init("datetime",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(d,c){if(!this.options.viewformat){this.options.viewformat=this.options.format}d.datetimepicker=a.fn.editableutils.tryParseJson(d.datetimepicker,true);this.options.datetimepicker=a.extend({},c.datetimepicker,d.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=a.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(c){var d=a(this).closest("form").parent();setTimeout(function(){d.triggerHandler("resize")},0)});if(this.options.clear){this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(c){c.preventDefault();c.stopPropagation();this.clear()},this));this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,c){var d=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(c){b.superclass.value2html.call(this,d,c)}else{return d}},html2value:function(c){var d=this.parseDate(c,this.parsedViewFormat);return d?this.fromUTC(d):null},value2str:function(c){return c?this.dpg.formatDate(this.toUTC(c),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(c){var d=this.parseDate(c,this.parsedFormat);return d?this.fromUTC(d):null},value2submit:function(c){return this.value2str(c)},value2input:function(c){if(c){this.$input.data("datetimepicker").setDate(c)}},input2value:function(){var c=this.$input.data("datetimepicker");return c.date?c.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(d){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},toUTC:function(c){return c?new Date(c.valueOf()-c.getTimezoneOffset()*60000):c},fromUTC:function(c){return c?new Date(c.valueOf()+c.getTimezoneOffset()*60000):c},parseDate:function(f,d){var c=null,e;if(f){c=this.dpg.parseDate(f,d,this.options.datetimepicker.language,this.options.formatType);if(typeof f==="string"){e=this.dpg.formatDate(c,d,this.options.datetimepicker.language,this.options.formatType);if(f!==e){c=null}}}return c}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});a.fn.editabletypes.datetime=b}(window.jQuery));(function(a){var b=function(c){this.init("datetimefield",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.datetime);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(c){this.$input.val(this.value2html(c));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});a.fn.editabletypes.datetimefield=b}(window.jQuery));(function(a){var b=function(c){this.init("typeahead",c,b.defaults);this.options.typeahead=a.extend({},b.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},c.typeahead)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]');this.options.typeahead.source=this.sourceData;this.$input.typeahead(this.options.typeahead);var c=this.$input.data("typeahead");c.render=a.proxy(this.typeaheadRender,c);c.select=a.proxy(this.typeaheadSelect,c);c.move=a.proxy(this.typeaheadMove,c);this.renderClear();this.setClass();this.setAttr("placeholder")},value2htmlFinal:function(e,c){if(this.getIsObjects()){var d=a.fn.editableutils.itemsByValue(e,this.sourceData);e=d.length?d[0].text:""}a.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,c)},html2value:function(c){return c?c:null},value2input:function(d){if(this.getIsObjects()){var c=a.fn.editableutils.itemsByValue(d,this.sourceData);this.$input.data("value",d).val(c.length?c[0].text:"")}else{this.$input.val(d)}},input2value:function(){if(this.getIsObjects()){var d=this.$input.data("value"),c=a.fn.editableutils.itemsByValue(d,this.sourceData);if(c.length&&c[0].text.toLowerCase()===this.$input.val().toLowerCase()){return d}else{return null}}else{return this.$input.val()}},getIsObjects:function(){if(this.isObjects===undefined){this.isObjects=false;for(var c=0;c<this.sourceData.length;c++){if(this.sourceData[c].value!==this.sourceData[c].text){this.isObjects=true;break}}}return this.isObjects},activate:a.fn.editabletypes.text.prototype.activate,renderClear:a.fn.editabletypes.text.prototype.renderClear,postrender:a.fn.editabletypes.text.prototype.postrender,toggleClear:a.fn.editabletypes.text.prototype.toggleClear,clear:function(){a.fn.editabletypes.text.prototype.clear.call(this);this.$input.data("value","")},matcher:function(c){return a.fn.typeahead.Constructor.prototype.matcher.call(this,c.text)},sorter:function(g){var c=[],e=[],d=[],f,h;while(f=g.shift()){h=f.text;if(!h.toLowerCase().indexOf(this.query.toLowerCase())){c.push(f)}else{if(~h.indexOf(this.query)){e.push(f)}else{d.push(f)}}}return c.concat(e,d)},highlighter:function(c){return a.fn.typeahead.Constructor.prototype.highlighter.call(this,c.text)},updater:function(c){this.$element.data("value",c.value);return c.text},typeaheadRender:function(c){var d=this;c=a(c).map(function(e,f){e=a(d.options.item).data("item",f);e.find("a").html(d.highlighter(f));return e[0]});if(this.options.autoSelect){c.first().addClass("active")}this.$menu.html(c);return this},typeaheadSelect:function(){var c=this.$menu.find(".active").data("item");if(this.options.autoSelect||c){this.$element.val(this.updater(c)).change()}return this.hide()},typeaheadMove:function(c){if(!this.shown){return}switch(c.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length){return}c.preventDefault();break;case 38:c.preventDefault();this.prev();break;case 40:c.preventDefault();this.next();break}c.stopPropagation()}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:true});a.fn.editabletypes.typeahead=b}(window.jQuery));var bootbox=window.bootbox||(function(l,a){var i="en",g="en",b=true,c="static",f="javascript:;",e="",d={},h={},m={};m.setLocale=function(o){for(var n in j){if(n==o){i=o;return}}throw new Error("Invalid locale: "+o)};m.addLocale=function(n,p){if(typeof j[n]==="undefined"){j[n]={}}for(var o in p){j[n][o]=p[o]}};m.setIcons=function(n){h=n;if(typeof h!=="object"||h===null){h={}}};m.setBtnClasses=function(n){d=n;if(typeof d!=="object"||d===null){d={}}};m.alert=function(){var p="",o=k("OK"),n=null;switch(arguments.length){case 1:p=arguments[0];break;case 2:p=arguments[0];if(typeof arguments[1]=="function"){n=arguments[1]}else{o=arguments[1]}break;case 3:p=arguments[0];o=arguments[1];n=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return m.dialog(p,{label:o,icon:h.OK,"class":d.OK,callback:n},{onEscape:n||true})};m.confirm=function(){var s="",q=k("CANCEL"),r=k("CONFIRM"),o=null;switch(arguments.length){case 1:s=arguments[0];break;case 2:s=arguments[0];if(typeof arguments[1]=="function"){o=arguments[1]}else{q=arguments[1]}break;case 3:s=arguments[0];q=arguments[1];if(typeof arguments[2]=="function"){o=arguments[2]}else{r=arguments[2]}break;case 4:s=arguments[0];q=arguments[1];r=arguments[2];o=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var n=function(){if(typeof o==="function"){return o(false)}};var p=function(){if(typeof o==="function"){return o(true)}};return m.dialog(s,[{label:q,icon:h.CANCEL,"class":d.CANCEL,callback:n},{label:r,icon:h.CONFIRM,"class":d.CONFIRM,callback:p}],{onEscape:n})};m.prompt=function(){var w="",u=k("CANCEL"),v=k("CONFIRM"),o=null,q="";switch(arguments.length){case 1:w=arguments[0];break;case 2:w=arguments[0];if(typeof arguments[1]=="function"){o=arguments[1]}else{u=arguments[1]}break;case 3:w=arguments[0];u=arguments[1];if(typeof arguments[2]=="function"){o=arguments[2]}else{v=arguments[2]}break;case 4:w=arguments[0];u=arguments[1];v=arguments[2];o=arguments[3];break;case 5:w=arguments[0];u=arguments[1];v=arguments[2];o=arguments[3];q=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var t=w;var s=a("<form></form>");s.append("<input autocomplete=off type=text value='"+q+"' />");var n=function(){if(typeof o==="function"){return o(null)}};var p=function(){if(typeof o==="function"){return o(s.find("input[type=text]").val())}};var r=m.dialog(s,[{label:u,icon:h.CANCEL,"class":d.CANCEL,callback:n},{label:v,icon:h.CONFIRM,"class":d.CONFIRM,callback:p}],{header:t,show:false,onEscape:n});r.on("shown",function(){s.find("input[type=text]").focus();s.on("submit",function(x){x.preventDefault();r.find(".btn-primary").click()})});r.modal("show");return r};m.dialog=function(G,t,B){var o="",q=[];if(!B){B={}}if(typeof t==="undefined"){t=[]}else{if(typeof t.length=="undefined"){t=[t]}}var v=t.length;while(v--){var y=null,u=null,n=null,w="",p=null;if(typeof t[v]["label"]=="undefined"&&typeof t[v]["class"]=="undefined"&&typeof t[v]["callback"]=="undefined"){var D=0,E=null;for(var x in t[v]){E=x;if(++D>1){break}}if(D==1&&typeof t[v][x]=="function"){t[v]["label"]=E;t[v]["callback"]=t[v][x]}}if(typeof t[v]["callback"]=="function"){p=t[v]["callback"]}if(t[v]["class"]){n=t[v]["class"]}else{if(v==t.length-1&&t.length<=2){n="btn-primary"}}if(t[v]["label"]){y=t[v]["label"]}else{y="Option "+(v+1)}if(t[v]["icon"]){w="<i class='"+t[v]["icon"]+"'></i> "}if(t[v]["href"]){u=t[v]["href"]}else{u=f}o="<a data-handler='"+v+"' class='btn "+n+"' href='"+u+"'>"+w+""+y+"</a>"+o;q[v]=p}var C=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(B.header){var r="";if(typeof B.headerCloseButton=="undefined"||B.headerCloseButton){r="<a href='"+f+"' class='close'>&times;</a>"}C.push("<div class='modal-header'>"+r+"<h3>"+B.header+"</h3></div>")}C.push("<div class='modal-body'></div>");if(o){C.push("<div class='modal-footer'>"+o+"</div>")}C.push("</div>");var s=a(C.join("\n"));var F=(typeof B.animate==="undefined")?b:B.animate;if(F){s.addClass("fade")}var A=(typeof B.classes==="undefined")?e:B.classes;if(A){s.addClass(A)}s.find(".modal-body").html(G);function z(I){var H=null;if(typeof B.onEscape==="function"){H=B.onEscape()}if(H!==false){s.modal("hide")}}s.on("keyup.dismiss.modal",function(H){if(H.which===27&&B.onEscape){z("escape")}});s.on("click","a.close",function(H){H.preventDefault();z("close")});s.on("shown",function(){s.find("a.btn-primary:first").focus()});s.on("hidden",function(){s.remove()});s.on("click",".modal-footer a",function(I){var J=a(this).data("handler"),H=q[J],K=null;if(typeof J!=="undefined"&&typeof t[J]["href"]!=="undefined"){return}I.preventDefault();if(typeof H==="function"){K=H()}if(K!==false){s.modal("hide")}});a("body").append(s);s.modal({backdrop:(typeof B.backdrop==="undefined")?c:B.backdrop,keyboard:false,show:false});s.on("show",function(H){a(l).off("focusin.modal")});if(typeof B.show==="undefined"||B.show===true){s.modal("show")}return s};m.modal=function(){var q;var o;var p;var n={onEscape:null,keyboard:true,backdrop:c};switch(arguments.length){case 1:q=arguments[0];break;case 2:q=arguments[0];if(typeof arguments[1]=="object"){p=arguments[1]}else{o=arguments[1]}break;case 3:q=arguments[0];o=arguments[1];p=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}n.header=o;if(typeof p=="object"){p=a.extend(n,p)}else{p=n}return m.dialog(q,[],p)};m.hideAll=function(){a(".bootbox").modal("hide")};m.animate=function(n){b=n};m.backdrop=function(n){c=n};m.classes=function(n){e=n};var j={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"}};function k(o,n){if(typeof n==="undefined"){n=i}if(typeof j[n][o]==="string"){return j[n][o]}if(n!=g){return k(o,g)}return o}return m}(document,window.jQuery));window.bootbox=bootbox;!function(a){function f(){return new Date(Date.UTC.apply(Date,arguments))}function g(){var h=new Date();return f(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),0)}var c=function(h,i){var l=this;this.element=a(h);this.container=i.container||"body";this.language=i.language||this.element.data("date-language")||"en";this.language=this.language in b?this.language:"en";this.isRTL=b[this.language].rtl||false;this.formatType=i.formatType||this.element.data("format-type")||"standard";this.format=d.parseFormat(i.format||this.element.data("date-format")||b[this.language].format||d.getDefaultFormat(this.formatType,"input"),this.formatType);this.isInline=false;this.isVisible=false;this.isInput=this.element.is("input");this.fontAwesome=i.fontAwesome||this.element.data("font-awesome")||false;this.bootcssVer=i.bootcssVer||(this.isInput?(this.element.is(".form-control")?3:2):(this.bootcssVer=this.element.is(".input-group")?3:2));this.component=this.element.is(".date")?(this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent()):false;this.componentReset=this.element.is(".date")?(this.bootcssVer==3?this.element.find(".input-group-addon .glyphicon-remove .fa-times").parent():this.element.find(".add-on .icon-remove .fa-times").parent()):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.linkField=i.linkField||this.element.data("link-field")||false;this.linkFormat=d.parseFormat(i.linkFormat||this.element.data("link-format")||d.getDefaultFormat(this.formatType,"link"),this.formatType);this.minuteStep=i.minuteStep||this.element.data("minute-step")||5;this.pickerPosition=i.pickerPosition||this.element.data("picker-position")||"bottom-right";this.showMeridian=i.showMeridian||this.element.data("show-meridian")||false;this.initialDate=i.initialDate||new Date();this.zIndex=i.zIndex||this.element.data("z-index")||undefined;this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":(this.bootcssVer===3?"glyphicon-arrow-left":"icon-arrow-left"),rightArrow:this.fontAwesome?"fa-arrow-right":(this.bootcssVer===3?"glyphicon-arrow-right":"icon-arrow-right")};this.icontype=this.fontAwesome?"fa":"glyphicon";this._attachEvents();this.formatViewType="datetime";if("formatViewType" in i){this.formatViewType=i.formatViewType}else{if("formatViewType" in this.element.data()){this.formatViewType=this.element.data("formatViewType")}}this.minView=0;if("minView" in i){this.minView=i.minView}else{if("minView" in this.element.data()){this.minView=this.element.data("min-view")}}this.minView=d.convertViewMode(this.minView);this.maxView=d.modes.length-1;if("maxView" in i){this.maxView=i.maxView}else{if("maxView" in this.element.data()){this.maxView=this.element.data("max-view")}}this.maxView=d.convertViewMode(this.maxView);this.wheelViewModeNavigation=false;if("wheelViewModeNavigation" in i){this.wheelViewModeNavigation=i.wheelViewModeNavigation}else{if("wheelViewModeNavigation" in this.element.data()){this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")}}this.wheelViewModeNavigationInverseDirection=false;if("wheelViewModeNavigationInverseDirection" in i){this.wheelViewModeNavigationInverseDirection=i.wheelViewModeNavigationInverseDirection}else{if("wheelViewModeNavigationInverseDirection" in this.element.data()){this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")}}this.wheelViewModeNavigationDelay=100;if("wheelViewModeNavigationDelay" in i){this.wheelViewModeNavigationDelay=i.wheelViewModeNavigationDelay}else{if("wheelViewModeNavigationDelay" in this.element.data()){this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")}}this.startViewMode=2;if("startView" in i){this.startViewMode=i.startView}else{if("startView" in this.element.data()){this.startViewMode=this.element.data("start-view")}}this.startViewMode=d.convertViewMode(this.startViewMode);this.viewMode=this.startViewMode;this.viewSelect=this.minView;if("viewSelect" in i){this.viewSelect=i.viewSelect}else{if("viewSelect" in this.element.data()){this.viewSelect=this.element.data("view-select")}}this.viewSelect=d.convertViewMode(this.viewSelect);this.forceParse=true;if("forceParse" in i){this.forceParse=i.forceParse}else{if("dateForceParse" in this.element.data()){this.forceParse=this.element.data("date-force-parse")}}var k=this.bootcssVer===3?d.templateV3:d.template;while(k.indexOf("{iconType}")!==-1){k=k.replace("{iconType}",this.icontype)}while(k.indexOf("{leftArrow}")!==-1){k=k.replace("{leftArrow}",this.icons.leftArrow)}while(k.indexOf("{rightArrow}")!==-1){k=k.replace("{rightArrow}",this.icons.rightArrow)}this.picker=a(k).appendTo(this.isInline?this.element:this.container).on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)});if(this.wheelViewModeNavigation){if(a.fn.mousewheel){this.picker.on({mousewheel:a.proxy(this.mousewheel,this)})}else{console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")}}if(this.isInline){this.picker.addClass("datetimepicker-inline")}else{this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu")}if(this.isRTL){this.picker.addClass("datetimepicker-rtl");var j=this.bootcssVer===3?".prev span, .next span":".prev i, .next i";this.picker.find(j).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}a(document).on("mousedown",function(m){if(a(m.target).closest(".datetimepicker").length===0){l.hide()}});this.autoclose=false;if("autoclose" in i){this.autoclose=i.autoclose}else{if("dateAutoclose" in this.element.data()){this.autoclose=this.element.data("date-autoclose")}}this.keyboardNavigation=true;if("keyboardNavigation" in i){this.keyboardNavigation=i.keyboardNavigation}else{if("dateKeyboardNavigation" in this.element.data()){this.keyboardNavigation=this.element.data("date-keyboard-navigation")}}this.todayBtn=(i.todayBtn||this.element.data("date-today-btn")||false);this.todayHighlight=(i.todayHighlight||this.element.data("date-today-highlight")||false);this.weekStart=((i.weekStart||this.element.data("date-weekstart")||b[this.language].weekStart||0)%7);this.weekEnd=((this.weekStart+6)%7);this.startDate=-Infinity;this.endDate=Infinity;this.daysOfWeekDisabled=[];this.setStartDate(i.startDate||this.element.data("date-startdate"));this.setEndDate(i.endDate||this.element.data("date-enddate"));this.setDaysOfWeekDisabled(i.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled"));this.setMinutesDisabled(i.minutesDisabled||this.element.data("date-minute-disabled"));this.setHoursDisabled(i.hoursDisabled||this.element.data("date-hour-disabled"));this.fillDow();this.fillMonths();this.update();this.showMode();if(this.isInline){this.show()}};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents();if(this.isInput){this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]];if(this.componentReset){this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])}}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:a.proxy(this.show,this)}]]}}}for(var k=0,h,j;k<this._events.length;k++){h=this._events[k][0];j=this._events[k][1];h.on(j)}},_detachEvents:function(){for(var k=0,h,j;k<this._events.length;k++){h=this._events[k][0];j=this._events[k][1];h.off(j)}this._events=[]},show:function(h){this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();if(this.forceParse){this.update()}this.place();a(window).on("resize",a.proxy(this.place,this));if(h){h.stopPropagation();h.preventDefault()}this.isVisible=true;this.element.trigger({type:"show",date:this.date})},hide:function(h){if(!this.isVisible){return}if(this.isInline){return}this.picker.hide();a(window).off("resize",this.place);this.viewMode=this.startViewMode;this.showMode();if(!this.isInput){a(document).off("mousedown",this.hide)}if(this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this.isVisible=false;this.element.trigger({type:"hide",date:this.date})},remove:function(){this._detachEvents();this.picker.remove();delete this.picker;delete this.element.data().datetimepicker},getDate:function(){var h=this.getUTCDate();return new Date(h.getTime()+(h.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(h){this.setUTCDate(new Date(h.getTime()-(h.getTimezoneOffset()*60000)))},setUTCDate:function(h){if(h>=this.startDate&&h<=this.endDate){this.date=h;this.setValue();this.viewDate=this.date;this.fill()}else{this.element.trigger({type:"outOfRange",date:h,startDate:this.startDate,endDate:this.endDate})}},setFormat:function(i){this.format=d.parseFormat(i,this.formatType);var h;if(this.isInput){h=this.element}else{if(this.component){h=this.element.find("input")}}if(h&&h.val()){this.setValue()}},setValue:function(){var h=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(h)}this.element.data("date",h)}else{this.element.val(h)}if(this.linkField){a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))}},getFormattedDate:function(h){if(h==undefined){h=this.format}return d.formatDate(this.date,h,this.language,this.formatType)},setStartDate:function(h){this.startDate=h||-Infinity;if(this.startDate!==-Infinity){this.startDate=d.parseDate(this.startDate,this.format,this.language,this.formatType)}this.update();this.updateNavArrows()},setEndDate:function(h){this.endDate=h||Infinity;if(this.endDate!==Infinity){this.endDate=d.parseDate(this.endDate,this.format,this.language,this.formatType)}this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(h){this.daysOfWeekDisabled=h||[];if(!a.isArray(this.daysOfWeekDisabled)){this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)}this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(i){return parseInt(i,10)});this.update();this.updateNavArrows()},setMinutesDisabled:function(h){this.minutesDisabled=h||[];if(!a.isArray(this.minutesDisabled)){this.minutesDisabled=this.minutesDisabled.split(/,\s*/)}this.minutesDisabled=a.map(this.minutesDisabled,function(i){return parseInt(i,10)});this.update();this.updateNavArrows()},setHoursDisabled:function(h){this.hoursDisabled=h||[];if(!a.isArray(this.hoursDisabled)){this.hoursDisabled=this.hoursDisabled.split(/,\s*/)}this.hoursDisabled=a.map(this.hoursDisabled,function(i){return parseInt(i,10)});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}if(!this.zIndex){var i=0;a("div").each(function(){var m=parseInt(a(this).css("zIndex"),10);if(m>i){i=m}});this.zIndex=i+10}var k,l,j,h;if(this.container instanceof a){h=this.container.offset()}else{h=a(this.container).offset()}if(this.component){k=this.component.offset();j=k.left;if(this.pickerPosition=="bottom-left"||this.pickerPosition=="top-left"){j+=this.component.outerWidth()-this.picker.outerWidth()}}else{k=this.element.offset();j=k.left}if(j+220>document.body.clientWidth){j=document.body.clientWidth-220}if(this.pickerPosition=="top-left"||this.pickerPosition=="top-right"){l=k.top-this.picker.outerHeight()}else{l=k.top+this.height}l=l-h.top;j=j-h.left;this.picker.css({top:l,left:j,zIndex:this.zIndex})},update:function(){var h,i=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){h=arguments[0];i=true}else{h=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate;if(typeof h=="string"||h instanceof String){h=h.replace(/^\s+|\s+$/g,"")}}if(!h){h=new Date();i=false}this.date=d.parseDate(h,this.format,this.language,this.formatType);if(i){this.setValue()}if(this.date<this.startDate){this.viewDate=new Date(this.startDate)}else{if(this.date>this.endDate){this.viewDate=new Date(this.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var h=this.weekStart,i="<tr>";while(h<this.weekStart+7){i+='<th class="dow">'+b[this.language].daysMin[(h++)%7]+"</th>"}i+="</tr>";this.picker.find(".datetimepicker-days thead").append(i)},fillMonths:function(){var h="",j=0;while(j<12){h+='<span class="month">'+b[this.language].monthsShort[j++]+"</span>"}this.picker.find(".datetimepicker-months td").html(h)},fill:function(){if(this.date==null||this.viewDate==null){return}var m=new Date(this.viewDate),I=m.getUTCFullYear(),A=m.getUTCMonth(),o=m.getUTCDate(),s=m.getUTCHours(),y=m.getUTCMinutes(),F=this.startDate!==-Infinity?this.startDate.getUTCFullYear():-Infinity,E=this.startDate!==-Infinity?this.startDate.getUTCMonth()+1:-Infinity,q=this.endDate!==Infinity?this.endDate.getUTCFullYear():Infinity,p=this.endDate!==Infinity?this.endDate.getUTCMonth()+1:Infinity,k=(new f(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate())).valueOf(),G=new Date();this.picker.find(".datetimepicker-days thead th:eq(1)").text(b[this.language].months[A]+" "+I);if(this.formatViewType=="time"){var r=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(r);this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(r)}else{this.picker.find(".datetimepicker-hours thead th:eq(1)").text(o+" "+b[this.language].months[A]+" "+I);this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(o+" "+b[this.language].months[A]+" "+I)}this.picker.find("tfoot th.today").text(b[this.language].today).toggle(this.todayBtn!==false);this.updateNavArrows();this.fillMonths();var D=f(I,A-1,28,0,0,0,0),n=d.getDaysInMonth(D.getUTCFullYear(),D.getUTCMonth());D.setUTCDate(n);D.setUTCDate(n-(D.getUTCDay()-this.weekStart+7)%7);var C=new Date(D);C.setUTCDate(C.getUTCDate()+42);C=C.valueOf();var u=[];var j;while(D.valueOf()<C){if(D.getUTCDay()==this.weekStart){u.push("<tr>")}j="";if(D.getUTCFullYear()<I||(D.getUTCFullYear()==I&&D.getUTCMonth()<A)){j+=" old"}else{if(D.getUTCFullYear()>I||(D.getUTCFullYear()==I&&D.getUTCMonth()>A)){j+=" new"}}if(this.todayHighlight&&D.getUTCFullYear()==G.getFullYear()&&D.getUTCMonth()==G.getMonth()&&D.getUTCDate()==G.getDate()){j+=" today"}if(D.valueOf()==k){j+=" active"}if((D.valueOf()+86400000)<=this.startDate||D.valueOf()>this.endDate||a.inArray(D.getUTCDay(),this.daysOfWeekDisabled)!==-1){j+=" disabled"}u.push('<td class="day'+j+'">'+D.getUTCDate()+"</td>");if(D.getUTCDay()==this.weekEnd){u.push("</tr>")}D.setUTCDate(D.getUTCDate()+1)}this.picker.find(".datetimepicker-days tbody").empty().append(u.join(""));u=[];var H="",w="",x="";var t=this.hoursDisabled||[];for(var v=0;v<24;v++){if(t.indexOf(v)!==-1){continue}var h=f(I,A,o,v);j="";if((h.valueOf()+3600000)<=this.startDate||h.valueOf()>this.endDate){j+=" disabled"}else{if(s==v){j+=" active"}}if(this.showMeridian&&b[this.language].meridiem.length==2){w=(v<12?b[this.language].meridiem[0]:b[this.language].meridiem[1]);if(w!=x){if(x!=""){u.push("</fieldset>")}u.push('<fieldset class="hour"><legend>'+w.toUpperCase()+"</legend>")}x=w;H=(v%12?v%12:12);u.push('<span class="hour'+j+" hour_"+(v<12?"am":"pm")+'">'+H+"</span>");if(v==23){u.push("</fieldset>")}}else{H=v+":00";u.push('<span class="hour'+j+'">'+H+"</span>")}}this.picker.find(".datetimepicker-hours td").html(u.join(""));u=[];H="",w="",x="";var z=this.minutesDisabled||[];for(var v=0;v<60;v+=this.minuteStep){if(z.indexOf(v)!==-1){continue}var h=f(I,A,o,s,v,0);j="";if(h.valueOf()<this.startDate||h.valueOf()>this.endDate){j+=" disabled"}else{if(Math.floor(y/this.minuteStep)==Math.floor(v/this.minuteStep)){j+=" active"}}if(this.showMeridian&&b[this.language].meridiem.length==2){w=(s<12?b[this.language].meridiem[0]:b[this.language].meridiem[1]);if(w!=x){if(x!=""){u.push("</fieldset>")}u.push('<fieldset class="minute"><legend>'+w.toUpperCase()+"</legend>")}x=w;H=(s%12?s%12:12);u.push('<span class="minute'+j+'">'+H+":"+(v<10?"0"+v:v)+"</span>");if(v==59){u.push("</fieldset>")}}else{H=v+":00";u.push('<span class="minute'+j+'">'+s+":"+(v<10?"0"+v:v)+"</span>")}}this.picker.find(".datetimepicker-minutes td").html(u.join(""));var l=this.date.getUTCFullYear();var B=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(I).end().find("span").removeClass("active");if(l==I){B.eq(this.date.getUTCMonth()+2).addClass("active")}if(I<F||I>q){B.addClass("disabled")}if(I==F){B.slice(0,E+1).addClass("disabled")}if(I==q){B.slice(p).addClass("disabled")}u="";I=parseInt(I/10,10)*10;var J=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(I+"-"+(I+9)).end().find("td");I-=1;for(var v=-1;v<11;v++){u+='<span class="year'+(v==-1||v==10?" old":"")+(l==I?" active":"")+(I<F||I>q?" disabled":"")+'">'+I+"</span>";I+=1}J.html(u);this.place()},updateNavArrows:function(){var h=new Date(this.viewDate),l=h.getUTCFullYear(),k=h.getUTCMonth(),i=h.getUTCDate(),j=h.getUTCHours();switch(this.viewMode){case 0:if(this.startDate!==-Infinity&&l<=this.startDate.getUTCFullYear()&&k<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()&&j<=this.startDate.getUTCHours()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&l>=this.endDate.getUTCFullYear()&&k>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()&&j>=this.endDate.getUTCHours()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:if(this.startDate!==-Infinity&&l<=this.startDate.getUTCFullYear()&&k<=this.startDate.getUTCMonth()&&i<=this.startDate.getUTCDate()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&l>=this.endDate.getUTCFullYear()&&k>=this.endDate.getUTCMonth()&&i>=this.endDate.getUTCDate()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 2:if(this.startDate!==-Infinity&&l<=this.startDate.getUTCFullYear()&&k<=this.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&l>=this.endDate.getUTCFullYear()&&k>=this.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 3:case 4:if(this.startDate!==-Infinity&&l<=this.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.endDate!==Infinity&&l>=this.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},mousewheel:function(i){i.preventDefault();i.stopPropagation();if(this.wheelPause){return}this.wheelPause=true;var k=i.originalEvent;var h=k.wheelDelta;var j=h>0?1:(h===0)?0:-1;if(this.wheelViewModeNavigationInverseDirection){j=-j}this.showMode(j);setTimeout(a.proxy(function(){this.wheelPause=false},this),this.wheelViewModeNavigationDelay)},click:function(k){k.stopPropagation();k.preventDefault();var q=a(k.target).closest("span, td, th, legend");if(q.is("."+this.icontype)){q=a(q).parent().closest("span, td, th, legend")}if(q.length==1){if(q.is(".disabled")){this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});return}switch(q[0].nodeName.toLowerCase()){case"th":switch(q[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var j=d.modes[this.viewMode].navStep*(q[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,j);break;case 1:this.viewDate=this.moveDate(this.viewDate,j);break;case 2:this.viewDate=this.moveMonth(this.viewDate,j);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,j);break}this.fill();this.element.trigger({type:q[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var h=new Date();h=f(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds(),0);if(h<this.startDate){h=this.startDate}else{if(h>this.endDate){h=this.endDate}}this.viewMode=this.startViewMode;this.showMode(0);this._setDate(h);this.fill();if(this.autoclose){this.hide()}break}break;case"span":if(!q.is(".disabled")){var r=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),i=this.viewDate.getUTCDate(),l=this.viewDate.getUTCHours(),m=this.viewDate.getUTCMinutes(),p=this.viewDate.getUTCSeconds();if(q.is(".month")){this.viewDate.setUTCDate(1);n=q.parent().find("span").index(q);i=this.viewDate.getUTCDate();this.viewDate.setUTCMonth(n);this.element.trigger({type:"changeMonth",date:this.viewDate});if(this.viewSelect>=3){this._setDate(f(r,n,i,l,m,p,0))}}else{if(q.is(".year")){this.viewDate.setUTCDate(1);r=parseInt(q.text(),10)||0;this.viewDate.setUTCFullYear(r);this.element.trigger({type:"changeYear",date:this.viewDate});if(this.viewSelect>=4){this._setDate(f(r,n,i,l,m,p,0))}}else{if(q.is(".hour")){l=parseInt(q.text(),10)||0;if(q.hasClass("hour_am")||q.hasClass("hour_pm")){if(l==12&&q.hasClass("hour_am")){l=0}else{if(l!=12&&q.hasClass("hour_pm")){l+=12}}}this.viewDate.setUTCHours(l);this.element.trigger({type:"changeHour",date:this.viewDate});if(this.viewSelect>=1){this._setDate(f(r,n,i,l,m,p,0))}}else{if(q.is(".minute")){m=parseInt(q.text().substr(q.text().indexOf(":")+1),10)||0;this.viewDate.setUTCMinutes(m);this.element.trigger({type:"changeMinute",date:this.viewDate});if(this.viewSelect>=0){this._setDate(f(r,n,i,l,m,p,0))}}}}}if(this.viewMode!=0){var o=this.viewMode;this.showMode(-1);this.fill();if(o==this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}}break;case"td":if(q.is(".day")&&!q.is(".disabled")){var i=parseInt(q.text(),10)||1;var r=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCHours(),m=this.viewDate.getUTCMinutes(),p=this.viewDate.getUTCSeconds();if(q.is(".old")){if(n===0){n=11;r-=1}else{n-=1}}else{if(q.is(".new")){if(n==11){n=0;r+=1}else{n+=1}}}this.viewDate.setUTCFullYear(r);this.viewDate.setUTCMonth(n,i);this.element.trigger({type:"changeDay",date:this.viewDate});if(this.viewSelect>=2){this._setDate(f(r,n,i,l,m,p,0))}}var o=this.viewMode;this.showMode(-1);this.fill();if(o==this.viewMode&&this.autoclose){this.hide()}break}}},_setDate:function(h,j){if(!j||j=="date"){this.date=h}if(!j||j=="view"){this.viewDate=h}this.fill();this.setValue();var i;if(this.isInput){i=this.element}else{if(this.component){i=this.element.find("input")}}if(i){i.change();if(this.autoclose&&(!j||j=="date")){}}this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(h,i){if(!i){return h}var j=new Date(h.valueOf());j.setUTCMinutes(j.getUTCMinutes()+(i*this.minuteStep));return j},moveHour:function(h,i){if(!i){return h}var j=new Date(h.valueOf());j.setUTCHours(j.getUTCHours()+i);return j},moveDate:function(h,i){if(!i){return h}var j=new Date(h.valueOf());j.setUTCDate(j.getUTCDate()+i);return j},moveMonth:function(h,k){if(!k){return h}var o=new Date(h.valueOf()),j=o.getUTCDate(),n=o.getUTCMonth(),m=Math.abs(k),p,q;k=k>0?1:-1;if(m==1){q=k==-1?function(){return o.getUTCMonth()==n}:function(){return o.getUTCMonth()!=p};p=n+k;o.setUTCMonth(p);if(p<0||p>11){p=(p+12)%12}}else{for(var l=0;l<m;l++){o=this.moveMonth(o,k)}p=o.getUTCMonth();o.setUTCDate(j);q=function(){return p!=o.getUTCMonth()}}while(q()){o.setUTCDate(--j);o.setUTCMonth(p)}return o},moveYear:function(h,i){return this.moveMonth(h,i*12)},dateWithinRange:function(h){return h>=this.startDate&&h<=this.endDate},keydown:function(k){if(this.picker.is(":not(:visible)")){if(k.keyCode==27){this.show()}return}var h=false,j,i,m,n,o;switch(k.keyCode){case 27:this.hide();k.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation){break}j=k.keyCode==37?-1:1;viewMode=this.viewMode;if(k.ctrlKey){viewMode+=2}else{if(k.shiftKey){viewMode+=1}}if(viewMode==4){n=this.moveYear(this.date,j);o=this.moveYear(this.viewDate,j)}else{if(viewMode==3){n=this.moveMonth(this.date,j);o=this.moveMonth(this.viewDate,j)}else{if(viewMode==2){n=this.moveDate(this.date,j);o=this.moveDate(this.viewDate,j)}else{if(viewMode==1){n=this.moveHour(this.date,j);o=this.moveHour(this.viewDate,j)}else{if(viewMode==0){n=this.moveMinute(this.date,j);o=this.moveMinute(this.viewDate,j)}}}}}if(this.dateWithinRange(n)){this.date=n;this.viewDate=o;this.setValue();this.update();k.preventDefault();h=true}break;case 38:case 40:if(!this.keyboardNavigation){break}j=k.keyCode==38?-1:1;viewMode=this.viewMode;if(k.ctrlKey){viewMode+=2}else{if(k.shiftKey){viewMode+=1}}if(viewMode==4){n=this.moveYear(this.date,j);o=this.moveYear(this.viewDate,j)}else{if(viewMode==3){n=this.moveMonth(this.date,j);o=this.moveMonth(this.viewDate,j)}else{if(viewMode==2){n=this.moveDate(this.date,j*7);o=this.moveDate(this.viewDate,j*7)}else{if(viewMode==1){if(this.showMeridian){n=this.moveHour(this.date,j*6);o=this.moveHour(this.viewDate,j*6)}else{n=this.moveHour(this.date,j*4);o=this.moveHour(this.viewDate,j*4)}}else{if(viewMode==0){n=this.moveMinute(this.date,j*4);o=this.moveMinute(this.viewDate,j*4)}}}}}if(this.dateWithinRange(n)){this.date=n;this.viewDate=o;this.setValue();this.update();k.preventDefault();h=true}break;case 13:if(this.viewMode!=0){var p=this.viewMode;this.showMode(-1);this.fill();if(p==this.viewMode&&this.autoclose){this.hide()}}else{this.fill();if(this.autoclose){this.hide()}}k.preventDefault();break;case 9:this.hide();break}if(h){var l;if(this.isInput){l=this.element}else{if(this.component){l=this.element.find("input")}}if(l){l.change()}this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(h){if(h){var i=Math.max(0,Math.min(d.modes.length-1,this.viewMode+h));if(i>=this.minView&&i<=this.maxView){this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:i});this.viewMode=i}}this.picker.find(">div").hide().filter(".datetimepicker-"+d.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()},reset:function(h){this._setDate(null,"date")},convertViewModeText:function(h){switch(h){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var e=a.fn.datetimepicker;a.fn.datetimepicker=function(j){var h=Array.apply(null,arguments);h.shift();var i;this.each(function(){var k=a(this),l=k.data("datetimepicker"),m=typeof j=="object"&&j;if(!l){k.data("datetimepicker",(l=new c(this,a.extend({},a.fn.datetimepicker.defaults,m))))}if(typeof j=="string"&&typeof l[j]=="function"){i=l[j].apply(l,h);if(i!==undefined){return false}}});if(i!==undefined){return i}else{return this}};a.fn.datetimepicker.defaults={};a.fn.datetimepicker.Constructor=c;var b=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}};var d={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(h){return(((h%4===0)&&(h%100!==0))||(h%400===0))},getDaysInMonth:function(i,h){return[31,(d.isLeapYear(i)?29:28),31,30,31,30,31,31,30,31,30,31][h]},getDefaultFormat:function(i,h){if(i=="standard"){if(h=="input"){return"yyyy-mm-dd hh:ii"}else{return"yyyy-mm-dd hh:ii:ss"}}else{if(i=="php"){if(h=="input"){return"Y-m-d H:i"}else{return"Y-m-d H:i:s"}}else{throw new Error("Invalid format type.")}}},validParts:function(h){if(h=="standard"){return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g}else{if(h=="php"){return/[dDjlNwzFmMnStyYaABgGhHis]/g}else{throw new Error("Invalid format type.")}}},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(h,k){var j=h.replace(this.validParts(k),"\0").split("\0"),i=h.match(this.validParts(k));if(!j||!j.length||!i||i.length==0){throw new Error("Invalid date format.")}return{separators:j,parts:i}},parseDate:function(j,n,p,y){if(j instanceof Date){var k=new Date(j.valueOf()-j.getTimezoneOffset()*60000);k.setMilliseconds(0);return k}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(j)){n=this.parseFormat("yyyy-mm-dd",y)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(j)){n=this.parseFormat("yyyy-mm-dd hh:ii",y)}if(/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(j)){n=this.parseFormat("yyyy-mm-dd hh:ii:ss",y)}if(/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(j)){var t=/([-+]\d+)([dmwy])/,u=j.match(/([-+]\d+)([dmwy])/g),r,l;j=new Date();for(var o=0;o<u.length;o++){r=t.exec(u[o]);l=parseInt(r[1]);switch(r[2]){case"d":j.setUTCDate(j.getUTCDate()+l);break;case"m":j=c.prototype.moveMonth.call(c.prototype,j,l);break;case"w":j.setUTCDate(j.getUTCDate()+l*7);break;case"y":j=c.prototype.moveYear.call(c.prototype,j,l);break}}return f(j.getUTCFullYear(),j.getUTCMonth(),j.getUTCDate(),j.getUTCHours(),j.getUTCMinutes(),j.getUTCSeconds(),0)}var u=j&&j.toString().match(this.nonpunctuation)||[],j=new Date(0,0,0,0,0,0,0),q={},x=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],w={hh:function(i,s){return i.setUTCHours(s)},h:function(i,s){return i.setUTCHours(s)},HH:function(i,s){return i.setUTCHours(s==12?0:s)},H:function(i,s){return i.setUTCHours(s==12?0:s)},ii:function(i,s){return i.setUTCMinutes(s)},i:function(i,s){return i.setUTCMinutes(s)},ss:function(i,s){return i.setUTCSeconds(s)},s:function(i,s){return i.setUTCSeconds(s)},yyyy:function(i,s){return i.setUTCFullYear(s)},yy:function(i,s){return i.setUTCFullYear(2000+s)},m:function(i,s){s-=1;while(s<0){s+=12}s%=12;i.setUTCMonth(s);while(i.getUTCMonth()!=s){if(isNaN(i.getUTCMonth())){return i}else{i.setUTCDate(i.getUTCDate()-1)}}return i},d:function(i,s){return i.setUTCDate(s)},p:function(i,s){return i.setUTCHours(s==1?i.getUTCHours()+12:i.getUTCHours())}},z,m,r;w.M=w.MM=w.mm=w.m;w.dd=w.d;w.P=w.p;j=f(j.getFullYear(),j.getMonth(),j.getDate(),j.getHours(),j.getMinutes(),j.getSeconds());if(u.length==n.parts.length){for(var o=0,h=n.parts.length;o<h;o++){z=parseInt(u[o],10);r=n.parts[o];if(isNaN(z)){switch(r){case"MM":m=a(b[p].months).filter(function(){var i=this.slice(0,u[o].length),s=u[o].slice(0,i.length);return i==s});z=a.inArray(m[0],b[p].months)+1;break;case"M":m=a(b[p].monthsShort).filter(function(){var i=this.slice(0,u[o].length),s=u[o].slice(0,i.length);return i.toLowerCase()==s.toLowerCase()});z=a.inArray(m[0],b[p].monthsShort)+1;break;case"p":case"P":z=a.inArray(u[o].toLowerCase(),b[p].meridiem);break}}q[r]=z}for(var o=0,v;o<x.length;o++){v=x[o];if(v in q&&!isNaN(q[v])){w[v](j,q[v])}}}return j},formatDate:function(j,k,m,o){if(j==null){return""}var p;if(o=="standard"){p={yy:j.getUTCFullYear().toString().substring(2),yyyy:j.getUTCFullYear(),m:j.getUTCMonth()+1,M:b[m].monthsShort[j.getUTCMonth()],MM:b[m].months[j.getUTCMonth()],d:j.getUTCDate(),D:b[m].daysShort[j.getUTCDay()],DD:b[m].days[j.getUTCDay()],p:(b[m].meridiem.length==2?b[m].meridiem[j.getUTCHours()<12?0:1]:""),h:j.getUTCHours(),i:j.getUTCMinutes(),s:j.getUTCSeconds()};if(b[m].meridiem.length==2){p.H=(p.h%12==0?12:p.h%12)}else{p.H=p.h}p.HH=(p.H<10?"0":"")+p.H;p.P=p.p.toUpperCase();p.hh=(p.h<10?"0":"")+p.h;p.ii=(p.i<10?"0":"")+p.i;p.ss=(p.s<10?"0":"")+p.s;p.dd=(p.d<10?"0":"")+p.d;p.mm=(p.m<10?"0":"")+p.m}else{if(o=="php"){p={y:j.getUTCFullYear().toString().substring(2),Y:j.getUTCFullYear(),F:b[m].months[j.getUTCMonth()],M:b[m].monthsShort[j.getUTCMonth()],n:j.getUTCMonth()+1,t:d.getDaysInMonth(j.getUTCFullYear(),j.getUTCMonth()),j:j.getUTCDate(),l:b[m].days[j.getUTCDay()],D:b[m].daysShort[j.getUTCDay()],w:j.getUTCDay(),N:(j.getUTCDay()==0?7:j.getUTCDay()),S:(j.getUTCDate()%10<=b[m].suffix.length?b[m].suffix[j.getUTCDate()%10-1]:""),a:(b[m].meridiem.length==2?b[m].meridiem[j.getUTCHours()<12?0:1]:""),g:(j.getUTCHours()%12==0?12:j.getUTCHours()%12),G:j.getUTCHours(),i:j.getUTCMinutes(),s:j.getUTCSeconds()};p.m=(p.n<10?"0":"")+p.n;p.d=(p.j<10?"0":"")+p.j;p.A=p.a.toString().toUpperCase();p.h=(p.g<10?"0":"")+p.g;p.H=(p.G<10?"0":"")+p.G;p.i=(p.i<10?"0":"")+p.i;p.s=(p.s<10?"0":"")+p.s}else{throw new Error("Invalid format type.")}}var j=[],n=a.extend([],k.separators);for(var l=0,h=k.parts.length;l<h;l++){if(n.length){j.push(n.shift())}j.push(p[k.parts[l]])}if(n.length){j.push(n.shift())}return j.join("")},convertViewMode:function(h){switch(h){case 4:case"decade":h=4;break;case 3:case"year":h=3;break;case 2:case"month":h=2;break;case 1:case"day":h=1;break;case 0:case"hour":h=0;break}return h},headTemplate:'<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};d.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+d.headTemplate+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+d.headTemplate+d.contTemplate+d.footTemplate+"</table></div></div>";d.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+d.headTemplateV3+"<tbody></tbody>"+d.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+d.headTemplateV3+d.contTemplate+d.footTemplate+"</table></div></div>";a.fn.datetimepicker.DPGlobal=d;a.fn.datetimepicker.noConflict=function(){a.fn.datetimepicker=e;return this};a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(i){var h=a(this);if(h.data("datetimepicker")){return}i.preventDefault();h.datetimepicker("show")});a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery);jQuery.cookie=function(c,g,d){if(arguments.length>1&&String(g)!=="[object Object]"){d=jQuery.extend({},d);if(g===null||g===undefined){d.expires=-1}if(typeof d.expires==="number"){var a=d.expires,f=d.expires=new Date();f.setDate(f.getDate()+a)}g=String(g);return(document.cookie=[encodeURIComponent(c),"=",d.raw?g:encodeURIComponent(g),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join(""))}d=g||{};var e,b=d.raw?function(h){return h}:decodeURIComponent;return(e=new RegExp("(?:^|; )"+encodeURIComponent(c)+"=([^;]*)").exec(document.cookie))?b(e[1]):null};/*
 * jQuery blockUI plugin
 * Version 2.56.0-2013.01.31
 * @requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(){function a(b){b.fn._fadeIn=b.fn.fadeIn;var k=b.noop||function(){};var j=/MSIE/.test(navigator.userAgent);var g=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var i=document.documentMode||0;var p=b.isFunction(document.createElement("div").style.setExpression);b.blockUI=function(r){h(window,r)};b.unblockUI=function(r){n(window,r)};b.growlUI=function(v,s,u,t){var r=b('<div class="growlUI"></div>');if(v){r.append("<h1>"+v+"</h1>")}if(s){r.append("<h2>"+s+"</h2>")}if(u===undefined){u=3000}b.blockUI({message:r,fadeIn:700,fadeOut:1000,centerY:false,timeout:u,showOverlay:false,onUnblock:t,css:b.blockUI.defaults.growlCSS})};b.fn.block=function(s){var r=b.extend({},b.blockUI.defaults,s||{});this.each(function(){var t=b(this);if(r.ignoreIfBlocked&&t.data("blockUI.isBlocked")){return}t.unblock({fadeOut:0})});return this.each(function(){if(b.css(this,"position")=="static"){this.style.position="relative";b(this).data("blockUI.static",true)}this.style.zoom=1;h(this,s)})};b.fn.unblock=function(r){return this.each(function(){n(this,r)})};b.blockUI.version=2.56;b.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var l=null;var m=[];function h(A,M){var x,P;var E=(A==window);var K=(M&&M.message!==undefined?M.message:undefined);M=b.extend({},b.blockUI.defaults,M||{});if(M.ignoreIfBlocked&&b(A).data("blockUI.isBlocked")){return}M.overlayCSS=b.extend({},b.blockUI.defaults.overlayCSS,M.overlayCSS||{});x=b.extend({},b.blockUI.defaults.css,M.css||{});if(M.onOverlayClick){M.overlayCSS.cursor="pointer"}P=b.extend({},b.blockUI.defaults.themedCSS,M.themedCSS||{});K=K===undefined?M.message:K;if(E&&l){n(window,{fadeOut:0})}if(K&&typeof K!="string"&&(K.parentNode||K.jquery)){var L=K.jquery?K[0]:K;var y={};b(A).data("blockUI.history",y);y.el=L;y.parent=L.parentNode;y.display=L.style.display;y.position=L.style.position;if(y.parent){y.parent.removeChild(L)}}b(A).data("blockUI.onUnblock",M.onUnblock);var R=M.baseZ;var H,I,J,N;if(j||M.forceIframe){H=b('<iframe class="blockUI" style="z-index:'+(R++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+M.iframeSrc+'"></iframe>')}else{H=b('<div class="blockUI" style="display:none"></div>')}if(M.theme){I=b('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(R++)+';display:none"></div>')}else{I=b('<div class="blockUI blockOverlay" style="z-index:'+(R++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(M.theme&&E){N='<div class="blockUI '+M.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(R+10)+';display:none;position:fixed">';if(M.title){N+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(M.title||"&nbsp;")+"</div>"}N+='<div class="ui-widget-content ui-dialog-content"></div>';N+="</div>"}else{if(M.theme){N='<div class="blockUI '+M.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(R+10)+';display:none;position:absolute">';if(M.title){N+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(M.title||"&nbsp;")+"</div>"}N+='<div class="ui-widget-content ui-dialog-content"></div>';N+="</div>"}else{if(E){N='<div class="blockUI '+M.blockMsgClass+' blockPage" style="z-index:'+(R+10)+';display:none;position:fixed"></div>'}else{N='<div class="blockUI '+M.blockMsgClass+' blockElement" style="z-index:'+(R+10)+';display:none;position:absolute"></div>'}}}J=b(N);if(K){if(M.theme){J.css(P);J.addClass("ui-widget-content")}else{J.css(x)}}if(!M.theme){I.css(M.overlayCSS)}I.css("position",E?"fixed":"absolute");if(j||M.forceIframe){H.css("opacity",0)}var G=[H,I,J],r=E?b("body"):b(A);b.each(G,function(){this.appendTo(r)});if(M.theme&&M.draggable&&b.fn.draggable){J.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var B=p&&(!b.support.boxModel||b("object,embed",E?null:A).length>0);if(g||B){if(E&&M.allowBodyStretch&&b.support.boxModel){b("html,body").css("height","100%")}if((g||!b.support.boxModel)&&!E){var O=q(A,"borderTopWidth"),F=q(A,"borderLeftWidth");var D=O?"(0 - "+O+")":0;var C=F?"(0 - "+F+")":0}b.each(G,function(z,S){var T=S[0].style;T.position="absolute";if(z<2){if(E){T.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+M.quirksmodeOffsetHack+') + "px"')}else{T.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(E){T.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{T.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(C){T.setExpression("left",C)}if(D){T.setExpression("top",D)}}else{if(M.centerY){if(E){T.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}T.marginTop=0}else{if(!M.centerY&&E){var U=(M.css&&M.css.top)?parseInt(M.css.top,10):0;var t="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+U+') + "px"';T.setExpression("top",t)}}}})}if(K){if(M.theme){J.find(".ui-widget-content").append(K)}else{J.append(K)}if(K.jquery||K.nodeType){b(K).show()}}if((j||M.forceIframe)&&M.showOverlay){H.show()}if(M.fadeIn){var u=M.onBlock?M.onBlock:k;var v=(M.showOverlay&&!K)?u:k;var w=K?u:k;if(M.showOverlay){I._fadeIn(M.fadeIn,v)}if(K){J._fadeIn(M.fadeIn,w)}}else{if(M.showOverlay){I.show()}if(K){J.show()}if(M.onBlock){M.onBlock()}}c(1,A,M);if(E){l=J[0];m=b(":input:enabled:visible",l);if(M.focusInput){setTimeout(e,20)}}else{d(J[0],M.centerX,M.centerY)}if(M.timeout){var Q=setTimeout(function(){if(E){b.unblockUI(M)}else{b(A).unblock(M)}},M.timeout);b(A).data("blockUI.timeout",Q)}}function n(t,w){var v=(t==window);var r=b(t);var s=r.data("blockUI.history");var x=r.data("blockUI.timeout");if(x){clearTimeout(x);r.removeData("blockUI.timeout")}w=b.extend({},b.blockUI.defaults,w||{});c(0,t,w);if(w.onUnblock===null){w.onUnblock=r.data("blockUI.onUnblock");r.removeData("blockUI.onUnblock")}var u;if(v){u=b("body").children().filter(".blockUI").add("body > .blockUI")}else{u=r.find(">.blockUI")}if(w.cursorReset){if(u.length>1){u[1].style.cursor=w.cursorReset}if(u.length>2){u[2].style.cursor=w.cursorReset}}if(v){l=m=null}if(w.fadeOut){u.fadeOut(w.fadeOut);setTimeout(function(){o(u,s,w,t)},w.fadeOut)}else{o(u,s,w,t)}}function o(x,u,y,v){var r=b(v);x.each(function(w,A){if(this.parentNode){this.parentNode.removeChild(this)}});if(u&&u.el){u.el.style.display=u.display;u.el.style.position=u.position;if(u.parent){u.parent.appendChild(u.el)}r.removeData("blockUI.history")}if(r.data("blockUI.static")){r.css("position","static")}if(typeof y.onUnblock=="function"){y.onUnblock(v,y)}var s=b(document.body),z=s.width(),t=s[0].style.width;s.width(z-1).width(z);s[0].style.width=t}function c(s,t,w){var v=t==window,r=b(t);if(!s&&(v&&!l||!v&&!r.data("blockUI.isBlocked"))){return}r.data("blockUI.isBlocked",s);if(!w.bindEvents||(s&&!w.showOverlay)){return}var u="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(s){b(document).bind(u,w,f)}else{b(document).unbind(u,f)}}function f(s){if(s.keyCode&&s.keyCode==9){if(l&&s.data.constrainTabKey){var t=m;var u=!s.shiftKey&&s.target===t[t.length-1];var r=s.shiftKey&&s.target===t[0];if(u||r){setTimeout(function(){e(r)},10);return false}}}var v=s.data;var w=b(s.target);if(w.hasClass("blockOverlay")&&v.onOverlayClick){v.onOverlayClick()}if(w.parents("div."+v.blockMsgClass).length>0){return true}return w.parents().children().filter("div.blockUI").length===0}function e(r){if(!m){return}var s=m[r===true?m.length-1:0];if(s){s.focus()}}function d(r,A,B){var v=r.parentNode,w=r.style;var u=((v.offsetWidth-r.offsetWidth)/2)-q(v,"borderLeftWidth");var z=((v.offsetHeight-r.offsetHeight)/2)-q(v,"borderTopWidth");if(A){w.left=u>0?(u+"px"):"0"}if(B){w.top=z>0?(z+"px"):"0"}}function q(r,s){return parseInt(b.css(r,s),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}})();/* Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.4
 * 
 * Requires: 1.2.2+
 */
(function(a){var c=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var d=c.length;d;){this.addEventListener(c[--d],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var d=c.length;d;){this.removeEventListener(c[--d],b,false)}}else{this.onmousewheel=null}}};a.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});function b(h){var i=h||window.event,d=[].slice.call(arguments,1),e=0,j=true,f=0,g=0;h=a.event.fix(i);h.type="mousewheel";if(h.wheelDelta){e=h.wheelDelta/120}if(h.detail){e=-h.detail/3}g=e;if(i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS){g=0;f=-1*e}if(i.wheelDeltaY!==undefined){g=i.wheelDeltaY/120}if(i.wheelDeltaX!==undefined){f=-1*i.wheelDeltaX/120}d.unshift(h,e,f,g);return a.event.handle.apply(this,d)}})(jQuery);/* jQuery Validation Plugin - v1.11.0 - 2/4/2013
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jrn Zaefferer; Licensed MIT */
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){if(b&&b.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(d){if(c.settings.submitHandler){c.submitButton=d.target}if(a(d.target).hasClass("cancel")){c.cancelSubmit=true}});this.submit(function(d){if(c.settings.debug){d.preventDefault()}function e(){var f;if(c.settings.submitHandler){if(c.submitButton){f=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm,d);if(c.submitButton){f.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return e()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return e()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var b=true;var c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b}},removeAttrs:function(c){var d={},b=this;a.each(c.split(/\s/),function(e,f){d[f]=b.attr(f);b.removeAttr(f)});return d},rules:function(c,b){var e=this[0];if(c){var i=a.data(e.form,"validator").settings;var j=i.rules;var f=a.validator.staticRules(e);switch(c){case"add":a.extend(f,a.validator.normalizeRule(b));j[e.name]=f;if(b.messages){i.messages[e.name]=a.extend(i.messages[e.name],b.messages)}break;case"remove":if(!b){delete j[e.name];return f}var g={};a.each(b.split(/\s/),function(k,l){g[l]=f[l];delete f[l]});return g}}var d=a.validator.normalizeRules(a.extend({},a.validator.classRules(e),a.validator.attributeRules(e),a.validator.dataRules(e),a.validator.staticRules(e)),e);if(d.required){var h=d.required;delete d.required;d=a.extend({required:h},d)}return d}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(c,b){this.settings=a.extend(true,{},a.validator.defaults,c);this.currentForm=b;this.init()};a.validator.format=function(c,b){if(arguments.length===1){return function(){var d=a.makeArray(arguments);d.unshift(c);return a.validator.format.apply(this,d)}}if(arguments.length>2&&b.constructor!==Array){b=a.makeArray(arguments).slice(1)}if(b.constructor!==Array){b=[b]}a.each(b,function(d,e){c=c.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return c};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(c.which===9&&this.elementValue(b)===""){return}else{if(b.name in this.submitted||b===this.lastElement){this.element(b)}}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).addClass(c).removeClass(d)}else{a(b).addClass(c).removeClass(d)}},unhighlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).removeClass(c).addClass(d)}else{a(b).removeClass(c).addClass(d)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=(this.groups={});a.each(this.settings.groups,function(e,f){if(typeof f==="string"){f=f.split(/\s/)}a.each(f,function(g,h){c[h]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function b(e){var g=a.data(this[0].form,"validator"),f="on"+e.type.replace(/^validate/,"");if(g.settings[f]){g.settings[f].call(g,this[0],e)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var c=0,b=(this.currentElements=this.elements());b[c];c++){this.check(b[c])}return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b));this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b)!==false;if(c){delete this.invalid[b.name]}else{this.invalid[b.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b){this.errorList.push({message:b[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in b)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var b=0;for(var c in d){b++}return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name===b.name}).length===1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&c.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();if(c==="radio"||c==="checkbox"){return a("input[name='"+a(b).attr("name")+"']:checked").val()}if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(d){d=this.validationTargetFor(this.clean(d));var i=a(d).rules();var b=false;var j=this.elementValue(d);var g;for(var f in i){var h={method:f,parameters:i[f]};try{g=a.validator.methods[f].call(this,j,d,h.parameters);if(g==="dependency-mismatch"){b=true;continue}b=false;if(g==="pending"){this.toHide=this.toHide.not(this.errorsFor(d));return}if(!g){this.formatAndAdd(d,h);return false}}catch(c){if(this.settings.debug&&window.console){console.log("Exception occured when checking element "+d.id+", check the '"+h.method+"' method.",c)}throw c}}if(b){return}if(this.objectLength(i)){this.successList.push(d)}return true},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||(b.attributes&&a(b).attr("data-msg-"+c.toLowerCase()))},customMessage:function(d,c){var b=this.settings.messages[d];return b&&(b.constructor===String?b:b[c])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,d){var c=this.defaultMessage(b,d.method),e=/\$?\{(\d+)\}/g;if(typeof c==="function"){c=c.call(this,d.parameters,b)}else{if(e.test(c)){c=a.validator.format(c.replace(e,"{$1}"),d.parameters)}}this.errorList.push({message:c,element:b});this.errorMap[b.name]=c;this.submitted[b.name]=c},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){var d,b;for(d=0;this.errorList[d];d++){var c=this.errorList[d];if(this.settings.highlight){this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(c.element,c.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(d=0;this.successList[d];d++){this.showLabel(this.successList[d])}}if(this.settings.unhighlight){for(d=0,b=this.validElements();b[d];d++){this.settings.unhighlight.call(this,b[d],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,d){var c=this.errorsFor(b);if(c.length){c.removeClass(this.settings.validClass).addClass(this.settings.errorClass);c.html(d)}else{c=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(c).length){if(this.settings.errorPlacement){this.settings.errorPlacement(c,a(b))}else{c.insertAfter(b)}}}if(!d&&this.settings.success){c.text("");if(typeof this.settings.success==="string"){c.addClass(this.settings.success)}else{this.settings.success(c,b)}}this.toShow=this.toShow.add(c)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return(/radio|checkbox/i).test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){if(b.constructor===String){this.classRuleSettings[b]=c}else{a.extend(this.classRuleSettings,b)}},classRules:function(c){var d={};var b=a(c).attr("class");if(b){a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}})}return d},attributeRules:function(c){var e={};var b=a(c);for(var d in a.validator.methods){var f;if(d==="required"){f=b.get(0).getAttribute(d);if(f===""){f=true}f=!!f}else{f=b.attr(d)}if(f){e[d]=f}else{if(b[0].getAttribute("type")===d){e[d]=true}}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},dataRules:function(c){var d,f,e={},b=a(c);for(d in a.validator.methods){f=b.data("rule-"+d.toLowerCase());if(f!==undefined){e[d]=f}}return e},staticRules:function(b){var c={};var d=a.data(b.form,"validator");if(d.settings.rules){c=a.validator.normalizeRule(d.settings.rules[b.name])||{}}return c},normalizeRules:function(c,b){a.each(c,function(e,f){if(f===false){delete c[e];return}if(f.param||f.depends){var d=true;switch(typeof f.depends){case"string":d=!!a(f.depends,b.form).length;break;case"function":d=f.depends.call(b,b);break}if(d){c[e]=f.param!==undefined?f.param:true}else{delete c[e]}}});a.each(c,function(e,d){c[e]=a.isFunction(d)?d(b):d});a.each(["minlength","maxlength"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength"],function(){var d;if(c[this]){if(a.isArray(c[this])){c[this]=[Number(c[this][0]),Number(c[this][1])]}else{if(typeof c[this]==="string"){d=c[this].split(/[\s,]+/);c[this]=[Number(d[0]),Number(d[1])]}}}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}return c},normalizeRule:function(b){if(typeof b==="string"){var c={};a.each(b.split(/\s/),function(){c[this]=true});b=c}return b},addMethod:function(d,c,b){a.validator.methods[d]=c;a.validator.messages[d]=b!==undefined?b:a.validator.messages[d];if(c.length<3){a.validator.addClassRules(d,a.validator.normalizeRule(d))}},methods:{required:function(e,b,c){if(!this.depend(c,b)){return"dependency-mismatch"}if(b.nodeName.toLowerCase()==="select"){var d=a(b).val();return d&&d.length>0}if(this.checkable(b)){return this.getLength(e,b)>0}return a.trim(e).length>0},remote:function(g,c,d){if(this.optional(c)){return"dependency-mismatch"}var e=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d=typeof d==="string"&&{url:d}||d;if(e.old===g){return e.valid}e.old=g;var f=this;this.startRequest(c);var b={};b[c.name]=g;a.ajax(a.extend(true,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:b,success:function(j){f.settings.messages[c.name].remote=e.originalMessage;var l=j===true||j==="true";if(l){var k=f.formSubmitted;f.prepareElement(c);f.formSubmitted=k;f.successList.push(c);delete f.invalid[c.name];f.showErrors()}else{var h={};var i=j||f.defaultMessage(c,"remote");h[c.name]=e.message=a.isFunction(i)?i(g):i;f.invalid[c.name]=true;f.showErrors(h)}e.valid=l;f.stopRequest(c,l)}},d));return"pending"},minlength:function(e,b,d){var c=a.isArray(e)?e.length:this.getLength(a.trim(e),b);return this.optional(b)||c>=d},maxlength:function(e,b,d){var c=a.isArray(e)?e.length:this.getLength(a.trim(e),b);return this.optional(b)||c<=d},rangelength:function(e,b,d){var c=a.isArray(e)?e.length:this.getLength(a.trim(e),b);return this.optional(b)||(c>=d[0]&&c<=d[1])},min:function(d,b,c){return this.optional(b)||d>=c},max:function(d,b,c){return this.optional(b)||d<=c},range:function(d,b,c){return this.optional(b)||(d>=c[0]&&d<=c[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c).toString())},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(h,d){if(this.optional(d)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(h)){return false}var f=0,g=0,b=false;h=h.replace(/\D/g,"");for(var e=h.length-1;e>=0;e--){var c=h.charAt(e);g=parseInt(c,10);if(b){if((g*=2)>9){g-=9}}f+=g;b=!b}return(f%10)===0},equalTo:function(e,b,c){var d=a(c);if(this.settings.onfocusout){d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()})}return e===d.val()}}});a.format=a.validator.format}(jQuery));(function(a){var c={};if(a.ajaxPrefilter){a.ajaxPrefilter(function(f,d,g){var e=f.port;if(f.mode==="abort"){if(c[e]){c[e].abort()}c[e]=g}})}else{var b=a.ajax;a.ajax=function(f){var d=("mode" in f?f:a.ajaxSettings).mode,e=("port" in f?f:a.ajaxSettings).port;if(d==="abort"){if(c[e]){c[e].abort()}return(c[e]=b.apply(this,arguments))}return b.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(b,d,c){return this.bind(d,function(e){var f=a(e.target);if(f.is(b)){return c.apply(f,arguments)}})}})}(jQuery));/*
 * Globalize
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(y,x){var k,q,r,s,t,b,c,e,l,m,n,u,v,w,z,a,d,f,g,j,h,i,o,p;k=function(A){return new k.prototype.init(A)};if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){module.exports=k}else{y.Globalize=k}k.cultures={};k.prototype={constructor:k,init:function(A){this.cultures=k.cultures;this.cultureSelector=A;return this}};k.prototype.init.prototype=k.prototype;k.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-","NaN":"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"}}},messages:{}};k.cultures["default"].calendar=k.cultures["default"].calendars.standard;k.cultures.en=k.cultures["default"];k.cultureSelector="en";q=/^0x[a-f0-9]+$/i;r=/^[+\-]?infinity$/i;s=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;t=/^\s+|\s+$/g;b=function(A,C){if(A.indexOf){return A.indexOf(C)}for(var B=0,D=A.length;B<D;B++){if(A[B]===C){return B}}return -1};c=function(B,A){return B.substr(B.length-A.length)===A};e=function(){var H,G,I,B,C,A,J=arguments[0]||{},E=1,F=arguments.length,D=false;if(typeof J==="boolean"){D=J;J=arguments[1]||{};E=2}if(typeof J!=="object"&&!m(J)){J={}}for(;E<F;E++){if((H=arguments[E])!=null){for(G in H){I=J[G];B=H[G];if(J===B){continue}if(D&&B&&(n(B)||(C=l(B)))){if(C){C=false;A=I&&l(I)?I:[]}else{A=I&&n(I)?I:{}}J[G]=e(D,A,B)}else{if(B!==x){J[G]=B}}}}}return J};l=Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"};m=function(A){return Object.prototype.toString.call(A)==="[object Function]"};n=function(A){return Object.prototype.toString.call(A)==="[object Object]"};u=function(B,A){return B.indexOf(A)===0};v=function(A){return(A+"").replace(t,"")};w=function(A){if(isNaN(A)){return NaN}return Math[A<0?"ceil":"floor"](A)};z=function(D,A,C){var B;for(B=D.length;B<A;B+=1){D=(C?("0"+D):(D+"0"))}return D};a=function(E,G){var F=0,B=false;for(var C=0,D=E.length;C<D;C++){var A=E.charAt(C);switch(A){case"'":if(B){G.push("'")}else{F++}B=false;break;case"\\":if(B){G.push("\\")}B=!B;break;default:G.push(A);B=false;break}}return F};d=function(A,B){B=B||"F";var D,E=A.patterns,C=B.length;if(C===1){D=E[B];if(!D){throw"Invalid date format string '"+B+"'."}B=D}else{if(C===2&&B.charAt(0)==="%"){B=B.charAt(1)}}return B};f=function(aa,M,G){var B=G.calendar,E=B.convert,X;if(!M||!M.length||M==="i"){if(G&&G.name.length){if(E){X=f(aa,B.patterns.F,G)}else{var K=new Date(aa.getTime()),J=h(aa,B.eras);K.setFullYear(i(aa,B,J));X=K.toLocaleString()}}else{X=aa.toString()}return X}var L=B.eras,Y=M==="s";M=d(B,M);X=[];var Q,ab=["0","00","000"],N,C,I=/([^d]|^)(d|dd)([^d]|$)/g,W=0,Z=j(),F;function T(ad,ac){var ae,af=ad+"";if(ac>1&&af.length<ac){ae=(ab[ac-2]+af);return ae.substr(ae.length-ac,ac)}else{ae=af}return ae}function P(){if(N||C){return N}N=I.test(M);C=true;return N}function O(ac,ad){if(F){return F[ad]}switch(ad){case 0:return ac.getFullYear();case 1:return ac.getMonth();case 2:return ac.getDate();default:throw"Invalid part value "+ad}}if(!Y&&E){F=E.fromGregorian(aa)}for(;;){var R=Z.lastIndex,A=Z.exec(M);var V=M.slice(R,A?A.index:M.length);W+=a(V,X);if(!A){break}if(W%2){X.push(A[0]);continue}var H=A[0],D=H.length;switch(H){case"ddd":case"dddd":var S=(D===3)?B.days.namesAbbr:B.days.names;X.push(S[aa.getDay()]);break;case"d":case"dd":N=true;X.push(T(O(aa,2),D));break;case"MMM":case"MMMM":var U=O(aa,1);X.push((B.monthsGenitive&&P())?(B.monthsGenitive[D===3?"namesAbbr":"names"][U]):(B.months[D===3?"namesAbbr":"names"][U]));break;case"M":case"MM":X.push(T(O(aa,1)+1,D));break;case"y":case"yy":case"yyyy":U=F?F[0]:i(aa,B,h(aa,L),Y);if(D<4){U=U%100}X.push(T(U,D));break;case"h":case"hh":Q=aa.getHours()%12;if(Q===0){Q=12}X.push(T(Q,D));break;case"H":case"HH":X.push(T(aa.getHours(),D));break;case"m":case"mm":X.push(T(aa.getMinutes(),D));break;case"s":case"ss":X.push(T(aa.getSeconds(),D));break;case"t":case"tt":U=aa.getHours()<12?(B.AM?B.AM[0]:" "):(B.PM?B.PM[0]:" ");X.push(D===1?U.charAt(0):U);break;case"f":case"ff":case"fff":X.push(T(aa.getMilliseconds(),3).substr(0,D));break;case"z":case"zz":Q=aa.getTimezoneOffset()/60;X.push((Q<=0?"+":"-")+T(Math.floor(Math.abs(Q)),D));break;case"zzz":Q=aa.getTimezoneOffset()/60;X.push((Q<=0?"+":"-")+T(Math.floor(Math.abs(Q)),2)+":"+T(Math.abs(aa.getTimezoneOffset()%60),2));break;case"g":case"gg":if(B.eras){X.push(B.eras[h(aa,L)].name)}break;case"/":X.push(B["/"]);break;default:throw"Invalid date format pattern '"+H+"'."}}return X.join("")};(function(){var A;A=function(H,J,F){var G=F.groupSizes,C=G[0],B=1,E=Math.pow(10,J),M=Math.round(H*E)/E;if(!isFinite(M)){M=H}H=M;var I=H+"",L="",O=I.split(/e/i),D=O.length>1?parseInt(O[1],10):0;I=O[0];O=I.split(".");I=O[0];L=O.length>1?O[1]:"";if(D>0){L=z(L,D,false);I+=L.slice(0,D);L=L.substr(D)}else{if(D<0){D=-D;I=z(I,D+1,true);L=I.slice(-D,I.length)+L;I=I.slice(0,-D)}}if(J>0){L=F["."]+((L.length>J)?L.slice(0,J):z(L,J))}else{L=""}var P=I.length-1,N=F[","],K="";while(P>=0){if(C===0||C>P){return I.slice(0,P+1)+(K.length?(N+K+L):L)}K=I.slice(P-C+1,P+1)+(K.length?(N+K):"");P-=C;if(B<G.length){C=G[B];B++}}return I.slice(0,P+1)+N+K+L};g=function(N,E,C){if(!isFinite(N)){if(N===Infinity){return C.numberFormat.positiveInfinity}if(N===-Infinity){return C.numberFormat.negativeInfinity}return C.numberFormat.NaN}if(!E||E==="i"){return C.name.length?N.toLocaleString():N.toString()}E=E||"D";var H=C.numberFormat,I=Math.abs(N),L=-1,J;if(E.length>1){L=parseInt(E.slice(1),10)}var D=E.charAt(0).toUpperCase(),F;switch(D){case"D":J="n";I=w(I);if(L!==-1){I=z(""+I,L,true)}if(N<0){I="-"+I}break;case"N":F=H;case"C":F=F||H.currency;case"P":F=F||H.percent;J=N<0?F.pattern[0]:(F.pattern[1]||"n");if(L===-1){L=F.decimals}I=A(I*(D==="P"?100:1),L,F);break;default:throw"Bad number format specifier: "+D}var K=/n|\$|-|%/g,M="";for(;;){var G=K.lastIndex,B=K.exec(J);M+=J.slice(G,B?B.index:J.length);if(!B){break}switch(B[0]){case"n":M+=I;break;case"$":M+=H.currency.symbol;break;case"-":if(/[1-9]/.test(I)){M+=H["-"]}break;case"%":M+=H.percent.symbol;break}}return M}}());j=function(){return(/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g)};h=function(A,B){if(!B){return 0}var E,F=A.getTime();for(var C=0,D=B.length;C<D;C++){E=B[C].start;if(E===null||F>=E){return C}}return 0};i=function(B,A,C,D){var E=B.getFullYear();if(!D&&A.eras){E-=A.eras[C].offset}return E};(function(){var A,B,C,D,E,F,G;A=function(H,M){if(M<100){var K=new Date(),J=h(K),I=i(K,H,J),L=H.twoDigitYearMax;L=typeof L==="string"?new Date().getFullYear()%100+parseInt(L,10):L;M+=I-(I%100);if(M>L){M-=100}}return M};B=function(I,M,H){var K,J=I.days,L=I._upperDays;if(!L){I._upperDays=L=[G(J.names),G(J.namesAbbr),G(J.namesShort)]}M=F(M);if(H){K=b(L[1],M);if(K===-1){K=b(L[2],M)}}else{K=b(L[0],M)}return K};C=function(I,O,H){var K=I.months,L=I.monthsGenitive||I.months,M=I._upperMonths,N=I._upperMonthsGen;if(!M){I._upperMonths=M=[G(K.names),G(K.namesAbbr)];I._upperMonthsGen=N=[G(L.names),G(L.namesAbbr)]}O=F(O);var J=b(H?M[1]:M[0],O);if(J<0){J=b(H?N[1]:N[0],O)}return J};D=function(I,K){var T=I._parseRegExp;if(!T){I._parseRegExp=T={}}else{var U=T[K];if(U){return U}}var J=d(I,K).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),V=["^"],L=[],M=0,S=0,X=j(),P;while((P=X.exec(J))!==null){var R=J.slice(M,P.index);M=X.lastIndex;S+=a(R,V);if(S%2){V.push(P[0]);continue}var O=P[0],N=O.length,H;switch(O){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":H="(\\D+)";break;case"tt":case"t":H="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":H="(\\d{"+N+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":H="(\\d\\d?)";break;case"zzz":H="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":H="([+-]?\\d\\d?)";break;case"/":H="(\\/)";break;default:throw"Invalid date format pattern '"+O+"'."}if(H){V.push(H)}L.push(P[0])}a(J.slice(M),V);V.push("$");var W=V.join("").replace(/\s+/g,"\\s+"),Q={regExp:W,groups:L};return T[K]=Q};E=function(J,I,H){return J<I||J>H};F=function(H){return H.split("\u00A0").join(" ").toUpperCase()};G=function(H){var K=[];for(var I=0,J=H.length;I<J;I++){K[I]=F(H[I])}return K};o=function(am,R,L){am=v(am);var I=L.calendar,ah=D(I,R),Z=new RegExp(ah.regExp).exec(am);if(Z===null){return null}var S=ah.groups,P=null,ao=null,ae=null,N=null,an=null,T=0,U,ac=0,ak=0,af=0,al=null,ai=false;for(var W=0,X=S.length;W<X;W++){var aa=Z[W+1];if(aa){var M=S[W],J=M.length,ab=parseInt(aa,10);switch(M){case"dd":case"d":N=ab;if(E(N,1,31)){return null}break;case"MMM":case"MMMM":ae=C(I,aa,J===3);if(E(ae,0,11)){return null}break;case"M":case"MM":ae=ab-1;if(E(ae,0,11)){return null}break;case"y":case"yy":case"yyyy":ao=J<4?A(I,ab):ab;if(E(ao,0,9999)){return null}break;case"h":case"hh":T=ab;if(T===12){T=0}if(E(T,0,11)){return null}break;case"H":case"HH":T=ab;if(E(T,0,23)){return null}break;case"m":case"mm":ac=ab;if(E(ac,0,59)){return null}break;case"s":case"ss":ak=ab;if(E(ak,0,59)){return null}break;case"tt":case"t":ai=I.PM&&(aa===I.PM[0]||aa===I.PM[1]||aa===I.PM[2]);if(!ai&&(!I.AM||(aa!==I.AM[0]&&aa!==I.AM[1]&&aa!==I.AM[2]))){return null}break;case"f":case"ff":case"fff":af=ab*Math.pow(10,3-J);if(E(af,0,999)){return null}break;case"ddd":case"dddd":an=B(I,aa,J===3);if(E(an,0,6)){return null}break;case"zzz":var ag=aa.split(/:/);if(ag.length!==2){return null}U=parseInt(ag[0],10);if(E(U,-12,13)){return null}var ad=parseInt(ag[1],10);if(E(ad,0,59)){return null}al=(U*60)+(u(aa,"-")?-ad:ad);break;case"z":case"zz":U=ab;if(E(U,-12,13)){return null}al=U*60;break;case"g":case"gg":var Q=aa;if(!Q||!I.eras){return null}Q=v(Q.toLowerCase());for(var V=0,Y=I.eras.length;V<Y;V++){if(Q===I.eras[V].name.toLowerCase()){P=V;break}}if(P===null){return null}break}}}var aj=new Date(),O,K=I.convert;O=K?K.fromGregorian(aj)[0]:aj.getFullYear();if(ao===null){ao=O}else{if(I.eras){ao+=I.eras[(P||0)].offset}}if(ae===null){ae=0}if(N===null){N=1}if(K){aj=K.toGregorian(ao,ae,N);if(aj===null){return null}}else{aj.setFullYear(ao,ae,N);if(aj.getDate()!==N){return null}if(an!==null&&aj.getDay()!==an){return null}}if(ai&&T<12){T+=12}aj.setHours(T,ac,ak,af);if(al!==null){var H=aj.getMinutes()-(al+aj.getTimezoneOffset());aj.setHours(aj.getHours()+parseInt(H/60,10),H%60)}return aj}}());p=function(F,C,B){var A=C["-"],D=C["+"],E;switch(B){case"n -":A=" "+A;D=" "+D;case"n-":if(c(F,A)){E=["-",F.substr(0,F.length-A.length)]}else{if(c(F,D)){E=["+",F.substr(0,F.length-D.length)]}}break;case"- n":A+=" ";D+=" ";case"-n":if(u(F,A)){E=["-",F.substr(A.length)]}else{if(u(F,D)){E=["+",F.substr(D.length)]}}break;case"(n)":if(u(F,"(")&&c(F,")")){E=["-",F.substr(1,F.length-2)]}break}return E||["",F]};k.prototype.findClosestCulture=function(A){return k.findClosestCulture.call(this,A)};k.prototype.format=function(C,B,A){return k.format.call(this,C,B,A)};k.prototype.localize=function(B,A){return k.localize.call(this,B,A)};k.prototype.parseInt=function(C,B,A){return k.parseInt.call(this,C,B,A)};k.prototype.parseFloat=function(C,B,A){return k.parseFloat.call(this,C,B,A)};k.prototype.culture=function(A){return k.culture.call(this,A)};k.addCultureInfo=function(C,B,D){var A={},E=false;if(typeof C!=="string"){D=C;C=this.culture().name;A=this.cultures[C]}else{if(typeof B!=="string"){D=B;E=(this.cultures[C]==null);A=this.cultures[C]||this.cultures["default"]}else{E=true;A=this.cultures[B]}}this.cultures[C]=e(true,{},A,D);if(E){this.cultures[C].calendar=this.cultures[C].calendars.standard}};k.findClosestCulture=function(J){var I;if(!J){return this.findClosestCulture(this.cultureSelector)||this.cultures["default"]}if(typeof J==="string"){J=J.split(",")}if(l(J)){var G,C=this.cultures,H=J,D,F=H.length,M=[];for(D=0;D<F;D++){J=v(H[D]);var L,K=J.split(";");G=v(K[0]);if(K.length===1){L=1}else{J=v(K[1]);if(J.indexOf("q=")===0){J=J.substr(2);L=parseFloat(J);L=isNaN(L)?0:L}else{L=1}}M.push({lang:G,pri:L})}M.sort(function(N,O){if(N.pri<O.pri){return 1}else{if(N.pri>O.pri){return -1}}return 0});for(D=0;D<F;D++){G=M[D].lang;I=C[G];if(I){return I}}for(D=0;D<F;D++){G=M[D].lang;do{var E=G.lastIndexOf("-");if(E===-1){break}G=G.substr(0,E);I=C[G];if(I){return I}}while(1)}for(D=0;D<F;D++){G=M[D].lang;for(var B in C){var A=C[B];if(A.language===G){return A}}}}else{if(typeof J==="object"){return J}}return I||null};k.format=function(D,C,B){var A=this.findClosestCulture(B);if(D instanceof Date){D=f(D,C,A)}else{if(typeof D==="number"){D=g(D,C,A)}}return D};k.localize=function(B,A){return this.findClosestCulture(A).messages[B]||this.cultures["default"].messages[B]};k.parseDate=function(I,D,A){A=this.findClosestCulture(A);var B,H,G;if(D){if(typeof D==="string"){D=[D]}if(D.length){for(var E=0,F=D.length;E<F;E++){var C=D[E];if(C){B=o(I,C,A);if(B){break}}}}}else{G=A.calendar.patterns;for(H in G){B=o(I,G[H],A);if(B){break}}}return B||null};k.parseInt=function(C,B,A){return w(k.parseFloat(C,B,A))};k.parseFloat=function(T,P,C){if(typeof P!=="number"){C=P;P=10}var B=this.findClosestCulture(C);var Q=NaN,M=B.numberFormat;if(T.indexOf(B.numberFormat.currency.symbol)>-1){T=T.replace(B.numberFormat.currency.symbol,"");T=T.replace(B.numberFormat.currency["."],B.numberFormat["."])}if(T.indexOf(B.numberFormat.percent.symbol)>-1){T=T.replace(B.numberFormat.percent.symbol,"")}T=T.replace(/ /g,"");if(r.test(T)){Q=parseFloat(T)}else{if(!P&&q.test(T)){Q=parseInt(T,16)}else{var S=p(T,M,M.pattern[0]),R=S[0],N=S[1];if(R===""&&M.pattern[0]!=="(n)"){S=p(T,M,"(n)");R=S[0];N=S[1]}if(R===""&&M.pattern[0]!=="-n"){S=p(T,M,"-n");R=S[0];N=S[1]}R=R||"+";var F,K,G=N.indexOf("e");if(G<0){G=N.indexOf("E")}if(G<0){K=N;F=null}else{K=N.substr(0,G);F=N.substr(G+1)}var L,I,E=M["."],D=K.indexOf(E);if(D<0){L=K;I=null}else{L=K.substr(0,D);I=K.substr(D+E.length)}var J=M[","];L=L.split(J).join("");var A=J.replace(/\u00A0/g," ");if(J!==A){L=L.split(A).join("")}var O=R+L;if(I!==null){O+="."+I}if(F!==null){var H=p(F,M,"-n");O+="e"+(H[0]||"+")+H[1]}if(s.test(O)){Q=parseFloat(O)}}}return Q};k.culture=function(A){if(typeof A!=="undefined"){this.cultureSelector=A}return this.findClosestCulture(A)||this.cultures["default"]}}(this));/*
** An extension to the jQuery Validation Plugin which makes it use Globalize.js for number and date parsing 
** Copyright (c) 2013 John Reilly
*/
(function(a,b){var c={min:a.validator.methods.min,max:a.validator.methods.max,range:a.validator.methods.range};a.validator.methods.number=function(f,d){var e=b.parseFloat(f);return this.optional(d)||(a.isNumeric(e))};a.validator.methods.date=function(f,d){var e=b.parseDate(f);return this.optional(d)||(e)};a.validator.methods.min=function(g,d,e){var f=b.parseFloat(g);return c.min.call(this,f,d,e)};a.validator.methods.max=function(g,d,e){var f=b.parseFloat(g);return c.max.call(this,f,d,e)};a.validator.methods.range=function(g,d,e){var f=b.parseFloat(g);return c.range.call(this,f,d,e)}}(jQuery,Globalize));jQuery.fn.sortElements=(function(){var a=[].sort;return function(b,c){c=c||function(){return this};var d=this.map(function(){var g=c.call(this),f=g.parentNode,e=f.insertBefore(document.createTextNode(""),g.nextSibling);return function(){if(f===this){throw new Error("You can't sort elements if any one is a descendant of another.")}f.insertBefore(this,e);f.removeChild(e)}});return a.call(this,b).each(function(e){d[e].call(c.call(this))})}})();(function(a){a.fn.tabby=function(f){var g=a.extend({},a.fn.tabby.defaults,f);var h=a.fn.tabby.pressed;return this.each(function(){$this=a(this);var i=a.meta?a.extend({},g,$this.data()):g;$this.bind("keydown",function(j){var k=a.fn.tabby.catch_kc(j);if(16==k){h.shft=true}if(17==k){h.ctrl=true;setTimeout("$.fn.tabby.pressed.ctrl = false;",1000)}if(18==k){h.alt=true;setTimeout("$.fn.tabby.pressed.alt = false;",1000)}if(9==k&&!h.ctrl&&!h.alt){j.preventDefault;h.last=k;setTimeout("$.fn.tabby.pressed.last = null;",0);e(a(j.target).get(0),h.shft,i);return false}}).bind("keyup",function(j){if(16==a.fn.tabby.catch_kc(j)){h.shft=false}}).bind("blur",function(j){if(9==h.last){a(j.target).one("focus",function(k){h.last=null}).get(0).focus()}})})};a.fn.tabby.catch_kc=function(f){return f.keyCode?f.keyCode:f.charCode?f.charCode:f.which};a.fn.tabby.pressed={shft:false,ctrl:false,alt:false,last:null};function b(f){if(window.console&&window.console.log){window.console.log("textarea count: "+f.size())}}function e(f,i,g){var h=f.scrollTop;if(f.setSelectionRange){c(f,i,g)}else{if(document.selection){d(f,i,g)}}f.scrollTop=h}a.fn.tabby.defaults={tabString:String.fromCharCode(9)};function c(p,t,q){var v=p.selectionStart;var g=p.selectionEnd;if(v==g){if(t){if("\t"==p.value.substring(v-q.tabString.length,v)){p.value=p.value.substring(0,v-q.tabString.length)+p.value.substring(v);p.focus();p.setSelectionRange(v-q.tabString.length,v-q.tabString.length)}else{if("\t"==p.value.substring(v,v+q.tabString.length)){p.value=p.value.substring(0,v)+p.value.substring(v+q.tabString.length);p.focus();p.setSelectionRange(v,v)}}}else{p.value=p.value.substring(0,v)+q.tabString+p.value.substring(v);p.focus();p.setSelectionRange(v+q.tabString.length,v+q.tabString.length)}}else{var k=p.value.split("\n");var j=new Array();var u=0;var f=0;var s=false;for(var h in k){f=u+k[h].length;j.push({start:u,end:f,selected:(u<=v&&f>v)||(f>=g&&u<g)||(u>v&&f<g)});u=f+1}var l=0;for(var h in j){if(j[h].selected){var r=j[h].start+l;if(t&&q.tabString==p.value.substring(r,r+q.tabString.length)){p.value=p.value.substring(0,r)+p.value.substring(r+q.tabString.length);l-=q.tabString.length}else{if(!t){p.value=p.value.substring(0,r)+q.tabString+p.value.substring(r);l+=q.tabString.length}}}}p.focus();var n=v+((l>0)?q.tabString.length:(l<0)?-q.tabString.length:0);var m=g+l;p.setSelectionRange(n,m)}}function d(t,z,u){var v=document.selection.createRange();if(t==v.parentElement()){if(""==v.text){if(z){var m=v.getBookmark();v.moveStart("character",-u.tabString.length);if(u.tabString==v.text){v.text=""}else{v.moveToBookmark(m);v.moveEnd("character",u.tabString.length);if(u.tabString==v.text){v.text=""}}v.collapse(true);v.select()}else{v.text=u.tabString;v.collapse(false);v.select()}}else{var y=v.text;var x=y.length;var w=y.split("\r\n");var k=document.body.createTextRange();k.moveToElementText(t);k.setEndPoint("EndToStart",v);var l=k.text;var h=l.split("\r\n");var j=l.length;var f=document.body.createTextRange();f.moveToElementText(t);f.setEndPoint("StartToEnd",v);var g=f.text;var p=document.body.createTextRange();p.moveToElementText(t);p.setEndPoint("StartToEnd",k);var q=p.text;var n=a(t).html();a("#r3").text(j+" + "+x+" + "+g.length+" = "+n.length);if((j+q.length)<n.length){h.push("");j+=2;if(z&&u.tabString==w[0].substring(0,u.tabString.length)){w[0]=w[0].substring(u.tabString.length)}else{if(!z){w[0]=u.tabString+w[0]}}}else{if(z&&u.tabString==h[h.length-1].substring(0,u.tabString.length)){h[h.length-1]=h[h.length-1].substring(u.tabString.length)}else{if(!z){h[h.length-1]=u.tabString+h[h.length-1]}}}for(var r=1;r<w.length;r++){if(z&&u.tabString==w[r].substring(0,u.tabString.length)){w[r]=w[r].substring(u.tabString.length)}else{if(!z){w[r]=u.tabString+w[r]}}}if(1==h.length&&0==j){if(z&&u.tabString==w[0].substring(0,u.tabString.length)){w[0]=w[0].substring(u.tabString.length)}else{if(!z){w[0]=u.tabString+w[0]}}}if((j+x+g.length)<n.length){w.push("");x+=2}k.text=h.join("\r\n");v.text=w.join("\r\n");var s=document.body.createTextRange();s.moveToElementText(t);if(0<j){s.setEndPoint("StartToEnd",k)}else{s.setEndPoint("StartToStart",k)}s.setEndPoint("EndToEnd",v);s.select()}}}})(jQuery);(function(a){var e={},c,l,k,g=a.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),m=false;a.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}};a.fn.extend({tooltip:function(p){p=a.extend({},a.tooltip.defaults,p);b(p);return this.each(function(){a.data(this,"tooltip",p);this.tOpacity=e.parent.css("opacity");this.tooltipText=this.title;a(this).removeAttr("title");this.alt=""}).mouseover(h).mouseout(f).click(f)},fixPNG:g?function(){return this.each(function(){var p=a(this).css("backgroundImage");if(p.match(/^url\(["']?(.*\.png)["']?\)$/i)){p=RegExp.$1;a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+p+"')"}).each(function(){var q=a(this).css("position");if(q!="absolute"&&q!="relative"){a(this).css("position","relative")}})}})}:function(){return this},unfixPNG:g?function(){return this.each(function(){a(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function b(p){if(e.parent){return}e.parent=a('<div id="'+p.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(a.fn.bgiframe){e.parent.bgiframe()}e.title=a("h3",e.parent);e.body=a("div.body",e.parent);e.url=a("div.url",e.parent)}function i(p){return a.data(p,"tooltip")}function d(p){if(i(this).delay){k=setTimeout(j,i(this).delay)}else{j()}m=!!i(this).track;a(document.body).bind("mousemove",n);n(p)}function h(){if(a.tooltip.blocked||this==c||(!this.tooltipText&&!i(this).bodyHandler)){return}c=this;l=this.tooltipText;if(i(this).bodyHandler){e.title.hide();var p=i(this).bodyHandler.call(this);if(p.nodeType||p.jquery){e.body.empty().append(p)}else{e.body.html(p)}e.body.show()}else{if(i(this).showBody){var s=l.split(i(this).showBody);e.title.html(s.shift()).show();e.body.empty();for(var q=0,r;(r=s[q]);q++){if(q>0){e.body.append("<br/>")}e.body.append(r)}e.body.hideWhenEmpty()}else{e.title.html(l).show();e.body.hide()}}if(i(this).showURL&&a(this).url()){e.url.html(a(this).url().replace("http://","")).show()}else{e.url.hide()}e.parent.addClass(i(this).extraClass);if(i(this).fixPNG){e.parent.fixPNG()}d.apply(this,arguments)}function j(){k=null;var p=i(c);if((!g||!a.fn.bgiframe)&&p&&p.fade){if(e.parent.is(":animated")){e.parent.stop().show().fadeTo(i(c).fade,c.tOpacity)}else{e.parent.is(":visible")?e.parent.fadeTo(i(c).fade,c.tOpacity):e.parent.fadeIn(i(c).fade)}}else{e.parent.show()}n()}function n(q){if(a.tooltip.blocked){return}if(q&&q.target.tagName=="OPTION"){return}if(!m&&e.parent.is(":visible")){a(document.body).unbind("mousemove",n)}if(c==null){a(document.body).unbind("mousemove",n);return}e.parent.removeClass("viewport-right").removeClass("viewport-bottom");var s=e.parent[0].offsetLeft;var w=e.parent[0].offsetTop;if(q){var u=i(c);if(u==null){s=0;w=0}else{s=q.pageX+i(c).left;w=q.pageY+i(c).top}var t="auto";var p=i(c);if(p&&p.positionLeft){t=a(window).width()-s;s="auto"}e.parent.css({left:s,right:t,top:w})}var x=o(),r=e.parent[0];if(x.x+x.cx<r.offsetLeft+r.offsetWidth){s-=r.offsetWidth+20+i(c).left;e.parent.css({left:s+"px"}).addClass("viewport-right")}if(x.y+x.cy<r.offsetTop+r.offsetHeight){w-=r.offsetHeight+20+i(c).top;e.parent.css({top:w+"px"}).addClass("viewport-bottom")}}function o(){return{x:a(window).scrollLeft(),y:a(window).scrollTop(),cx:a(window).width(),cy:a(window).height()}}function f(q){if(a.tooltip.blocked){return}if(k){clearTimeout(k)}c=null;var r=i(this);function p(){e.parent.removeClass(r.extraClass).hide().css("opacity","")}if((!g||!a.fn.bgiframe)&&r.fade){if(e.parent.is(":animated")){e.parent.stop().fadeTo(r.fade,0,p)}else{e.parent.stop().fadeOut(r.fade,p)}}else{p()}if(i(this).fixPNG){e.parent.unfixPNG()}}})(jQuery);(function(a){var e=false;var p="1.1";a.fn.hiddenPosition=function(q){var r=a.extend({},a.fn.hiddenPosition.defaults,q);return this.each(function(){var s=a(this);var t=a.metadata?a.extend({},r,s.metadata()):r;n(s,t)})};function n(t,x){var s=k(t);var v=k(a(x.of));var u=j(x.my);var q=j(x.at);var w=l(x.offset);f("my",u);f("at",q);f("myDims",s);f("targetDims",v);var r=g(v);switch(q.h){case"center":r.left+=v.width/2;break;case"right":r.left+=v.width;break;default:break}switch(q.v){case"center":r.top+=v.height/2;break;case"bottom":r.top+=v.height;break;default:break}switch(u.h){case"center":r.left-=s.width/2;break;case"right":r.left-=s.width;break;default:break}switch(u.v){case"center":r.top-=s.height/2;break;case"bottom":r.top-=s.height;break;default:break}r.top+=w.v;r.left+=w.h;r=c(t,r,s,u,q,x);if(s.position=="relative"){r=o(t,r,s)}if(x.using){x.using(r,t)}else{m(t,r)}}function m(r,q){r.css("left",q.left+"px").css("top",q.top+"px")}function o(s,q,r){f("to coordinates",q);f("dims",r);q.top-=r.offsetTop-r.top;q.left-=r.offsetLeft-r.left;f("transformed coordinates",q);return q}function c(u,s,t,v,q,w){if(w.collision.match(/flip|fit/g)){d("CHECK COLLISION!",w.collision);var r={h:"none",v:"none"};var x=w.collision.split(" ");if(x.length==1){r.h=x[0];r.v=x[0]}else{if(x.length>1){r.h=x[0];r.v=x[1]}}var y=null;if(w.viewport){y=k(a(w.viewport))}else{y={position:"absolute",top:0,left:0,offsetTop:0,offsetLeft:0,width:a(window).width(),height:a(window).height(),innerWidth:a(window).width(),innerHeight:a(window).height()}}f("viewport",y);s=b(r.h,"h",u,s,t,y,v,q);s=b(r.v,"v",u,s,t,y,v,q)}return s}function b(v,t,u,r,s,y,w,q){if(v!="none"){var x=g(y);if(t=="h"){if(r.left<x.left){if(v=="fit"){r.left=x.left}else{if(v=="flip"){if(w.h=="right"&&(r.left+s.width>=x.left)){r.left+=s.width}}}}else{if(r.left+s.width>x.left+y.innerWidth){if(v=="fit"){r.left-=((r.left+s.width)-(x.left+y.innerWidth))}else{if(v=="flip"){if(w.h=="left"&&(r.left<=x.left+y.innerWidth)){r.left-=s.width}}}}}}else{if(t=="v"){if(r.top<x.top){if(v=="fit"){r.top=x.top}else{if(v=="flip"){if(w.v=="bottom"&&(r.top+s.height>=x.top)){r.top+=s.height}}}}else{if(r.top+s.height>x.top+y.innerHeight){if(v=="fit"){r.top-=((r.top+s.height)-(x.top+y.innerHeight))}else{if(v=="flip"){if(w.v=="top"&&(r.top<=x.top+y.innerHeight)){r.top-=s.height}}}}}}}}return r}function g(r){var q={top:r.offsetTop,left:r.offsetLeft};if(r.position=="absolute"||r.position=="fixed"){if(r.top){q.top=r.top}if(r.left){q.left=r.left}}return q}function l(r){var q={h:0,v:0};if(r){var s=r.split(" ");if(s.length>0){q.h=Number(s[0])}if(s.length>1){q.v=Number(s[1])}}return q}function j(r){var q={h:"center",v:"center"};if(r){var s=r.split(" ");if(s.length>0){q=i(s[0],q)}if(s.length>1){q=i(s[1],q)}}return q}function i(r,q){switch(r){case"top":q.v="top";break;case"bottom":q.v="bottom";break;case"left":q.h="left";break;case"right":q.h="right";break;default:break}return q}function h(q){var r=a(q).offset();return{position:a(q).css("position"),top:Number(a(q).css("top").replace(/[^\d\.-]/g,"")),left:Number(a(q).css("left").replace(/[^\d\.-]/g,"")),offsetTop:r.top,offsetLeft:r.left,width:a(q).outerWidth(),height:a(q).outerHeight(),innerWidth:a(q).innerWidth(),innerHeight:a(q).innerHeight()}}function k(t){var r=null,v=0,x,s;while((s=t[v++])){var u=a(s).parents().andSelf().filter(":hidden");if(!u.length){r=h(s)}else{d("hidden");var q=[];u.each(function(){var y=a(this).attr("style");y=typeof y=="undefined"?"":y;d("style",y);q.push(y);a(this).attr("style",y+" ; display: block !important;");d("style",a(this).attr("style"))});var w=u.eq(0).css("left");d("left",w);u.eq(0).css("left",-10000);r=h(s);u.eq(0).css("top",-10000).css("left",w);r.offsetLeft=h(s).offsetLeft;r.left=h(s).left;u.each(function(){a(this).attr("style",q.shift())})}}return r}a.fn.hiddenPosition.defaults={my:"center",at:"center",of:null,offset:null,using:null,collision:"flip",viewport:null};a.fn.hiddenPosition.getHiddenDimensions=function(q){return k(q)};a.fn.hiddenPosition.toggleDebug=function(){e=!e};function d(s,r){try{if(e&&window.console&&window.console.log){window.console.log(s+": "+r)}}catch(q){}}function f(s,r){try{if(!r){r=s}d(s,r);if(e&&window.console&&window.console.log&&(a.browser.msie||a.browser.opera)){window.console.log(a.param(r))}else{if(e&&window.console&&window.console.debug){window.console.debug(r)}}}catch(q){}}})(jQuery);(function(a){if(typeof a.fn.each2=="undefined"){a.extend(a.fn,{each2:function(b){var e=a([0]),d=-1,f=this.length;while(++d<f&&(e.context=e[0]=this[d])&&b.call(e[0],d,e)!==false){}return this}})}})(jQuery);(function(a,O){if(window.Select2!==O){return}var c,I,E,F,J,y={x:0,y:0},b,H,v={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(P){P=P.which?P.which:P;switch(P){case v.LEFT:case v.RIGHT:case v.UP:case v.DOWN:return true}return false},isControl:function(P){var Q=P.which;switch(Q){case v.SHIFT:case v.CTRL:case v.ALT:return true}if(P.metaKey){return true}return false},isFunctionKey:function(P){P=P.which?P.which:P;return P>=112&&P<=123}},B="<div class='select2-measure-scrollbar'></div>",l={"\u24B6":"A","\uFF21":"A","\u00C0":"A","\u00C1":"A","\u00C2":"A","\u1EA6":"A","\u1EA4":"A","\u1EAA":"A","\u1EA8":"A","\u00C3":"A","\u0100":"A","\u0102":"A","\u1EB0":"A","\u1EAE":"A","\u1EB4":"A","\u1EB2":"A","\u0226":"A","\u01E0":"A","\u00C4":"A","\u01DE":"A","\u1EA2":"A","\u00C5":"A","\u01FA":"A","\u01CD":"A","\u0200":"A","\u0202":"A","\u1EA0":"A","\u1EAC":"A","\u1EB6":"A","\u1E00":"A","\u0104":"A","\u023A":"A","\u2C6F":"A","\uA732":"AA","\u00C6":"AE","\u01FC":"AE","\u01E2":"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B","\uFF22":"B","\u1E02":"B","\u1E04":"B","\u1E06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24B8":"C","\uFF23":"C","\u0106":"C","\u0108":"C","\u010A":"C","\u010C":"C","\u00C7":"C","\u1E08":"C","\u0187":"C","\u023B":"C","\uA73E":"C","\u24B9":"D","\uFF24":"D","\u1E0A":"D","\u010E":"D","\u1E0C":"D","\u1E10":"D","\u1E12":"D","\u1E0E":"D","\u0110":"D","\u018B":"D","\u018A":"D","\u0189":"D","\uA779":"D","\u01F1":"DZ","\u01C4":"DZ","\u01F2":"Dz","\u01C5":"Dz","\u24BA":"E","\uFF25":"E","\u00C8":"E","\u00C9":"E","\u00CA":"E","\u1EC0":"E","\u1EBE":"E","\u1EC4":"E","\u1EC2":"E","\u1EBC":"E","\u0112":"E","\u1E14":"E","\u1E16":"E","\u0114":"E","\u0116":"E","\u00CB":"E","\u1EBA":"E","\u011A":"E","\u0204":"E","\u0206":"E","\u1EB8":"E","\u1EC6":"E","\u0228":"E","\u1E1C":"E","\u0118":"E","\u1E18":"E","\u1E1A":"E","\u0190":"E","\u018E":"E","\u24BB":"F","\uFF26":"F","\u1E1E":"F","\u0191":"F","\uA77B":"F","\u24BC":"G","\uFF27":"G","\u01F4":"G","\u011C":"G","\u1E20":"G","\u011E":"G","\u0120":"G","\u01E6":"G","\u0122":"G","\u01E4":"G","\u0193":"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H","\uFF28":"H","\u0124":"H","\u1E22":"H","\u1E26":"H","\u021E":"H","\u1E24":"H","\u1E28":"H","\u1E2A":"H","\u0126":"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I","\uFF29":"I","\u00CC":"I","\u00CD":"I","\u00CE":"I","\u0128":"I","\u012A":"I","\u012C":"I","\u0130":"I","\u00CF":"I","\u1E2E":"I","\u1EC8":"I","\u01CF":"I","\u0208":"I","\u020A":"I","\u1ECA":"I","\u012E":"I","\u1E2C":"I","\u0197":"I","\u24BF":"J","\uFF2A":"J","\u0134":"J","\u0248":"J","\u24C0":"K","\uFF2B":"K","\u1E30":"K","\u01E8":"K","\u1E32":"K","\u0136":"K","\u1E34":"K","\u0198":"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L","\uFF2C":"L","\u013F":"L","\u0139":"L","\u013D":"L","\u1E36":"L","\u1E38":"L","\u013B":"L","\u1E3C":"L","\u1E3A":"L","\u0141":"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L","\u01C7":"LJ","\u01C8":"Lj","\u24C2":"M","\uFF2D":"M","\u1E3E":"M","\u1E40":"M","\u1E42":"M","\u2C6E":"M","\u019C":"M","\u24C3":"N","\uFF2E":"N","\u01F8":"N","\u0143":"N","\u00D1":"N","\u1E44":"N","\u0147":"N","\u1E46":"N","\u0145":"N","\u1E4A":"N","\u1E48":"N","\u0220":"N","\u019D":"N","\uA790":"N","\uA7A4":"N","\u01CA":"NJ","\u01CB":"Nj","\u24C4":"O","\uFF2F":"O","\u00D2":"O","\u00D3":"O","\u00D4":"O","\u1ED2":"O","\u1ED0":"O","\u1ED6":"O","\u1ED4":"O","\u00D5":"O","\u1E4C":"O","\u022C":"O","\u1E4E":"O","\u014C":"O","\u1E50":"O","\u1E52":"O","\u014E":"O","\u022E":"O","\u0230":"O","\u00D6":"O","\u022A":"O","\u1ECE":"O","\u0150":"O","\u01D1":"O","\u020C":"O","\u020E":"O","\u01A0":"O","\u1EDC":"O","\u1EDA":"O","\u1EE0":"O","\u1EDE":"O","\u1EE2":"O","\u1ECC":"O","\u1ED8":"O","\u01EA":"O","\u01EC":"O","\u00D8":"O","\u01FE":"O","\u0186":"O","\u019F":"O","\uA74A":"O","\uA74C":"O","\u01A2":"OI","\uA74E":"OO","\u0222":"OU","\u24C5":"P","\uFF30":"P","\u1E54":"P","\u1E56":"P","\u01A4":"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q","\uFF31":"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R","\uFF32":"R","\u0154":"R","\u1E58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1E5A":"R","\u1E5C":"R","\u0156":"R","\u1E5E":"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S","\uFF33":"S","\u1E9E":"S","\u015A":"S","\u1E64":"S","\u015C":"S","\u1E60":"S","\u0160":"S","\u1E66":"S","\u1E62":"S","\u1E68":"S","\u0218":"S","\u015E":"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T","\uFF34":"T","\u1E6A":"T","\u0164":"T","\u1E6C":"T","\u021A":"T","\u0162":"T","\u1E70":"T","\u1E6E":"T","\u0166":"T","\u01AC":"T","\u01AE":"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U","\uFF35":"U","\u00D9":"U","\u00DA":"U","\u00DB":"U","\u0168":"U","\u1E78":"U","\u016A":"U","\u1E7A":"U","\u016C":"U","\u00DC":"U","\u01DB":"U","\u01D7":"U","\u01D5":"U","\u01D9":"U","\u1EE6":"U","\u016E":"U","\u0170":"U","\u01D3":"U","\u0214":"U","\u0216":"U","\u01AF":"U","\u1EEA":"U","\u1EE8":"U","\u1EEE":"U","\u1EEC":"U","\u1EF0":"U","\u1EE4":"U","\u1E72":"U","\u0172":"U","\u1E76":"U","\u1E74":"U","\u0244":"U","\u24CB":"V","\uFF36":"V","\u1E7C":"V","\u1E7E":"V","\u01B2":"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W","\uFF37":"W","\u1E80":"W","\u1E82":"W","\u0174":"W","\u1E86":"W","\u1E84":"W","\u1E88":"W","\u2C72":"W","\u24CD":"X","\uFF38":"X","\u1E8A":"X","\u1E8C":"X","\u24CE":"Y","\uFF39":"Y","\u1EF2":"Y","\u00DD":"Y","\u0176":"Y","\u1EF8":"Y","\u0232":"Y","\u1E8E":"Y","\u0178":"Y","\u1EF6":"Y","\u1EF4":"Y","\u01B3":"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z","\uFF3A":"Z","\u0179":"Z","\u1E90":"Z","\u017B":"Z","\u017D":"Z","\u1E92":"Z","\u1E94":"Z","\u01B5":"Z","\u0224":"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a","\uFF41":"a","\u1E9A":"a","\u00E0":"a","\u00E1":"a","\u00E2":"a","\u1EA7":"a","\u1EA5":"a","\u1EAB":"a","\u1EA9":"a","\u00E3":"a","\u0101":"a","\u0103":"a","\u1EB1":"a","\u1EAF":"a","\u1EB5":"a","\u1EB3":"a","\u0227":"a","\u01E1":"a","\u00E4":"a","\u01DF":"a","\u1EA3":"a","\u00E5":"a","\u01FB":"a","\u01CE":"a","\u0201":"a","\u0203":"a","\u1EA1":"a","\u1EAD":"a","\u1EB7":"a","\u1E01":"a","\u0105":"a","\u2C65":"a","\u0250":"a","\uA733":"aa","\u00E6":"ae","\u01FD":"ae","\u01E3":"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b","\uFF42":"b","\u1E03":"b","\u1E05":"b","\u1E07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24D2":"c","\uFF43":"c","\u0107":"c","\u0109":"c","\u010B":"c","\u010D":"c","\u00E7":"c","\u1E09":"c","\u0188":"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d","\uFF44":"d","\u1E0B":"d","\u010F":"d","\u1E0D":"d","\u1E11":"d","\u1E13":"d","\u1E0F":"d","\u0111":"d","\u018C":"d","\u0256":"d","\u0257":"d","\uA77A":"d","\u01F3":"dz","\u01C6":"dz","\u24D4":"e","\uFF45":"e","\u00E8":"e","\u00E9":"e","\u00EA":"e","\u1EC1":"e","\u1EBF":"e","\u1EC5":"e","\u1EC3":"e","\u1EBD":"e","\u0113":"e","\u1E15":"e","\u1E17":"e","\u0115":"e","\u0117":"e","\u00EB":"e","\u1EBB":"e","\u011B":"e","\u0205":"e","\u0207":"e","\u1EB9":"e","\u1EC7":"e","\u0229":"e","\u1E1D":"e","\u0119":"e","\u1E19":"e","\u1E1B":"e","\u0247":"e","\u025B":"e","\u01DD":"e","\u24D5":"f","\uFF46":"f","\u1E1F":"f","\u0192":"f","\uA77C":"f","\u24D6":"g","\uFF47":"g","\u01F5":"g","\u011D":"g","\u1E21":"g","\u011F":"g","\u0121":"g","\u01E7":"g","\u0123":"g","\u01E5":"g","\u0260":"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h","\uFF48":"h","\u0125":"h","\u1E23":"h","\u1E27":"h","\u021F":"h","\u1E25":"h","\u1E29":"h","\u1E2B":"h","\u1E96":"h","\u0127":"h","\u2C68":"h","\u2C76":"h","\u0265":"h","\u0195":"hv","\u24D8":"i","\uFF49":"i","\u00EC":"i","\u00ED":"i","\u00EE":"i","\u0129":"i","\u012B":"i","\u012D":"i","\u00EF":"i","\u1E2F":"i","\u1EC9":"i","\u01D0":"i","\u0209":"i","\u020B":"i","\u1ECB":"i","\u012F":"i","\u1E2D":"i","\u0268":"i","\u0131":"i","\u24D9":"j","\uFF4A":"j","\u0135":"j","\u01F0":"j","\u0249":"j","\u24DA":"k","\uFF4B":"k","\u1E31":"k","\u01E9":"k","\u1E33":"k","\u0137":"k","\u1E35":"k","\u0199":"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l","\uFF4C":"l","\u0140":"l","\u013A":"l","\u013E":"l","\u1E37":"l","\u1E39":"l","\u013C":"l","\u1E3D":"l","\u1E3B":"l","\u017F":"l","\u0142":"l","\u019A":"l","\u026B":"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l","\u01C9":"lj","\u24DC":"m","\uFF4D":"m","\u1E3F":"m","\u1E41":"m","\u1E43":"m","\u0271":"m","\u026F":"m","\u24DD":"n","\uFF4E":"n","\u01F9":"n","\u0144":"n","\u00F1":"n","\u1E45":"n","\u0148":"n","\u1E47":"n","\u0146":"n","\u1E4B":"n","\u1E49":"n","\u019E":"n","\u0272":"n","\u0149":"n","\uA791":"n","\uA7A5":"n","\u01CC":"nj","\u24DE":"o","\uFF4F":"o","\u00F2":"o","\u00F3":"o","\u00F4":"o","\u1ED3":"o","\u1ED1":"o","\u1ED7":"o","\u1ED5":"o","\u00F5":"o","\u1E4D":"o","\u022D":"o","\u1E4F":"o","\u014D":"o","\u1E51":"o","\u1E53":"o","\u014F":"o","\u022F":"o","\u0231":"o","\u00F6":"o","\u022B":"o","\u1ECF":"o","\u0151":"o","\u01D2":"o","\u020D":"o","\u020F":"o","\u01A1":"o","\u1EDD":"o","\u1EDB":"o","\u1EE1":"o","\u1EDF":"o","\u1EE3":"o","\u1ECD":"o","\u1ED9":"o","\u01EB":"o","\u01ED":"o","\u00F8":"o","\u01FF":"o","\u0254":"o","\uA74B":"o","\uA74D":"o","\u0275":"o","\u01A3":"oi","\u0223":"ou","\uA74F":"oo","\u24DF":"p","\uFF50":"p","\u1E55":"p","\u1E57":"p","\u01A5":"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q","\uFF51":"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r","\uFF52":"r","\u0155":"r","\u1E59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1E5B":"r","\u1E5D":"r","\u0157":"r","\u1E5F":"r","\u024D":"r","\u027D":"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s","\uFF53":"s","\u00DF":"s","\u015B":"s","\u1E65":"s","\u015D":"s","\u1E61":"s","\u0161":"s","\u1E67":"s","\u1E63":"s","\u1E69":"s","\u0219":"s","\u015F":"s","\u023F":"s","\uA7A9":"s","\uA785":"s","\u1E9B":"s","\u24E3":"t","\uFF54":"t","\u1E6B":"t","\u1E97":"t","\u0165":"t","\u1E6D":"t","\u021B":"t","\u0163":"t","\u1E71":"t","\u1E6F":"t","\u0167":"t","\u01AD":"t","\u0288":"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u","\uFF55":"u","\u00F9":"u","\u00FA":"u","\u00FB":"u","\u0169":"u","\u1E79":"u","\u016B":"u","\u1E7B":"u","\u016D":"u","\u00FC":"u","\u01DC":"u","\u01D8":"u","\u01D6":"u","\u01DA":"u","\u1EE7":"u","\u016F":"u","\u0171":"u","\u01D4":"u","\u0215":"u","\u0217":"u","\u01B0":"u","\u1EEB":"u","\u1EE9":"u","\u1EEF":"u","\u1EED":"u","\u1EF1":"u","\u1EE5":"u","\u1E73":"u","\u0173":"u","\u1E77":"u","\u1E75":"u","\u0289":"u","\u24E5":"v","\uFF56":"v","\u1E7D":"v","\u1E7F":"v","\u028B":"v","\uA75F":"v","\u028C":"v","\uA761":"vy","\u24E6":"w","\uFF57":"w","\u1E81":"w","\u1E83":"w","\u0175":"w","\u1E87":"w","\u1E85":"w","\u1E98":"w","\u1E89":"w","\u2C73":"w","\u24E7":"x","\uFF58":"x","\u1E8B":"x","\u1E8D":"x","\u24E8":"y","\uFF59":"y","\u1EF3":"y","\u00FD":"y","\u0177":"y","\u1EF9":"y","\u0233":"y","\u1E8F":"y","\u00FF":"y","\u1EF7":"y","\u1E99":"y","\u1EF5":"y","\u01B4":"y","\u024F":"y","\u1EFF":"y","\u24E9":"z","\uFF5A":"z","\u017A":"z","\u1E91":"z","\u017C":"z","\u017E":"z","\u1E93":"z","\u1E95":"z","\u01B6":"z","\u0225":"z","\u0240":"z","\u2C6C":"z","\uA763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038A":"\u0399","\u03AA":"\u0399","\u038C":"\u039F","\u038E":"\u03A5","\u03AB":"\u03A5","\u038F":"\u03A9","\u03AC":"\u03B1","\u03AD":"\u03B5","\u03AE":"\u03B7","\u03AF":"\u03B9","\u03CA":"\u03B9","\u0390":"\u03B9","\u03CC":"\u03BF","\u03CD":"\u03C5","\u03CB":"\u03C5","\u03B0":"\u03C5","\u03C9":"\u03C9","\u03C2":"\u03C3"};b=a(document);F=(function(){var P=1;return function(){return P++}}());function G(P){var Q=a(document.createTextNode(""));P.before(Q);Q.before(P);Q.remove()}function L(Q){function P(R){return l[R]||R}return Q.replace(/[^\u0000-\u007E]/g,P)}function r(S,P){var Q=0,R=P.length;for(;Q<R;Q=Q+1){if(m(S,P[Q])){return Q}}return -1}function C(){var P=a(B);P.appendTo(document.body);var Q={width:P.width()-P[0].clientWidth,height:P.height()-P[0].clientHeight};P.remove();return Q}function m(P,Q){if(P===Q){return true}if(P===O||Q===O){return false}if(P===null||Q===null){return false}if(P.constructor===String){return P+""===Q+""}if(Q.constructor===String){return Q+""===P+""}return false}function K(S,R,T){var U,P,Q;if(S===null||S.length<1){return[]}U=S.split(R);for(P=0,Q=U.length;P<Q;P=P+1){U[P]=T(U[P])}return U}function q(P){return P.outerWidth(false)-P.width()}function u(P){var Q="keyup-change-value";P.on("keydown",function(){if(a.data(P,Q)===O){a.data(P,Q,P.val())}});P.on("keyup",function(){var R=a.data(P,Q);if(R!==O&&P.val()!==R){a.removeData(P,Q);P.trigger("keyup-change")}})}function t(P){P.on("mousemove",function(Q){var R=y;if(R===O||R.x!==Q.pageX||R.y!==Q.pageY){a(Q.target).trigger("mousemove-filtered",Q)}})}function i(R,Q,P){P=P||O;var S;return function(){var T=arguments;window.clearTimeout(S);S=window.setTimeout(function(){Q.apply(P,T)},R)}}function s(R,P){var Q=i(R,function(S){P.trigger("scroll-debounced",S)});P.on("scroll",function(S){if(r(S.target,P.get())>=0){Q(S)}})}function o(P){if(P[0]===document.activeElement){return}window.setTimeout(function(){var Q=P[0],S=P.val().length,T;P.focus();var R=(Q.offsetWidth>0||Q.offsetHeight>0);if(R&&Q===document.activeElement){if(Q.setSelectionRange){Q.setSelectionRange(S,S)}else{if(Q.createTextRange){T=Q.createTextRange();T.collapse(false);T.select()}}}},0)}function p(P){P=a(P)[0];var R=0;var Q=0;if("selectionStart" in P){R=P.selectionStart;Q=P.selectionEnd-R}else{if("selection" in document){P.focus();var S=document.selection.createRange();Q=document.selection.createRange().text.length;S.moveStart("character",-P.value.length);R=S.text.length-Q}}return{offset:R,length:Q}}function w(P){P.preventDefault();P.stopPropagation()}function x(P){P.preventDefault();P.stopImmediatePropagation()}function D(P){if(!J){var Q=P[0].currentStyle||window.getComputedStyle(P[0],null);J=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:Q.fontSize,fontFamily:Q.fontFamily,fontStyle:Q.fontStyle,fontWeight:Q.fontWeight,letterSpacing:Q.letterSpacing,textTransform:Q.textTransform,whiteSpace:"nowrap"});J.attr("class","select2-sizer");a(document.body).append(J)}J.text(P.val());return J.width()}function M(S,U,Q){var R,T=[],P;R=a.trim(S.attr("class"));if(R){R=""+R;a(R.split(/\s+/)).each2(function(){if(this.indexOf("select2-")===0){T.push(this)}})}R=a.trim(U.attr("class"));if(R){R=""+R;a(R.split(/\s+/)).each2(function(){if(this.indexOf("select2-")!==0){P=Q(this);if(P){T.push(P)}}})}S.attr("class",T.join(" "))}function A(T,S,Q,P){var R=L(T.toUpperCase()).indexOf(L(S.toUpperCase())),U=S.length;if(R<0){Q.push(P(T));return}Q.push(P(T.substring(0,R)));Q.push("<span class='select2-match'>");Q.push(P(T.substring(R,R+U)));Q.push("</span>");Q.push(P(T.substring(R+U,T.length)))}function j(P){var Q={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(P).replace(/[&<>"'\/\\]/g,function(R){return Q[R]})}function d(R){var U,Q=null,S=R.quietMillis||100,P=R.url,T=this;return function(V){window.clearTimeout(U);U=window.setTimeout(function(){var W=R.data,aa=P,Z=R.transport||a.fn.select2.ajaxDefaults.transport,X={type:R.type||"GET",cache:R.cache||false,jsonpCallback:R.jsonpCallback||O,dataType:R.dataType||"json"},Y=a.extend({},a.fn.select2.ajaxDefaults.params,X);W=W?W.call(T,V.term,V.page,V.context):null;aa=(typeof aa==="function")?aa.call(T,V.term,V.page,V.context):aa;if(Q&&typeof Q.abort==="function"){Q.abort()}if(R.params){if(a.isFunction(R.params)){a.extend(Y,R.params.call(T))}else{a.extend(Y,R.params)}}a.extend(Y,{url:aa,dataType:R.dataType,data:W,success:function(ab){var ac=R.results(ab,V.page,V);V.callback(ac)},error:function(ac,ae,ab){var ad={hasError:true,jqXHR:ac,textStatus:ae,errorThrown:ab};V.callback(ad)}});Q=Z.call(T,Y)},S)}}function z(S){var P=S,R,U,T=function(V){return""+V.text};if(a.isArray(P)){U=P;P={results:U}}if(a.isFunction(P)===false){U=P;P=function(){return U}}var Q=P();if(Q.text){T=Q.text;if(!a.isFunction(T)){R=Q.text;T=function(V){return V[R]}}}return function(X){var Y=X.term,V={results:[]},W;if(Y===""){X.callback(P());return}W=function(ab,aa){var ac,Z;ab=ab[0];if(ab.children){ac={};for(Z in ab){if(ab.hasOwnProperty(Z)){ac[Z]=ab[Z]}}ac.children=[];a(ab.children).each2(function(ae,ad){W(ad,ac.children)});if(ac.children.length||X.matcher(Y,T(ac),ab)){aa.push(ac)}}else{if(X.matcher(Y,T(ab),ab)){aa.push(ab)}}};a(P().results).each2(function(aa,Z){W(Z,V.results)});X.callback(V)}}function N(P){var Q=a.isFunction(P);return function(S){var U=S.term,R={results:[]};var T=Q?P(S):P;if(a.isArray(T)){a(T).each(function(){var V=this.text!==O,W=V?this.text:this;if(U===""||S.matcher(U,W)){R.results.push(V?this:{id:this,text:this})}});S.callback(R)}}}function e(P,Q){if(a.isFunction(P)){return true}if(!P){return false}if(typeof(P)==="string"){return true}throw new Error(Q+" must be a string, function, or falsy value")}function n(R,Q){if(a.isFunction(R)){var P=Array.prototype.slice.call(arguments,2);return R.apply(Q,P)}return R}function h(Q){var P=0;a.each(Q,function(R,S){if(S.children){P+=h(S.children)}else{P++}});return P}function k(S,X,W,U){var V=S,P=false,Z,R,Q,T,Y;if(!U.createSearchChoice||!U.tokenSeparators||U.tokenSeparators.length<1){return O}while(true){R=-1;for(Q=0,T=U.tokenSeparators.length;Q<T;Q++){Y=U.tokenSeparators[Q];R=S.indexOf(Y);if(R>=0){break}}if(R<0){break}Z=S.substring(0,R);S=S.substring(R+Y.length);if(Z.length>0){Z=U.createSearchChoice.call(this,Z,X);if(Z!==O&&Z!==null&&U.id(Z)!==O&&U.id(Z)!==null){P=false;for(Q=0,T=X.length;Q<T;Q++){if(m(U.id(Z),U.id(X[Q]))){P=true;break}}if(!P){W(Z)}}}}if(V!==S){return S}}function g(){var P=this;a.each(arguments,function(R,Q){P[Q].remove();P[Q]=null})}function f(R,Q){var P=function(){};P.prototype=new R;P.prototype.constructor=P;P.prototype.parent=R.prototype;P.prototype=a.extend(P.prototype,Q);return P}c=f(Object,{bind:function(P){var Q=this;return function(){P.apply(Q,arguments)}},init:function(Q){var S,U,T=".select2-results";this.opts=Q=this.prepareOpts(Q);this.id=Q.id;if(Q.element.data("select2")!==O&&Q.element.data("select2")!==null){Q.element.data("select2").destroy()}this.container=this.createContainer();this.liveRegion=a(".select2-hidden-accessible");if(this.liveRegion.length==0){this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body)}this.containerId="s2id_"+(Q.element.attr("id")||"autogen"+F());this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);this.container.attr("title",Q.element.attr("title"));this.body=a(document.body);M(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",Q.element.attr("style"));this.container.css(n(Q.containerCss,this.opts.element));this.container.addClass(n(Q.containerCssClass,this.opts.element));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",w);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");M(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(n(Q.dropdownCssClass,this.opts.element));this.dropdown.data("select2",this);this.dropdown.on("click",w);this.results=S=this.container.find(T);this.search=U=this.container.find("input.select2-input");this.queryCount=0;this.resultsPage=0;this.context=null;this.initContainer();this.container.on("click",w);t(this.results);this.dropdown.on("mousemove-filtered",T,this.bind(this.highlightUnderEvent));this.dropdown.on("touchstart touchmove touchend",T,this.bind(function(V){this._touchEvent=true;this.highlightUnderEvent(V)}));this.dropdown.on("touchmove",T,this.bind(this.touchMoved));this.dropdown.on("touchstart touchend",T,this.bind(this.clearTouchMoved));this.dropdown.on("click",this.bind(function(V){if(this._touchEvent){this._touchEvent=false;this.selectHighlighted()}}));s(80,this.results);this.dropdown.on("scroll-debounced",T,this.bind(this.loadMoreIfNeeded));a(this.container).on("change",".select2-input",function(V){V.stopPropagation()});a(this.dropdown).on("change",".select2-input",function(V){V.stopPropagation()});if(a.fn.mousewheel){S.mousewheel(function(Y,V,W,X){var Z=S.scrollTop();if(X>0&&Z-X<=0){S.scrollTop(0);w(Y)}else{if(X<0&&S.get(0).scrollHeight-S.scrollTop()+X<=S.height()){S.scrollTop(S.get(0).scrollHeight-S.height());w(Y)}}})}u(U);U.on("keyup-change input paste",this.bind(this.updateResults));U.on("focus",function(){U.addClass("select2-focused")});U.on("blur",function(){U.removeClass("select2-focused")});this.dropdown.on("mouseup",T,this.bind(function(V){if(a(V.target).closest(".select2-result-selectable").length>0){this.highlightUnderEvent(V);this.selectHighlighted(V)}}));this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(V){V.stopPropagation()});this.nextSearchTerm=O;if(a.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}if(Q.maximumInputLength!==null){this.search.attr("maxlength",Q.maximumInputLength)}var P=Q.element.prop("disabled");if(P===O){P=false}this.enable(!P);var R=Q.element.prop("readonly");if(R===O){R=false}this.readonly(R);H=H||C();this.autofocus=Q.element.prop("autofocus");Q.element.prop("autofocus",false);if(this.autofocus){this.focus()}this.search.attr("placeholder",Q.searchInputPlaceholder)},destroy:function(){var P=this.opts.element,Q=P.data("select2"),R=this;this.close();if(P.length&&P[0].detachEvent&&R._sync){P.each(function(){if(R._sync){this.detachEvent("onpropertychange",R._sync)}})}if(this.propertyObserver){this.propertyObserver.disconnect();this.propertyObserver=null}this._sync=null;if(Q!==O){Q.container.remove();Q.liveRegion.remove();Q.dropdown.remove();P.show().removeData("select2").off(".select2").prop("autofocus",this.autofocus||false);if(this.elementTabIndex){P.attr({tabindex:this.elementTabIndex})}else{P.removeAttr("tabindex")}P.show()}g.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(P){if(P.is("option")){return{id:P.prop("value"),text:P.text(),element:P.get(),css:P.attr("class"),disabled:P.prop("disabled"),locked:m(P.attr("locked"),"locked")||m(P.data("locked"),true)}}else{if(P.is("optgroup")){return{text:P.attr("label"),children:[],element:P.get(),css:P.attr("class")}}}},prepareOpts:function(S){var Q,T,R,P,U=this;Q=S.element;if(Q.get(0).tagName.toLowerCase()==="select"){this.select=T=S.element}if(T){a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in S){throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}})}S=a.extend({},{populateResults:function(V,aa,Z){var Y,W=this.opts.id,X=this.liveRegion;Y=function(an,ac,ad){var ag,ai,am,ao,ae,ab,ak,aj,ah,af;an=S.sortResults(an,ac,Z);var al=[];for(ag=0,ai=an.length;ag<ai;ag=ag+1){am=an[ag];ae=(am.disabled===true);ao=(!ae)&&(W(am)!==O);ab=am.children&&am.children.length>0;ak=a("<li></li>");ak.addClass("select2-results-dept-"+ad);ak.addClass("select2-result");ak.addClass(ao?"select2-result-selectable":"select2-result-unselectable");if(ae){ak.addClass("select2-disabled")}if(ab){ak.addClass("select2-result-with-children")}ak.addClass(U.opts.formatResultCssClass(am));ak.attr("role","presentation");aj=a(document.createElement("div"));aj.addClass("select2-result-label");aj.attr("id","select2-result-label-"+F());aj.attr("role","option");af=S.formatResult(am,aj,Z,U.opts.escapeMarkup);if(af!==O){aj.html(af);ak.append(aj)}if(ab){ah=a("<ul></ul>");ah.addClass("select2-result-sub");Y(am.children,ah,ad+1);ak.append(ah)}ak.data("select2-data",am);al.push(ak[0])}ac.append(al);X.text(S.formatMatches(an.length))};Y(aa,V,0)}},a.fn.select2.defaults,S);if(typeof(S.id)!=="function"){R=S.id;S.id=function(V){return V[R]}}if(a.isArray(S.element.data("select2Tags"))){if("tags" in S){throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+S.element.attr("id")}S.tags=S.element.data("select2Tags")}if(T){S.query=this.bind(function(Z){var W={results:[],more:false},aa=Z.term,V,X,Y;Y=function(ac,ab){var ad;if(ac.is("option")){if(Z.matcher(aa,ac.text(),ac)){ab.push(U.optionToData(ac))}}else{if(ac.is("optgroup")){ad=U.optionToData(ac);ac.children().each2(function(af,ae){Y(ae,ad.children)});if(ad.children.length>0){ab.push(ad)}}}};V=Q.children();if(this.getPlaceholder()!==O&&V.length>0){X=this.getPlaceholderOption();if(X){V=V.not(X)}}V.each2(function(ac,ab){Y(ab,W.results)});Z.callback(W)});S.id=function(V){return V.id}}else{if(!("query" in S)){if("ajax" in S){P=S.element.data("ajax-url");if(P&&P.length>0){S.ajax.url=P}S.query=d.call(S.element,S.ajax)}else{if("data" in S){S.query=z(S.data)}else{if("tags" in S){S.query=N(S.tags);if(S.createSearchChoice===O){S.createSearchChoice=function(V){return{id:a.trim(V),text:a.trim(V)}}}if(S.initSelection===O){S.initSelection=function(X,V){var W=[];a(K(X.val(),S.separator,S.transformVal)).each(function(){var Y={id:this,text:this},Z=S.tags;if(a.isFunction(Z)){Z=Z()}a(Z).each(function(){if(m(this.id,Y.id)){Y=this;return false}});W.push(Y)});V(W)}}}}}}}if(typeof(S.query)!=="function"){throw"query function not defined for Select2 "+S.element.attr("id")}if(S.createSearchChoicePosition==="top"){S.createSearchChoicePosition=function(W,V){W.unshift(V)}}else{if(S.createSearchChoicePosition==="bottom"){S.createSearchChoicePosition=function(W,V){W.push(V)}}else{if(typeof(S.createSearchChoicePosition)!=="function"){throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function"}}}return S},monitorSource:function(){var P=this.opts.element,Q,R=this;P.on("change.select2",this.bind(function(S){if(this.opts.element.data("select2-change-triggered")!==true){this.initSelection()}}));this._sync=this.bind(function(){var S=P.prop("disabled");if(S===O){S=false}this.enable(!S);var T=P.prop("readonly");if(T===O){T=false}this.readonly(T);if(this.container){M(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.addClass(n(this.opts.containerCssClass,this.opts.element))}if(this.dropdown){M(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(n(this.opts.dropdownCssClass,this.opts.element))}});if(P.length&&P[0].attachEvent){P.each(function(){this.attachEvent("onpropertychange",R._sync)})}Q=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(Q!==O){if(this.propertyObserver){delete this.propertyObserver;this.propertyObserver=null}this.propertyObserver=new Q(function(S){a.each(S,R._sync)});this.propertyObserver.observe(P.get(0),{attributes:true,subtree:false})}},triggerSelect:function(P){var Q=a.Event("select2-selecting",{val:this.id(P),object:P,choice:P});this.opts.element.trigger(Q);return !Q.isDefaultPrevented()},triggerChange:function(P){P=P||{};P=a.extend({},P,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",true);this.opts.element.trigger(P);this.opts.element.data("select2-change-triggered",false);this.opts.element.click();if(this.opts.blurOnChange){this.opts.element.blur()}},isInterfaceEnabled:function(){return this.enabledInterface===true},enableInterface:function(){var Q=this._enabled&&!this._readonly,P=!Q;if(Q===this.enabledInterface){return false}this.container.toggleClass("select2-container-disabled",P);this.close();this.enabledInterface=Q;return true},enable:function(P){if(P===O){P=true}if(this._enabled===P){return}this._enabled=P;this.opts.element.prop("disabled",!P);this.enableInterface()},disable:function(){this.enable(false)},readonly:function(P){if(P===O){P=false}if(this._readonly===P){return}this._readonly=P;this.opts.element.prop("readonly",P);this.enableInterface()},opened:function(){return(this.container)?this.container.hasClass("select2-dropdown-open"):false},positionDropdown:function(){var P=this.dropdown,V=this.container,ag=V.offset(),af=V.outerHeight(false),ak=V.outerWidth(false),X=P.outerHeight(false),Q=a(window),am=Q.width(),al=Q.height(),aj=Q.scrollLeft()+am,ai=Q.scrollTop()+al,Z=ag.top+af,Y=ag.left,ac=Z+X<=ai,ab=(ag.top-X)>=Q.scrollTop(),aa=P.outerWidth(false),ae=function(){return Y+aa<=aj},ad=function(){return ag.left+aj+V.outerWidth(false)>aa},S=P.hasClass("select2-drop-above"),T,R,U,W,ah;if(S){R=true;if(!ab&&ac){U=true;R=false}}else{R=false;if(!ac&&ab){U=true;R=true}}if(U){P.hide();ag=this.container.offset();af=this.container.outerHeight(false);ak=this.container.outerWidth(false);X=P.outerHeight(false);aj=Q.scrollLeft()+am;ai=Q.scrollTop()+al;Z=ag.top+af;Y=ag.left;aa=P.outerWidth(false);P.show();this.focusSearch()}if(this.opts.dropdownAutoWidth){ah=a(".select2-results",P)[0];P.addClass("select2-drop-auto-width");P.css("width","");aa=P.outerWidth(false)+(ah.scrollHeight===ah.clientHeight?0:H.width);aa>ak?ak=aa:aa=ak;X=P.outerHeight(false)}else{this.container.removeClass("select2-drop-auto-width")}if(this.body.css("position")!=="static"){T=this.body.offset();Z-=T.top;Y-=T.left}if(!ae()&&ad()){Y=ag.left+this.container.outerWidth(false)-aa}W={left:Y,width:ak};if(R){W.top=ag.top-X;W.bottom="auto";this.container.addClass("select2-drop-above");P.addClass("select2-drop-above")}else{W.top=Z;W.bottom="auto";this.container.removeClass("select2-drop-above");P.removeClass("select2-drop-above")}W=a.extend(W,n(this.opts.dropdownCss,this.opts.element));P.css(W)},shouldOpen:function(){var P;if(this.opened()){return false}if(this._enabled===false||this._readonly===true){return false}P=a.Event("select2-opening");this.opts.element.trigger(P);return !P.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen()){return false}this.opening();b.on("mousemove.select2Event",function(P){y.x=P.pageX;y.y=P.pageY});return true},opening:function(){var P=this.containerEventName,T="scroll."+P,S="resize."+P,R="orientationchange."+P,Q;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.clearDropdownAlignmentPreference();if(this.dropdown[0]!==this.body.children().last()[0]){this.dropdown.detach().appendTo(this.body)}Q=a("#select2-drop-mask");if(Q.length===0){Q=a(document.createElement("div"));Q.attr("id","select2-drop-mask").attr("class","select2-drop-mask");Q.hide();Q.appendTo(this.body);Q.on("mousedown touchstart click",function(W){G(Q);var V=a("#select2-drop"),X;if(V.length>0){X=V.data("select2");if(X.opts.selectOnBlur){X.selectHighlighted({noFocus:true})}X.close();W.preventDefault();W.stopPropagation()}})}if(this.dropdown.prev()[0]!==Q[0]){this.dropdown.before(Q)}a("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");Q.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var U=this;this.container.parents().add(window).each(function(){a(this).on(S+" "+T+" "+R,function(V){if(U.opened()){U.positionDropdown()}})})},close:function(){if(!this.opened()){return}var P=this.containerEventName,S="scroll."+P,R="resize."+P,Q="orientationchange."+P;this.container.parents().add(window).each(function(){a(this).off(S).off(R).off(Q)});this.clearDropdownAlignmentPreference();a("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();b.off("mousemove.select2Event");this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(a.Event("select2-close"))},externalSearch:function(P){this.open();this.search.val(P);this.updateResults(false)},clearSearch:function(){},getMaximumSelectionSize:function(){return n(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var V=this.results,Q,S,P,R,U,X,T,W;S=this.highlight();if(S<0){return}if(S==0){V.scrollTop(0);return}Q=this.findHighlightableChoices().find(".select2-result-label");P=a(Q[S]);W=(P.offset()||{}).top||0;R=W+P.outerHeight(true);if(S===Q.length-1){T=V.find("li.select2-more-results");if(T.length>0){R=T.offset().top+T.outerHeight(true)}}U=V.offset().top+V.outerHeight(false);if(R>U){V.scrollTop(V.scrollTop()+(R-U))}X=W-V.offset().top;if(X<0&&P.css("display")!="none"){V.scrollTop(V.scrollTop()+X)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(R){var Q=this.findHighlightableChoices(),S=this.highlight();while(S>-1&&S<Q.length){S+=R;var P=a(Q[S]);if(P.hasClass("select2-result-selectable")&&!P.hasClass("select2-disabled")&&!P.hasClass("select2-selected")){this.highlight(S);break}}},highlight:function(S){var Q=this.findHighlightableChoices(),P,R;if(arguments.length===0){return r(Q.filter(".select2-highlighted")[0],Q.get())}if(S>=Q.length){S=Q.length-1}if(S<0){S=0}this.removeHighlight();P=a(Q[S]);P.addClass("select2-highlighted");this.search.attr("aria-activedescendant",P.find(".select2-result-label").attr("id"));this.ensureHighlightVisible();this.liveRegion.text(P.text());R=P.data("select2-data");if(R){this.opts.element.trigger({type:"select2-highlight",val:this.id(R),choice:R})}},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=true},clearTouchMoved:function(){this._touchMoved=false},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(R){var Q=a(R.target).closest(".select2-result-selectable");if(Q.length>0&&!Q.is(".select2-highlighted")){var P=this.findHighlightableChoices();this.highlight(P.index(Q))}else{if(Q.length==0){this.removeHighlight()}}},loadMoreIfNeeded:function(){var T=this.results,R=T.find("li.select2-more-results"),P,S=this.resultsPage+1,U=this,V=this.search.val(),Q=this.context;if(R.length===0){return}P=R.offset().top-T.offset().top-T.height();if(P<=this.opts.loadMorePadding){R.addClass("select2-active");this.opts.query({element:this.opts.element,term:V,page:S,context:Q,matcher:this.opts.matcher,callback:this.bind(function(W){if(!U.opened()){return}U.opts.populateResults.call(this,T,W.results,{term:V,page:S,context:Q});U.postprocessResults(W,false,false);if(W.more===true){R.detach().appendTo(T).html(U.opts.escapeMarkup(n(U.opts.formatLoadMore,U.opts.element,S+1)));window.setTimeout(function(){U.loadMoreIfNeeded()},10)}else{R.remove()}U.positionDropdown();U.resultsPage=S;U.context=W.context;this.opts.element.trigger({type:"select2-loaded",items:W})})})}},tokenize:function(){},updateResults:function(Q){var Z=this.search,Y=this.results,U=this.opts,P,aa=this,R,ab=Z.val(),S=a.data(this.container,"select2-last-term"),W;if(Q!==true&&S&&m(ab,S)){return}a.data(this.container,"select2-last-term",ab);if(Q!==true&&(this.showSearchInput===false||!this.opened())){return}function V(){Z.removeClass("select2-active");aa.positionDropdown();if(Y.find(".select2-no-results,.select2-selection-limit,.select2-searching").length){aa.liveRegion.text(Y.text())}else{aa.liveRegion.text(aa.opts.formatMatches(Y.find('.select2-result-selectable:not(".select2-selected")').length))}}function X(ac){Y.html(ac);V()}W=++this.queryCount;var T=this.getMaximumSelectionSize();if(T>=1){P=this.data();if(a.isArray(P)&&P.length>=T&&e(U.formatSelectionTooBig,"formatSelectionTooBig")){X("<li class='select2-selection-limit'>"+n(U.formatSelectionTooBig,U.element,T)+"</li>");return}}if(Z.val().length<U.minimumInputLength){if(e(U.formatInputTooShort,"formatInputTooShort")){X("<li class='select2-no-results'>"+n(U.formatInputTooShort,U.element,Z.val(),U.minimumInputLength)+"</li>")}else{X("")}if(Q&&this.showSearch){this.showSearch(true)}return}if(U.maximumInputLength&&Z.val().length>U.maximumInputLength){if(e(U.formatInputTooLong,"formatInputTooLong")){X("<li class='select2-no-results'>"+n(U.formatInputTooLong,U.element,Z.val(),U.maximumInputLength)+"</li>")}else{X("")}return}if(U.formatSearching&&this.findHighlightableChoices().length===0){X("<li class='select2-searching'>"+n(U.formatSearching,U.element)+"</li>")}Z.addClass("select2-active");this.removeHighlight();R=this.tokenize();if(R!=O&&R!=null){Z.val(R)}this.resultsPage=1;U.query({element:U.element,term:Z.val(),page:this.resultsPage,context:null,matcher:U.matcher,callback:this.bind(function(ac){var ad;if(W!=this.queryCount){return}if(!this.opened()){this.search.removeClass("select2-active");return}if(ac.hasError!==O&&e(U.formatAjaxError,"formatAjaxError")){X("<li class='select2-ajax-error'>"+n(U.formatAjaxError,U.element,ac.jqXHR,ac.textStatus,ac.errorThrown)+"</li>");return}this.context=(ac.context===O)?null:ac.context;if(this.opts.createSearchChoice&&Z.val()!==""){ad=this.opts.createSearchChoice.call(aa,Z.val(),ac.results);if(ad!==O&&ad!==null&&aa.id(ad)!==O&&aa.id(ad)!==null){if(a(ac.results).filter(function(){return m(aa.id(this),aa.id(ad))}).length===0){this.opts.createSearchChoicePosition(ac.results,ad)}}}if(ac.results.length===0&&e(U.formatNoMatches,"formatNoMatches")){X("<li class='select2-no-results'>"+n(U.formatNoMatches,U.element,Z.val())+"</li>");return}Y.empty();aa.opts.populateResults.call(this,Y,ac.results,{term:Z.val(),page:this.resultsPage,context:null});if(ac.more===true&&e(U.formatLoadMore,"formatLoadMore")){Y.append("<li class='select2-more-results'>"+U.escapeMarkup(n(U.formatLoadMore,U.element,this.resultsPage))+"</li>");window.setTimeout(function(){aa.loadMoreIfNeeded()},10)}this.postprocessResults(ac,Q);V();this.opts.element.trigger({type:"select2-loaded",items:ac})})})},cancel:function(){this.close()},blur:function(){if(this.opts.selectOnBlur){this.selectHighlighted({noFocus:true})}this.close();this.container.removeClass("select2-container-active");if(this.search[0]===document.activeElement){this.search.blur()}this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){o(this.search)},selectHighlighted:function(S){if(this._touchMoved){this.clearTouchMoved();return}var R=this.highlight(),Q=this.results.find(".select2-highlighted"),P=Q.closest(".select2-result").data("select2-data");if(P){this.highlight(R);this.onSelect(P,S)}else{if(S&&S.noFocus){this.close()}}},getPlaceholder:function(){var P;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((P=this.getPlaceholderOption())!==O?P.text():O)},getPlaceholderOption:function(){if(this.select){var P=this.select.children("option").first();if(this.opts.placeholderOption!==O){return(this.opts.placeholderOption==="first"&&P)||(typeof this.opts.placeholderOption==="function"&&this.opts.placeholderOption(this.select))}else{if(a.trim(P.text())===""&&P.val()===""){return P}}}},initContainerWidth:function(){function P(){var W,S,V,T,U,R;if(this.opts.width==="off"){return null}else{if(this.opts.width==="element"){return this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px"}else{if(this.opts.width==="copy"||this.opts.width==="resolve"){W=this.opts.element.attr("style");if(W!==O){S=W.split(";");for(T=0,U=S.length;T<U;T=T+1){R=S[T].replace(/\s/g,"");V=R.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(V!==null&&V.length>=1){return V[1]}}}if(this.opts.width==="resolve"){W=this.opts.element.css("width");if(W.indexOf("%")>0){return W}return(this.opts.element.outerWidth(false)===0?"auto":this.opts.element.outerWidth(false)+"px")}return null}else{if(a.isFunction(this.opts.width)){return this.opts.width()}else{return this.opts.width}}}}}var Q=P.call(this);if(Q!==null){this.container.css("width",Q)}}});I=f(c,{createContainer:function(){var P=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return P},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.focusser.prop("disabled",!this.isInterfaceEnabled())}},opening:function(){var P,R,Q;if(this.opts.minimumResultsForSearch>=0){this.showSearch(true)}this.parent.opening.apply(this,arguments);if(this.showSearchInput!==false){this.search.val(this.focusser.val())}if(this.opts.shouldFocusInput(this)){this.search.focus();P=this.search.get(0);if(P.createTextRange){R=P.createTextRange();R.collapse(false);R.select()}else{if(P.setSelectionRange){Q=this.search.val().length;P.setSelectionRange(Q,Q)}}}if(this.search.val()===""){if(this.nextSearchTerm!=O){this.search.val(this.nextSearchTerm);this.search.select()}}this.focusser.prop("disabled",true).val("");this.updateResults(true);this.opts.element.trigger(a.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},focus:function(){if(this.opened()){this.close()}else{this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}}},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.prop("disabled",false);if(this.opts.shouldFocusInput(this)){this.focusser.focus()}},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);g.call(this,"selection","focusser")},initContainer:function(){var U,P=this.container,Q=this.dropdown,S=F(),R;if(this.opts.minimumResultsForSearch<0){this.showSearch(false)}else{this.showSearch(true)}this.selection=U=P.find(".select2-choice");this.focusser=P.find(".select2-focusser");U.find(".select2-chosen").attr("id","select2-chosen-"+S);this.focusser.attr("aria-labelledby","select2-chosen-"+S);this.results.attr("id","select2-results-"+S);this.search.attr("aria-owns","select2-results-"+S);this.focusser.attr("id","s2id_autogen"+S);R=a("label[for='"+this.opts.element.attr("id")+"']");this.opts.element.focus(this.bind(function(){this.focus()}));this.focusser.prev().text(R.text()).attr("for",this.focusser.attr("id"));var T=this.opts.element.attr("title");this.opts.element.attr("title",(T||R.text()));this.focusser.attr("tabindex",this.elementTabIndex);this.search.attr("id",this.focusser.attr("id")+"_search");this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.search.on("keydown",this.bind(function(V){if(!this.isInterfaceEnabled()){return}if(229==V.keyCode){return}if(V.which===v.PAGE_UP||V.which===v.PAGE_DOWN){w(V);return}switch(V.which){case v.UP:case v.DOWN:this.moveHighlight((V.which===v.UP)?-1:1);w(V);return;case v.ENTER:this.selectHighlighted();w(V);return;case v.TAB:this.selectHighlighted({noFocus:true});return;case v.ESC:this.cancel(V);w(V);return}}));this.search.on("blur",this.bind(function(V){if(document.activeElement===this.body.get(0)){window.setTimeout(this.bind(function(){if(this.opened()){this.search.focus()}}),0)}}));this.focusser.on("keydown",this.bind(function(V){if(!this.isInterfaceEnabled()){return}if(V.which===v.TAB||v.isControl(V)||v.isFunctionKey(V)||V.which===v.ESC){return}if(this.opts.openOnEnter===false&&V.which===v.ENTER){w(V);return}if(V.which==v.DOWN||V.which==v.UP||(V.which==v.ENTER&&this.opts.openOnEnter)){if(V.altKey||V.ctrlKey||V.shiftKey||V.metaKey){return}this.open();w(V);return}if(V.which==v.DELETE||V.which==v.BACKSPACE){if(this.opts.allowClear){this.clear()}w(V);return}}));u(this.focusser);this.focusser.on("keyup-change input",this.bind(function(V){if(this.opts.minimumResultsForSearch>=0){V.stopPropagation();if(this.opened()){return}this.open()}}));U.on("mousedown touchstart","abbr",this.bind(function(V){if(!this.isInterfaceEnabled()){return}this.clear();x(V);this.close();if(this.selection){this.selection.focus()}}));U.on("mousedown touchstart",this.bind(function(V){G(U);if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}if(this.opened()){this.close()}else{if(this.isInterfaceEnabled()){this.open()}}w(V)}));Q.on("mousedown touchstart",this.bind(function(){if(this.opts.shouldFocusInput(this)){this.search.focus()}}));U.on("focus",this.bind(function(V){w(V)}));this.focusser.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){if(!this.opened()){this.container.removeClass("select2-container-active");this.opts.element.trigger(a.Event("select2-blur"))}}));this.search.on("focus",this.bind(function(){if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.hide();this.setPlaceholder()},clear:function(S){var P=this.selection.data("select2-data");if(P){var Q=a.Event("select2-clearing");this.opts.element.trigger(Q);if(Q.isDefaultPrevented()){return}var R=this.getPlaceholderOption();this.opts.element.val(R?R.val():"");this.selection.find(".select2-chosen").empty();this.selection.removeData("select2-data");this.setPlaceholder();if(S!==false){this.opts.element.trigger({type:"select2-removed",val:this.id(P),choice:P});this.triggerChange({removed:P})}}},initSelection:function(){var P;if(this.isPlaceholderOptionSelected()){this.updateSelection(null);this.close();this.setPlaceholder()}else{var Q=this;this.opts.initSelection.call(null,this.opts.element,function(R){if(R!==O&&R!==null){Q.updateSelection(R);Q.close();Q.setPlaceholder();Q.nextSearchTerm=Q.opts.nextSearchTerm(R,Q.search.val())}})}},isPlaceholderOptionSelected:function(){var P;if(this.getPlaceholder()===O){return false}return((P=this.getPlaceholderOption())!==O&&P.prop("selected"))||(this.opts.element.val()==="")||(this.opts.element.val()===O)||(this.opts.element.val()===null)},prepareOpts:function(){var P=this.parent.prepareOpts.apply(this,arguments),Q=this;if(P.element.get(0).tagName.toLowerCase()==="select"){P.initSelection=function(S,R){var T=S.find("option").filter(function(){return this.selected&&!this.disabled});R(Q.optionToData(T))}}else{if("data" in P){P.initSelection=P.initSelection||function(S,R){var T=S.val();var U=null;P.query({matcher:function(X,Y,V){var W=m(T,P.id(V));if(W){U=V}return W},callback:!a.isFunction(R)?a.noop:function(){R(U)}})}}}return P},getPlaceholder:function(){if(this.select){if(this.getPlaceholderOption()===O){return O}}return this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var P=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&P!==O){if(this.select&&this.getPlaceholderOption()===O){return}this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(P));this.selection.addClass("select2-default");this.container.removeClass("select2-allowclear")}},postprocessResults:function(P,Q,S){var T=0,U=this,V=true;this.findHighlightableChoices().each2(function(X,W){if(m(U.id(W.data("select2-data")),U.opts.element.val())){T=X;return false}});if(S!==false){if(Q===true&&T>=0){this.highlight(T)}else{this.highlight(0)}}if(Q===true){var R=this.opts.minimumResultsForSearch;if(R>=0){this.showSearch(h(P.results)>=R)}}},showSearch:function(P){if(this.showSearchInput===P){return}this.showSearchInput=P;this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!P);this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!P);a(this.dropdown,this.container).toggleClass("select2-with-searchbox",P)},onSelect:function(P,S){if(!this.triggerSelect(P)){return}var Q=this.opts.element.val(),R=this.data();this.opts.element.val(this.id(P));this.updateSelection(P);this.opts.element.trigger({type:"select2-selected",val:this.id(P),choice:P});this.nextSearchTerm=this.opts.nextSearchTerm(P,this.search.val());this.close();if((!S||!S.noFocus)&&this.opts.shouldFocusInput(this)){this.focusser.focus()}if(!m(Q,this.id(P))){this.triggerChange({added:P,removed:R})}},updateSelection:function(R){var P=this.selection.find(".select2-chosen"),S,Q;this.selection.data("select2-data",R);P.empty();if(R!==null){S=this.opts.formatSelection(R,P,this.opts.escapeMarkup)}if(S!==O){P.append(S)}Q=this.opts.formatSelectionCssClass(R,P);if(Q!==O){P.addClass(Q)}this.selection.removeClass("select2-default");if(this.opts.allowClear&&this.getPlaceholder()!==O){this.container.addClass("select2-allowclear")}},val:function(){var T,S=false,P=null,R=this,Q=this.data();if(arguments.length===0){return this.opts.element.val()}T=arguments[0];if(arguments.length>1){S=arguments[1]}if(this.select){this.select.val(T).find("option").filter(function(){return this.selected}).each2(function(V,U){P=R.optionToData(U);return false});this.updateSelection(P);this.setPlaceholder();if(S){this.triggerChange({added:P,removed:Q})}}else{if(!T&&T!==0){this.clear(S);return}if(this.opts.initSelection===O){throw new Error("cannot call val() if initSelection() is not defined")}this.opts.element.val(T);this.opts.initSelection(this.opts.element,function(U){R.opts.element.val(!U?"":R.id(U));R.updateSelection(U);R.setPlaceholder();if(S){R.triggerChange({added:U,removed:Q})}})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(R){var P,Q=false;if(arguments.length===0){P=this.selection.data("select2-data");if(P==O){P=null}return P}else{if(arguments.length>1){Q=arguments[1]}if(!R){this.clear(Q)}else{P=this.data();this.opts.element.val(!R?"":this.id(R));this.updateSelection(R);if(Q){this.triggerChange({added:R,removed:P})}}}}});E=f(c,{createContainer:function(){var P=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return P},prepareOpts:function(){var P=this.parent.prepareOpts.apply(this,arguments),Q=this;if(P.element.get(0).tagName.toLowerCase()==="select"){P.initSelection=function(T,R){var S=[];T.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(V,U){S.push(Q.optionToData(U))});R(S)}}else{if("data" in P){P.initSelection=P.initSelection||function(S,R){var T=K(S.val(),P.separator,P.transformVal);var U=[];P.query({matcher:function(X,Y,V){var W=a.grep(T,function(Z){return m(Z,P.id(V))}).length;if(W){U.push(V)}return W},callback:!a.isFunction(R)?a.noop:function(){var Z=[];for(var V=0;V<T.length;V++){var W=T[V];for(var X=0;X<U.length;X++){var Y=U[X];if(m(W,P.id(Y))){Z.push(Y);U.splice(X,1);break}}}R(Z)}})}}}return P},selectChoice:function(P){var Q=this.container.find(".select2-search-choice-focus");if(Q.length&&P&&P[0]==Q[0]){}else{if(Q.length){this.opts.element.trigger("choice-deselected",Q)}Q.removeClass("select2-search-choice-focus");if(P&&P.length){this.close();P.addClass("select2-search-choice-focus");this.opts.element.trigger("choice-selected",P)}}},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments);g.call(this,"searchContainer","selection")},initContainer:function(){var R=".select2-choices",Q;this.searchContainer=this.container.find(".select2-search-field");this.selection=Q=this.container.find(R);var P=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(S){P.search[0].focus();P.selectChoice(a(this))});this.search.attr("id","s2id_autogen"+F());this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id"));this.opts.element.focus(this.bind(function(){this.focus()}));this.search.on("input paste",this.bind(function(){if(this.search.attr("placeholder")&&this.search.val().length==0){return}if(!this.isInterfaceEnabled()){return}if(!this.opened()){this.open()}}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(S){if(!this.isInterfaceEnabled()){return}++this.keydowns;var W=Q.find(".select2-search-choice-focus");var V=W.prev(".select2-search-choice:not(.select2-locked)");var T=W.next(".select2-search-choice:not(.select2-locked)");var U=p(this.search);if(W.length&&(S.which==v.LEFT||S.which==v.RIGHT||S.which==v.BACKSPACE||S.which==v.DELETE||S.which==v.ENTER)){var X=W;if(S.which==v.LEFT&&V.length){X=V}else{if(S.which==v.RIGHT){X=T.length?T:null}else{if(S.which===v.BACKSPACE){if(this.unselect(W.first())){this.search.width(10);X=V.length?V:T}}else{if(S.which==v.DELETE){if(this.unselect(W.first())){this.search.width(10);X=T.length?T:null}}else{if(S.which==v.ENTER){X=null}}}}}this.selectChoice(X);w(S);if(!X||!X.length){this.open()}return}else{if(((S.which===v.BACKSPACE&&this.keydowns==1)||S.which==v.LEFT)&&(U.offset==0&&!U.length)){this.selectChoice(Q.find(".select2-search-choice:not(.select2-locked)").last());w(S);return}else{this.selectChoice(null)}}if(this.opened()){switch(S.which){case v.UP:case v.DOWN:this.moveHighlight((S.which===v.UP)?-1:1);w(S);return;case v.ENTER:this.selectHighlighted();w(S);return;case v.TAB:this.selectHighlighted({noFocus:true});this.close();return;case v.ESC:this.cancel(S);w(S);return}}if(S.which===v.TAB||v.isControl(S)||v.isFunctionKey(S)||S.which===v.BACKSPACE||S.which===v.ESC){return}if(S.which===v.ENTER){if(this.opts.openOnEnter===false){return}else{if(S.altKey||S.ctrlKey||S.shiftKey||S.metaKey){return}}}this.open();if(S.which===v.PAGE_UP||S.which===v.PAGE_DOWN){w(S)}if(S.which===v.ENTER){w(S)}}));this.search.on("keyup",this.bind(function(S){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(S){this.container.removeClass("select2-container-active");this.search.removeClass("select2-focused");this.selectChoice(null);if(!this.opened()){this.clearSearch()}S.stopImmediatePropagation();this.opts.element.trigger(a.Event("select2-blur"))}));this.container.on("click",R,this.bind(function(S){if(!this.isInterfaceEnabled()){return}if(a(S.target).closest(".select2-search-choice").length>0){return}this.selectChoice(null);this.clearPlaceholder();if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.open();this.focusSearch();S.preventDefault()}));this.container.on("focus",R,this.bind(function(){if(!this.isInterfaceEnabled()){return}if(!this.container.hasClass("select2-container-active")){this.opts.element.trigger(a.Event("select2-focus"))}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.initContainerWidth();this.opts.element.hide();this.clearSearch()},enableInterface:function(){if(this.parent.enableInterface.apply(this,arguments)){this.search.prop("disabled",!this.isInterfaceEnabled())}},initSelection:function(){var P;if(this.opts.element.val()===""&&this.opts.element.text()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var Q=this;this.opts.initSelection.call(null,this.opts.element,function(R){if(R!==O&&R!==null){Q.updateSelection(R);Q.close();Q.clearSearch()}})}},clearSearch:function(){var Q=this.getPlaceholder(),P=this.getMaxSearchWidth();if(Q!==O&&this.getVal().length===0&&this.search.hasClass("select2-focused")===false){this.search.val(Q).addClass("select2-default");this.search.width(P>0?P:this.container.css("width"))}else{this.search.val("").width(10)}},clearPlaceholder:function(){if(this.search.hasClass("select2-default")){this.search.val("").removeClass("select2-default")}},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();if(this.search.val()===""){if(this.nextSearchTerm!=O){this.search.val(this.nextSearchTerm);this.search.select()}}this.updateResults(true);if(this.opts.shouldFocusInput(this)){this.search.focus()}this.opts.element.trigger(a.Event("select2-open"))},close:function(){if(!this.opened()){return}this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(P){var R=[],Q=[],S=this;a(P).each(function(){if(r(S.id(this),R)<0){R.push(S.id(this));Q.push(this)}});P=Q;this.selection.find(".select2-search-choice").remove();a(P).each(function(){S.addSelectedChoice(this)});S.postprocessResults()},tokenize:function(){var P=this.search.val();P=this.opts.tokenizer.call(this,P,this.data(),this.bind(this.onSelect),this.opts);if(P!=null&&P!=O){this.search.val(P);if(P.length>0){this.open()}}},onSelect:function(P,Q){if(!this.triggerSelect(P)||P.text===""){return}this.addSelectedChoice(P);this.opts.element.trigger({type:"selected",val:this.id(P),choice:P});this.nextSearchTerm=this.opts.nextSearchTerm(P,this.search.val());this.clearSearch();this.updateResults();if(this.select||!this.opts.closeOnSelect){this.postprocessResults(P,false,this.opts.closeOnSelect===true)}if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{if(this.countSelectableResults()>0){this.search.width(10);this.resizeSearch();if(this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()){this.updateResults(true)}else{if(this.nextSearchTerm!=O){this.search.val(this.nextSearchTerm);this.updateResults();this.search.select()}}this.positionDropdown()}else{this.close();this.search.width(10)}}this.triggerChange({added:P});if(!Q||!Q.noFocus){this.focusSearch()}},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(R){var T=!R.locked,U=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),S=a("<li class='select2-search-choice select2-locked'><div></div></li>");var P=T?U:S,W=this.id(R),X=this.getVal(),V,Q;V=this.opts.formatSelection(R,P.find("div"),this.opts.escapeMarkup);if(V!=O){P.find("div").replaceWith(a("<div></div>").html(V))}Q=this.opts.formatSelectionCssClass(R,P.find("div"));if(Q!=O){P.addClass(Q)}if(T){P.find(".select2-search-choice-close").on("mousedown",w).on("click dblclick",this.bind(function(Y){if(!this.isInterfaceEnabled()){return}this.unselect(a(Y.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");w(Y);this.close();this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled()){return}this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}))}P.data("select2-data",R);P.insertBefore(this.searchContainer);X.push(W);this.setVal(X)},unselect:function(S){var T=this.getVal(),P,R;S=S.closest(".select2-search-choice");if(S.length===0){throw"Invalid argument: "+S+". Must be .select2-search-choice"}P=S.data("select2-data");if(!P){return}var Q=a.Event("select2-removing");Q.val=this.id(P);Q.choice=P;this.opts.element.trigger(Q);if(Q.isDefaultPrevented()){return false}while((R=r(this.id(P),T))>=0){T.splice(R,1);this.setVal(T);if(this.select){this.postprocessResults()}}S.remove();this.opts.element.trigger({type:"select2-removed",val:this.id(P),choice:P});this.triggerChange({removed:P});return true},postprocessResults:function(R,S,T){var V=this.getVal(),P=this.results.find(".select2-result"),Q=this.results.find(".select2-result-with-children"),U=this;P.each2(function(X,W){var Y=U.id(W.data("select2-data"));if(r(Y,V)>=0){W.addClass("select2-selected");W.find(".select2-result-selectable").addClass("select2-selected")}});Q.each2(function(X,W){if(!W.is(".select2-result-selectable")&&W.find(".select2-result-selectable:not(.select2-selected)").length===0){W.addClass("select2-selected")}});if(this.highlight()==-1&&T!==false&&this.opts.closeOnSelect===true){U.highlight(0)}if(!this.opts.createSearchChoice&&!P.filter(".select2-result:not(.select2-selected)").length>0){if(!R||R&&!R.more&&this.results.find(".select2-no-results").length===0){if(e(U.opts.formatNoMatches,"formatNoMatches")){this.results.append("<li class='select2-no-results'>"+n(U.opts.formatNoMatches,U.opts.element,U.search.val())+"</li>")}}}},getMaxSearchWidth:function(){return this.selection.width()-q(this.search)},resizeSearch:function(){var S,Q,R,P,T,U=q(this.search);S=D(this.search)+10;Q=this.search.offset().left;R=this.selection.width();P=this.selection.offset().left;T=R-(Q-P)-U;if(T<S){T=R-U}if(T<40){T=R-U}if(T<=0){T=S}this.search.width(Math.floor(T))},getVal:function(){var P;if(this.select){P=this.select.val();return P===null?[]:P}else{P=this.opts.element.val();return K(P,this.opts.separator,this.opts.transformVal)}},setVal:function(Q){var P;if(this.select){this.select.val(Q)}else{P=[];a(Q).each(function(){if(r(this,P)<0){P.push(this)}});this.opts.element.val(P.length===0?"":P.join(this.opts.separator))}},buildChangeDetails:function(S,P){var P=P.slice(0),S=S.slice(0);for(var Q=0;Q<P.length;Q++){for(var R=0;R<S.length;R++){if(m(this.opts.id(P[Q]),this.opts.id(S[R]))){P.splice(Q,1);if(Q>0){Q--}S.splice(R,1);R--}}}return{added:P,removed:S}},val:function(S,R){var P,Q=this;if(arguments.length===0){return this.getVal()}P=this.data();if(!P.length){P=[]}if(!S&&S!==0){this.opts.element.val("");this.updateSelection([]);this.clearSearch();if(R){this.triggerChange({added:this.data(),removed:P})}return}this.setVal(S);if(this.select){this.opts.initSelection(this.select,this.bind(this.updateSelection));if(R){this.triggerChange(this.buildChangeDetails(P,this.data()))}}else{if(this.opts.initSelection===O){throw new Error("val() cannot be called if initSelection() is not defined")}this.opts.initSelection(this.opts.element,function(T){var U=a.map(T,Q.id);Q.setVal(U);Q.updateSelection(T);Q.clearSearch();if(R){Q.triggerChange(Q.buildChangeDetails(P,Q.data()))}})}this.clearSearch()},onSortStart:function(){if(this.select){throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.")}this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var Q=[],P=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){Q.push(P.opts.id(a(this).data("select2-data")))});this.setVal(Q);this.triggerChange()},data:function(T,S){var R=this,P,Q;if(arguments.length===0){return this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get()}else{Q=this.data();if(!T){T=[]}P=a.map(T,function(U){return R.opts.id(U)});this.setVal(P);this.updateSelection(T);this.clearSearch();if(S){this.triggerChange(this.buildChangeDetails(Q,this.data()))}}}});a.fn.select2=function(){var Q=Array.prototype.slice.call(arguments,0),U,W,R,X,T,P=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],Y=["opened","isFocused","container","dropdown"],V=["val","data"],S={search:"externalSearch"};this.each(function(){if(Q.length===0||typeof(Q[0])==="object"){U=Q.length===0?{}:a.extend({},Q[0]);U.element=a(this);if(U.element.get(0).tagName.toLowerCase()==="select"){T=U.element.prop("multiple")}else{T=U.multiple||false;if("tags" in U){U.multiple=T=true}}W=T?new window.Select2["class"].multi():new window.Select2["class"].single();W.init(U)}else{if(typeof(Q[0])==="string"){if(r(Q[0],P)<0){throw"Unknown method: "+Q[0]}X=O;W=a(this).data("select2");if(W===O){return}R=Q[0];if(R==="container"){X=W.container}else{if(R==="dropdown"){X=W.dropdown}else{if(S[R]){R=S[R]}X=W[R].apply(W,Q.slice(1))}}if(r(Q[0],Y)>=0||(r(Q[0],V)>=0&&Q.length==1)){return false}}else{throw"Invalid arguments to select2 plugin: "+Q}}});return(X===O)?this:X};a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:true,openOnEnter:true,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(T,P,S,Q){var R=[];A(this.text(T),S.term,R,Q);return R.join("")},transformVal:function(P){return a.trim(P)},formatSelection:function(Q,P,R){return Q?R(this.text(Q)):O},sortResults:function(R,P,Q){return R},formatResultCssClass:function(P){return P.css},formatSelectionCssClass:function(Q,P){return O},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(P){return P==O?null:P.id},text:function(P){if(P&&this.data&&this.data.text){if(a.isFunction(this.data.text)){return this.data.text(P)}else{return P[this.data.text]}}else{return P.text}},matcher:function(P,Q){return L(""+Q).toUpperCase().indexOf(L(""+P).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:k,escapeMarkup:j,blurOnChange:false,selectOnBlur:false,adaptContainerCssClass:function(P){return P},adaptDropdownCssClass:function(P){return null},nextSearchTerm:function(Q,P){return O},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(P){var Q=(("ontouchstart" in window)||(navigator.msMaxTouchPoints>0));if(!Q){return true}if(P.opts.minimumResultsForSearch<0){return false}return true}};a.fn.select2.locales=[];a.fn.select2.locales.en={formatMatches:function(P){if(P===1){return"One result is available, press enter to select it."}return P+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(Q,R,P){return"Loading failed"},formatInputTooShort:function(P,Q){var R=Q-P.length;return"Please enter "+R+" or more character"+(R==1?"":"s")},formatInputTooLong:function(P,Q){var R=P.length-Q;return"Please delete "+R+" character"+(R==1?"":"s")},formatSelectionTooBig:function(P){return"You can only select "+P+" item"+(P==1?"":"s")},formatLoadMore:function(P){return"Loading more results"},formatSearching:function(){return"Searching"}};a.extend(a.fn.select2.defaults,a.fn.select2.locales.en);a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:false,dataType:"json"}};window.Select2={query:{ajax:d,local:z,tags:N},util:{debounce:i,markMatch:A,escapeMarkup:j,stripDiacritics:L},"class":{"abstract":c,single:I,multi:E}}}(jQuery));$(function(){$("body").on("click","input[name='toggletarget']",function(a){if($('a.target[target="people"]').length==0){$("a.target").attr("target","people");$("input[name='toggletarget']").attr("checked",true)}else{$("a.target").removeAttr("target");$("input[name='toggletarget']").removeAttr("checked")}})});$(document).ready(function(){var a=$("div.navbar-fixed-top").outerHeight();$("body").css("padding-top",a+"px")});$(document).ready(function(){if(!$.InitFunctions){$.InitFunctions={}}$.InitFunctions.TagAllCallBack=function(b){$(".taguntag:visible").text("Remove")};$("#UnTagAll").live("click",function(b){b.preventDefault();var a=$(this);$.block();$.post(this.href,null,function(c){$(".taguntag:visible").text(c);$('[data-toggle="dropdown"]').parent().removeClass("open");$.unblock()});return false});$(document).on("click","#AddContact",function(a){a.preventDefault();var b=this.href;bootbox.confirm("Are you sure you want to add a contact for all these people?",function(c){if(c===true){$.block();$.post(b,null,function(d){$.unblock();if(d<0){$.growlUI("error","too many people to add to a contact (max 100)")}else{if(d==0){$.growlUI("error","no results")}else{window.location=d}}})}});return false});$(document).on("click","#AddTasks",function(a){a.preventDefault();var b="Are you sure you want to add a task for all these people?";if(window.location.pathname.contains("/Person")){b="Are you sure you want to add a task for this person?"}var c=this.href;bootbox.confirm(b,function(d){if(d===true){$.block();$.post(c,null,function(e){$.unblock();if(e>100){$.growlUI("error","too many people to add tasks for (max 100)")}else{if(e==0){$.growlUI("error","no results")}else{window.location="/Task"}}})}});return false});$.QueryString=function(b,a){var c=new Object();$.each(b.split("&"),function(){var d=this.split("=");c[d[0]]=d[1]});return c[a]};$.block=function(a){if(!a){a="<h1>working on it...</h1>"}$.blockUI({message:a,overlayCSS:{opacity:0},css:{border:"3px",padding:"15px",backgroundColor:"#aaa","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.9,color:"#000",width:"500px"}})};$.unblock=function(){$.unblockUI()};$.navigate=function(b,a){b+=(b.match(/\?/)?"&":"?")+a;window.location=b};$.DateValid=function(a,b){var c=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i;if($.dateFormat.startsWith("d")){c=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i}var e=true;if(!c.test(a)){if(b==true){$.growlUI("error","enter valid date")}e=false}return e};$.SortableDate=function(c){var a;if($.dateFormat.startsWith("d")){a=new Date(c.split("/")[2],c.split("/")[1]-1,c.split("/")[0])}else{a=new Date(c.split("/")[2],c.split("/")[0]-1,c.split("/")[1])}var b=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return b};jQuery.fn.center=function(a){if(a){a=this.parent()}else{a=window}this.css({position:"absolute",top:((($(a).height()-this.outerHeight())/2)+$(a).scrollTop()+"px"),left:((($(a).width()-this.outerWidth())/2)+$(a).scrollLeft()+"px")});return this}});function getISODateTime(a){var b=function(c){return(""+c).length<2?"0"+c:""+c};if(typeof a==="undefined"){var a=new Date()}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+" "+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())}if(!String.prototype.format){String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})}};$(function(){$("a.tutorial").click(function(a){a.preventDefault();startTutorial($(this).attr("href"))});$("a.hide-tip").live("click",function(a){a.preventDefault();$.post("/HideTip",{tip:$(this).data("hidetip")})});$(".warntip").tooltip({delay:150,showBody:"|",showURL:false});$.QueryString=function(b,a){var c=new Object();$.each(b.split("&"),function(){var d=this.split("=");c[d[0]]=d[1]});return c[a]};$("#cleartag").click(function(a){a.preventDefault();var b=this.href;if(confirm("are you sure you want to empty the active tag?")){$.post(b,{},function(){window.location.reload()})}});$.block=function(a){if(!a){a="<h1>working on it...</h1>"}$.blockUI({message:a,overlayCSS:{opacity:0},css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.5,color:"#fff"}})};$.unblock=function(){$.unblockUI()};$.navigate=function(b,a){b+=(b.match(/\?/)?"&":"?")+a;window.location=b};$.validator.methods.date=function(b,a){return this.optional(a)||Globalize.parseDate(b,$.dtoptions.format,$.dtoptions.cul)};$.DateValid=function(a,b){var c=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i;if($.dtoptions.format.startsWith("d")){c=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i}var e=true;if(!c.test(a)){if(b==true){$.growlUI("error","enter valid date")}e=false}return e};jQuery.fn.center=function(a){if(a){a=this.parent()}else{a=window}this.css({position:"absolute",top:((($(a).height()-this.outerHeight())/2)+$(a).scrollTop()+"px"),left:((($(a).width()-this.outerWidth())/2)+$(a).scrollLeft()+"px")});return this};$.fn.alert=function(a){this.html('<div class="alert"><a class="close" data-dismiss="alert"></a><span>'+a+"</span></div>")};$("button.dropdown-toggle").click(function(a){$("li.hideAlt").hide()});$(document).keydown(function(a){if(a.keyCode==17&&$("ul.dropdown-menu").is(":visible")){$("li.hideAlt").not(".hidy").show()}})});function dimOff(){$("#darkLayer").hide()}function dimOn(){$("#darkLayer").show()}String.prototype.startsWith=function(b,a){return(b==this.substring(0,b.length))};String.prototype.appendQuery=function(a){if(this&&this.length>0){if(this.contains("&")||this.contains("?")){return this+"&"+a}else{return this+"?"+a}}return a};String.prototype.contains=function(a){return this.indexOf(a)!=-1};String.prototype.endsWith=function(b,a){return(b==this.substring(this.length-b.length))};String.prototype.addCommas=function(){var b=this.split(".");var c=b[0];var d=b.length>1?"."+b[1]:"";var a=/(\d+)(\d{3})/;while(a.test(c)){c=c.replace(a,"$1,$2")}return c+d};String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})};/*
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(a){var l="0.9.3";var k={isMsie:function(){var m=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return m?parseInt(m[2],10):false},isBlankString:function(m){return !m||/^\s*$/.test(m)},escapeRegExChars:function(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(m){return typeof m==="string"},isNumber:function(m){return typeof m==="number"},isFunction:function(m){return typeof m==="function"},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(m){return typeof m==="undefined"},bind:a.proxy,bindAll:function(n){var o;for(var m in n){a.isFunction(o=n[m])&&(n[m]=a.proxy(o,n))}},indexOf:function(m,o){for(var n=0;n<m.length;n++){if(m[n]===o){return n}}return -1},each:a.each,map:a.map,filter:a.grep,every:function(m,o){var n=true;if(!m){return n}a.each(m,function(p,q){if(!(n=o.call(null,q,p,m))){return false}});return !!n},some:function(m,o){var n=false;if(!m){return n}a.each(m,function(p,q){if(n=o.call(null,q,p,m)){return false}});return !!n},mixin:a.extend,getUniqueId:function(){var m=0;return function(){return m++}}(),defer:function(m){setTimeout(m,0)},debounce:function(m,q,n){var p,o;return function(){var t=this,r=arguments,u,s;u=function(){p=null;if(!n){o=m.apply(t,r)}};s=n&&!p;clearTimeout(p);p=setTimeout(u,q);if(s){o=m.apply(t,r)}return o}},throttle:function(o,t){var n,m,s,r,q,p;q=0;p=function(){q=new Date();s=null;r=o.apply(n,m)};return function(){var u=new Date(),v=t-(u-q);n=this;m=arguments;if(v<=0){clearTimeout(s);s=null;q=u;r=o.apply(n,m)}else{if(!s){s=setTimeout(p,v)}}return r}},tokenizeQuery:function(m){return a.trim(m).toLowerCase().split(/[\s]+/)},tokenizeText:function(m){return a.trim(m).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}};var e=function(){var m=/\s+/;return{on:function(p,n){var o;if(!n){return this}this._callbacks=this._callbacks||{};p=p.split(m);while(o=p.shift()){this._callbacks[o]=this._callbacks[o]||[];this._callbacks[o].push(n)}return this},trigger:function(q,o){var p,n;if(!this._callbacks){return this}q=q.split(m);while(p=q.shift()){if(n=this._callbacks[p]){for(var r=0;r<n.length;r+=1){n[r].call(this,{type:p,data:o})}}}return this}}}();var d=function(){var n="typeahead:";function m(p){if(!p||!p.el){a.error("EventBus initialized without el")}this.$el=a(p.el)}k.mixin(m.prototype,{trigger:function(p){var o=[].slice.call(arguments,1);this.$el.trigger(n+p,o)}});return m}();var g=function(){var p,q;try{p=window.localStorage;p.setItem("~~~","!");p.removeItem("~~~")}catch(o){p=null}function s(t){this.prefix=["__",t,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(p&&window.JSON){q={_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){if(this.isExpired(t)){this.remove(t)}return m(p.getItem(this._prefix(t)))},set:function(t,v,u){if(k.isNumber(u)){p.setItem(this._ttlKey(t),n(r()+u))}else{p.removeItem(this._ttlKey(t))}return p.setItem(this._prefix(t),n(v))},remove:function(t){p.removeItem(this._ttlKey(t));p.removeItem(this._prefix(t));return this},clear:function(){var t,u,v=[],w=p.length;for(t=0;t<w;t++){if((u=p.key(t)).match(this.keyMatcher)){v.push(u.replace(this.keyMatcher,""))}}for(t=v.length;t--;){this.remove(v[t])}return this},isExpired:function(t){var u=m(p.getItem(this._ttlKey(t)));return k.isNumber(u)&&r()>u?true:false}}}else{q={get:k.noop,set:k.noop,remove:k.noop,clear:k.noop,isExpired:k.noop}}k.mixin(s.prototype,q);return s;function r(){return new Date().getTime()}function n(t){return JSON.stringify(k.isUndefined(t)?null:t)}function m(t){return JSON.parse(t)}}();var h=function(){function m(n){k.bindAll(this);n=n||{};this.sizeLimit=n.sizeLimit||10;this.cache={};this.cachedKeysByAge=[]}k.mixin(m.prototype,{get:function(n){return this.cache[n]},set:function(p,o){var n;if(this.cachedKeysByAge.length===this.sizeLimit){n=this.cachedKeysByAge.shift();delete this.cache[n]}this.cache[p]=o;this.cachedKeysByAge.push(p)}});return m}();var i=function(){var r=0,q={},p,s;function t(u){k.bindAll(this);u=k.isString(u)?{url:u}:u;s=s||new h();p=k.isNumber(u.maxParallelRequests)?u.maxParallelRequests:p||6;this.url=u.url;this.wildcard=u.wildcard||"%QUERY";this.filter=u.filter;this.replace=u.replace;this.ajaxSettings={type:"post",cache:u.cache,timeout:u.timeout,dataType:u.dataType||"json",beforeSend:u.beforeSend};this._get=(/^throttle$/i.test(u.rateLimitFn)?k.throttle:k.debounce)(this._get,u.rateLimitWait||300)}k.mixin(t.prototype,{_get:function(x,u){var w=this;if(m()){this._sendRequest(x).done(v)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function v(z){var y=w.filter?w.filter(z):z;u&&u(y);s.set(x,z)}},_sendRequest:function(x){var w=this,v=q[x];if(!v){o();v=q[x]=a.ajax(x,this.ajaxSettings).always(u)}return v;function u(){n();q[x]=null;if(w.onDeckRequestArgs){w._get.apply(w,w.onDeckRequestArgs);w.onDeckRequestArgs=null}}},get:function(w,u){var y=this,v=encodeURIComponent(w||""),z,x;u=u||k.noop;z=this.replace?this.replace(this.url,v):this.url.replace(this.wildcard,v);if(x=s.get(z)){k.defer(function(){u(y.filter?y.filter(x):x)})}else{this._get(z,u)}return !!x}});return t;function o(){r++}function n(){r--}function m(){return r<p}}();var b=function(){var o={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};function n(p){k.bindAll(this);if(k.isString(p.template)&&!p.engine){a.error("no template engine specified")}if(!p.local&&!p.prefetch&&!p.remote){a.error("one of local, prefetch, or remote is required")}if(p.minLength===0&&!(p.local||p.prefetch)){a.error("local or prefetch required to use default suggestions")}this.name=p.name||k.getUniqueId();this.limit=p.limit||5;this.minLength=p.minLength==null?1:p.minLength;this.header=p.header;this.footer=p.footer;this.valueKey=p.valueKey||"value";this.template=m(p.template,p.engine,this.valueKey);this.defaultSort=p.defaultSort;this.local=p.local;this.prefetch=p.prefetch;this.remote=p.remote;this.itemHash={};this.adjacencyList={};this.defaultOrder=[];this.storage=p.name?new g(p.name):null}k.mixin(n.prototype,{_processLocalData:function(p){this._mergeProcessedData(this._processData(p))},_loadPrefetchData:function(r){var x=this,y=l+(r.thumbprint||""),w,v,u,t,q,p;if(this.storage){w=this.storage.get(o.thumbprint);v=this.storage.get(o.protocol);u=this.storage.get(o.itemHash);t=this.storage.get(o.adjacencyList)}q=w!==y||v!==k.getProtocol();r=k.isString(r)?{url:r}:r;r.ttl=k.isNumber(r.ttl)?r.ttl:24*60*60*1000;if(u&&t&&!q){this._mergeProcessedData({itemHash:u,adjacencyList:t});p=a.Deferred().resolve()}else{p=a.getJSON(r.url).done(s)}return p;function s(A){var B=r.filter?r.filter(A):A,D=x._processData(B),C=D.itemHash,z=D.adjacencyList;if(x.storage){x.storage.set(o.itemHash,C,r.ttl);x.storage.set(o.adjacencyList,z,r.ttl);x.storage.set(o.thumbprint,y,r.ttl);x.storage.set(o.protocol,k.getProtocol(),r.ttl)}x._mergeProcessedData(D)}},_transformDatum:function(p){var s=k.isString(p)?p:p[this.valueKey],r=p.tokens||k.tokenizeText(s),q={value:s,tokens:r};if(k.isString(p)){q.datum={};q.datum[this.valueKey]=p}else{q.datum=p}q.tokens=k.filter(q.tokens,function(t){return !k.isBlankString(t)});q.tokens=k.map(q.tokens,function(t){return t.toLowerCase()});return q},_processData:function(q){var s=this,r={},p={};k.each(q,function(u,t){var w=s._transformDatum(t),v=k.getUniqueId(w.value);r[v]=w;k.each(w.tokens,function(z,A){var y=A.charAt(0),x=p[y]||(p[y]=[v]);!~k.indexOf(x,v)&&x.push(v)})});return{itemHash:r,adjacencyList:p}},_mergeProcessedData:function(q){var r=this;k.mixin(this.itemHash,q.itemHash);k.each(q.adjacencyList,function(t,s){var u=r.adjacencyList[t];r.adjacencyList[t]=u?u.concat(s):s});if(this.minLength===0){for(var p in q.itemHash){this.defaultOrder.push(p)}if(k.isFunction(this.defaultSort)){this.defaultOrder.sort(function(s,t){return r.defaultSort(r.itemHash[s],r.itemHash[t])})}}},_getDefaultList:function(){var p=[];for(var q=0;q<this.limit;q++){p.push(this.itemHash[this.defaultOrder[q]])}return p},_getLocalSuggestions:function(t){var u=this,p=[],q=[],r,s=[];k.each(t,function(w,x){var v=x.charAt(0);!~k.indexOf(p,v)&&p.push(v)});k.each(p,function(w,v){var x=u.adjacencyList[v];if(!x){return false}q.push(x);if(!r||x.length<r.length){r=x}});if(q.length<p.length){return[]}k.each(r,function(v,w){var z=u.itemHash[w],x,y;x=k.every(q,function(A){return ~k.indexOf(A,w)});y=x&&k.every(t,function(A){return k.some(z.tokens,function(B){return B.indexOf(A)===0})});y&&s.push(z)});return s},initialize:function(){var p;this.local&&this._processLocalData(this.local);this.transport=this.remote?new i(this.remote):null;p=this.prefetch?this._loadPrefetchData(this.prefetch):a.Deferred().resolve();this.local=this.prefetch=this.remote=null;this.initialize=function(){return p};return p},getSuggestions:function(s,q){var v=this,u,t,p=false;if(s.length<this.minLength){return}if(s.length==0){return q(this._getDefaultList())}u=k.tokenizeQuery(s);t=this._getLocalSuggestions(u).slice(0,this.limit);if(t.length<this.limit&&this.transport){p=this.transport.get(s,r)}!p&&q&&q(t);function r(w){t=t.slice(0);k.each(w,function(y,x){var A=v._transformDatum(x),z;z=k.some(t,function(B){return A.value===B.value});!z&&t.push(A);return t.length<v.limit});q&&q(t)}}});return n;function m(s,q,t){var r,p;if(k.isFunction(s)){r=s}else{if(k.isString(s)){p=q.compile(s);r=k.bind(p.render,p)}else{r=function(u){return"<p>"+u[t]+"</p>"}}}return r}}();var f=function(){function o(p){var q=this;k.bindAll(this);this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};this.$hint=a(p.hint);this.$input=a(p.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent);if(!k.isMsie()){this.$input.on("input.tt",this._compareQueryToInputValue)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(r){if(q.specialKeyCodeMap[r.which||r.keyCode]){return}k.defer(q._compareQueryToInputValue)})}this.query=this.$input.val();this.$overflowHelper=m(this.$input)}k.mixin(o.prototype,e,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(p){var q=this.specialKeyCodeMap[p.which||p.keyCode];q&&this.trigger(q+"Keyed",p)},_compareQueryToInputValue:function(){var p=this.getInputValue(),q=n(this.query,p),r=q?this.query.length!==p.length:false;if(r){this.trigger("whitespaceChanged",{value:this.query})}else{if(!q){this.trigger("queryChanged",{value:this.query=p})}}},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(p){this.query=p},getInputValue:function(){return this.$input.val()},setInputValue:function(q,p){this.$input.val(q);!p&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(p){this.$hint.val(p)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var r=this.$input.val().length,q=this.$input[0].selectionStart,p;if(k.isNumber(q)){return q===r}else{if(document.selection){p=document.selection.createRange();p.moveStart("character",-r);return r===p.text.length}}return true}});return o;function m(p){return a("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:p.css("font-family"),fontSize:p.css("font-size"),fontStyle:p.css("font-style"),fontVariant:p.css("font-variant"),fontWeight:p.css("font-weight"),wordSpacing:p.css("word-spacing"),letterSpacing:p.css("letter-spacing"),textIndent:p.css("text-indent"),textRendering:p.css("text-rendering"),textTransform:p.css("text-transform")}).insertAfter(p)}function n(p,q){p=(p||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");q=(q||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");return p===q}}();var c=function(){var p={suggestionsList:'<span class="tt-suggestions"></span>'},m={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"nowrap"}};function n(q){k.bindAll(this);this.isOpen=false;this.isEmpty=true;this.isMouseOverDropdown=false;this.showDefaultSuggestions=q.showDefaultSuggestions;this.$menu=a(q.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}k.mixin(n.prototype,e,{_handleMouseenter:function(){this.isMouseOverDropdown=true},_handleMouseleave:function(){this.isMouseOverDropdown=false},_handleMouseover:function(q){var r=a(q.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor");r.addClass("tt-is-under-cursor")},_handleSelection:function(q){var r=a(q.currentTarget);this.trigger("suggestionSelected",o(r))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var r,q,u,s;if(!this.isVisible()){return}r=this._getSuggestions();q=r.filter(".tt-is-under-cursor");q.removeClass("tt-is-under-cursor");u=r.index(q)+t;u=(u+1)%(r.length+1)-1;if(u===-1){this.trigger("cursorRemoved");return}else{if(u<-1){u=r.length-1}}s=r.eq(u).addClass("tt-is-under-cursor");this._ensureVisibility(s);this.trigger("cursorMoved",o(s))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(q){var t=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),u=this.$menu.scrollTop(),s=q.position().top,r=s+q.outerHeight(true);if(s<0){this.$menu.scrollTop(u+s)}else{if(t<r){this.$menu.scrollTop(u+(r-t))}}},destroy:function(){this.$menu.off(".tt");this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){if(!this.isMouseOverDropdown){this.close()}},close:function(){if(this.isOpen){this.isOpen=false;this.isMouseOverDropdown=false;this._hide();this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor");this.trigger("closed")}},open:function(){if(!this.isOpen){this.isOpen=true;if(this.showDefaultSuggestions||!this.isEmpty){this._show()}this.trigger("opened")}},setLanguageDirection:function(q){var r={left:"0",right:"auto"},s={left:"auto",right:" 0"};q==="ltr"?this.$menu.css(r):this.$menu.css(s)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(+1)},getSuggestionUnderCursor:function(){var q=this._getSuggestions().filter(".tt-is-under-cursor").first();return q.length>0?o(q):null},getFirstSuggestion:function(){var q=this._getSuggestions().first();return q.length>0?o(q):null},renderSuggestions:function(u,y){var v="tt-dataset-"+u.name,z='<div class="tt-suggestion">%body</div>',t,s,q=this.$menu.find("."+v),w,x,r;if(q.length===0){s=a(p.suggestionsList).css(m.suggestionsList);q=a("<div></div>").addClass(v).append(u.header).append(s).append(u.footer).appendTo(this.$menu)}if(y.length>0){this.isEmpty=false;this.isOpen&&this._show();w=document.createElement("div");x=document.createDocumentFragment();k.each(y,function(A,B){if(typeof(B)!=="undefined"){B.dataset=u.name;t=u.template(B.datum);w.innerHTML=z.replace("%body",t);r=a(w.firstChild).css(m.suggestion).data("suggestion",B);r.children().each(function(){a(this).css(m.suggestionChild)});x.appendChild(r[0])}});q.show().find(".tt-suggestions").html(x)}else{this.clearSuggestions(u.name)}this.trigger("suggestionsRendered")},clearSuggestions:function(s){var q=s?this.$menu.find(".tt-dataset-"+s):this.$menu.find('[class^="tt-dataset-"]'),r=q.find(".tt-suggestions");q.hide();r.empty();if(this._getSuggestions().length===0){this.isEmpty=true;this._hide()}}});return n;function o(q){return q.data("suggestion")}}();var j=function(){var p={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},n={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};if(k.isMsie()){k.mixin(n.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(k.isMsie()&&k.isMsie()<=7){k.mixin(n.wrapper,{display:"inline",zoom:"1"});k.mixin(n.query,{marginTop:"-1px"})}function q(v){var t,s,r;k.bindAll(this);this.$node=m(v.input);this.datasets=v.datasets;this.dir=null;this.showDefaultSuggestions=false;this.eventBus=v.eventBus;t=this.$node.find(".tt-dropdown-menu");s=this.$node.find(".tt-query");r=this.$node.find(".tt-hint");for(var u=0;u<this.datasets.length;u++){if(this.datasets[u].minLength===0){this.showDefaultSuggestions=true}}this.dropdownView=new c({menu:t,showDefaultSuggestions:this.showDefaultSuggestions}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent);this.inputView=new f({input:s,hint:r}).on("focused",this._handleFocus).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}k.mixin(q.prototype,e,{_managePreventDefault:function(s){var r=s.data,t,u,v=false;switch(s.type){case"tabKeyed":t=this.inputView.getHintValue();u=this.inputView.getInputValue();v=t&&t!==u;break;case"upKeyed":case"downKeyed":v=!r.shiftKey&&!r.ctrlKey&&!r.metaKey;break}v&&r.preventDefault()},_setLanguageDirection:function(){var r=this.inputView.getLanguageDirection();if(r!==this.dir){this.dir=r;this.$node.css("direction",r);this.dropdownView.setLanguageDirection(r)}},_updateHint:function(){var z=this.dropdownView.getFirstSuggestion(),u=z?z.value:null,s=this.dropdownView.isVisible(),v=this.inputView.isOverflow(),w,y,t,r,x;if(u&&s&&!v){w=this.inputView.getInputValue();if(!w){return}y=w.replace(/\s{2,}/g," ").replace(/^\s+/g,"");t=k.escapeRegExChars(y);r=new RegExp("^(?:"+t+")(.*$)","i");x=r.exec(u);this.inputView.setHintValue(w+(x?x[1]:""))}},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(r){var s=r.data;this.inputView.setInputValue(s.value,true)},_handleFocus:function(){if(this.showDefaultSuggestions){this._getSuggestions()}this._openDropdown()},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(r){this.dropdownView[r.type==="blured"?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(s){var r=s.data;if(!r.shiftKey&&!r.ctrlKey&&!r.metaKey){this.dropdownView[s.type==="upKeyed"?"moveCursorUp":"moveCursorDown"]()}},_handleSelection:function(s){var r=s.type==="suggestionSelected",t=r?s.data:this.dropdownView.getSuggestionUnderCursor();if(t){this.inputView.setInputValue(t.value);r?this.inputView.focus():s.data.preventDefault();r&&k.isMsie()?k.defer(this.dropdownView.close):this.dropdownView.close();this.eventBus.trigger("selected",t.datum,t.dataset)}},_getSuggestions:function(){var s=this,r=this.inputView.getQuery();if(k.isBlankString(r)&&!this.showDefaultSuggestions){return}k.each(this.datasets,function(u,t){t.getSuggestions(r,function(v){if(r===s.inputView.getQuery()){s.dropdownView.renderSuggestions(t,v)}})})},_autocomplete:function(r){var u,t,v,s,w;if(r.type==="rightKeyed"||r.type==="leftKeyed"){u=this.inputView.isCursorAtEnd();t=this.inputView.getLanguageDirection()==="ltr"?r.type==="leftKeyed":r.type==="rightKeyed";if(!u||t){return}}v=this.inputView.getQuery();s=this.inputView.getHintValue();if(s!==""&&v!==s){w=this.dropdownView.getFirstSuggestion();this.inputView.setInputValue(w.value);this.eventBus.trigger("autocompleted",w.datum,w.dataset)}},_propagateEvent:function(r){this.eventBus.trigger(r.type)},destroy:function(){this.inputView.destroy();this.dropdownView.destroy();o(this.$node);this.$node=null},setQuery:function(r){this.inputView.setQuery(r);this.inputView.setInputValue(r);this._clearHint();this._clearSuggestions();this._getSuggestions()}});return q;function m(w){var u=a(p.wrapper),r=a(p.dropdown),t=a(w),s=a(p.hint);u=u.css(n.wrapper);r=r.css(n.dropdown);s.css(n.hint).css({backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")});t.data("ttAttrs",{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")});t.addClass("tt-query").attr({autocomplete:"off",spellcheck:false}).css(n.query);try{!t.attr("dir")&&t.attr("dir","auto")}catch(v){}return t.wrap(u).parent().prepend(s).append(r)}function o(s){var r=s.find(".tt-query");k.each(r.data("ttAttrs"),function(t,u){k.isUndefined(u)?r.removeAttr(t):r.attr(t,u)});r.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(s);s.remove()}}();(function(){var m={},o="ttView",n;n={initialize:function(p){var q;p=k.isArray(p)?p:[p];if(p.length===0){a.error("no datasets provided")}q=k.map(p,function(t){var s=m[t.name]?m[t.name]:new b(t);if(t.name){m[t.name]=s}return s});return this.each(r);function r(){var s=a(this),t,u=new d({el:s});t=k.map(q,function(v){return v.initialize()});s.data(o,new j({input:s,eventBus:u=new d({el:s}),datasets:q}));a.when.apply(a,t).always(function(){k.defer(function(){u.trigger("initialized")})})}},destroy:function(){return this.each(p);function p(){var q=a(this),r=q.data(o);if(r){r.destroy();q.removeData(o)}}},setQuery:function(p){return this.each(q);function q(){var r=a(this).data(o);r&&r.setQuery(p)}}};jQuery.fn.typeahead=function(p){if(n[p]){return n[p].apply(this,[].slice.call(arguments,1))}else{return n.initialize.apply(this,arguments)}}})()})(window.jQuery);$(function(){$("#SearchText").typeahead({name:"search",valueKey:"url",limit:25,beforeSend:function(a,b){$.SetLoadingIndicator()},remote:"/FastSearch?q=%QUERY",prefetch:{url:"/FastSearchPrefetch",ttl:1},minLength:0,template:"dummy string",engine:{compile:function(a){return{render:function(b){var c="<div{2}>{0}{1}</div>".format(b.line1,b.line2?"<br>"+b.line2:"",b.addmargin?" style='margin-bottom:.7em'":"");return c}}}}});$("#SearchText").bind("typeahead:selected",function(c,a,b){window.location=a.url})});String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})};$(function(){$.AttachFormElements=function(){$("form.ajax input.ajax-typeahead").typeahead({minLength:3,remote:{url:"test",beforeSend:function(b,c){$.SetLoadingIndicator()},replace:function(c,b){return $("input:focus").data("link")+"?query="+b}}});$.DatePickersAndChosen()};$.DatePickers=function(){$("form .dateonly").datepicker({autoclose:true,orientation:"auto",minView:2,forceParse:false,format:$.dtoptions.format});$("form .datetime").datetimepicker({autoclose:true,showMeridian:true,orientation:"auto",forceParse:false,format:$.dtoptions.formatTime})};$.DatePickersAndChosen=function(){$.DatePickers();$("form.ajax select:not([plain])").select2({dropdownAutoWidth:true});$("form.ajax a.editable").editable()};$("ul.nav-tabs a.ajax,a.ajax.ui-tabs-anchor").live("click",function(g){var c=$(this);var e=c.data("clicked");if(e){return false}c.data("clicked",true);var i=c.attr("href")||c.data("target");var f=$(i);var b=f.find("form.ajax");var h=b.serialize();var j=f.data("link");if(!f.hasClass("loaded")){$.ajax({type:"POST",url:j,data:h,success:function(d,k){f.addClass("loaded");f.html(d).ready(function(){if(f.data("init")){$.InitFunctions[f.data("init")]()}if(f.data("init2")){$.InitFunctions[f.data("init2")]()}if(b.length===0){b=f.find("form.ajax")}if(b.data("init")){$.InitFunctions[b.data("init")]()}if(b.data("init2")){$.InitFunctions[b.data("init2")]()}})},error:function(d,k){f.html(d.responseText).ready(function(){})}})}return true});$("div.tab-pane").on("click","a.ajax-refresh",function(c){c.preventDefault();var b=$(this).closest("div.tab-pane");$.formAjaxClick($(this),b.data("link"));return false});$("form.ajax a.submit").live("click",function(b){b.preventDefault();var c=$(this);if(c.data("confirm")){bootbox.confirm(c.data("confirm"),function(d){if(d==true){$.formAjaxSubmit(c)}})}else{$.formAjaxSubmit(c)}return false});$.formAjaxSubmit=function(c){var b=c.closest("form.ajax");b.attr("action",c[0].href);b.submit()};$("form.ajax input.ajax").live("click",function(){$.formAjaxClick($(this))});$("form.ajax a.ajax").live("click",function(b){b.preventDefault();var c=$(this);if(c.data("confirm")){bootbox.confirm(c.data("confirm"),function(d){if(d==true){$.formAjaxClick(c)}})}else{$.formAjaxClick(c)}return false});$.formAjaxClick=function(f,i){var b=f.closest("form.ajax");var e=b.closest("div.tab-pane");var c=f.closest("div.modal-body");var g=f.attr("href");if(g==="#"){g=null}var j=i||f.data("link")||g||b[0].action||e.data("link")||c.data("target")||"#";if(f.data("size")){$("input[name='PageSize']",b).val(f.data("size"))}if(f.data("page")){$("input[name='Page']",b).val(f.data("page"))}if(f.data("sortby")){$("input[name='Sort']",b).val(f.data("sortby"))}if(f.data("dir")){$("input[name='Direction']",b).val(f.data("dir"))}var d=b.closest("div.tab-pane[data-init]");var h=b.serialize();if(h.length===0){h={}}if(!f.hasClass("validate")||b.valid()){$.ajax({type:"POST",url:j,data:h,success:function(l,m){if(f.data("redirect")){window.location=l}else{if(b.hasClass("modal")){b.html(l).ready(function(){b.removeClass("hide");var n=($(window).height()-b.height())/2;if(n<10){n=10}b.css({"margin-top":n,top:"0"});$.AttachFormElements();if(f.data("callback")){$.InitFunctions[f.data("callback")]()}})}else{var k=$(b.data("results")||b);k.replaceWith(l).ready(function(){$.AttachFormElements();if(d.data("init")){$.InitFunctions[d.data("init")]()}if(d.data("init2")){$.InitFunctions[d.data("init2")]()}if(b.data("init")){$.InitFunctions[b.data("init")]()}if(b.data("init2")){$.InitFunctions[b.data("init2")]()}if(f.data("callback")){$.InitFunctions[f.data("callback")]()}})}}},error:function(m,k,l){b.html(m.responseText)}})}return false};$.validator.addMethod("unallowedcode",function(d,b,c){return d!==c.code},"required, select item");$.validator.addMethod("dateandtimevalid",function(f,b){var c=f.split(" ");var d=!/Invalid|NaN/.test(new Date(c[0]).toString());var e=/^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/i.test(c[1]);return this.optional(b)||(d&&e)},"Please enter a valid date and time.");$("a.dialog-options").live("click",function(d){d.preventDefault();var b=$(this);var c=b.data("target")||this.href;$.dialogOptions(c,b)});$.dialogOptions=function(c,b){$("<div id='dialog-options' />").load(c,{},function(){var e=$(this);var g=e.find("form");if(b[0].title){g.find("h3.title").text(b[0].title)}g.modal("show");if(!g.attr("action")){g.attr("action",b[0].href)}g.on("hidden",function(){e.remove();g.remove()});$.DatePickers();g.validate({submitHandler:function(d){if(d.method.toUpperCase()==="GET"){d.submit()}else{if($(d).hasClass("ajax")){var f=g.serialize();$.post(d.action,f,function(h){if(h){$.growlUI("",h)}if(b.data("callback")){$.InitFunctions[b.data("callback")](b)}})}else{if(b.data("confirm")){bootbox.confirm(b.data("confirm"),function(h){if(!h){d.submit()}})}else{d.submit()}if(b.data("callback")){var f=g.serialize();$.InitFunctions[b.data("callback")](b,f)}}}g.modal("hide")},highlight:function(d){$(d).closest(".control-group").addClass("error")},unhighlight:function(d){$(d).closest(".control-group").removeClass("error")}})});return false};$("a.longrunop").live("click",function(c){c.preventDefault();var b={};if($(this).data("post")){b=$(this).closest("form").serializeArray()}$('<form class="modal form-horizontal ajax validate fade hide" />').load(this.href,b,function(){var e=$(this);var d=$("#callback",e).val();e.modal("show");var g=250;e.on("hidden",function(){g=0;e.remove();if(d){$.InitFunctions[d]()}});e.on("click","a.ajaxreloader",function(f){f.preventDefault();var h=this.href;var j=e.serialize()||{};var i=function(){$.post(h,j,function(k){j=e.serialize();e.html(k);if($("#finished",e).val()){g=0}if(g>0){g+=500;if(g>3000){g=3000}setTimeout(i,g)}})};setTimeout(i,g);return false})});return false});var a=0;$.ajaxSetup({beforeSend:function(){$.SetLoadingIndicator()},complete:function(){a--;if(a===0){$("#loading-indicator").hide()}}});$.SetLoadingIndicator=function(){$("#loading-indicator").css({position:"absolute",left:$(window).width()/2,top:$(window).height()/2,"z-index":2000}).show();a++};if(!$.InitFunctions){$.InitFunctions={}}});$(function(){$("a.extravalue").live("click",function(b){b.preventDefault();var a=$(this);$("<div />").load($(this).attr("href"),{},function(){var c=$(this);var e=c.find("form");e.modal("show");$.AttachFormElements();$(this).validate({highlight:function(d){$(d).closest(".control-group").addClass("error")},unhighlight:function(d){$(d).closest(".control-group").removeClass("error")}});e.on("hidden",function(){c.remove();e.remove()});var g=function(){$("#ExtraValueBitPrefix").parent().parent().addClass("hide");$("#ExtraValueCheckboxes").parent().parent().addClass("hide");$("#ExtraValueCodes").parent().parent().addClass("hide");switch($("#ExtraValueType_Value").val()){case"Code":$("#ExtraValueCodes").parent().parent().removeClass("hide");break;case"Bits":$("#ExtraValueBitPrefix").parent().parent().removeClass("hide");$("#ExtraValueCheckboxes").parent().parent().removeClass("hide");break;case"Codes":$("#ExtraValueCodes").parent().parent().removeClass("hide");break}};$("#ExtraValueType_Value").live("change",g)});$.InitFunctions.StandardExtraValueDialogCallback=function(){if($("#StandardExtraValueError").length===0){$("#extravalue-dialog").modal("hide");var c=a.closest("form").find("a.ajax-refresh");if(c.length>0){c.click()}}};$.InitFunctions.EditStandardExtraValueDialogCallback=function(){if($("#EditStandardExtraValueError").length==0){$("#editextravalue-dialog").modal("hide");var c=a.closest("form").find("a.ajax-refresh");if(c.length>0){c.click()}}};$.InitFunctions.DeleteStandardCallback=function(c){$(c.data("rowid")).remove()};$("#CloseListStandard").live("click",function(c){c.preventDefault();$.InitFunctions.StandardExtraValueDialogCallback()})});$("a.adhoc-extravalue").live("click",function(b){b.preventDefault();var a=$(this);$("<div />").load(a.attr("href"),{},function(){var c=$(this);var e=c.find("form");e.modal("show");$.AttachFormElements();e.validate({highlight:function(d){$(d).closest(".control-group").addClass("error")},unhighlight:function(d){$(d).closest(".control-group").removeClass("error")}});e.on("hidden",function(){c.remove();e.remove()});var g=function(){$("#ExtraValueTextBox").parent().parent().addClass("hide");$("#ExtraValueTextArea").parent().parent().addClass("hide");$("#ExtraValueCheckbox").parent().parent().addClass("hide");$("#ExtraValueDate").parent().parent().parent().addClass("hide");$("#ExtraValueInteger").parent().parent().addClass("hide");switch($("#AdhocExtraValueType_Value").val()){case"Code":$("#ExtraValueTextBox").parent().parent().removeClass("hide");break;case"Text":$("#ExtraValueTextArea").parent().parent().removeClass("hide");break;case"Bit":$("#ExtraValueCheckbox").parent().parent().removeClass("hide");break;case"Date":$("#ExtraValueDate").parent().parent().parent().removeClass("hide");break;case"Int":$("#ExtraValueInteger").parent().parent().removeClass("hide");break}};$("#AdhocExtraValueType_Value").live("change",g)});$.InitFunctions.AdhocDialogCallback=function(){if($("#ExtraValueError").length==0){$("#extravalue-dialog").modal("hide");var c=a.closest("form").find("a.ajax.reload");if(c.length>0){c.click()}}}});$.InitFunctions.ExtraEditable=function(){$.fn.editabletypes.abstractinput.prototype.value2input=function(a){this.$input.val((a||"").toString())};$("a.click-Code").editable({mode:"inline"});$("a.click-Text").editable({mode:"inline"});$("a.click-Int").editable({mode:"inline"});$("a.click-Text2,a.click-Data").editable({type:"textarea",mode:"inline",inputclass:"width100",showbuttons:"bottom"}).on("shown",function(a,b){b.input.$input.closest("span.editable-inline").css("width","100%");b.input.$input.closest("div.editable-input").css("width","100%")});$("a.click-Code-Select").editable({type:"select",mode:"inline"});$("a.click-Bits").editable({type:"checklist",mode:"inline"});$("a.click-Date").editable({type:"date",mode:"inline",format:$.dtoptions.format});$("a.click-Bit").editable({type:"checklist",mode:"inline",source:{True:"True"},emptytext:"False"})}});$(function(){$("a.searchadd").live("click",function(d){d.preventDefault();$("<form id='search-add' class='modal fade hide validate ajax form-horizontal' data-width='700' data-keyboard='false' data-backdrop='static' />").load($(this).attr("href"),{},function(){$(this).modal("show");$.AttachFormElements();$(this).validate({highlight:function(e){$(e).closest(".control-group").addClass("error")},unhighlight:function(e){$(e).closest(".control-group").removeClass("error")}});$(this).on("hidden",function(){$(this).remove()})})});$("#search-add a.commit").live("click",function(g){g.preventDefault();var d=$(this);var e=d.data("clicked");if(e){return false}d.data("clicked",true);var h=d.closest("form");var j=h.serialize();var i=d.attr("href");$.post(i,j,function(f){h.modal("hide");if(f.message){alert(f.message)}else{if(f.from==="Menu"){window.location="/Person2/"+f.pid}else{AddSelected(f)}}});return false});$(document).on("shown","#search-add",function(){$("#search-add #Name").focus();$("#search-add input").live("keydown",function(d){if(d.keyCode===13){d.preventDefault();$("#searchperson").click();return false}else{return true}})});$.fn.loadWith=function(g,e){var d=$(this);$.post(g,function(f){d.replaceWith(f).ready(e)})};$("#search-add a.clear").live("click",function(d){d.preventDefault();$("#Name").val("");$("#Phone").val("");$("#Address").val("");$("#dob").val("");return false});$("form.ajax tbody > tr a.reveal").live("click",function(d){d.stopPropagation()});$.NotReveal=function(d){if($(d.target).is("a")){if(!$(d.target).is(".reveal")){return true}}return false};$("form.ajax tr.section").live("click",function(d){if($.NotReveal(d)){return}d.preventDefault();c($(this))});$('form.ajax a[rel="reveal"]').live("click",function(d){d.preventDefault();c($(this).parents("tr"))});var c=function(d){if(d.hasClass("notshown")){b(d)}else{if(d.hasClass("shown")){a(d)}else{d.next("tr").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("toggle")}}};var b=function(d){d.nextUntil("tr.section").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("show");d.removeClass("notshown").addClass("shown");d.find("i").removeClass("fa-caret-right").addClass("fa-caret-down")};var a=function(d){d.nextUntil("tr.section").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("hide");d.removeClass("shown").addClass("notshown");d.find("i").removeClass("fa-caret-down").addClass("fa-caret-right")};$("form.ajax tr.master").live("click",function(d){if($.NotReveal(d)){return}d.preventDefault();$(this).next("tr").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("toggle")});$("form.ajax tr.details").live("click",function(d){if($.NotReveal(d)){return}d.preventDefault();d.stopPropagation();$(this).find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("hide")})});