/*
 * jQuery Migrate - v1.1.1 - 2013-02-16
 * https://github.com/jquery/jquery-migrate
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors; Licensed MIT
 */
(function(h,F,B){var E={};h.migrateWarnings=[];if(!h.migrateMute&&F.console&&console.log){console.log("JQMIGRATE: Logging is active")}if(h.migrateTrace===B){h.migrateTrace=true}h.migrateReset=function(){E={};h.migrateWarnings.length=0};function j(G){if(!E[G]){E[G]=true;h.migrateWarnings.push(G);if(F.console&&console.warn&&!h.migrateMute){console.warn("JQMIGRATE: "+G);if(h.migrateTrace&&console.trace){console.trace()}}}}function k(I,J,K,H){if(Object.defineProperty){try{Object.defineProperty(I,J,{configurable:true,enumerable:true,get:function(){j(H);return K},set:function(L){j(H);K=L}});return}catch(G){}}h._definePropertyBroken=true;I[J]=K}if(document.compatMode==="BackCompat"){j("jQuery is not compatible with Quirks Mode")}var b=h("<input/>",{size:1}).attr("size")&&h.attrFn,l=h.attr,C=h.attrHooks.value&&h.attrHooks.value.get||function(){return null},D=h.attrHooks.value&&h.attrHooks.value.set||function(){return B},x=/^(?:input|button)$/i,w=/^[238]$/,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,A=/^(?:checked|selected)$/i;k(h,"attrFn",b||{},"jQuery.attrFn is deprecated");h.attr=function(G,I,L,K){var H=I.toLowerCase(),J=G&&G.nodeType;if(K){if(l.length<4){j("jQuery.fn.attr( props, pass ) is deprecated")}if(G&&!w.test(J)&&(b?I in b:h.isFunction(h.fn[I]))){return h(G)[I](L)}}if(I==="type"&&L!==B&&x.test(G.nodeName)&&G.parentNode){j("Can't change the 'type' of an input or button in IE 6/7/8")}if(!h.attrHooks[H]&&u.test(H)){h.attrHooks[H]={get:function(N,O){var M,P=h.prop(N,O);return P===true||typeof P!=="boolean"&&(M=N.getAttributeNode(O))&&M.nodeValue!==false?O.toLowerCase():B},set:function(M,P,N){var O;if(P===false){h.removeAttr(M,N)}else{O=h.propFix[N]||N;if(O in M){M[O]=true}M.setAttribute(N,N.toLowerCase())}return N}};if(A.test(H)){j("jQuery.fn.attr('"+H+"') may use property instead of attribute")}}return l.call(h,G,I,L)};h.attrHooks.value={get:function(G,H){var I=(G.nodeName||"").toLowerCase();if(I==="button"){return C.apply(this,arguments)}if(I!=="input"&&I!=="option"){j("jQuery.fn.attr('value') no longer gets properties")}return H in G?G.value:null},set:function(G,I){var H=(G.nodeName||"").toLowerCase();if(H==="button"){return D.apply(this,arguments)}if(H!=="input"&&H!=="option"){j("jQuery.fn.attr('value', val) no longer sets properties")}G.value=I}};var i,c,o=h.fn.init,q=h.parseJSON,y=/^(?:[^<]*(<[\w\W]+>)[^>]*|#([\w\-]*))$/;h.fn.init=function(J,G,I){var H;if(J&&typeof J==="string"&&!h.isPlainObject(G)&&(H=y.exec(J))&&H[1]){if(J.charAt(0)!=="<"){j("$(html) HTML strings must start with '<' character")}if(G&&G.context){G=G.context}if(h.parseHTML){return o.call(this,h.parseHTML(h.trim(J),G,true),G,I)}}return o.apply(this,arguments)};h.fn.init.prototype=h.fn;h.parseJSON=function(G){if(!G&&G!==null){j("jQuery.parseJSON requires a valid JSON string");return null}return q.apply(this,arguments)};h.uaMatch=function(H){H=H.toLowerCase();var G=/(chrome)[ \/]([\w.]+)/.exec(H)||/(webkit)[ \/]([\w.]+)/.exec(H)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(H)||/(msie) ([\w.]+)/.exec(H)||H.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(H)||[];return{browser:G[1]||"",version:G[2]||"0"}};if(!h.browser){i=h.uaMatch(navigator.userAgent);c={};if(i.browser){c[i.browser]=true;c.version=i.version}if(c.chrome){c.webkit=true}else{if(c.webkit){c.safari=true}}h.browser=c}k(h,"browser",h.browser,"jQuery.browser is deprecated");h.sub=function(){function H(K,J){return new H.fn.init(K,J)}h.extend(true,H,this);H.superclass=this;H.fn=H.prototype=this();H.fn.constructor=H;H.sub=this.sub;H.fn.init=function G(K,J){if(J&&J instanceof h&&!(J instanceof H)){J=H(J)}return h.fn.init.call(this,K,J,I)};H.fn.init.prototype=H.fn;var I=H(document);j("jQuery.sub() is deprecated");return H};h.ajaxSetup({converters:{"text json":h.parseJSON}});var n=h.fn.data;h.fn.data=function(I){var J,H,G=this[0];if(G&&I==="events"&&arguments.length===1){J=h.data(G,I);H=h._data(G,I);if((J===B||J===H)&&H!==B){j("Use of jQuery.fn.data('events') is deprecated");return H}}return n.apply(this,arguments)};var z=/\/(java|ecma)script/i,r=h.fn.andSelf||h.fn.addBack;h.fn.andSelf=function(){j("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()");return r.apply(this,arguments)};if(!h.clean){h.clean=function(I,G,J,O){G=G||document;G=!G.nodeType&&G[0]||G;G=G.ownerDocument||G;j("jQuery.clean() is deprecated");var L,H,K,M,N=[];h.merge(N,h.buildFragment(I,G).childNodes);if(J){K=function(P){if(!P.type||z.test(P.type)){return O?O.push(P.parentNode?P.parentNode.removeChild(P):P):J.appendChild(P)}};for(L=0;(H=N[L])!=null;L++){if(!(h.nodeName(H,"script")&&K(H))){J.appendChild(H);if(typeof H.getElementsByTagName!=="undefined"){M=h.grep(h.merge([],H.getElementsByTagName("script")),K);N.splice.apply(N,[L+1,0].concat(M));L+=M.length}}}}return N}}var d=h.event.add,e=h.event.remove,f=h.event.trigger,s=h.fn.toggle,p=h.fn.live,m=h.fn.die,a="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",t=new RegExp("\\b(?:"+a+")\\b"),v=/(?:^|\s)hover(\.\S+|)\b/,g=function(G){if(typeof(G)!=="string"||h.event.special.hover){return G}if(v.test(G)){j("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'")}return G&&G.replace(v,"mouseenter$1 mouseleave$1")};if(h.event.props&&h.event.props[0]!=="attrChange"){h.event.props.unshift("attrChange","attrName","relatedNode","srcElement")}if(h.event.dispatch){k(h.event,"handle",h.event.dispatch,"jQuery.event.handle is undocumented and deprecated")}h.event.add=function(H,K,I,G,J){if(H!==document&&t.test(K)){j("AJAX events should be attached to document: "+K)}d.call(this,H,g(K||""),I,G,J)};h.event.remove=function(G,K,H,J,I){e.call(this,G,g(K)||"",H,J,I)};h.fn.error=function(){var G=Array.prototype.slice.call(arguments,0);j("jQuery.fn.error() is deprecated");G.splice(0,0,"error");if(arguments.length){return this.bind.apply(this,G)}this.triggerHandler.apply(this,G);return this};h.fn.toggle=function(H,I){if(!h.isFunction(H)||!h.isFunction(I)){return s.apply(this,arguments)}j("jQuery.fn.toggle(handler, handler...) is deprecated");var G=arguments,J=H.guid||h.guid++,K=0,L=function(M){var N=(h._data(this,"lastToggle"+H.guid)||0)%K;h._data(this,"lastToggle"+H.guid,N+1);M.preventDefault();return G[N].apply(this,arguments)||false};L.guid=J;while(K<G.length){G[K++].guid=J}return this.click(L)};h.fn.live=function(I,G,H){j("jQuery.fn.live() is deprecated");if(p){return p.apply(this,arguments)}h(this.context).on(I,this.selector,G,H);return this};h.fn.die=function(H,G){j("jQuery.fn.die() is deprecated");if(m){return m.apply(this,arguments)}h(this.context).off(H,this.selector||"**",G);return this};h.event.trigger=function(I,G,H,J){if(!H&&!t.test(I)){j("Global events are undocumented and deprecated")}return f.call(this,I,G,H||document,J)};h.each(a.split("|"),function(G,H){h.event.special[H]={setup:function(){var I=this;if(I!==document){h.event.add(document,H+"."+h.guid,function(){h.event.trigger(H,null,I,true)});h._data(this,H,h.guid++)}return false},teardown:function(){if(this!==document){h.event.remove(document,H+"."+h._data(this,H))}return false}}})})(jQuery,window);!function(a){var c=function(e,f){this.init(e,f)};c.prototype={constructor:c,init:function(e,f){this.$element=a(e);this.options=a.extend({},a.fn.modalmanager.defaults,this.$element.data(),typeof f=="object"&&f);this.stack=[];this.backdropCount=0;if(this.options.resize){var g,h=this;a(window).on("resize.modal",function(){g&&clearTimeout(g);g=setTimeout(function(){for(var j=0;j<h.stack.length;j++){h.stack[j].isShown&&h.stack[j].layout()}},10)})}},createModal:function(e,f){a(e).modal(a.extend({manager:this},f))},appendModal:function(e){this.stack.push(e);var f=this;e.$element.on("show.modalmanager",d(function(g){var h=function(){e.isShown=true;var i=a.support.transition&&e.$element.hasClass("fade");f.$element.toggleClass("modal-open",f.hasOpenModal()).toggleClass("page-overflow",a(window).height()<f.$element.height());e.$parent=e.$element.parent();e.$container=f.createContainer(e);e.$element.appendTo(e.$container);f.backdrop(e,function(){e.$element.show();if(i){e.$element[0].offsetWidth}e.layout();e.$element.addClass("in").attr("aria-hidden",false);var j=function(){f.setFocus();e.$element.trigger("shown")};i?e.$element.one(a.support.transition.end,j):j()})};e.options.replace?f.replace(h):h()}));e.$element.on("hidden.modalmanager",d(function(g){f.backdrop(e);if(e.$backdrop){a.support.transition&&e.$element.hasClass("fade")?e.$backdrop.one(a.support.transition.end,function(){f.destroyModal(e)}):f.destroyModal(e)}else{f.destroyModal(e)}}));e.$element.on("destroy.modalmanager",d(function(g){f.removeModal(e)}))},destroyModal:function(f){f.destroy();var e=this.hasOpenModal();this.$element.toggleClass("modal-open",e);if(!e){this.$element.removeClass("page-overflow")}this.removeContainer(f);this.setFocus()},hasOpenModal:function(){for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){return true}}return false},setFocus:function(){var f;for(var e=0;e<this.stack.length;e++){if(this.stack[e].isShown){f=this.stack[e]}}if(!f){return}f.focus()},removeModal:function(e){e.$element.off(".modalmanager");if(e.$backdrop){this.removeBackdrop(e)}this.stack.splice(this.getIndexOfModal(e),1)},getModalAt:function(e){return this.stack[e]},getIndexOfModal:function(f){for(var e=0;e<this.stack.length;e++){if(f===this.stack[e]){return e}}},replace:function(e){var g;for(var f=0;f<this.stack.length;f++){if(this.stack[f].isShown){g=this.stack[f]}}if(g){this.$backdropHandle=g.$backdrop;g.$backdrop=null;e&&g.$element.one("hidden",d(a.proxy(e,this)));g.hide()}else{if(e){e()}}},removeBackdrop:function(e){e.$backdrop.remove();e.$backdrop=null},createBackdrop:function(f){var e;if(!this.$backdropHandle){e=a('<div class="modal-backdrop '+f+'" />').appendTo(this.$element)}else{e=this.$backdropHandle;e.off(".modalmanager");this.$backdropHandle=null;this.isLoading&&this.removeSpinner()}return e},removeContainer:function(e){e.$container.remove();e.$container=null},createContainer:function(f){var e;e=a('<div class="modal-scrollable">').css("z-index",b("modal",f?this.getIndexOfModal(f):this.stack.length)).appendTo(this.$element);if(f&&f.options.backdrop!="static"){e.on("click.modal",d(function(g){f.hide()}))}else{if(f){e.on("click.modal",d(function(g){f.attention()}))}}return e},backdrop:function(h,f){var e=h.$element.hasClass("fade")?"fade":"",i=h.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(h.isShown&&i){var g=a.support.transition&&e&&!this.$backdropHandle;h.$backdrop=this.createBackdrop(e);h.$backdrop.css("z-index",b("backdrop",this.getIndexOfModal(h)));if(g){h.$backdrop[0].offsetWidth}h.$backdrop.addClass("in");this.backdropCount+=1;g?h.$backdrop.one(a.support.transition.end,f):f()}else{if(!h.isShown&&h.$backdrop){h.$backdrop.removeClass("in");this.backdropCount-=1;var j=this;a.support.transition&&h.$element.hasClass("fade")?h.$backdrop.one(a.support.transition.end,function(){j.removeBackdrop(h)}):j.removeBackdrop(h)}else{if(f){f()}}}},removeSpinner:function(){this.$spinner&&this.$spinner.remove();this.$spinner=null;this.isLoading=false},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove();this.$backdropHandle=null;this.removeSpinner()},loading:function(f){f=f||function(){};this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",a(window).height()<this.$element.height());if(!this.isLoading){this.$backdropHandle=this.createBackdrop("fade");this.$backdropHandle[0].offsetWidth;this.$backdropHandle.css("z-index",b("backdrop",this.stack.length)).addClass("in");var e=a(this.options.spinner).css("z-index",b("modal",this.stack.length)).appendTo(this.$element).addClass("in");this.$spinner=a(this.createContainer()).append(e).on("click.modalmanager",a.proxy(this.loading,this));this.isLoading=true;a.support.transition?this.$backdropHandle.one(a.support.transition.end,f):f()}else{if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var g=this;a.support.transition?this.$backdropHandle.one(a.support.transition.end,function(){g.removeLoading()}):g.removeLoading()}else{if(f){f(this.isLoading)}}}}};var b=(function(){var f,e={};return function(j,i){if(typeof f==="undefined"){var h=a('<div class="modal hide" />').appendTo("body"),g=a('<div class="modal-backdrop hide" />').appendTo("body");e.modal=+h.css("z-index");e.backdrop=+g.css("z-index");f=e.modal-e.backdrop;h.remove();g.remove();g=h=null}return e[j]+(f*i)}}());function d(e){return function(f){if(this===f.target){return e.apply(this,arguments)}}}a.fn.modalmanager=function(f,e){return this.each(function(){var g=a(this),h=g.data("modalmanager");if(!h){g.data("modalmanager",(h=new c(this,f)))}if(typeof f==="string"){h[f].apply(h,[].concat(e))}})};a.fn.modalmanager.defaults={backdropLimit:999,resize:true,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};a.fn.modalmanager.Constructor=c}(jQuery);!function(a){var b=function(c,d){this.init(c,d)};b.prototype={constructor:b,init:function(c,e){this.options=e;this.$element=a(c).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote);var d=typeof this.options.manager==="function"?this.options.manager.call(this):this.options.manager;d=d.appendModal?d:a(d).modalmanager().data("modalmanager");d.appendModal(this)},toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=a.Event("show");if(this.isShown){return}this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.escape();this.tab();this.options.loading&&this.loading()},hide:function(c){c&&c.preventDefault();c=a.Event("hide");this.$element.trigger(c);if(!this.isShown||c.isDefaultPrevented()){return(this.isShown=false)}this.isShown=false;this.escape();this.tab();this.isLoading&&this.loading();a(document).off("focusin.modal");this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",true);a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},layout:function(){var d=this.options.height?"height":"max-height",f=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var e=this;this.$element.css("margin-left",function(){if(/%/ig.test(e.options.width)){return -(parseInt(e.options.width)/2)+"%"}else{return -(a(this).width()/2)+"px"}})}else{this.$element.css("width","");this.$element.css("margin-left","")}this.$element.find(".modal-body").css("overflow","").css(d,"");if(f){this.$element.find(".modal-body").css("overflow","auto").css(d,f)}var c=a(window).height()-10<this.$element.height();if(c||this.options.modalOverflow){this.$element.css("margin-top",0).addClass("modal-overflow")}else{this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")}},tab:function(){var c=this;if(this.isShown&&this.options.consumeTab){this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(g){if(g.keyCode&&g.keyCode==9){var d=a(this),f=a(this);c.$element.find("[data-tabindex]:enabled:not([readonly])").each(function(h){if(!h.shiftKey){d=d.data("tabindex")<a(this).data("tabindex")?d=a(this):f=a(this)}else{d=d.data("tabindex")>a(this).data("tabindex")?d=a(this):f=a(this)}});d[0]!==a(this)[0]?d.focus():f.focus();g.preventDefault()}})}else{if(!this.isShown){this.$element.off("keydown.tabindex.modal")}}},escape:function(){var c=this;if(this.isShown&&this.options.keyboard){if(!this.$element.attr("tabindex")){this.$element.attr("tabindex",-1)}this.$element.on("keyup.dismiss.modal",function(d){d.which==27&&c.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var c=this,d=setTimeout(function(){c.$element.off(a.support.transition.end);c.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(d);c.hideModal()})},hideModal:function(){var c=this.options.height?"height":"max-height";var d=this.options.height||this.options.maxHeight;if(d){this.$element.find(".modal-body").css("overflow","").css(c,"")}this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove();this.$loading=null;this.isLoading=false},loading:function(d){d=d||function(){};var c=this.$element.hasClass("fade")?"fade":"";if(!this.isLoading){var e=a.support.transition&&c;this.$loading=a('<div class="loading-mask '+c+'">').append(this.options.spinner).appendTo(this.$element);if(e){this.$loading[0].offsetWidth}this.$loading.addClass("in");this.isLoading=true;e?this.$loading.one(a.support.transition.end,d):d()}else{if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var f=this;a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){f.removeLoading()}):f.removeLoading()}else{if(d){d(this.isLoading)}}}},focus:function(){var c=this.$element.find(this.options.focusOn);c=c.length?c:this.$element;c.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var c=this;setTimeout(function(){c.$element.addClass("animated").addClass(c.options.attentionAnimation)},0)}this.focus()},destroy:function(){var c=a.Event("destroy");this.$element.trigger(c);if(c.isDefaultPrevented()){return}this.teardown()},teardown:function(){if(!this.$parent.length){this.$element.remove();this.$element=null;return}if(this.$parent!==this.$element.parent()){this.$element.appendTo(this.$parent)}this.$element.off(".modal");this.$element.removeData("modal");this.$element.removeClass("in").attr("aria-hidden",true)}};a.fn.modal=function(d,c){return this.each(function(){var e=a(this),f=e.data("modal"),g=a.extend({},a.fn.modal.defaults,e.data(),typeof d=="object"&&d);if(!f){e.data("modal",(f=new b(this,g)))}if(typeof d=="string"){f[d].apply(f,[].concat(c))}else{if(g.show){f.show()}}})};a.fn.modal.defaults={keyboard:true,backdrop:true,loading:false,show:true,width:null,height:null,maxHeight:null,modalOverflow:false,consumeTab:true,focusOn:null,replace:false,resize:false,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>'};a.fn.modal.Constructor=b;a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(f){var d=a(this),g=d.attr("href"),c=a(d.attr("data-target")||(g&&g.replace(/.*(?=#[^\s]+$)/,""))),h=c.data("modal")?"toggle":a.extend({remote:!/#/.test(g)&&g},c.data(),d.data());f.preventDefault();c.modal(h).one("hide",function(){d.focus()})})})}(window.jQuery);/* X-editable - v1.5.0 
* In-place editing with Twitter Bootstrap, jQuery UI or pure jQuery
* http://github.com/vitalets/x-editable
* Copyright (c) 2013 Vitaliy Potapov; Licensed MIT */
(function(a){var b=function(c,d){this.options=a.extend({},a.fn.editableform.defaults,d);this.$div=a(c);if(!this.options.scope){this.options.scope=this}};b.prototype={constructor:b,initInput:function(){this.input=this.options.input;this.value=this.input.str2value(this.options.value);this.input.prerender()},initTemplate:function(){this.$form=a(a.fn.editableform.template)},initButtons:function(){var c=this.$form.find(".editable-buttons");c.append(a.fn.editableform.buttons);if(this.options.showbuttons==="bottom"){c.addClass("editable-buttons-bottom")}},render:function(){this.$loading=a(a.fn.editableform.loading);this.$div.empty().append(this.$loading);this.initTemplate();if(this.options.showbuttons){this.initButtons()}else{this.$form.find(".editable-buttons").remove()}this.showLoading();this.isSaving=false;this.$div.triggerHandler("rendering");this.initInput();this.$form.find("div.editable-input").append(this.input.$tpl);this.$div.append(this.$form);a.when(this.input.render()).then(a.proxy(function(){if(!this.options.showbuttons){this.input.autosubmit()}this.$form.find(".editable-cancel").click(a.proxy(this.cancel,this));if(this.input.error){this.error(this.input.error);this.$form.find(".editable-submit").attr("disabled",true);this.input.$input.attr("disabled",true);this.$form.submit(function(d){d.preventDefault()})}else{this.error(false);this.input.$input.removeAttr("disabled");this.$form.find(".editable-submit").removeAttr("disabled");var c=(this.value===null||this.value===undefined||this.value==="")?this.options.defaultValue:this.value;this.input.value2input(c);this.$form.submit(a.proxy(this.submit,this))}this.$div.triggerHandler("rendered");this.showForm();if(this.input.postrender){this.input.postrender()}},this))},cancel:function(){this.$div.triggerHandler("cancel")},showLoading:function(){var d,c;if(this.$form){d=this.$form.outerWidth();c=this.$form.outerHeight();if(d){this.$loading.width(d)}if(c){this.$loading.height(c)}this.$form.hide()}else{d=this.$loading.parent().width();if(d){this.$loading.width(d)}}this.$loading.show()},showForm:function(c){this.$loading.hide();this.$form.show();if(c!==false){this.input.activate()}this.$div.triggerHandler("show")},error:function(g){var d=this.$form.find(".control-group"),c=this.$form.find(".editable-error-block"),f;if(g===false){d.removeClass(a.fn.editableform.errorGroupClass);c.removeClass(a.fn.editableform.errorBlockClass).empty().hide()}else{if(g){f=g.split("\n");for(var e=0;e<f.length;e++){f[e]=a("<div>").text(f[e]).html()}g=f.join("<br>")}d.addClass(a.fn.editableform.errorGroupClass);c.addClass(a.fn.editableform.errorBlockClass).html(g).show()}},submit:function(c){c.stopPropagation();c.preventDefault();var d,f=this.input.input2value();if(d=this.validate(f)){this.error(d);this.showForm();return}if(!this.options.savenochange&&this.input.value2str(f)==this.input.value2str(this.value)){this.$div.triggerHandler("nochange");return}var g=this.input.value2submit(f);this.isSaving=true;a.when(this.save(g)).done(a.proxy(function(h){this.isSaving=false;var e=typeof this.options.success==="function"?this.options.success.call(this.options.scope,h,f):null;if(e===false){this.error(false);this.showForm(false);return}if(typeof e==="string"){this.error(e);this.showForm();return}if(e&&typeof e==="object"&&e.hasOwnProperty("newValue")){f=e.newValue}this.error(false);this.value=f;this.$div.triggerHandler("save",{newValue:f,submitValue:g,response:h})},this)).fail(a.proxy(function(h){this.isSaving=false;var e;if(typeof this.options.error==="function"){e=this.options.error.call(this.options.scope,h,f)}else{e=typeof h==="string"?h:h.responseText||h.statusText||"Unknown error!"}this.error(e);this.showForm()},this))},save:function(f){this.options.pk=a.fn.editableutils.tryParseJson(this.options.pk,true);var d=(typeof this.options.pk==="function")?this.options.pk.call(this.options.scope):this.options.pk,e=!!(typeof this.options.url==="function"||(this.options.url&&((this.options.send==="always")||(this.options.send==="auto"&&d!==null&&d!==undefined)))),c;if(e){this.showLoading();c={name:this.options.name||"",value:f,pk:d};if(typeof this.options.params==="function"){c=this.options.params.call(this.options.scope,c)}else{this.options.params=a.fn.editableutils.tryParseJson(this.options.params,true);a.extend(c,this.options.params)}if(typeof this.options.url==="function"){return this.options.url.call(this.options.scope,c)}else{return a.ajax(a.extend({url:this.options.url,data:c,type:"POST"},this.options.ajaxOptions))}}},validate:function(c){if(c===undefined){c=this.value}if(typeof this.options.validate==="function"){return this.options.validate.call(this.options.scope,c)}},option:function(c,d){if(c in this.options){this.options[c]=d}if(c==="value"){this.setValue(d)}},setValue:function(d,c){if(c){this.value=this.input.str2value(d)}else{this.value=d}if(this.$form&&this.$form.is(":visible")){this.input.value2input(this.value)}}};a.fn.editableform=function(d){var c=arguments;return this.each(function(){var e=a(this),f=e.data("editableform"),g=typeof d==="object"&&d;if(!f){e.data("editableform",(f=new b(this,g)))}if(typeof d==="string"){f[d].apply(f,Array.prototype.slice.call(c,1))}})};a.fn.editableform.Constructor=b;a.fn.editableform.defaults={type:"text",url:null,params:null,name:null,pk:null,value:null,defaultValue:null,send:"auto",validate:null,success:null,error:null,ajaxOptions:null,showbuttons:true,scope:null,savenochange:false};a.fn.editableform.template='<form class="form-inline editableform"><div class="control-group"><div><div class="editable-input"></div><div class="editable-buttons"></div></div><div class="editable-error-block"></div></div></form>';a.fn.editableform.loading='<div class="editableform-loading"></div>';a.fn.editableform.buttons='<button type="submit" class="editable-submit">ok</button><button type="button" class="editable-cancel">cancel</button>';a.fn.editableform.errorGroupClass=null;a.fn.editableform.errorBlockClass="editable-error";a.fn.editableform.engine="jquery"}(window.jQuery));(function(a){a.fn.editableutils={inherit:function(b,d){var c=function(){};c.prototype=d.prototype;b.prototype=new c();b.prototype.constructor=b;b.superclass=d.prototype},setCursorPosition:function(b,c){if(b.setSelectionRange){b.setSelectionRange(c,c)}else{if(b.createTextRange){var d=b.createTextRange();d.collapse(true);d.moveEnd("character",c);d.moveStart("character",c);d.select()}}},tryParseJson:function(c,d){if(typeof c==="string"&&c.length&&c.match(/^[\{\[].*[\}\]]$/)){if(d){try{c=(new Function("return "+c))()}catch(b){}finally{return c}}else{c=(new Function("return "+c))()}}return c},sliceObj:function(h,f,b){var d,e,g={};if(!a.isArray(f)||!f.length){return g}for(var c=0;c<f.length;c++){d=f[c];if(h.hasOwnProperty(d)){g[d]=h[d]}if(b===true){continue}e=d.toLowerCase();if(h.hasOwnProperty(e)){g[d]=h[e]}}return g},getConfigData:function(b){var c={};a.each(b.data(),function(d,e){if(typeof e!=="object"||(e&&typeof e==="object"&&(e.constructor===Object||e.constructor===Array))){c[d]=e}});return c},objectKeys:function(c){if(Object.keys){return Object.keys(c)}else{if(c!==Object(c)){throw new TypeError("Object.keys called on a non-object")}var b=[],d;for(d in c){if(Object.prototype.hasOwnProperty.call(c,d)){b.push(d)}}return b}},escape:function(b){return a("<div>").text(b).html()},itemsByValue:function(g,e,h){if(!e||g===null){return[]}if(typeof(h)!=="function"){var b=h||"value";h=function(i){return i[b]}}var c=a.isArray(g),d=[],f=this;a.each(e,function(j,l){if(l.children){d=d.concat(f.itemsByValue(g,l.children,h))}else{if(c){if(a.grep(g,function(i){return i==(l&&typeof l==="object"?h(l):l)}).length){d.push(l)}}else{var k=(l&&(typeof l==="object"))?h(l):l;if(g==k){d.push(l)}}}});return d},createInput:function(c){var e,f,b,d=c.type;if(d==="date"){if(c.mode==="inline"){if(a.fn.editabletypes.datefield){d="datefield"}else{if(a.fn.editabletypes.dateuifield){d="dateuifield"}}}else{if(a.fn.editabletypes.date){d="date"}else{if(a.fn.editabletypes.dateui){d="dateui"}}}if(d==="date"&&!a.fn.editabletypes.date){d="combodate"}}if(d==="datetime"&&c.mode==="inline"){d="datetimefield"}if(d==="wysihtml5"&&!a.fn.editabletypes[d]){d="textarea"}if(typeof a.fn.editabletypes[d]==="function"){e=a.fn.editabletypes[d];f=this.sliceObj(c,this.objectKeys(e.defaults));b=new e(f);return b}else{a.error("Unknown type: "+d);return false}},supportsTransitions:function(){var c=document.body||document.documentElement,f=c.style,e="transition",g=["Moz","Webkit","Khtml","O","ms"];if(typeof f[e]==="string"){return true}e=e.charAt(0).toUpperCase()+e.substr(1);for(var d=0;d<g.length;d++){if(typeof f[g[d]+e]==="string"){return true}}return false}}}(window.jQuery));(function(a){var c=function(d,e){this.init(d,e)};var b=function(d,e){this.init(d,e)};c.prototype={containerName:null,containerDataName:null,innerCss:null,containerClass:"editable-container editable-popup",defaults:{},init:function(d,e){this.$element=a(d);this.options=a.extend({},a.fn.editableContainer.defaults,e);this.splitOptions();this.formOptions.scope=this.$element[0];this.initContainer();this.delayedHide=false;this.$element.on("destroyed",a.proxy(function(){this.destroy()},this));if(!a(document).data("editable-handlers-attached")){a(document).on("keyup.editable",function(f){if(f.which===27){a(".editable-open").editableContainer("hide")}});a(document).on("click.editable",function(g){var f=a(g.target),j,h=[".editable-container",".ui-datepicker-header",".datepicker",".modal-backdrop",".bootstrap-wysihtml5-insert-image-modal",".bootstrap-wysihtml5-insert-link-modal"];if(!a.contains(document.documentElement,g.target)){return}if(f.is(document)){return}for(j=0;j<h.length;j++){if(f.is(h[j])||f.parents(h[j]).length){return}}c.prototype.closeOthers(g.target)});a(document).data("editable-handlers-attached",true)}},splitOptions:function(){this.containerOptions={};this.formOptions={};if(!a.fn[this.containerName]){throw new Error(this.containerName+" not found. Have you included corresponding js file?")}for(var d in this.options){if(d in this.defaults){this.containerOptions[d]=this.options[d]}else{this.formOptions[d]=this.options[d]}}},tip:function(){return this.container()?this.container().$tip:null},container:function(){var d;if(this.containerDataName){if(d=this.$element.data(this.containerDataName)){return d}}d=this.$element.data(this.containerName);return d},call:function(){this.$element[this.containerName].apply(this.$element,arguments)},initContainer:function(){this.call(this.containerOptions)},renderForm:function(){this.$form.editableform(this.formOptions).on({save:a.proxy(this.save,this),nochange:a.proxy(function(){this.hide("nochange")},this),cancel:a.proxy(function(){this.hide("cancel")},this),show:a.proxy(function(){if(this.delayedHide){this.hide(this.delayedHide.reason);this.delayedHide=false}else{this.setPosition()}},this),rendering:a.proxy(this.setPosition,this),resize:a.proxy(this.setPosition,this),rendered:a.proxy(function(){this.$element.triggerHandler("shown",a(this.options.scope).data("editable"))},this)}).editableform("render")},show:function(d){this.$element.addClass("editable-open");if(d!==false){this.closeOthers(this.$element[0])}this.innerShow();this.tip().addClass(this.containerClass);if(this.$form){}this.$form=a("<div>");if(this.tip().is(this.innerCss)){this.tip().append(this.$form)}else{this.tip().find(this.innerCss).append(this.$form)}this.renderForm()},hide:function(d){if(!this.tip()||!this.tip().is(":visible")||!this.$element.hasClass("editable-open")){return}if(this.$form.data("editableform").isSaving){this.delayedHide={reason:d};return}else{this.delayedHide=false}this.$element.removeClass("editable-open");this.innerHide();this.$element.triggerHandler("hidden",d||"manual")},innerShow:function(){},innerHide:function(){},toggle:function(d){if(this.container()&&this.tip()&&this.tip().is(":visible")){this.hide()}else{this.show(d)}},setPosition:function(){},save:function(d,f){this.$element.triggerHandler("save",f);this.hide("save")},option:function(d,e){this.options[d]=e;if(d in this.containerOptions){this.containerOptions[d]=e;this.setContainerOption(d,e)}else{this.formOptions[d]=e;if(this.$form){this.$form.editableform("option",d,e)}}},setContainerOption:function(d,e){this.call("option",d,e)},destroy:function(){this.hide();this.innerDestroy();this.$element.off("destroyed");this.$element.removeData("editableContainer")},innerDestroy:function(){},closeOthers:function(d){a(".editable-open").each(function(h,g){if(g===d||a(g).find(d).length){return}var e=a(g),f=e.data("editableContainer");if(!f){return}if(f.options.onblur==="cancel"){e.data("editableContainer").hide("onblur")}else{if(f.options.onblur==="submit"){e.data("editableContainer").tip().find("form").submit()}}})},activate:function(){if(this.tip&&this.tip().is(":visible")&&this.$form){this.$form.data("editableform").input.activate()}}};a.fn.editableContainer=function(e){var d=arguments;return this.each(function(){var f=a(this),i="editableContainer",h=f.data(i),j=typeof e==="object"&&e,g=(j.mode==="inline")?b:c;if(!h){f.data(i,(h=new g(this,j)))}if(typeof e==="string"){h[e].apply(h,Array.prototype.slice.call(d,1))}})};a.fn.editableContainer.Popup=c;a.fn.editableContainer.Inline=b;a.fn.editableContainer.defaults={value:null,placement:"top",autohide:true,onblur:"cancel",anim:false,mode:"popup"};jQuery.event.special.destroyed={remove:function(d){if(d.handler){d.handler()}}}}(window.jQuery));(function(a){a.extend(a.fn.editableContainer.Inline.prototype,a.fn.editableContainer.Popup.prototype,{containerName:"editableform",innerCss:".editable-inline",containerClass:"editable-container editable-inline",initContainer:function(){this.$tip=a("<span></span>");if(!this.options.anim){this.options.anim=0}},splitOptions:function(){this.containerOptions={};this.formOptions=this.options},tip:function(){return this.$tip},innerShow:function(){this.$element.hide();this.tip().insertAfter(this.$element).show()},innerHide:function(){this.$tip.hide(this.options.anim,a.proxy(function(){this.$element.show();this.innerDestroy()},this))},innerDestroy:function(){if(this.tip()){this.tip().empty().remove()}}})}(window.jQuery));(function(a){var b=function(c,d){this.$element=a(c);this.options=a.extend({},a.fn.editable.defaults,d,a.fn.editableutils.getConfigData(this.$element));if(this.options.selector){this.initLive()}else{this.init()}if(this.options.highlight&&!a.fn.editableutils.supportsTransitions()){this.options.highlight=false}};b.prototype={constructor:b,init:function(){var e=false,c,d;this.options.name=this.options.name||this.$element.attr("id");this.options.scope=this.$element[0];this.input=a.fn.editableutils.createInput(this.options);if(!this.input){return}if(this.options.value===undefined||this.options.value===null){this.value=this.input.html2value(a.trim(this.$element.html()));e=true}else{this.options.value=a.fn.editableutils.tryParseJson(this.options.value,true);if(typeof this.options.value==="string"){this.value=this.input.str2value(this.options.value)}else{this.value=this.options.value}}this.$element.addClass("editable");if(this.input.type==="textarea"){this.$element.addClass("editable-pre-wrapped")}if(this.options.toggle!=="manual"){this.$element.addClass("editable-click");this.$element.on(this.options.toggle+".editable",a.proxy(function(g){if(!this.options.disabled){g.preventDefault()}if(this.options.toggle==="mouseenter"){this.show()}else{var f=(this.options.toggle!=="click");this.toggle(f)}},this))}else{this.$element.attr("tabindex",-1)}if(typeof this.options.display==="function"){this.options.autotext="always"}switch(this.options.autotext){case"always":c=true;break;case"auto":c=!a.trim(this.$element.text()).length&&this.value!==null&&this.value!==undefined&&!e;break;default:c=false}a.when(c?this.render():true).then(a.proxy(function(){if(this.options.disabled){this.disable()}else{this.enable()}this.$element.triggerHandler("init",this)},this))},initLive:function(){var c=this.options.selector;this.options.selector=false;this.options.autotext="never";this.$element.on(this.options.toggle+".editable",c,a.proxy(function(f){var d=a(f.target);if(!d.data("editable")){if(d.hasClass(this.options.emptyclass)){d.empty()}d.editable(this.options).trigger(f)}},this))},render:function(c){if(this.options.display===false){return}if(this.input.value2htmlFinal){return this.input.value2html(this.value,this.$element[0],this.options.display,c)}else{if(typeof this.options.display==="function"){return this.options.display.call(this.$element[0],this.value,c)}else{return this.input.value2html(this.value,this.$element[0])}}},enable:function(){this.options.disabled=false;this.$element.removeClass("editable-disabled");this.handleEmpty(this.isEmpty);if(this.options.toggle!=="manual"){if(this.$element.attr("tabindex")==="-1"){this.$element.removeAttr("tabindex")}}},disable:function(){this.options.disabled=true;this.hide();this.$element.addClass("editable-disabled");this.handleEmpty(this.isEmpty);this.$element.attr("tabindex",-1)},toggleDisabled:function(){if(this.options.disabled){this.enable()}else{this.disable()}},option:function(c,d){if(c&&typeof c==="object"){a.each(c,a.proxy(function(e,f){this.option(a.trim(e),f)},this));return}this.options[c]=d;if(c==="disabled"){return d?this.disable():this.enable()}if(c==="value"){this.setValue(d)}if(this.container){this.container.option(c,d)}if(this.input.option){this.input.option(c,d)}},handleEmpty:function(c){if(this.options.display===false){return}if(c!==undefined){this.isEmpty=c}else{if(typeof(this.input.isEmpty)==="function"){this.isEmpty=this.input.isEmpty(this.$element)}else{this.isEmpty=a.trim(this.$element.html())===""}}if(!this.options.disabled){if(this.isEmpty){this.$element.html(this.options.emptytext);if(this.options.emptyclass){this.$element.addClass(this.options.emptyclass)}}else{if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}else{if(this.isEmpty){this.$element.empty();if(this.options.emptyclass){this.$element.removeClass(this.options.emptyclass)}}}},show:function(c){if(this.options.disabled){return}if(!this.container){var d=a.extend({},this.options,{value:this.value,input:this.input});this.$element.editableContainer(d);this.$element.on("save.internal",a.proxy(this.save,this));this.container=this.$element.data("editableContainer")}else{if(this.container.tip().is(":visible")){return}}this.container.show(c)},hide:function(){if(this.container){this.container.hide()}},toggle:function(c){if(this.container&&this.container.tip().is(":visible")){this.hide()}else{this.show(c)}},save:function(f,g){if(this.options.unsavedclass){var h=false;h=h||typeof this.options.url==="function";h=h||this.options.display===false;h=h||g.response!==undefined;h=h||(this.options.savenochange&&this.input.value2str(this.value)!==this.input.value2str(g.newValue));if(h){this.$element.removeClass(this.options.unsavedclass)}else{this.$element.addClass(this.options.unsavedclass)}}if(this.options.highlight){var c=this.$element,d=c.css("background-color");c.css("background-color",this.options.highlight);setTimeout(function(){if(d==="transparent"){d=""}c.css("background-color",d);c.addClass("editable-bg-transition");setTimeout(function(){c.removeClass("editable-bg-transition")},1700)},10)}this.setValue(g.newValue,false,g.response)},validate:function(){if(typeof this.options.validate==="function"){return this.options.validate.call(this,this.value)}},setValue:function(e,c,d){if(c){this.value=this.input.str2value(e)}else{this.value=e}if(this.container){this.container.option("value",this.value)}a.when(this.render(d)).then(a.proxy(function(){this.handleEmpty()},this))},activate:function(){if(this.container){this.container.activate()}},destroy:function(){this.disable();if(this.container){this.container.destroy()}this.input.destroy();if(this.options.toggle!=="manual"){this.$element.removeClass("editable-click");this.$element.off(this.options.toggle+".editable")}this.$element.off("save.internal");this.$element.removeClass("editable editable-open editable-disabled");this.$element.removeData("editable")}};a.fn.editable=function(h){var i={},d=arguments,f="editable";switch(h){case"validate":this.each(function(){var k=a(this),l=k.data(f),m;if(l&&(m=l.validate())){i[l.options.name]=m}});return i;case"getValue":if(arguments.length===2&&arguments[1]===true){i=this.eq(0).data(f).value}else{this.each(function(){var k=a(this),l=k.data(f);if(l&&l.value!==undefined&&l.value!==null){i[l.options.name]=l.input.value2submit(l.value)}})}return i;case"submit":var e=arguments[1]||{},c=this,g=this.editable("validate"),j;if(a.isEmptyObject(g)){j=this.editable("getValue");if(e.data){a.extend(j,e.data)}a.ajax(a.extend({url:e.url,data:j,type:"POST"},e.ajaxOptions)).success(function(k){if(typeof e.success==="function"){e.success.call(c,k,e)}}).error(function(){if(typeof e.error==="function"){e.error.apply(c,arguments)}})}else{if(typeof e.error==="function"){e.error.call(c,g)}}return this}return this.each(function(){var k=a(this),l=k.data(f),m=typeof h==="object"&&h;if(m&&m.selector){l=new b(this,m);return}if(!l){k.data(f,(l=new b(this,m)))}if(typeof h==="string"){l[h].apply(l,Array.prototype.slice.call(d,1))}})};a.fn.editable.defaults={type:"text",disabled:false,toggle:"click",emptytext:"Empty",autotext:"auto",value:null,display:null,emptyclass:"editable-empty",unsavedclass:"editable-unsaved",selector:null,highlight:"#FFFF80"}}(window.jQuery));(function(a){a.fn.editabletypes={};var b=function(){};b.prototype={init:function(e,d,c){this.type=e;this.options=a.extend({},c,d)},prerender:function(){this.$tpl=a(this.options.tpl);this.$input=this.$tpl;this.$clear=null;this.error=null},render:function(){},value2html:function(d,c){a(c)[this.options.escape?"text":"html"](a.trim(d))},html2value:function(c){return a("<div>").html(c).text()},value2str:function(c){return c},str2value:function(c){return c},value2submit:function(c){return c},value2input:function(c){this.$input.val(c)},input2value:function(){return this.$input.val()},activate:function(){if(this.$input.is(":visible")){this.$input.focus()}},clear:function(){this.$input.val(null)},escape:function(c){return a("<div>").text(c).html()},autosubmit:function(){},destroy:function(){},setClass:function(){if(this.options.inputclass){this.$input.addClass(this.options.inputclass)}},setAttr:function(c){if(this.options[c]!==undefined&&this.options[c]!==null){this.$input.attr(c,this.options[c])}},option:function(c,d){this.options[c]=d}};b.defaults={tpl:"",inputclass:null,escape:true,scope:null,showbuttons:true};a.extend(a.fn.editabletypes,{abstractinput:b})}(window.jQuery));(function(a){var b=function(c){};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){var c=a.Deferred();this.error=null;this.onSourceReady(function(){this.renderList();c.resolve()},function(){this.error=this.options.sourceError;c.resolve()});return c.promise()},html2value:function(c){return null},value2html:function(h,e,d,f){var c=a.Deferred(),g=function(){if(typeof d==="function"){d.call(e,h,this.sourceData,f)}else{this.value2htmlFinal(h,e)}c.resolve()};if(h===null){g.call(this)}else{this.onSourceReady(g,function(){c.resolve()})}return c.promise()},onSourceReady:function(j,h){var i;if(a.isFunction(this.options.source)){i=this.options.source.call(this.options.scope);this.sourceData=null}else{i=this.options.source}if(this.options.sourceCache&&a.isArray(this.sourceData)){j.call(this);return}try{i=a.fn.editableutils.tryParseJson(i,false)}catch(g){h.call(this);return}if(typeof i==="string"){if(this.options.sourceCache){var f=i,d;if(!a(document).data(f)){a(document).data(f,{})}d=a(document).data(f);if(d.loading===false&&d.sourceData){this.sourceData=d.sourceData;this.doPrepend();j.call(this);return}else{if(d.loading===true){d.callbacks.push(a.proxy(function(){this.sourceData=d.sourceData;this.doPrepend();j.call(this)},this));d.err_callbacks.push(a.proxy(h,this));return}else{d.loading=true;d.callbacks=[];d.err_callbacks=[]}}}var c=a.extend({url:i,type:"get",cache:false,dataType:"json",success:a.proxy(function(e){if(d){d.loading=false}this.sourceData=this.makeArray(e);if(a.isArray(this.sourceData)){if(d){d.sourceData=this.sourceData;a.each(d.callbacks,function(){this.call()})}this.doPrepend();j.call(this)}else{h.call(this);if(d){a.each(d.err_callbacks,function(){this.call()})}}},this),error:a.proxy(function(){h.call(this);if(d){d.loading=false;a.each(d.err_callbacks,function(){this.call()})}},this)},this.options.sourceOptions);a.ajax(c)}else{this.sourceData=this.makeArray(i);if(a.isArray(this.sourceData)){this.doPrepend();j.call(this)}else{h.call(this)}}},doPrepend:function(){if(this.options.prepend===null||this.options.prepend===undefined){return}if(!a.isArray(this.prependData)){if(a.isFunction(this.options.prepend)){this.options.prepend=this.options.prepend.call(this.options.scope)}this.options.prepend=a.fn.editableutils.tryParseJson(this.options.prepend,true);if(typeof this.options.prepend==="string"){this.options.prepend={"":this.options.prepend}}this.prependData=this.makeArray(this.options.prepend)}if(a.isArray(this.prependData)&&a.isArray(this.sourceData)){this.sourceData=this.prependData.concat(this.sourceData)}},renderList:function(){},value2htmlFinal:function(d,c){},makeArray:function(d){var c,h,j=[],f,g;if(!d||typeof d==="string"){return null}if(a.isArray(d)){g=function(i,l){h={value:i,text:l};if(c++>=2){return false}};for(var e=0;e<d.length;e++){f=d[e];if(typeof f==="object"){c=0;a.each(f,g);if(c===1){j.push(h)}else{if(c>1){if(f.children){f.children=this.makeArray(f.children)}j.push(f)}}}else{j.push({value:f,text:f})}}}else{a.each(d,function(i,l){j.push({value:i,text:l})})}return j},option:function(c,d){this.options[c]=d;if(c==="source"){this.sourceData=null}if(c==="prepend"){this.prependData=null}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{source:null,prepend:false,sourceError:"Error when loading list",sourceCache:true,sourceOptions:null});a.fn.editabletypes.list=b}(window.jQuery));(function(a){var b=function(c){this.init("text",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.renderClear();this.setClass();this.setAttr("placeholder")},activate:function(){if(this.$input.is(":visible")){this.$input.focus();a.fn.editableutils.setCursorPosition(this.$input.get(0),this.$input.val().length);if(this.toggleClear){this.toggleClear()}}},renderClear:function(){if(this.options.clear){this.$clear=a('<span class="editable-clear-x"></span>');this.$input.after(this.$clear).css("padding-right",24).keyup(a.proxy(function(c){if(~a.inArray(c.keyCode,[40,38,9,13,27])){return}clearTimeout(this.t);var d=this;this.t=setTimeout(function(){d.toggleClear(c)},100)},this)).parent().css("position","relative");this.$clear.click(a.proxy(this.clear,this))}},postrender:function(){},toggleClear:function(c){if(!this.$clear){return}var d=this.$input.val().length,f=this.$clear.is(":visible");if(d&&!f){this.$clear.show()}if(!d&&f){this.$clear.hide()}},clear:function(){this.$clear.hide();this.$input.val("").focus()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',placeholder:null,clear:true});a.fn.editabletypes.text=b}(window.jQuery));(function(a){var b=function(c){this.init("textarea",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();this.setAttr("placeholder");this.setAttr("rows");this.$input.keydown(function(c){if(c.ctrlKey&&c.which===13){a(this).closest("form").submit()}})},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:"<textarea></textarea>",inputclass:"input-large",placeholder:null,rows:7});a.fn.editabletypes.textarea=b}(window.jQuery));(function(a){var b=function(c){this.init("select",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){this.$input.empty();var c=function(d,f){var e;if(a.isArray(f)){for(var g=0;g<f.length;g++){e={};if(f[g].children){e.label=f[g].text;d.append(c(a("<optgroup>",e),f[g].children))}else{e.value=f[g].value;if(f[g].disabled){e.disabled=true}d.append(a("<option>",e).text(f[g].text))}}}return d};c(this.$input,this.sourceData);this.setClass();this.$input.on("keydown.editable",function(d){if(d.which===13){a(this).closest("form").submit()}})},value2htmlFinal:function(f,c){var e="",d=a.fn.editableutils.itemsByValue(f,this.sourceData);if(d.length){e=d[0].text}a.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,c)},autosubmit:function(){this.$input.off("keydown.editable").on("change.editable",function(){a(this).closest("form").submit()})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:"<select></select>"});a.fn.editabletypes.select=b}(window.jQuery));(function(a){var b=function(c){this.init("checklist",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){var d,c;this.$tpl.empty();if(!a.isArray(this.sourceData)){return}for(var e=0;e<this.sourceData.length;e++){d=a("<label>").append(a("<input>",{type:"checkbox",value:this.sourceData[e].value})).append(a("<span>").text(" "+this.sourceData[e].text));a("<div>").append(d).appendTo(this.$tpl)}this.$input=this.$tpl.find('input[type="checkbox"]');this.setClass()},value2str:function(c){return a.isArray(c)?c.sort().join(a.trim(this.options.separator)):""},str2value:function(d){var c,e=null;if(typeof d==="string"&&d.length){c=new RegExp("\\s*"+a.trim(this.options.separator)+"\\s*");e=d.split(c)}else{if(a.isArray(d)){e=d}else{e=[d]}}return e},value2input:function(c){this.$input.prop("checked",false);if(a.isArray(c)&&c.length){this.$input.each(function(f,e){var d=a(e);a.each(c,function(g,h){if(d.val()==h){d.prop("checked",true)}})})}},input2value:function(){var c=[];this.$input.filter(":checked").each(function(e,d){c.push(a(d).val())});return c},value2htmlFinal:function(g,d){var f=[],c=a.fn.editableutils.itemsByValue(g,this.sourceData),e=this.options.escape;if(c.length){a.each(c,function(h,k){var j=e?a.fn.editableutils.escape(k.text):k.text;f.push(j)});a(d).html(f.join("<br>"))}else{a(d).empty()}},activate:function(){this.$input.first().focus()},autosubmit:function(){this.$input.on("keydown",function(c){if(c.which===13){a(this).closest("form").submit()}})}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<div class="editable-checklist"></div>',inputclass:null,separator:","});a.fn.editabletypes.checklist=b}(window.jQuery));(function(a){var b=function(c){this.init("password",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{value2html:function(d,c){if(d){a(c).text("[hidden]")}else{a(c).empty()}},html2value:function(c){return null}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="password">'});a.fn.editabletypes.password=b}(window.jQuery));(function(a){var b=function(c){this.init("email",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="email">'});a.fn.editabletypes.email=b}(window.jQuery));(function(a){var b=function(c){this.init("url",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="url">'});a.fn.editabletypes.url=b}(window.jQuery));(function(a){var b=function(c){this.init("tel",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="tel">'});a.fn.editabletypes.tel=b}(window.jQuery));(function(a){var b=function(c){this.init("number",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.text);a.extend(b.prototype,{render:function(){b.superclass.render.call(this);this.setAttr("min");this.setAttr("max");this.setAttr("step")},postrender:function(){if(this.$clear){this.$clear.css({right:24})}}});b.defaults=a.extend({},a.fn.editabletypes.text.defaults,{tpl:'<input type="number">',inputclass:"input-mini",min:null,max:null,step:null});a.fn.editabletypes.number=b}(window.jQuery));(function(a){var b=function(c){this.init("range",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.number);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.filter("input");this.setClass();this.setAttr("min");this.setAttr("max");this.setAttr("step");this.$input.on("input",function(){a(this).siblings("output").text(a(this).val())})},activate:function(){this.$input.focus()}});b.defaults=a.extend({},a.fn.editabletypes.number.defaults,{tpl:'<input type="range"><output style="width: 30px; display: inline-block"></output>',inputclass:"input-medium"});a.fn.editabletypes.range=b}(window.jQuery));(function(a){var b=function(c){this.init("time",c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass()}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="time">'});a.fn.editabletypes.time=b}(window.jQuery));(function(a){var b=function(d){this.init("select2",d,b.defaults);d.select2=d.select2||{};this.sourceData=null;if(d.placeholder){d.select2.placeholder=d.placeholder}if(!d.select2.tags&&d.source){var e=d.source;if(a.isFunction(d.source)){e=d.source.call(d.scope)}if(typeof e==="string"){d.select2.ajax=d.select2.ajax||{};if(!d.select2.ajax.data){d.select2.ajax.data=function(f){return{query:f}}}if(!d.select2.ajax.results){d.select2.ajax.results=function(f){return{results:f}}}d.select2.ajax.url=e}else{this.sourceData=this.convertSource(e);d.select2.data=this.sourceData}}this.options.select2=a.extend({},b.defaults.select2,d.select2);this.isMultiple=this.options.select2.tags||this.options.select2.multiple;this.isRemote=("ajax" in this.options.select2);this.idFunc=this.options.select2.id;if(typeof(this.idFunc)!=="function"){var c=this.idFunc||"id";this.idFunc=function(f){return f[c]}}this.formatSelection=this.options.select2.formatSelection;if(typeof(this.formatSelection)!=="function"){this.formatSelection=function(f){return f.text}}};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.setClass();if(this.isRemote){this.$input.on("select2-loaded",a.proxy(function(c){this.sourceData=c.items.results},this))}if(this.isMultiple){this.$input.on("change",function(){a(this).closest("form").parent().triggerHandler("resize")})}},value2html:function(g,d){var e="",c,f=this;if(this.options.select2.tags){c=g}else{if(this.sourceData){c=a.fn.editableutils.itemsByValue(g,this.sourceData,this.idFunc)}else{}}if(a.isArray(c)){e=[];a.each(c,function(h,i){e.push(i&&typeof i==="object"?f.formatSelection(i):i)})}else{if(c){e=f.formatSelection(c)}}e=a.isArray(e)?e.join(this.options.viewseparator):e;b.superclass.value2html.call(this,e,d)},html2value:function(c){return this.options.select2.tags?this.str2value(c,this.options.viewseparator):null},value2input:function(f){if(!this.$input.data("select2")){this.$input.val(f);this.$input.select2(this.options.select2)}else{this.$input.val(f).trigger("change",true)}if(this.isRemote&&!this.isMultiple&&!this.options.select2.initSelection){var c=this.options.select2.id,d=this.options.select2.formatSelection;if(!c&&!d){var e={id:f,text:a(this.options.scope).text()};this.$input.select2("data",e)}}},input2value:function(){return this.$input.select2("val")},str2value:function(f,e){if(typeof f!=="string"||!this.isMultiple){return f}e=e||this.options.select2.separator||a.fn.select2.defaults.separator;var g,c,d;if(f===null||f.length<1){return null}g=f.split(e);for(c=0,d=g.length;c<d;c=c+1){g[c]=a.trim(g[c])}return g},autosubmit:function(){this.$input.on("change",function(c,d){if(!d){a(this).closest("form").submit()}})},convertSource:function(d){if(a.isArray(d)&&d.length&&d[0].value!==undefined){for(var c=0;c<d.length;c++){if(d[c].value!==undefined){d[c].id=d[c].value;delete d[c].value}}}return d},destroy:function(){if(this.$input.data("select2")){this.$input.select2("destroy")}}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="hidden">',select2:null,placeholder:null,source:null,viewseparator:", "});a.fn.editabletypes.select2=b}(window.jQuery));(function(a){var b=function(c,d){this.$element=a(c);if(!this.$element.is("input")){a.error("Combodate should be applied to INPUT element");return}this.options=a.extend({},a.fn.combodate.defaults,d,this.$element.data());this.init()};b.prototype={constructor:b,init:function(){this.map={day:["D","date"],month:["M","month"],year:["Y","year"],hour:["[Hh]","hours"],minute:["m","minutes"],second:["s","seconds"],ampm:["[Aa]",""]};this.$widget=a('<span class="combodate"></span>').html(this.getTemplate());this.initCombos();this.$widget.on("change","select",a.proxy(function(){this.$element.val(this.getValue())},this));this.$widget.find("select").css("width","auto");this.$element.hide().after(this.$widget);this.setValue(this.$element.val()||this.options.value)},getTemplate:function(){var c=this.options.template;a.each(this.map,function(d,g){g=g[0];var e=new RegExp(g+"+"),f=g.length>1?g.substring(1,2):g;c=c.replace(e,"{"+f+"}")});c=c.replace(/ /g,"&nbsp;");a.each(this.map,function(d,f){f=f[0];var e=f.length>1?f.substring(1,2):f;c=c.replace("{"+e+"}",'<select class="'+d+'"></select>')});return c},initCombos:function(){var c=this;a.each(this.map,function(h,i){var d=c.$widget.find("."+h),e,g;if(d.length){c["$"+h]=d;e="fill"+h.charAt(0).toUpperCase()+h.slice(1);g=c[e]();c["$"+h].html(c.renderItems(g))}})},initItems:function(d){var f=[],e;if(this.options.firstItem==="name"){e=moment.relativeTime||moment.langData()._relativeTime;var c=typeof e[d]==="function"?e[d](1,true,d,false):e[d];c=c.split(" ").reverse()[0];f.push(["",c])}else{if(this.options.firstItem==="empty"){f.push(["",""])}}return f},renderItems:function(d){var e=[];for(var c=0;c<d.length;c++){e.push('<option value="'+d[c][0]+'">'+d[c][1]+"</option>")}return e.join("\n")},fillDay:function(){var d=this.initItems("d"),e,c,f=this.options.template.indexOf("DD")!==-1;for(c=1;c<=31;c++){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillMonth:function(){var d=this.initItems("M"),f,c,e=this.options.template.indexOf("MMMM")!==-1,g=this.options.template.indexOf("MMM")!==-1,h=this.options.template.indexOf("MM")!==-1;for(c=0;c<=11;c++){if(e){f=moment().date(1).month(c).format("MMMM")}else{if(g){f=moment().date(1).month(c).format("MMM")}else{if(h){f=this.leadZero(c+1)}else{f=c+1}}}d.push([c,f])}return d},fillYear:function(){var d=[],f,c,e=this.options.template.indexOf("YYYY")!==-1;for(c=this.options.maxYear;c>=this.options.minYear;c--){f=e?c:(c+"").substring(2);d[this.options.yearDescending?"push":"unshift"]([c,f])}d=this.initItems("y").concat(d);return d},fillHour:function(){var f=this.initItems("h"),j,e,c=this.options.template.indexOf("h")!==-1,d=this.options.template.indexOf("H")!==-1,k=this.options.template.toLowerCase().indexOf("hh")!==-1,h=c?1:0,g=c?12:23;for(e=h;e<=g;e++){j=k?this.leadZero(e):e;f.push([e,j])}return f},fillMinute:function(){var d=this.initItems("m"),e,c,f=this.options.template.indexOf("mm")!==-1;for(c=0;c<=59;c+=this.options.minuteStep){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillSecond:function(){var d=this.initItems("s"),e,c,f=this.options.template.indexOf("ss")!==-1;for(c=0;c<=59;c+=this.options.secondStep){e=f?this.leadZero(c):c;d.push([c,e])}return d},fillAmpm:function(){var c=this.options.template.indexOf("a")!==-1,d=this.options.template.indexOf("A")!==-1,e=[["am",c?"am":"AM"],["pm",c?"pm":"PM"]];return e},getValue:function(d){var c,g={},f=this,e=false;a.each(this.map,function(i,j){if(i==="ampm"){return}var h=i==="day"?1:0;g[i]=f["$"+i]?parseInt(f["$"+i].val(),10):h;if(isNaN(g[i])){e=true;return false}});if(e){return""}if(this.$ampm){if(g.hour===12){g.hour=this.$ampm.val()==="am"?0:12}else{g.hour=this.$ampm.val()==="am"?g.hour:g.hour+12}}c=moment([g.year,g.month,g.day,g.hour,g.minute,g.second]);this.highlight(c);d=d===undefined?this.options.format:d;if(d===null){return c.isValid()?c:null}else{return c.isValid()?c.format(d):""}},setValue:function(f){if(!f){return}var c=typeof f==="string"?moment(f,this.options.format):moment(f),e=this,g={};function d(h,j){var i={};h.children("option").each(function(l,m){var n=a(m).attr("value"),k;if(n===""){return}k=Math.abs(n-j);if(typeof i.distance==="undefined"||k<i.distance){i={value:n,distance:k}}});return i.value}if(c.isValid()){a.each(this.map,function(h,i){if(h==="ampm"){return}g[h]=c[i[1]]()});if(this.$ampm){if(g.hour>=12){g.ampm="pm";if(g.hour>12){g.hour-=12}}else{g.ampm="am";if(g.hour===0){g.hour=12}}}a.each(g,function(h,i){if(e["$"+h]){if(h==="minute"&&e.options.minuteStep>1&&e.options.roundTime){i=d(e["$"+h],i)}if(h==="second"&&e.options.secondStep>1&&e.options.roundTime){i=d(e["$"+h],i)}e["$"+h].val(i)}});this.$element.val(c.format(this.options.format))}},highlight:function(c){if(!c.isValid()){if(this.options.errorClass){this.$widget.addClass(this.options.errorClass)}else{if(!this.borderColor){this.borderColor=this.$widget.find("select").css("border-color")}this.$widget.find("select").css("border-color","red")}}else{if(this.options.errorClass){this.$widget.removeClass(this.options.errorClass)}else{this.$widget.find("select").css("border-color",this.borderColor)}}},leadZero:function(c){return c<=9?"0"+c:c},destroy:function(){this.$widget.remove();this.$element.removeData("combodate").show()}};a.fn.combodate=function(f){var e,c=Array.apply(null,arguments);c.shift();if(f==="getValue"&&this.length&&(e=this.eq(0).data("combodate"))){return e.getValue.apply(e,c)}return this.each(function(){var d=a(this),g=d.data("combodate"),h=typeof f=="object"&&f;if(!g){d.data("combodate",(g=new b(this,h)))}if(typeof f=="string"&&typeof g[f]=="function"){g[f].apply(g,c)}})};a.fn.combodate.defaults={format:"DD-MM-YYYY HH:mm",template:"D / MMM / YYYY   H : mm",value:null,minYear:1970,maxYear:2015,yearDescending:true,minuteStep:5,secondStep:1,firstItem:"empty",errorClass:null,roundTime:true}}(window.jQuery));(function(a){var b=function(c){this.init("combodate",c,b.defaults);if(!this.options.viewformat){this.options.viewformat=this.options.format}c.combodate=a.fn.editableutils.tryParseJson(c.combodate,true);this.options.combodate=a.extend({},b.defaults.combodate,c.combodate,{format:this.options.format,template:this.options.template})};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{render:function(){this.$input.combodate(this.options.combodate);if(a.fn.editableform.engine==="bs3"){this.$input.siblings().find("select").addClass("form-control")}if(this.options.inputclass){this.$input.siblings().find("select").addClass(this.options.inputclass)}},value2html:function(e,c){var d=e?e.format(this.options.viewformat):"";b.superclass.value2html.call(this,d,c)},html2value:function(c){return c?moment(c,this.options.viewformat):null},value2str:function(c){return c?c.format(this.options.format):""},str2value:function(c){return c?moment(c,this.options.format):null},value2submit:function(c){return this.value2str(c)},value2input:function(c){this.$input.combodate("setValue",c)},input2value:function(){return this.$input.combodate("getValue",null)},activate:function(){this.$input.siblings(".combodate").find("select").eq(0).focus()},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<input type="text">',inputclass:null,format:"YYYY-MM-DD",viewformat:null,template:"D / MMM / YYYY",combodate:null});a.fn.editabletypes.combodate=b}(window.jQuery));(function(a){var b=a.fn.editableform.Constructor.prototype.initInput;a.extend(a.fn.editableform.Constructor.prototype,{initTemplate:function(){this.$form=a(a.fn.editableform.template);this.$form.find(".editable-error-block").addClass("help-block")},initInput:function(){b.apply(this);var d=this.input.options.inputclass===null||this.input.options.inputclass===false;var c="input-medium";var e="text,select,textarea,password,email,url,tel,number,range,time".split(",");if(~a.inArray(this.input.type,e)&&d){this.input.options.inputclass=c;this.input.$input.addClass(c)}}});a.fn.editableform.buttons='<button type="submit" class="btn btn-primary editable-submit"><i class="icon-ok icon-white"></i></button><button type="button" class="btn editable-cancel"><i class="icon-remove"></i></button>';a.fn.editableform.errorGroupClass="error";a.fn.editableform.errorBlockClass=null;a.fn.editableform.engine="bs2"}(window.jQuery));(function(a){a.extend(a.fn.editableContainer.Popup.prototype,{containerName:"popover",innerCss:a.fn.popover&&a(a.fn.popover.defaults.template).find("p").length?".popover-content p":".popover-content",defaults:a.fn.popover.defaults,initContainer:function(){a.extend(this.containerOptions,{trigger:"manual",selector:false,content:" ",template:this.defaults.template});var b;if(this.$element.data("template")){b=this.$element.data("template");this.$element.removeData("template")}this.call(this.containerOptions);if(b){this.$element.data("template",b)}},innerShow:function(){this.call("show")},innerHide:function(){this.call("hide")},innerDestroy:function(){this.call("destroy")},setContainerOption:function(b,c){this.container().options[b]=c},setPosition:function(){(function(){var b=this.tip(),e,g,d,c,f,h,l,i,j,k;f=typeof this.options.placement==="function"?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement;e=/in/.test(f);b.removeClass("top right bottom left").css({top:0,left:0,display:"block"});g=this.getPosition(e);d=b[0].offsetWidth;c=b[0].offsetHeight;f=e?f.split(" ")[1]:f;i={top:g.top+g.height,left:g.left+g.width/2-d/2};l={top:g.top-c,left:g.left+g.width/2-d/2};j={top:g.top+g.height/2-c/2,left:g.left-d};k={top:g.top+g.height/2-c/2,left:g.left+g.width};switch(f){case"bottom":if((i.top+c)>(a(window).scrollTop()+a(window).height())){if(l.top>a(window).scrollTop()){f="top"}else{if((k.left+d)<(a(window).scrollLeft()+a(window).width())){f="right"}else{if(j.left>a(window).scrollLeft()){f="left"}else{f="right"}}}}break;case"top":if(l.top<a(window).scrollTop()){if((i.top+c)<(a(window).scrollTop()+a(window).height())){f="bottom"}else{if((k.left+d)<(a(window).scrollLeft()+a(window).width())){f="right"}else{if(j.left>a(window).scrollLeft()){f="left"}else{f="right"}}}}break;case"left":if(j.left<a(window).scrollLeft()){if((k.left+d)<(a(window).scrollLeft()+a(window).width())){f="right"}else{if(l.top>a(window).scrollTop()){f="top"}else{if(l.top>a(window).scrollTop()){f="bottom"}else{f="right"}}}}break;case"right":if((k.left+d)>(a(window).scrollLeft()+a(window).width())){if(j.left>a(window).scrollLeft()){f="left"}else{if(l.top>a(window).scrollTop()){f="top"}else{if(l.top>a(window).scrollTop()){f="bottom"}}}}break}switch(f){case"bottom":h=i;break;case"top":h=l;break;case"left":h=j;break;case"right":h=k;break}b.offset(h).addClass(f).addClass("in")}).call(this.container())}})}(window.jQuery));(function(a){function l(){return new Date(Date.UTC.apply(Date,arguments))}function m(){var n=new Date();return l(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate())}var c=function(n,o){var p=this;this._process_options(o);this.element=a(n);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=a(g.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl");this.picker.find(".prev i, .next i").toggleClass("icon-arrow-left icon-arrow-right")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(q,r){return parseInt(r)+1})}this._allow_update=false;this.setStartDate(this.o.startDate);this.setEndDate(this.o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};c.prototype={constructor:c,_process_options:function(r){this._o=a.extend({},this._o,r);var q=this.o=a.extend({},this._o);var p=q.language;if(!e[p]){p=p.split("-")[0];if(!e[p]){p=f.language}}q.language=p;switch(q.startView){case 2:case"decade":q.startView=2;break;case 1:case"year":q.startView=1;break;default:q.startView=0}switch(q.minViewMode){case 1:case"months":q.minViewMode=1;break;case 2:case"years":q.minViewMode=2;break;default:q.minViewMode=0}q.startView=Math.max(q.startView,q.minViewMode);q.weekStart%=7;q.weekEnd=((q.weekStart+6)%7);var n=g.parseFormat(q.format);if(q.startDate!==-Infinity){q.startDate=g.parseDate(q.startDate,n,q.language)}if(q.endDate!==Infinity){q.endDate=g.parseDate(q.endDate,n,q.language)}q.daysOfWeekDisabled=q.daysOfWeekDisabled||[];if(!a.isArray(q.daysOfWeekDisabled)){q.daysOfWeekDisabled=q.daysOfWeekDisabled.split(/[,\s]*/)}q.daysOfWeekDisabled=a.map(q.daysOfWeekDisabled,function(o){return parseInt(o,10)})},_events:[],_secondaryEvents:[],_applyEvents:function(p){for(var q=0,n,o;q<p.length;q++){n=p[q][0];o=p[q][1];n.on(o)}},_unapplyEvents:function(p){for(var q=0,n,o;q<p.length;q++){n=p[q][0];o=p[q][1];n.off(o)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:a.proxy(this.show,this)}]]}}}this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{mousedown:a.proxy(function(n){if(!(this.element.is(n.target)||this.element.find(n.target).size()||this.picker.is(n.target)||this.picker.find(n.target).size())){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(p,n){var o=n||this.date,q=new Date(o.getTime()+(o.getTimezoneOffset()*60000));this.element.trigger({type:p,date:q,format:a.proxy(function(r){var s=r||this.o.format;return g.formatDate(o,s,this.o.language)},this)})},show:function(n){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.height=this.component?this.component.outerHeight():this.element.outerHeight();this.place();this._attachSecondaryEvents();if(n){n.preventDefault()}this._trigger("show")},hide:function(n){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},getDate:function(){var n=this.getUTCDate();return new Date(n.getTime()+(n.getTimezoneOffset()*60000))},getUTCDate:function(){return this.date},setDate:function(n){this.setUTCDate(new Date(n.getTime()-(n.getTimezoneOffset()*60000)))},setUTCDate:function(n){this.date=n;this.setValue()},setValue:function(){var n=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(n)}}else{this.element.val(n)}},getFormattedDate:function(n){if(n===undefined){n=this.o.format}return g.formatDate(this.date,n,this.o.language)},setStartDate:function(n){this._process_options({startDate:n});this.update();this.updateNavArrows()},setEndDate:function(n){this._process_options({endDate:n});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(n){this._process_options({daysOfWeekDisabled:n});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var p=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!="auto"}).first().css("z-index"))+10;var o=this.component?this.component.parent().offset():this.element.offset();var n=this.component?this.component.outerHeight(true):this.element.outerHeight(true);this.picker.css({top:o.top+n,left:o.left,zIndex:p})},_allow_update:true,update:function(){if(!this._allow_update){return}var n,o=false;if(arguments&&arguments.length&&(typeof arguments[0]==="string"||arguments[0] instanceof Date)){n=arguments[0];o=true}else{n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();delete this.element.data().date}this.date=g.parseDate(n,this.o.format,this.o.language);if(o){this.setValue()}if(this.date<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.date>this.o.endDate){this.viewDate=new Date(this.o.endDate)}else{this.viewDate=new Date(this.date)}}this.fill()},fillDow:function(){var o=this.o.weekStart,p="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';p+=n;this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}while(o<this.o.weekStart+7){p+='<th class="dow">'+e[this.o.language].daysMin[(o++)%7]+"</th>"}p+="</tr>";this.picker.find(".datepicker-days thead").append(p)},fillMonths:function(){var n="",o=0;while(o<12){n+='<span class="month">'+e[this.o.language].monthsShort[o++]+"</span>"}this.picker.find(".datepicker-months td").html(n)},setRange:function(n){if(!n||!n.length){delete this.range}else{this.range=a.map(n,function(o){return o.valueOf()})}this.fill()},getClassNames:function(p){var n=[],s=this.viewDate.getUTCFullYear(),q=this.viewDate.getUTCMonth(),o=this.date.valueOf(),r=new Date();if(p.getUTCFullYear()<s||(p.getUTCFullYear()==s&&p.getUTCMonth()<q)){n.push("old")}else{if(p.getUTCFullYear()>s||(p.getUTCFullYear()==s&&p.getUTCMonth()>q)){n.push("new")}}if(this.o.todayHighlight&&p.getUTCFullYear()==r.getFullYear()&&p.getUTCMonth()==r.getMonth()&&p.getUTCDate()==r.getDate()){n.push("today")}if(o&&p.valueOf()==o){n.push("active")}if(p.valueOf()<this.o.startDate||p.valueOf()>this.o.endDate||a.inArray(p.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){n.push("disabled")}if(this.range){if(p>this.range[0]&&p<this.range[this.range.length-1]){n.push("range")}if(a.inArray(p.valueOf(),this.range)!=-1){n.push("selected")}}return n},fill:function(){var s=new Date(this.viewDate),H=s.getUTCFullYear(),y=s.getUTCMonth(),D=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,C=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,v=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,q=this.date&&this.date.valueOf(),F;this.picker.find(".datepicker-days thead th.datepicker-switch").text(e[this.o.language].months[y]+" "+H);this.picker.find("tfoot th.today").text(e[this.o.language].today).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(e[this.o.language].clear).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var B=l(H,y-1,28,0,0,0,0),t=g.getDaysInMonth(B.getUTCFullYear(),B.getUTCMonth());B.setUTCDate(t);B.setUTCDate(t-(B.getUTCDay()-this.o.weekStart+7)%7);var A=new Date(B);A.setUTCDate(A.getUTCDate()+42);A=A.valueOf();var w=[];var p;while(B.valueOf()<A){if(B.getUTCDay()==this.o.weekStart){w.push("<tr>");if(this.o.calendarWeeks){var G=new Date(+B+(this.o.weekStart-B.getUTCDay()-7)%7*86400000),E=new Date(+G+(7+4-G.getUTCDay())%7*86400000),J=new Date(+(J=l(E.getUTCFullYear(),0,1))+(7+4-J.getUTCDay())%7*86400000),o=(E-J)/86400000/7+1;w.push('<td class="cw">'+o+"</td>")}}p=this.getClassNames(B);p.push("day");var n=this.o.beforeShowDay(B);if(n===undefined){n={}}else{if(typeof(n)==="boolean"){n={enabled:n}}else{if(typeof(n)==="string"){n={classes:n}}}}if(n.enabled===false){p.push("disabled")}if(n.classes){p=p.concat(n.classes.split(/\s+/))}if(n.tooltip){F=n.tooltip}p=a.unique(p);w.push('<td class="'+p.join(" ")+'"'+(F?' title="'+F+'"':"")+">"+B.getUTCDate()+"</td>");if(B.getUTCDay()==this.o.weekEnd){w.push("</tr>")}B.setUTCDate(B.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var r=this.date&&this.date.getUTCFullYear();var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(H).end().find("span").removeClass("active");if(r&&r==H){z.eq(this.date.getUTCMonth()).addClass("active")}if(H<D||H>v){z.addClass("disabled")}if(H==D){z.slice(0,C).addClass("disabled")}if(H==v){z.slice(u+1).addClass("disabled")}w="";H=parseInt(H/10,10)*10;var I=this.picker.find(".datepicker-years").find("th:eq(1)").text(H+"-"+(H+9)).end().find("td");H-=1;for(var x=-1;x<11;x++){w+='<span class="year'+(x==-1?" old":x==10?" new":"")+(r==H?" active":"")+(H<D||H>v?" disabled":"")+'">'+H+"</span>";H+=1}I.html(w)},updateNavArrows:function(){if(!this._allow_update){return}var n=new Date(this.viewDate),p=n.getUTCFullYear(),o=n.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&p<=this.o.startDate.getUTCFullYear()&&o<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&p>=this.o.endDate.getUTCFullYear()&&o>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&p<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&p>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(q){q.preventDefault();var t=a(q.target).closest("span, td, th");if(t.length==1){switch(t[0].nodeName.toLowerCase()){case"th":switch(t[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var p=g.modes[this.viewMode].navStep*(t[0].className=="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,p);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,p);break}this.fill();break;case"today":var n=new Date();n=l(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0);this.showMode(-2);var u=this.o.todayBtn=="linked"?null:"view";this._setDate(n,u);break;case"clear":var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.val("").change()}this._trigger("changeDate");this.update();if(this.o.autoclose){this.hide()}break}break;case"span":if(!t.is(".disabled")){this.viewDate.setUTCDate(1);if(t.is(".month")){var o=1;var s=t.parent().find("span").index(t);var v=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(s);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(l(v,s,o,0,0,0,0))}}else{var v=parseInt(t.text(),10)||0;var o=1;var s=0;this.viewDate.setUTCFullYear(v);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(l(v,s,o,0,0,0,0))}}this.showMode(-1);this.fill()}break;case"td":if(t.is(".day")&&!t.is(".disabled")){var o=parseInt(t.text(),10)||1;var v=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth();if(t.is(".old")){if(s===0){s=11;v-=1}else{s-=1}}else{if(t.is(".new")){if(s==11){s=0;v+=1}else{s+=1}}}this._setDate(l(v,s,o,0,0,0,0))}break}}},_setDate:function(n,p){if(!p||p=="date"){this.date=new Date(n)}if(!p||p=="view"){this.viewDate=new Date(n)}this.fill();this.setValue();this._trigger("changeDate");var o;if(this.isInput){o=this.element}else{if(this.component){o=this.element.find("input")}}if(o){o.change();if(this.o.autoclose&&(!p||p=="date")){this.hide()}}},moveMonth:function(n,p){if(!p){return n}var t=new Date(n.valueOf()),o=t.getUTCDate(),s=t.getUTCMonth(),r=Math.abs(p),u,v;p=p>0?1:-1;if(r==1){v=p==-1?function(){return t.getUTCMonth()==s}:function(){return t.getUTCMonth()!=u};u=s+p;t.setUTCMonth(u);if(u<0||u>11){u=(u+12)%12}}else{for(var q=0;q<r;q++){t=this.moveMonth(t,p)}u=t.getUTCMonth();t.setUTCDate(o);v=function(){return u!=t.getUTCMonth()}}while(v()){t.setUTCDate(--o);t.setUTCMonth(u)}return t},moveYear:function(n,o){return this.moveMonth(n,o*12)},dateWithinRange:function(n){return n>=this.o.startDate&&n<=this.o.endDate},keydown:function(q){if(this.picker.is(":not(:visible)")){if(q.keyCode==27){this.show()}return}var n=false,p,o,s,t,u;switch(q.keyCode){case 27:this.hide();q.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}p=q.keyCode==37?-1:1;if(q.ctrlKey){t=this.moveYear(this.date,p);u=this.moveYear(this.viewDate,p)}else{if(q.shiftKey){t=this.moveMonth(this.date,p);u=this.moveMonth(this.viewDate,p)}else{t=new Date(this.date);t.setUTCDate(this.date.getUTCDate()+p);u=new Date(this.viewDate);u.setUTCDate(this.viewDate.getUTCDate()+p)}}if(this.dateWithinRange(t)){this.date=t;this.viewDate=u;this.setValue();this.update();q.preventDefault();n=true}break;case 38:case 40:if(!this.o.keyboardNavigation){break}p=q.keyCode==38?-1:1;if(q.ctrlKey){t=this.moveYear(this.date,p);u=this.moveYear(this.viewDate,p)}else{if(q.shiftKey){t=this.moveMonth(this.date,p);u=this.moveMonth(this.viewDate,p)}else{t=new Date(this.date);t.setUTCDate(this.date.getUTCDate()+p*7);u=new Date(this.viewDate);u.setUTCDate(this.viewDate.getUTCDate()+p*7)}}if(this.dateWithinRange(t)){this.date=t;this.viewDate=u;this.setValue();this.update();q.preventDefault();n=true}break;case 13:this.hide();q.preventDefault();break;case 9:this.hide();break}if(n){this._trigger("changeDate");var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.change()}}},showMode:function(n){if(n){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+n))}this.picker.find(">div").hide().filter(".datepicker-"+g.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var d=function(n,o){this.element=a(n);this.inputs=a.map(o.inputs,function(p){return p.jquery?p[0]:p});delete o.inputs;a(this.inputs).datepicker(o).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(p){return a(p).data("datepicker")});this.updateDates()};d.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(n){return n.date});this.updateRanges()},updateRanges:function(){var n=a.map(this.dates,function(o){return o.valueOf()});a.each(this.pickers,function(o,q){q.setRange(n)})},dateUpdated:function(o){var n=a(o.target).data("datepicker"),r=n.getUTCDate(),p=a.inArray(o.target,this.inputs),q=this.inputs.length;if(p==-1){return}if(r<this.dates[p]){while(p>=0&&r<this.dates[p]){this.pickers[p--].setUTCDate(r)}}else{if(r>this.dates[p]){while(p<q&&r>this.dates[p]){this.pickers[p++].setUTCDate(r)}}}this.updateDates()},remove:function(){a.map(this.pickers,function(n){n.remove()});delete this.element.data().datepicker}};function j(o,s){var n=a(o).data(),r={},p,t=new RegExp("^"+s.toLowerCase()+"([A-Z])"),s=new RegExp("^"+s.toLowerCase());for(var q in n){if(s.test(q)){p=q.replace(t,function(u,v){return v.toLowerCase()});r[p]=n[q]}}return r}function k(o){var p={};if(!e[o]){o=o.split("-")[0];if(!e[o]){return}}var n=e[o];a.each(h,function(q,r){if(r in n){p[r]=n[r]}});return p}var i=a.fn.datepicker;var b=a.fn.datepicker=function(p){var n=Array.apply(null,arguments);n.shift();var o,q;this.each(function(){var r=a(this),s=r.data("datepicker"),v=typeof p=="object"&&p;if(!s){var t=j(this,"date"),y=a.extend({},f,t,v),u=k(y.language),w=a.extend({},f,u,t,v);if(r.is(".input-daterange")||w.inputs){var x={inputs:w.inputs||r.find("input").toArray()};r.data("datepicker",(s=new d(this,a.extend(w,x))))}else{r.data("datepicker",(s=new c(this,w)))}}if(typeof p=="string"&&typeof s[p]=="function"){o=s[p].apply(s,n);if(o!==undefined){return false}}});if(o!==undefined){return o}else{return this}};var f=a.fn.datepicker.defaults={autoclose:false,beforeShowDay:a.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var h=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=c;var e=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var g={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(n){return(((n%4===0)&&(n%100!==0))||(n%400===0))},getDaysInMonth:function(o,n){return[31,(g.isLeapYear(o)?29:28),31,30,31,30,31,31,30,31,30,31][n]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(n){var p=n.replace(this.validParts,"\0").split("\0"),o=n.match(this.validParts);if(!p||!p.length||!o||o.length===0){throw new Error("Invalid date format.")}return{separators:p,parts:o}},parseDate:function(o,r,v){if(o instanceof Date){return o}if(typeof r==="string"){r=g.parseFormat(r)}if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(o)){var y=/([\-+]\d+)([dmwy])/,z=o.match(/([\-+]\d+)([dmwy])/g),x,p;o=new Date();for(var u=0;u<z.length;u++){x=y.exec(z[u]);p=parseInt(x[1]);switch(x[2]){case"d":o.setUTCDate(o.getUTCDate()+p);break;case"m":o=c.prototype.moveMonth.call(c.prototype,o,p);break;case"w":o.setUTCDate(o.getUTCDate()+p*7);break;case"y":o=c.prototype.moveYear.call(c.prototype,o,p);break}}return l(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),0,0,0)}var z=o&&o.match(this.nonpunctuation)||[],o=new Date(),w={},C=["yyyy","yy","M","MM","m","mm","d","dd"],B={yyyy:function(s,E){return s.setUTCFullYear(E)},yy:function(s,E){return s.setUTCFullYear(2000+E)},m:function(s,E){E-=1;while(E<0){E+=12}E%=12;s.setUTCMonth(E);while(s.getUTCMonth()!=E){s.setUTCDate(s.getUTCDate()-1)}return s},d:function(s,E){return s.setUTCDate(E)}},D,q,x;B.M=B.MM=B.mm=B.m;B.dd=B.d;o=l(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0);var t=r.parts.slice();if(z.length!=t.length){t=a(t).filter(function(s,E){return a.inArray(E,C)!==-1}).toArray()}if(z.length==t.length){for(var u=0,n=t.length;u<n;u++){D=parseInt(z[u],10);x=t[u];if(isNaN(D)){switch(x){case"MM":q=a(e[v].months).filter(function(){var s=this.slice(0,z[u].length),E=z[u].slice(0,s.length);return s==E});D=a.inArray(q[0],e[v].months)+1;break;case"M":q=a(e[v].monthsShort).filter(function(){var s=this.slice(0,z[u].length),E=z[u].slice(0,s.length);return s==E});D=a.inArray(q[0],e[v].monthsShort)+1;break}}w[x]=D}for(var u=0,A;u<C.length;u++){A=C[u];if(A in w&&!isNaN(w[A])){B[A](o,w[A])}}}return o},formatDate:function(o,p,r){if(typeof p==="string"){p=g.parseFormat(p)}var t={d:o.getUTCDate(),D:e[r].daysShort[o.getUTCDay()],DD:e[r].days[o.getUTCDay()],m:o.getUTCMonth()+1,M:e[r].monthsShort[o.getUTCMonth()],MM:e[r].months[o.getUTCMonth()],yy:o.getUTCFullYear().toString().substring(2),yyyy:o.getUTCFullYear()};t.dd=(t.d<10?"0":"")+t.d;t.mm=(t.m<10?"0":"")+t.m;var o=[],s=a.extend([],p.separators);for(var q=0,n=p.parts.length;q<=n;q++){if(s.length){o.push(s.shift())}o.push(t[p.parts[q]])}return o.join("")},headTemplate:'<thead><tr><th class="prev"><i class="icon-arrow-left"/></th><th colspan="5" class="datepicker-switch"></th><th class="next"><i class="icon-arrow-right"/></th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};g.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+g.headTemplate+"<tbody></tbody>"+g.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+g.headTemplate+g.contTemplate+g.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=g;a.fn.datepicker.noConflict=function(){a.fn.datepicker=i;return this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(o){var n=a(this);if(n.data("datepicker")){return}o.preventDefault();b.call(n,"show")});a(function(){b.call(a('[data-provide="datepicker-inline"]'))})}(window.jQuery));(function(a){a.fn.bdatepicker=a.fn.datepicker.noConflict();if(!a.fn.datepicker){a.fn.datepicker=a.fn.bdatepicker}var b=function(c){this.init("date",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(d,c){if(!this.options.viewformat){this.options.viewformat=this.options.format}d.datepicker=a.fn.editableutils.tryParseJson(d.datepicker,true);this.options.datepicker=a.extend({},c.datepicker,d.datepicker,{format:this.options.viewformat});this.options.datepicker.language=this.options.datepicker.language||"en";this.dpg=a.fn.bdatepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat)},render:function(){this.$input.bdatepicker(this.options.datepicker);if(this.options.clear){this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(c){c.preventDefault();c.stopPropagation();this.clear()},this));this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,c){var d=e?this.dpg.formatDate(e,this.parsedViewFormat,this.options.datepicker.language):"";b.superclass.value2html.call(this,d,c)},html2value:function(c){return this.parseDate(c,this.parsedViewFormat)},value2str:function(c){return c?this.dpg.formatDate(c,this.parsedFormat,this.options.datepicker.language):""},str2value:function(c){return this.parseDate(c,this.parsedFormat)},value2submit:function(c){return this.value2str(c)},value2input:function(c){this.$input.bdatepicker("update",c)},input2value:function(){return this.$input.data("datepicker").date},activate:function(){},clear:function(){this.$input.data("datepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".day",function(d){if(a(d.currentTarget).is(".old")||a(d.currentTarget).is(".new")){return}var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},parseDate:function(f,d){var c=null,e;if(f){c=this.dpg.parseDate(f,d,this.options.datepicker.language);if(typeof f==="string"){e=this.dpg.formatDate(c,d,this.options.datepicker.language);if(f!==e){c=null}}}return c}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd",viewformat:null,datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:false},clear:"&times; clear"});a.fn.editabletypes.date=b}(window.jQuery));(function(a){var b=function(c){this.init("datefield",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.date);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.bdatepicker(this.options.datepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.bdatepicker("update")},this))},value2input:function(c){this.$input.val(c?this.dpg.formatDate(c,this.parsedViewFormat,this.options.datepicker.language):"");this.$tpl.bdatepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.date.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-small",datepicker:{weekStart:0,startView:0,minViewMode:0,autoclose:true}});a.fn.editabletypes.datefield=b}(window.jQuery));(function(a){var b=function(c){this.init("datetime",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.abstractinput);a.extend(b.prototype,{initPicker:function(d,c){if(!this.options.viewformat){this.options.viewformat=this.options.format}d.datetimepicker=a.fn.editableutils.tryParseJson(d.datetimepicker,true);this.options.datetimepicker=a.extend({},c.datetimepicker,d.datetimepicker,{format:this.options.viewformat});this.options.datetimepicker.language=this.options.datetimepicker.language||"en";this.dpg=a.fn.datetimepicker.DPGlobal;this.parsedFormat=this.dpg.parseFormat(this.options.format,this.options.formatType);this.parsedViewFormat=this.dpg.parseFormat(this.options.viewformat,this.options.formatType)},render:function(){this.$input.datetimepicker(this.options.datetimepicker);this.$input.on("changeMode",function(c){var d=a(this).closest("form").parent();setTimeout(function(){d.triggerHandler("resize")},0)});if(this.options.clear){this.$clear=a('<a href="#"></a>').html(this.options.clear).click(a.proxy(function(c){c.preventDefault();c.stopPropagation();this.clear()},this));this.$tpl.parent().append(a('<div class="editable-clear">').append(this.$clear))}},value2html:function(e,c){var d=e?this.dpg.formatDate(this.toUTC(e),this.parsedViewFormat,this.options.datetimepicker.language,this.options.formatType):"";if(c){b.superclass.value2html.call(this,d,c)}else{return d}},html2value:function(c){var d=this.parseDate(c,this.parsedViewFormat);return d?this.fromUTC(d):null},value2str:function(c){return c?this.dpg.formatDate(this.toUTC(c),this.parsedFormat,this.options.datetimepicker.language,this.options.formatType):""},str2value:function(c){var d=this.parseDate(c,this.parsedFormat);return d?this.fromUTC(d):null},value2submit:function(c){return this.value2str(c)},value2input:function(c){if(c){this.$input.data("datetimepicker").setDate(c)}},input2value:function(){var c=this.$input.data("datetimepicker");return c.date?c.getDate():null},activate:function(){},clear:function(){this.$input.data("datetimepicker").date=null;this.$input.find(".active").removeClass("active");if(!this.options.showbuttons){this.$input.closest("form").submit()}},autosubmit:function(){this.$input.on("mouseup",".minute",function(d){var c=a(this).closest("form");setTimeout(function(){c.submit()},200)})},toUTC:function(c){return c?new Date(c.valueOf()-c.getTimezoneOffset()*60000):c},fromUTC:function(c){return c?new Date(c.valueOf()+c.getTimezoneOffset()*60000):c},parseDate:function(f,d){var c=null,e;if(f){c=this.dpg.parseDate(f,d,this.options.datetimepicker.language,this.options.formatType);if(typeof f==="string"){e=this.dpg.formatDate(c,d,this.options.datetimepicker.language,this.options.formatType);if(f!==e){c=null}}}return c}});b.defaults=a.extend({},a.fn.editabletypes.abstractinput.defaults,{tpl:'<div class="editable-date well"></div>',inputclass:null,format:"yyyy-mm-dd hh:ii",formatType:"standard",viewformat:null,datetimepicker:{todayHighlight:false,autoclose:false},clear:"&times; clear"});a.fn.editabletypes.datetime=b}(window.jQuery));(function(a){var b=function(c){this.init("datetimefield",c,b.defaults);this.initPicker(c,b.defaults)};a.fn.editableutils.inherit(b,a.fn.editabletypes.datetime);a.extend(b.prototype,{render:function(){this.$input=this.$tpl.find("input");this.setClass();this.setAttr("placeholder");this.$tpl.datetimepicker(this.options.datetimepicker);this.$input.off("focus keydown");this.$input.keyup(a.proxy(function(){this.$tpl.removeData("date");this.$tpl.datetimepicker("update")},this))},value2input:function(c){this.$input.val(this.value2html(c));this.$tpl.datetimepicker("update")},input2value:function(){return this.html2value(this.$input.val())},activate:function(){a.fn.editabletypes.text.prototype.activate.call(this)},autosubmit:function(){}});b.defaults=a.extend({},a.fn.editabletypes.datetime.defaults,{tpl:'<div class="input-append date"><input type="text"/><span class="add-on"><i class="icon-th"></i></span></div>',inputclass:"input-medium",datetimepicker:{todayHighlight:false,autoclose:true}});a.fn.editabletypes.datetimefield=b}(window.jQuery));(function(a){var b=function(c){this.init("typeahead",c,b.defaults);this.options.typeahead=a.extend({},b.defaults.typeahead,{matcher:this.matcher,sorter:this.sorter,highlighter:this.highlighter,updater:this.updater},c.typeahead)};a.fn.editableutils.inherit(b,a.fn.editabletypes.list);a.extend(b.prototype,{renderList:function(){this.$input=this.$tpl.is("input")?this.$tpl:this.$tpl.find('input[type="text"]');this.options.typeahead.source=this.sourceData;this.$input.typeahead(this.options.typeahead);var c=this.$input.data("typeahead");c.render=a.proxy(this.typeaheadRender,c);c.select=a.proxy(this.typeaheadSelect,c);c.move=a.proxy(this.typeaheadMove,c);this.renderClear();this.setClass();this.setAttr("placeholder")},value2htmlFinal:function(e,c){if(this.getIsObjects()){var d=a.fn.editableutils.itemsByValue(e,this.sourceData);e=d.length?d[0].text:""}a.fn.editabletypes.abstractinput.prototype.value2html.call(this,e,c)},html2value:function(c){return c?c:null},value2input:function(d){if(this.getIsObjects()){var c=a.fn.editableutils.itemsByValue(d,this.sourceData);this.$input.data("value",d).val(c.length?c[0].text:"")}else{this.$input.val(d)}},input2value:function(){if(this.getIsObjects()){var d=this.$input.data("value"),c=a.fn.editableutils.itemsByValue(d,this.sourceData);if(c.length&&c[0].text.toLowerCase()===this.$input.val().toLowerCase()){return d}else{return null}}else{return this.$input.val()}},getIsObjects:function(){if(this.isObjects===undefined){this.isObjects=false;for(var c=0;c<this.sourceData.length;c++){if(this.sourceData[c].value!==this.sourceData[c].text){this.isObjects=true;break}}}return this.isObjects},activate:a.fn.editabletypes.text.prototype.activate,renderClear:a.fn.editabletypes.text.prototype.renderClear,postrender:a.fn.editabletypes.text.prototype.postrender,toggleClear:a.fn.editabletypes.text.prototype.toggleClear,clear:function(){a.fn.editabletypes.text.prototype.clear.call(this);this.$input.data("value","")},matcher:function(c){return a.fn.typeahead.Constructor.prototype.matcher.call(this,c.text)},sorter:function(g){var c=[],e=[],d=[],f,h;while(f=g.shift()){h=f.text;if(!h.toLowerCase().indexOf(this.query.toLowerCase())){c.push(f)}else{if(~h.indexOf(this.query)){e.push(f)}else{d.push(f)}}}return c.concat(e,d)},highlighter:function(c){return a.fn.typeahead.Constructor.prototype.highlighter.call(this,c.text)},updater:function(c){this.$element.data("value",c.value);return c.text},typeaheadRender:function(c){var d=this;c=a(c).map(function(e,f){e=a(d.options.item).data("item",f);e.find("a").html(d.highlighter(f));return e[0]});if(this.options.autoSelect){c.first().addClass("active")}this.$menu.html(c);return this},typeaheadSelect:function(){var c=this.$menu.find(".active").data("item");if(this.options.autoSelect||c){this.$element.val(this.updater(c)).change()}return this.hide()},typeaheadMove:function(c){if(!this.shown){return}switch(c.keyCode){case 9:case 13:case 27:if(!this.$menu.find(".active").length){return}c.preventDefault();break;case 38:c.preventDefault();this.prev();break;case 40:c.preventDefault();this.next();break}c.stopPropagation()}});b.defaults=a.extend({},a.fn.editabletypes.list.defaults,{tpl:'<input type="text">',typeahead:null,clear:true});a.fn.editabletypes.typeahead=b}(window.jQuery));var bootbox=window.bootbox||(function(l,a){var i="en",g="en",b=true,c="static",f="javascript:;",e="",d={},h={},m={};m.setLocale=function(o){for(var n in j){if(n==o){i=o;return}}throw new Error("Invalid locale: "+o)};m.addLocale=function(n,p){if(typeof j[n]==="undefined"){j[n]={}}for(var o in p){j[n][o]=p[o]}};m.setIcons=function(n){h=n;if(typeof h!=="object"||h===null){h={}}};m.setBtnClasses=function(n){d=n;if(typeof d!=="object"||d===null){d={}}};m.alert=function(){var p="",o=k("OK"),n=null;switch(arguments.length){case 1:p=arguments[0];break;case 2:p=arguments[0];if(typeof arguments[1]=="function"){n=arguments[1]}else{o=arguments[1]}break;case 3:p=arguments[0];o=arguments[1];n=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return m.dialog(p,{label:o,icon:h.OK,"class":d.OK,callback:n},{onEscape:n||true})};m.confirm=function(){var s="",q=k("CANCEL"),r=k("CONFIRM"),o=null;switch(arguments.length){case 1:s=arguments[0];break;case 2:s=arguments[0];if(typeof arguments[1]=="function"){o=arguments[1]}else{q=arguments[1]}break;case 3:s=arguments[0];q=arguments[1];if(typeof arguments[2]=="function"){o=arguments[2]}else{r=arguments[2]}break;case 4:s=arguments[0];q=arguments[1];r=arguments[2];o=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var n=function(){if(typeof o==="function"){return o(false)}};var p=function(){if(typeof o==="function"){return o(true)}};return m.dialog(s,[{label:q,icon:h.CANCEL,"class":d.CANCEL,callback:n},{label:r,icon:h.CONFIRM,"class":d.CONFIRM,callback:p}],{onEscape:n})};m.prompt=function(){var w="",u=k("CANCEL"),v=k("CONFIRM"),o=null,q="";switch(arguments.length){case 1:w=arguments[0];break;case 2:w=arguments[0];if(typeof arguments[1]=="function"){o=arguments[1]}else{u=arguments[1]}break;case 3:w=arguments[0];u=arguments[1];if(typeof arguments[2]=="function"){o=arguments[2]}else{v=arguments[2]}break;case 4:w=arguments[0];u=arguments[1];v=arguments[2];o=arguments[3];break;case 5:w=arguments[0];u=arguments[1];v=arguments[2];o=arguments[3];q=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var t=w;var s=a("<form></form>");s.append("<input autocomplete=off type=text value='"+q+"' />");var n=function(){if(typeof o==="function"){return o(null)}};var p=function(){if(typeof o==="function"){return o(s.find("input[type=text]").val())}};var r=m.dialog(s,[{label:u,icon:h.CANCEL,"class":d.CANCEL,callback:n},{label:v,icon:h.CONFIRM,"class":d.CONFIRM,callback:p}],{header:t,show:false,onEscape:n});r.on("shown",function(){s.find("input[type=text]").focus();s.on("submit",function(x){x.preventDefault();r.find(".btn-primary").click()})});r.modal("show");return r};m.dialog=function(G,t,B){var o="",q=[];if(!B){B={}}if(typeof t==="undefined"){t=[]}else{if(typeof t.length=="undefined"){t=[t]}}var v=t.length;while(v--){var y=null,u=null,n=null,w="",p=null;if(typeof t[v]["label"]=="undefined"&&typeof t[v]["class"]=="undefined"&&typeof t[v]["callback"]=="undefined"){var D=0,E=null;for(var x in t[v]){E=x;if(++D>1){break}}if(D==1&&typeof t[v][x]=="function"){t[v]["label"]=E;t[v]["callback"]=t[v][x]}}if(typeof t[v]["callback"]=="function"){p=t[v]["callback"]}if(t[v]["class"]){n=t[v]["class"]}else{if(v==t.length-1&&t.length<=2){n="btn-primary"}}if(t[v]["label"]){y=t[v]["label"]}else{y="Option "+(v+1)}if(t[v]["icon"]){w="<i class='"+t[v]["icon"]+"'></i> "}if(t[v]["href"]){u=t[v]["href"]}else{u=f}o="<a data-handler='"+v+"' class='btn "+n+"' href='"+u+"'>"+w+""+y+"</a>"+o;q[v]=p}var C=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(B.header){var r="";if(typeof B.headerCloseButton=="undefined"||B.headerCloseButton){r="<a href='"+f+"' class='close'>&times;</a>"}C.push("<div class='modal-header'>"+r+"<h3>"+B.header+"</h3></div>")}C.push("<div class='modal-body'></div>");if(o){C.push("<div class='modal-footer'>"+o+"</div>")}C.push("</div>");var s=a(C.join("\n"));var F=(typeof B.animate==="undefined")?b:B.animate;if(F){s.addClass("fade")}var A=(typeof B.classes==="undefined")?e:B.classes;if(A){s.addClass(A)}s.find(".modal-body").html(G);function z(I){var H=null;if(typeof B.onEscape==="function"){H=B.onEscape()}if(H!==false){s.modal("hide")}}s.on("keyup.dismiss.modal",function(H){if(H.which===27&&B.onEscape){z("escape")}});s.on("click","a.close",function(H){H.preventDefault();z("close")});s.on("shown",function(){s.find("a.btn-primary:first").focus()});s.on("hidden",function(){s.remove()});s.on("click",".modal-footer a",function(I){var J=a(this).data("handler"),H=q[J],K=null;if(typeof J!=="undefined"&&typeof t[J]["href"]!=="undefined"){return}I.preventDefault();if(typeof H==="function"){K=H()}if(K!==false){s.modal("hide")}});a("body").append(s);s.modal({backdrop:(typeof B.backdrop==="undefined")?c:B.backdrop,keyboard:false,show:false});s.on("show",function(H){a(l).off("focusin.modal")});if(typeof B.show==="undefined"||B.show===true){s.modal("show")}return s};m.modal=function(){var q;var o;var p;var n={onEscape:null,keyboard:true,backdrop:c};switch(arguments.length){case 1:q=arguments[0];break;case 2:q=arguments[0];if(typeof arguments[1]=="object"){p=arguments[1]}else{o=arguments[1]}break;case 3:q=arguments[0];o=arguments[1];p=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}n.header=o;if(typeof p=="object"){p=a.extend(n,p)}else{p=n}return m.dialog(q,[],p)};m.hideAll=function(){a(".bootbox").modal("hide")};m.animate=function(n){b=n};m.backdrop=function(n){c=n};m.classes=function(n){e=n};var j={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"}};function k(o,n){if(typeof n==="undefined"){n=i}if(typeof j[n][o]==="string"){return j[n][o]}if(n!=g){return k(o,g)}return o}return m}(document,window.jQuery));window.bootbox=bootbox;(function(a,n){var b=a(window);function o(){return new Date(Date.UTC.apply(Date,arguments))}function p(){var q=new Date();return o(q.getFullYear(),q.getMonth(),q.getDate())}function c(q){return function(){return this[q].apply(this,arguments)}}var d=(function(){var q={get:function(r){return this.slice(r)[0]},contains:function(r){var u=r&&r.valueOf();for(var s=0,t=this.length;s<t;s++){if(this[s].valueOf()===u){return s}}return -1},remove:function(r){this.splice(r,1)},replace:function(r){if(!r){return}if(!a.isArray(r)){r=[r]}this.clear();this.push.apply(this,r)},clear:function(){this.splice(0)},copy:function(){var r=new d();r.replace(this);return r}};return function(){var r=[];r.push.apply(r,arguments);a.extend(r,q);return r}})();var e=function(q,r){this.dates=new d();this.viewDate=p();this.focusDate=null;this._process_options(r);this.element=a(q);this.isInline=false;this.isInput=this.element.is("input");this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):false;this.hasInput=this.component&&this.element.find("input").length;if(this.component&&this.component.length===0){this.component=false}this.picker=a(i.template);this._buildEvents();this._attachEvents();if(this.isInline){this.picker.addClass("datepicker-inline").appendTo(this.element)}else{this.picker.addClass("datepicker-dropdown dropdown-menu")}if(this.o.rtl){this.picker.addClass("datepicker-rtl")}this.viewMode=this.o.startView;if(this.o.calendarWeeks){this.picker.find("tfoot th.today").attr("colspan",function(s,t){return parseInt(t)+1})}this._allow_update=false;this.setStartDate(this._o.startDate);this.setEndDate(this._o.endDate);this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled);this.fillDow();this.fillMonths();this._allow_update=true;this.update();this.showMode();if(this.isInline){this.show()}};e.prototype={constructor:e,_process_options:function(u){this._o=a.extend({},this._o,u);var t=this.o=a.extend({},this._o);var s=t.language;if(!g[s]){s=s.split("-")[0];if(!g[s]){s=h.language}}t.language=s;switch(t.startView){case 2:case"decade":t.startView=2;break;case 1:case"year":t.startView=1;break;default:t.startView=0}switch(t.minViewMode){case 1:case"months":t.minViewMode=1;break;case 2:case"years":t.minViewMode=2;break;default:t.minViewMode=0}t.startView=Math.max(t.startView,t.minViewMode);if(t.multidate!==true){t.multidate=Number(t.multidate)||false;if(t.multidate!==false){t.multidate=Math.max(0,t.multidate)}else{t.multidate=1}}t.multidateSeparator=String(t.multidateSeparator);t.weekStart%=7;t.weekEnd=((t.weekStart+6)%7);var r=i.parseFormat(t.format);if(t.startDate!==-Infinity){if(!!t.startDate){if(t.startDate instanceof Date){t.startDate=this._local_to_utc(this._zero_time(t.startDate))}else{t.startDate=i.parseDate(t.startDate,r,t.language)}}else{t.startDate=-Infinity}}if(t.endDate!==Infinity){if(!!t.endDate){if(t.endDate instanceof Date){t.endDate=this._local_to_utc(this._zero_time(t.endDate))}else{t.endDate=i.parseDate(t.endDate,r,t.language)}}else{t.endDate=Infinity}}t.daysOfWeekDisabled=t.daysOfWeekDisabled||[];if(!a.isArray(t.daysOfWeekDisabled)){t.daysOfWeekDisabled=t.daysOfWeekDisabled.split(/[,\s]*/)}t.daysOfWeekDisabled=a.map(t.daysOfWeekDisabled,function(w){return parseInt(w,10)});var v=String(t.orientation).toLowerCase().split(/\s+/g),q=t.orientation.toLowerCase();v=a.grep(v,function(w){return(/^auto|left|right|top|bottom$/).test(w)});t.orientation={x:"auto",y:"auto"};if(!q||q==="auto"){}else{if(v.length===1){switch(v[0]){case"top":case"bottom":t.orientation.y=v[0];break;case"left":case"right":t.orientation.x=v[0];break}}else{q=a.grep(v,function(w){return(/^left|right$/).test(w)});t.orientation.x=q[0]||"auto";q=a.grep(v,function(w){return(/^top|bottom$/).test(w)});t.orientation.y=q[0]||"auto"}}},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var u=0,r,q,s;u<t.length;u++){r=t[u][0];if(t[u].length===2){q=n;s=t[u][1]}else{if(t[u].length===3){q=t[u][1];s=t[u][2]}}r.on(s,q)}},_unapplyEvents:function(t){for(var u=0,r,s,q;u<t.length;u++){r=t[u][0];if(t[u].length===2){q=n;s=t[u][1]}else{if(t[u].length===3){q=t[u][1];s=t[u][2]}}r.off(s,q)}},_buildEvents:function(){if(this.isInput){this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(q){if(a.inArray(q.keyCode,[27,37,39,38,40,32,13,9])===-1){this.update()}},this),keydown:a.proxy(this.keydown,this)}]]}else{if(this.component&&this.hasInput){this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(q){if(a.inArray(q.keyCode,[27,37,39,38,40,32,13,9])===-1){this.update()}},this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]}else{if(this.element.is("div")){this.isInline=true}else{this._events=[[this.element,{click:a.proxy(this.show,this)}]]}}}this._events.push([this.element,"*",{blur:a.proxy(function(q){this._focused_from=q.target},this)}],[this.element,{blur:a.proxy(function(q){this._focused_from=q.target},this)}]);this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(q){if(!(this.element.is(q.target)||this.element.find(q.target).length||this.picker.is(q.target)||this.picker.find(q.target).length)){this.hide()}},this)}]]},_attachEvents:function(){this._detachEvents();this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents();this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(s,q){var r=q||this.dates.get(-1),t=this._utc_to_local(r);this.element.trigger({type:s,date:t,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(w,v){if(arguments.length===0){w=this.dates.length-1;v=this.o.format}else{if(typeof w==="string"){v=w;w=this.dates.length-1}}v=v||this.o.format;var u=this.dates.get(w);return i.formatDate(u,v,this.o.language)},this)})},show:function(){if(!this.isInline){this.picker.appendTo("body")}this.picker.show();this.place();this._attachSecondaryEvents();this._trigger("show")},hide:function(){if(this.isInline){return}if(!this.picker.is(":visible")){return}this.focusDate=null;this.picker.hide().detach();this._detachSecondaryEvents();this.viewMode=this.o.startView;this.showMode();if(this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())){this.setValue()}this._trigger("hide")},remove:function(){this.hide();this._detachEvents();this._detachSecondaryEvents();this.picker.remove();delete this.element.data().datepicker;if(!this.isInput){delete this.element.data().date}},_utc_to_local:function(q){return q&&new Date(q.getTime()+(q.getTimezoneOffset()*60000))},_local_to_utc:function(q){return q&&new Date(q.getTime()-(q.getTimezoneOffset()*60000))},_zero_time:function(q){return q&&new Date(q.getFullYear(),q.getMonth(),q.getDate())},_zero_utc_time:function(q){return q&&new Date(Date.UTC(q.getUTCFullYear(),q.getUTCMonth(),q.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(q){return new Date(q)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var q=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,q);this._trigger("changeDate");this.setValue()},setUTCDates:function(){var q=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(q,this._utc_to_local));this._trigger("changeDate");this.setValue()},setDate:c("setDates"),setUTCDate:c("setUTCDates"),setValue:function(){var q=this.getFormattedDate();if(!this.isInput){if(this.component){this.element.find("input").val(q).change()}}else{this.element.val(q).change()}},getFormattedDate:function(q){if(q===n){q=this.o.format}var r=this.o.language;return a.map(this.dates,function(s){return i.formatDate(s,q,r)}).join(this.o.multidateSeparator)},setStartDate:function(q){this._process_options({startDate:q});this.update();this.updateNavArrows()},setEndDate:function(q){this._process_options({endDate:q});this.update();this.updateNavArrows()},setDaysOfWeekDisabled:function(q){this._process_options({daysOfWeekDisabled:q});this.update();this.updateNavArrows()},place:function(){if(this.isInline){return}var s=this.picker.outerWidth(),r=this.picker.outerHeight(),z=10,C=b.width(),B=b.height(),w=b.scrollTop();var E=parseInt(this.element.parents().filter(function(){return a(this).css("z-index")!=="auto"}).first().css("z-index"))+10;var v=this.component?this.component.parent().offset():this.element.offset();var t=this.component?this.component.outerHeight(true):this.element.outerHeight(false);var A=this.component?this.component.outerWidth(true):this.element.outerWidth(false);var u=v.left,x=v.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left");if(this.o.orientation.x!=="auto"){this.picker.addClass("datepicker-orient-"+this.o.orientation.x);if(this.o.orientation.x==="right"){u-=s-A}}else{this.picker.addClass("datepicker-orient-left");if(v.left<0){u-=v.left-z}else{if(v.left+s>C){u=C-s-z}}}var D=this.o.orientation.y,y,q;if(D==="auto"){y=-w+v.top-r;q=w+B-(v.top+t+r);if(Math.max(y,q)===q){D="top"}else{D="bottom"}}this.picker.addClass("datepicker-orient-"+D);if(D==="top"){x+=t}else{x-=r+parseInt(this.picker.css("padding-top"))}this.picker.css({top:x,left:u,zIndex:E})},_allow_update:true,update:function(){if(!this._allow_update){return}var s=this.dates.copy(),q=[],r=false;if(arguments.length){a.each(arguments,a.proxy(function(u,t){if(t instanceof Date){t=this._local_to_utc(t)}q.push(t)},this));r=true}else{q=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val();if(q&&this.o.multidate){q=q.split(this.o.multidateSeparator)}else{q=[q]}delete this.element.data().date}q=a.map(q,a.proxy(function(t){return i.parseDate(t,this.o.format,this.o.language)},this));q=a.grep(q,a.proxy(function(t){return(t<this.o.startDate||t>this.o.endDate||!t)},this),true);this.dates.replace(q);if(this.dates.length){this.viewDate=new Date(this.dates.get(-1))}else{if(this.viewDate<this.o.startDate){this.viewDate=new Date(this.o.startDate)}else{if(this.viewDate>this.o.endDate){this.viewDate=new Date(this.o.endDate)}}}if(r){this.setValue()}else{if(q.length){if(String(s)!==String(this.dates)){this._trigger("changeDate")}}}if(!this.dates.length&&s.length){this._trigger("clearDate")}this.fill()},fillDow:function(){var r=this.o.weekStart,s="<tr>";if(this.o.calendarWeeks){var q='<th class="cw">&nbsp;</th>';s+=q;this.picker.find(".datepicker-days thead tr:first-child").prepend(q)}while(r<this.o.weekStart+7){s+='<th class="dow">'+g[this.o.language].daysMin[(r++)%7]+"</th>"}s+="</tr>";this.picker.find(".datepicker-days thead").append(s)},fillMonths:function(){var q="",r=0;while(r<12){q+='<span class="month">'+g[this.o.language].monthsShort[r++]+"</span>"}this.picker.find(".datepicker-months td").html(q)},setRange:function(q){if(!q||!q.length){delete this.range}else{this.range=a.map(q,function(r){return r.valueOf()})}this.fill()},getClassNames:function(r){var q=[],u=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),t=new Date();if(r.getUTCFullYear()<u||(r.getUTCFullYear()===u&&r.getUTCMonth()<s)){q.push("old")}else{if(r.getUTCFullYear()>u||(r.getUTCFullYear()===u&&r.getUTCMonth()>s)){q.push("new")}}if(this.focusDate&&r.valueOf()===this.focusDate.valueOf()){q.push("focused")}if(this.o.todayHighlight&&r.getUTCFullYear()===t.getFullYear()&&r.getUTCMonth()===t.getMonth()&&r.getUTCDate()===t.getDate()){q.push("today")}if(this.dates.contains(r)!==-1){q.push("active")}if(r.valueOf()<this.o.startDate||r.valueOf()>this.o.endDate||a.inArray(r.getUTCDay(),this.o.daysOfWeekDisabled)!==-1){q.push("disabled")}if(this.range){if(r>this.range[0]&&r<this.range[this.range.length-1]){q.push("range")}if(a.inArray(r.valueOf(),this.range)!==-1){q.push("selected")}}return q},fill:function(){var v=new Date(this.viewDate),L=v.getUTCFullYear(),B=v.getUTCMonth(),G=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,F=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,y=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,x=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,I=g[this.o.language].today||g.en.today||"",t=g[this.o.language].clear||g.en.clear||"",J;this.picker.find(".datepicker-days thead th.datepicker-switch").text(g[this.o.language].months[B]+" "+L);this.picker.find("tfoot th.today").text(I).toggle(this.o.todayBtn!==false);this.picker.find("tfoot th.clear").text(t).toggle(this.o.clearBtn!==false);this.updateNavArrows();this.fillMonths();var E=o(L,B-1,28),w=i.getDaysInMonth(E.getUTCFullYear(),E.getUTCMonth());E.setUTCDate(w);E.setUTCDate(w-(E.getUTCDay()-this.o.weekStart+7)%7);var D=new Date(E);D.setUTCDate(D.getUTCDate()+42);D=D.valueOf();var z=[];var u;while(E.valueOf()<D){if(E.getUTCDay()===this.o.weekStart){z.push("<tr>");if(this.o.calendarWeeks){var K=new Date(+E+(this.o.weekStart-E.getUTCDay()-7)%7*86400000),H=new Date(Number(K)+(7+4-K.getUTCDay())%7*86400000),O=new Date(Number(O=o(H.getUTCFullYear(),0,1))+(7+4-O.getUTCDay())%7*86400000),r=(H-O)/86400000/7+1;z.push('<td class="cw">'+r+"</td>")}}u=this.getClassNames(E);u.push("day");if(this.o.beforeShowDay!==a.noop){var q=this.o.beforeShowDay(this._utc_to_local(E));if(q===n){q={}}else{if(typeof(q)==="boolean"){q={enabled:q}}else{if(typeof(q)==="string"){q={classes:q}}}}if(q.enabled===false){u.push("disabled")}if(q.classes){u=u.concat(q.classes.split(/\s+/))}if(q.tooltip){J=q.tooltip}}u=a.unique(u);z.push('<td class="'+u.join(" ")+'"'+(J?' title="'+J+'"':"")+">"+E.getUTCDate()+"</td>");if(E.getUTCDay()===this.o.weekEnd){z.push("</tr>")}E.setUTCDate(E.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(z.join(""));var C=this.picker.find(".datepicker-months").find("th:eq(1)").text(L).end().find("span").removeClass("active");a.each(this.dates,function(Q,P){if(P.getUTCFullYear()===L){C.eq(P.getUTCMonth()).addClass("active")}});if(L<G||L>y){C.addClass("disabled")}if(L===G){C.slice(0,F).addClass("disabled")}if(L===y){C.slice(x+1).addClass("disabled")}z="";L=parseInt(L/10,10)*10;var M=this.picker.find(".datepicker-years").find("th:eq(1)").text(L+"-"+(L+9)).end().find("td");L-=1;var N=a.map(this.dates,function(P){return P.getUTCFullYear()}),s;for(var A=-1;A<11;A++){s=["year"];if(A===-1){s.push("old")}else{if(A===10){s.push("new")}}if(a.inArray(L,N)!==-1){s.push("active")}if(L<G||L>y){s.push("disabled")}z+='<span class="'+s.join(" ")+'">'+L+"</span>";L+=1}M.html(z)},updateNavArrows:function(){if(!this._allow_update){return}var q=new Date(this.viewDate),s=q.getUTCFullYear(),r=q.getUTCMonth();switch(this.viewMode){case 0:if(this.o.startDate!==-Infinity&&s<=this.o.startDate.getUTCFullYear()&&r<=this.o.startDate.getUTCMonth()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&s>=this.o.endDate.getUTCFullYear()&&r>=this.o.endDate.getUTCMonth()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break;case 1:case 2:if(this.o.startDate!==-Infinity&&s<=this.o.startDate.getUTCFullYear()){this.picker.find(".prev").css({visibility:"hidden"})}else{this.picker.find(".prev").css({visibility:"visible"})}if(this.o.endDate!==Infinity&&s>=this.o.endDate.getUTCFullYear()){this.picker.find(".next").css({visibility:"hidden"})}else{this.picker.find(".next").css({visibility:"visible"})}break}},click:function(t){t.preventDefault();var w=a(t.target).closest("span, td, th"),y,v,r;if(w.length===1){switch(w[0].nodeName.toLowerCase()){case"th":switch(w[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=i.modes[this.viewMode].navStep*(w[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s);this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s);if(this.viewMode===1){this._trigger("changeYear",this.viewDate)}break}this.fill();break;case"today":var q=new Date();q=o(q.getFullYear(),q.getMonth(),q.getDate(),0,0,0);this.showMode(-2);var x=this.o.todayBtn==="linked"?null:"view";this._setDate(q,x);break;case"clear":var u;if(this.isInput){u=this.element}else{if(this.component){u=this.element.find("input")}}if(u){u.val("").change()}this.update();this._trigger("changeDate");if(this.o.autoclose){this.hide()}break}break;case"span":if(!w.is(".disabled")){this.viewDate.setUTCDate(1);if(w.is(".month")){r=1;v=w.parent().find("span").index(w);y=this.viewDate.getUTCFullYear();this.viewDate.setUTCMonth(v);this._trigger("changeMonth",this.viewDate);if(this.o.minViewMode===1){this._setDate(o(y,v,r))}}else{r=1;v=0;y=parseInt(w.text(),10)||0;this.viewDate.setUTCFullYear(y);this._trigger("changeYear",this.viewDate);if(this.o.minViewMode===2){this._setDate(o(y,v,r))}}this.showMode(-1);this.fill()}break;case"td":if(w.is(".day")&&!w.is(".disabled")){r=parseInt(w.text(),10)||1;y=this.viewDate.getUTCFullYear();v=this.viewDate.getUTCMonth();if(w.is(".old")){if(v===0){v=11;y-=1}else{v-=1}}else{if(w.is(".new")){if(v===11){v=0;y+=1}else{v+=1}}}this._setDate(o(y,v,r))}break}}if(this.picker.is(":visible")&&this._focused_from){a(this._focused_from).focus()}delete this._focused_from},_toggle_multidate:function(q){var r=this.dates.contains(q);if(!q){this.dates.clear()}else{if(r!==-1){this.dates.remove(r)}else{this.dates.push(q)}}if(typeof this.o.multidate==="number"){while(this.dates.length>this.o.multidate){this.dates.remove(0)}}},_setDate:function(q,s){if(!s||s==="date"){this._toggle_multidate(q&&new Date(q))}if(!s||s==="view"){this.viewDate=q&&new Date(q)}this.fill();this.setValue();this._trigger("changeDate");var r;if(this.isInput){r=this.element}else{if(this.component){r=this.element.find("input")}}if(r){r.change()}if(this.o.autoclose&&(!s||s==="date")){this.hide()}},moveMonth:function(q,s){if(!q){return n}if(!s){return q}var w=new Date(q.valueOf()),r=w.getUTCDate(),v=w.getUTCMonth(),u=Math.abs(s),x,y;s=s>0?1:-1;if(u===1){y=s===-1?function(){return w.getUTCMonth()===v}:function(){return w.getUTCMonth()!==x};x=v+s;w.setUTCMonth(x);if(x<0||x>11){x=(x+12)%12}}else{for(var t=0;t<u;t++){w=this.moveMonth(w,s)}x=w.getUTCMonth();w.setUTCDate(r);y=function(){return x!==w.getUTCMonth()}}while(y()){w.setUTCDate(--r);w.setUTCMonth(x)}return w},moveYear:function(q,r){return this.moveMonth(q,r*12)},dateWithinRange:function(q){return q>=this.o.startDate&&q<=this.o.endDate},keydown:function(s){if(this.picker.is(":not(:visible)")){if(s.keyCode===27){this.show()}return}var q=false,r,v,w,u=this.focusDate||this.viewDate;switch(s.keyCode){case 27:if(this.focusDate){this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill()}else{this.hide()}s.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation){break}r=s.keyCode===37?-1:1;if(s.ctrlKey){v=this.moveYear(this.dates.get(-1)||p(),r);w=this.moveYear(u,r);this._trigger("changeYear",this.viewDate)}else{if(s.shiftKey){v=this.moveMonth(this.dates.get(-1)||p(),r);w=this.moveMonth(u,r);this._trigger("changeMonth",this.viewDate)}else{v=new Date(this.dates.get(-1)||p());v.setUTCDate(v.getUTCDate()+r);w=new Date(u);w.setUTCDate(u.getUTCDate()+r)}}if(this.dateWithinRange(v)){this.focusDate=this.viewDate=w;this.setValue();this.fill();s.preventDefault()}break;case 38:case 40:if(!this.o.keyboardNavigation){break}r=s.keyCode===38?-1:1;if(s.ctrlKey){v=this.moveYear(this.dates.get(-1)||p(),r);w=this.moveYear(u,r);this._trigger("changeYear",this.viewDate)}else{if(s.shiftKey){v=this.moveMonth(this.dates.get(-1)||p(),r);w=this.moveMonth(u,r);this._trigger("changeMonth",this.viewDate)}else{v=new Date(this.dates.get(-1)||p());v.setUTCDate(v.getUTCDate()+r*7);w=new Date(u);w.setUTCDate(u.getUTCDate()+r*7)}}if(this.dateWithinRange(v)){this.focusDate=this.viewDate=w;this.setValue();this.fill();s.preventDefault()}break;case 32:break;case 13:u=this.focusDate||this.dates.get(-1)||this.viewDate;this._toggle_multidate(u);q=true;this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.setValue();this.fill();if(this.picker.is(":visible")){s.preventDefault();if(this.o.autoclose){this.hide()}}break;case 9:this.focusDate=null;this.viewDate=this.dates.get(-1)||this.viewDate;this.fill();this.hide();break}if(q){if(this.dates.length){this._trigger("changeDate")}else{this._trigger("clearDate")}var t;if(this.isInput){t=this.element}else{if(this.component){t=this.element.find("input")}}if(t){t.change()}}},showMode:function(q){if(q){this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+q))}this.picker.find(">div").hide().filter(".datepicker-"+i.modes[this.viewMode].clsName).css("display","block");this.updateNavArrows()}};var f=function(q,r){this.element=a(q);this.inputs=a.map(r.inputs,function(s){return s.jquery?s[0]:s});delete r.inputs;a(this.inputs).datepicker(r).bind("changeDate",a.proxy(this.dateUpdated,this));this.pickers=a.map(this.inputs,function(s){return a(s).data("datepicker")});this.updateDates()};f.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(q){return q.getUTCDate()});this.updateRanges()},updateRanges:function(){var q=a.map(this.dates,function(r){return r.valueOf()});a.each(this.pickers,function(r,s){s.setRange(q)})},dateUpdated:function(r){if(this.updating){return}this.updating=true;var q=a(r.target).data("datepicker"),u=q.getUTCDate(),s=a.inArray(r.target,this.inputs),t=this.inputs.length;if(s===-1){return}a.each(this.pickers,function(v,w){if(!w.getUTCDate()){w.setUTCDate(u)}});if(u<this.dates[s]){while(s>=0&&u<this.dates[s]){this.pickers[s--].setUTCDate(u)}}else{if(u>this.dates[s]){while(s<t&&u>this.dates[s]){this.pickers[s++].setUTCDate(u)}}}this.updateDates();delete this.updating},remove:function(){a.map(this.pickers,function(q){q.remove()});delete this.element.data().datepicker}};function l(r,v){var q=a(r).data(),u={},s,x=new RegExp("^"+v.toLowerCase()+"([A-Z])");v=new RegExp("^"+v.toLowerCase());function w(y,z){return z.toLowerCase()}for(var t in q){if(v.test(t)){s=t.replace(x,w);u[s]=q[t]}}return u}function m(r){var s={};if(!g[r]){r=r.split("-")[0];if(!g[r]){return}}var q=g[r];a.each(j,function(t,u){if(u in q){s[u]=q[u]}});return s}var k=a.fn.datepicker;a.fn.datepicker=function(s){var q=Array.apply(null,arguments);q.shift();var r;this.each(function(){var t=a(this),u=t.data("datepicker"),x=typeof s==="object"&&s;if(!u){var v=l(this,"date"),A=a.extend({},h,v,x),w=m(A.language),y=a.extend({},h,w,v,x);if(t.is(".input-daterange")||y.inputs){var z={inputs:y.inputs||t.find("input").toArray()};t.data("datepicker",(u=new f(this,a.extend(y,z))))}else{t.data("datepicker",(u=new e(this,y)))}}if(typeof s==="string"&&typeof u[s]==="function"){r=u[s].apply(u,q);if(r!==n){return false}}});if(r!==n){return r}else{return this}};var h=a.fn.datepicker.defaults={autoclose:false,beforeShowDay:a.noop,calendarWeeks:false,clearBtn:false,daysOfWeekDisabled:[],endDate:Infinity,forceParse:true,format:"mm/dd/yyyy",keyboardNavigation:true,language:"en",minViewMode:0,multidate:false,multidateSeparator:",",orientation:"auto",rtl:false,startDate:-Infinity,startView:0,todayBtn:false,todayHighlight:false,weekStart:0};var j=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=e;var g=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}};var i={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(q){return(((q%4===0)&&(q%100!==0))||(q%400===0))},getDaysInMonth:function(r,q){return[31,(i.isLeapYear(r)?29:28),31,30,31,30,31,31,30,31,30,31][q]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(q){var s=q.replace(this.validParts,"\0").split("\0"),r=q.match(this.validParts);if(!s||!s.length||!r||r.length===0){throw new Error("Invalid date format.")}return{separators:s,parts:r}},parseDate:function(t,w,z){if(!t){return n}if(t instanceof Date){return t}if(typeof w==="string"){w=i.parseFormat(w)}var D=/([\-+]\d+)([dmwy])/,E=t.match(/([\-+]\d+)([dmwy])/g),C,u,y;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t)){t=new Date();for(y=0;y<E.length;y++){C=D.exec(E[y]);u=parseInt(C[1]);switch(C[2]){case"d":t.setUTCDate(t.getUTCDate()+u);break;case"m":t=e.prototype.moveMonth.call(e.prototype,t,u);break;case"w":t.setUTCDate(t.getUTCDate()+u*7);break;case"y":t=e.prototype.moveYear.call(e.prototype,t,u);break}}return o(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0)}E=t&&t.match(this.nonpunctuation)||[];t=new Date();var B={},H=["yyyy","yy","M","MM","m","mm","d","dd"],G={yyyy:function(s,J){return s.setUTCFullYear(J)},yy:function(s,J){return s.setUTCFullYear(2000+J)},m:function(s,J){if(isNaN(s)){return s}J-=1;while(J<0){J+=12}J%=12;s.setUTCMonth(J);while(s.getUTCMonth()!==J){s.setUTCDate(s.getUTCDate()-1)}return s},d:function(s,J){return s.setUTCDate(J)}},I,v;G.M=G.MM=G.mm=G.m;G.dd=G.d;t=o(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);var x=w.parts.slice();if(E.length!==x.length){x=a(x).filter(function(s,J){return a.inArray(J,H)!==-1}).toArray()}function A(){var s=this.slice(0,E[y].length),J=E[y].slice(0,s.length);return s===J}if(E.length===x.length){var r;for(y=0,r=x.length;y<r;y++){I=parseInt(E[y],10);C=x[y];if(isNaN(I)){switch(C){case"MM":v=a(g[z].months).filter(A);I=a.inArray(v[0],g[z].months)+1;break;case"M":v=a(g[z].monthsShort).filter(A);I=a.inArray(v[0],g[z].monthsShort)+1;break}}B[C]=I}var q,F;for(y=0;y<H.length;y++){F=H[y];if(F in B&&!isNaN(B[F])){q=new Date(t);G[F](q,B[F]);if(!isNaN(q)){t=q}}}}return t},formatDate:function(r,s,u){if(!r){return""}if(typeof s==="string"){s=i.parseFormat(s)}var w={d:r.getUTCDate(),D:g[u].daysShort[r.getUTCDay()],DD:g[u].days[r.getUTCDay()],m:r.getUTCMonth()+1,M:g[u].monthsShort[r.getUTCMonth()],MM:g[u].months[r.getUTCMonth()],yy:r.getUTCFullYear().toString().substring(2),yyyy:r.getUTCFullYear()};w.dd=(w.d<10?"0":"")+w.d;w.mm=(w.m<10?"0":"")+w.m;r=[];var v=a.extend([],s.separators);for(var t=0,q=s.parts.length;t<=q;t++){if(v.length){r.push(v.shift())}r.push(w[s.parts[t]])}return r.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};i.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+i.headTemplate+"<tbody></tbody>"+i.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+i.headTemplate+i.contTemplate+i.footTemplate+"</table></div></div>";a.fn.datepicker.DPGlobal=i;a.fn.datepicker.noConflict=function(){a.fn.datepicker=k;return this};a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(r){var q=a(this);if(q.data("datepicker")){return}r.preventDefault();q.datepicker("show")});a(function(){a('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery));jQuery.cookie=function(c,g,d){if(arguments.length>1&&String(g)!=="[object Object]"){d=jQuery.extend({},d);if(g===null||g===undefined){d.expires=-1}if(typeof d.expires==="number"){var a=d.expires,f=d.expires=new Date();f.setDate(f.getDate()+a)}g=String(g);return(document.cookie=[encodeURIComponent(c),"=",d.raw?g:encodeURIComponent(g),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join(""))}d=g||{};var e,b=d.raw?function(h){return h}:decodeURIComponent;return(e=new RegExp("(?:^|; )"+encodeURIComponent(c)+"=([^;]*)").exec(document.cookie))?b(e[1]):null};/*
 * jQuery blockUI plugin
 * Version 2.56.0-2013.01.31
 * @requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
(function(){function a(b){b.fn._fadeIn=b.fn.fadeIn;var k=b.noop||function(){};var j=/MSIE/.test(navigator.userAgent);var g=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent);var i=document.documentMode||0;var p=b.isFunction(document.createElement("div").style.setExpression);b.blockUI=function(r){h(window,r)};b.unblockUI=function(r){n(window,r)};b.growlUI=function(v,s,u,t){var r=b('<div class="growlUI"></div>');if(v){r.append("<h1>"+v+"</h1>")}if(s){r.append("<h2>"+s+"</h2>")}if(u===undefined){u=3000}b.blockUI({message:r,fadeIn:700,fadeOut:1000,centerY:false,timeout:u,showOverlay:false,onUnblock:t,css:b.blockUI.defaults.growlCSS})};b.fn.block=function(s){var r=b.extend({},b.blockUI.defaults,s||{});this.each(function(){var t=b(this);if(r.ignoreIfBlocked&&t.data("blockUI.isBlocked")){return}t.unblock({fadeOut:0})});return this.each(function(){if(b.css(this,"position")=="static"){this.style.position="relative";b(this).data("blockUI.static",true)}this.style.zoom=1;h(this,s)})};b.fn.unblock=function(r){return this.each(function(){n(this,r)})};b.blockUI.version=2.56;b.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:0.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:0.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:false};var l=null;var m=[];function h(A,M){var x,P;var E=(A==window);var K=(M&&M.message!==undefined?M.message:undefined);M=b.extend({},b.blockUI.defaults,M||{});if(M.ignoreIfBlocked&&b(A).data("blockUI.isBlocked")){return}M.overlayCSS=b.extend({},b.blockUI.defaults.overlayCSS,M.overlayCSS||{});x=b.extend({},b.blockUI.defaults.css,M.css||{});if(M.onOverlayClick){M.overlayCSS.cursor="pointer"}P=b.extend({},b.blockUI.defaults.themedCSS,M.themedCSS||{});K=K===undefined?M.message:K;if(E&&l){n(window,{fadeOut:0})}if(K&&typeof K!="string"&&(K.parentNode||K.jquery)){var L=K.jquery?K[0]:K;var y={};b(A).data("blockUI.history",y);y.el=L;y.parent=L.parentNode;y.display=L.style.display;y.position=L.style.position;if(y.parent){y.parent.removeChild(L)}}b(A).data("blockUI.onUnblock",M.onUnblock);var R=M.baseZ;var H,I,J,N;if(j||M.forceIframe){H=b('<iframe class="blockUI" style="z-index:'+(R++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+M.iframeSrc+'"></iframe>')}else{H=b('<div class="blockUI" style="display:none"></div>')}if(M.theme){I=b('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(R++)+';display:none"></div>')}else{I=b('<div class="blockUI blockOverlay" style="z-index:'+(R++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>')}if(M.theme&&E){N='<div class="blockUI '+M.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(R+10)+';display:none;position:fixed">';if(M.title){N+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(M.title||"&nbsp;")+"</div>"}N+='<div class="ui-widget-content ui-dialog-content"></div>';N+="</div>"}else{if(M.theme){N='<div class="blockUI '+M.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(R+10)+';display:none;position:absolute">';if(M.title){N+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(M.title||"&nbsp;")+"</div>"}N+='<div class="ui-widget-content ui-dialog-content"></div>';N+="</div>"}else{if(E){N='<div class="blockUI '+M.blockMsgClass+' blockPage" style="z-index:'+(R+10)+';display:none;position:fixed"></div>'}else{N='<div class="blockUI '+M.blockMsgClass+' blockElement" style="z-index:'+(R+10)+';display:none;position:absolute"></div>'}}}J=b(N);if(K){if(M.theme){J.css(P);J.addClass("ui-widget-content")}else{J.css(x)}}if(!M.theme){I.css(M.overlayCSS)}I.css("position",E?"fixed":"absolute");if(j||M.forceIframe){H.css("opacity",0)}var G=[H,I,J],r=E?b("body"):b(A);b.each(G,function(){this.appendTo(r)});if(M.theme&&M.draggable&&b.fn.draggable){J.draggable({handle:".ui-dialog-titlebar",cancel:"li"})}var B=p&&(!b.support.boxModel||b("object,embed",E?null:A).length>0);if(g||B){if(E&&M.allowBodyStretch&&b.support.boxModel){b("html,body").css("height","100%")}if((g||!b.support.boxModel)&&!E){var O=q(A,"borderTopWidth"),F=q(A,"borderLeftWidth");var D=O?"(0 - "+O+")":0;var C=F?"(0 - "+F+")":0}b.each(G,function(z,S){var T=S[0].style;T.position="absolute";if(z<2){if(E){T.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+M.quirksmodeOffsetHack+') + "px"')}else{T.setExpression("height",'this.parentNode.offsetHeight + "px"')}if(E){T.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"')}else{T.setExpression("width",'this.parentNode.offsetWidth + "px"')}if(C){T.setExpression("left",C)}if(D){T.setExpression("top",D)}}else{if(M.centerY){if(E){T.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}T.marginTop=0}else{if(!M.centerY&&E){var U=(M.css&&M.css.top)?parseInt(M.css.top,10):0;var t="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+U+') + "px"';T.setExpression("top",t)}}}})}if(K){if(M.theme){J.find(".ui-widget-content").append(K)}else{J.append(K)}if(K.jquery||K.nodeType){b(K).show()}}if((j||M.forceIframe)&&M.showOverlay){H.show()}if(M.fadeIn){var u=M.onBlock?M.onBlock:k;var v=(M.showOverlay&&!K)?u:k;var w=K?u:k;if(M.showOverlay){I._fadeIn(M.fadeIn,v)}if(K){J._fadeIn(M.fadeIn,w)}}else{if(M.showOverlay){I.show()}if(K){J.show()}if(M.onBlock){M.onBlock()}}c(1,A,M);if(E){l=J[0];m=b(":input:enabled:visible",l);if(M.focusInput){setTimeout(e,20)}}else{d(J[0],M.centerX,M.centerY)}if(M.timeout){var Q=setTimeout(function(){if(E){b.unblockUI(M)}else{b(A).unblock(M)}},M.timeout);b(A).data("blockUI.timeout",Q)}}function n(t,w){var v=(t==window);var r=b(t);var s=r.data("blockUI.history");var x=r.data("blockUI.timeout");if(x){clearTimeout(x);r.removeData("blockUI.timeout")}w=b.extend({},b.blockUI.defaults,w||{});c(0,t,w);if(w.onUnblock===null){w.onUnblock=r.data("blockUI.onUnblock");r.removeData("blockUI.onUnblock")}var u;if(v){u=b("body").children().filter(".blockUI").add("body > .blockUI")}else{u=r.find(">.blockUI")}if(w.cursorReset){if(u.length>1){u[1].style.cursor=w.cursorReset}if(u.length>2){u[2].style.cursor=w.cursorReset}}if(v){l=m=null}if(w.fadeOut){u.fadeOut(w.fadeOut);setTimeout(function(){o(u,s,w,t)},w.fadeOut)}else{o(u,s,w,t)}}function o(x,u,y,v){var r=b(v);x.each(function(w,A){if(this.parentNode){this.parentNode.removeChild(this)}});if(u&&u.el){u.el.style.display=u.display;u.el.style.position=u.position;if(u.parent){u.parent.appendChild(u.el)}r.removeData("blockUI.history")}if(r.data("blockUI.static")){r.css("position","static")}if(typeof y.onUnblock=="function"){y.onUnblock(v,y)}var s=b(document.body),z=s.width(),t=s[0].style.width;s.width(z-1).width(z);s[0].style.width=t}function c(s,t,w){var v=t==window,r=b(t);if(!s&&(v&&!l||!v&&!r.data("blockUI.isBlocked"))){return}r.data("blockUI.isBlocked",s);if(!w.bindEvents||(s&&!w.showOverlay)){return}var u="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";if(s){b(document).bind(u,w,f)}else{b(document).unbind(u,f)}}function f(s){if(s.keyCode&&s.keyCode==9){if(l&&s.data.constrainTabKey){var t=m;var u=!s.shiftKey&&s.target===t[t.length-1];var r=s.shiftKey&&s.target===t[0];if(u||r){setTimeout(function(){e(r)},10);return false}}}var v=s.data;var w=b(s.target);if(w.hasClass("blockOverlay")&&v.onOverlayClick){v.onOverlayClick()}if(w.parents("div."+v.blockMsgClass).length>0){return true}return w.parents().children().filter("div.blockUI").length===0}function e(r){if(!m){return}var s=m[r===true?m.length-1:0];if(s){s.focus()}}function d(r,A,B){var v=r.parentNode,w=r.style;var u=((v.offsetWidth-r.offsetWidth)/2)-q(v,"borderLeftWidth");var z=((v.offsetHeight-r.offsetHeight)/2)-q(v,"borderTopWidth");if(A){w.left=u>0?(u+"px"):"0"}if(B){w.top=z>0?(z+"px"):"0"}}function q(r,s){return parseInt(b.css(r,s),10)||0}}if(typeof define==="function"&&define.amd&&define.amd.jQuery){define(["jquery"],a)}else{a(jQuery)}})();/* Copyright (c) 2010 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.4
 * 
 * Requires: 1.2.2+
 */
(function(a){var c=["DOMMouseScroll","mousewheel"];a.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var d=c.length;d;){this.addEventListener(c[--d],b,false)}}else{this.onmousewheel=b}},teardown:function(){if(this.removeEventListener){for(var d=c.length;d;){this.removeEventListener(c[--d],b,false)}}else{this.onmousewheel=null}}};a.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}});function b(h){var i=h||window.event,d=[].slice.call(arguments,1),e=0,j=true,f=0,g=0;h=a.event.fix(i);h.type="mousewheel";if(h.wheelDelta){e=h.wheelDelta/120}if(h.detail){e=-h.detail/3}g=e;if(i.axis!==undefined&&i.axis===i.HORIZONTAL_AXIS){g=0;f=-1*e}if(i.wheelDeltaY!==undefined){g=i.wheelDeltaY/120}if(i.wheelDeltaX!==undefined){f=-1*i.wheelDeltaX/120}d.unshift(h,e,f,g);return a.event.handle.apply(this,d)}})(jQuery);/* jQuery Validation Plugin - v1.11.0 - 2/4/2013
* https://github.com/jzaefferer/jquery-validation
* Copyright (c) 2013 Jrn Zaefferer; Licensed MIT */
(function(a){a.extend(a.fn,{validate:function(b){if(!this.length){if(b&&b.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(b,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){this.validateDelegate(":submit","click",function(d){if(c.settings.submitHandler){c.submitButton=d.target}if(a(d.target).hasClass("cancel")){c.cancelSubmit=true}});this.submit(function(d){if(c.settings.debug){d.preventDefault()}function e(){var f;if(c.settings.submitHandler){if(c.submitButton){f=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm,d);if(c.submitButton){f.remove()}return false}return true}if(c.cancelSubmit){c.cancelSubmit=false;return e()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return e()}else{c.focusInvalid();return false}})}return c},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var b=true;var c=a(this[0].form).validate();this.each(function(){b&=c.element(this)});return b}},removeAttrs:function(c){var d={},b=this;a.each(c.split(/\s/),function(e,f){d[f]=b.attr(f);b.removeAttr(f)});return d},rules:function(c,b){var e=this[0];if(c){var i=a.data(e.form,"validator").settings;var j=i.rules;var f=a.validator.staticRules(e);switch(c){case"add":a.extend(f,a.validator.normalizeRule(b));j[e.name]=f;if(b.messages){i.messages[e.name]=a.extend(i.messages[e.name],b.messages)}break;case"remove":if(!b){delete j[e.name];return f}var g={};a.each(b.split(/\s/),function(k,l){g[l]=f[l];delete f[l]});return g}}var d=a.validator.normalizeRules(a.extend({},a.validator.classRules(e),a.validator.attributeRules(e),a.validator.dataRules(e),a.validator.staticRules(e)),e);if(d.required){var h=d.required;delete d.required;d=a.extend({required:h},d)}return d}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(c,b){this.settings=a.extend(true,{},a.validator.defaults,c);this.currentForm=b;this.init()};a.validator.format=function(c,b){if(arguments.length===1){return function(){var d=a.makeArray(arguments);d.unshift(c);return a.validator.format.apply(this,d)}}if(arguments.length>2&&b.constructor!==Array){b=a.makeArray(arguments).slice(1)}if(b.constructor!==Array){b=[b]}a.each(b,function(d,e){c=c.replace(new RegExp("\\{"+d+"\\}","g"),function(){return e})});return c};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b,c){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b,c){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b,c){if(c.which===9&&this.elementValue(b)===""){return}else{if(b.name in this.submitted||b===this.lastElement){this.element(b)}}},onclick:function(b,c){if(b.name in this.submitted){this.element(b)}else{if(b.parentNode.name in this.submitted){this.element(b.parentNode)}}},highlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).addClass(c).removeClass(d)}else{a(b).addClass(c).removeClass(d)}},unhighlight:function(b,c,d){if(b.type==="radio"){this.findByName(b.name).removeClass(c).addClass(d)}else{a(b).removeClass(c).addClass(d)}}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=(this.groups={});a.each(this.settings.groups,function(e,f){if(typeof f==="string"){f=f.split(/\s/)}a.each(f,function(g,h){c[h]=e})});var d=this.settings.rules;a.each(d,function(e,f){d[e]=a.validator.normalizeRule(f)});function b(e){var g=a.data(this[0].form,"validator"),f="on"+e.type.replace(/^validate/,"");if(g.settings[f]){g.settings[f].call(g,this[0],e)}}a(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b);if(this.settings.invalidHandler){a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);if(!this.valid()){a(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var c=0,b=(this.currentElements=this.elements());b[c];c++){this.check(b[c])}return this.valid()},element:function(b){b=this.validationTargetFor(this.clean(b));this.lastElement=b;this.prepareElement(b);this.currentElements=a(b);var c=this.check(b)!==false;if(c){delete this.invalid[b.name]}else{this.invalid[b.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return c},showErrors:function(b){if(b){a.extend(this.errorMap,b);this.errorList=[];for(var c in b){this.errorList.push({message:b[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(d){return !(d.name in b)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if(a.fn.resetForm){a(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(d){var b=0;for(var c in d){b++}return b},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name===b.name}).length===1&&b},elements:function(){var c=this,b={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&c.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in b||!c.objectLength(a(this).rules())){return false}b[this.name]=true;return true})},clean:function(b){return a(b)[0]},errors:function(){var b=this.settings.errorClass.replace(" ",".");return a(this.settings.errorElement+"."+b,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},elementValue:function(b){var c=a(b).attr("type"),d=a(b).val();if(c==="radio"||c==="checkbox"){return a("input[name='"+a(b).attr("name")+"']:checked").val()}if(typeof d==="string"){return d.replace(/\r/g,"")}return d},check:function(d){d=this.validationTargetFor(this.clean(d));var i=a(d).rules();var b=false;var j=this.elementValue(d);var g;for(var f in i){var h={method:f,parameters:i[f]};try{g=a.validator.methods[f].call(this,j,d,h.parameters);if(g==="dependency-mismatch"){b=true;continue}b=false;if(g==="pending"){this.toHide=this.toHide.not(this.errorsFor(d));return}if(!g){this.formatAndAdd(d,h);return false}}catch(c){if(this.settings.debug&&window.console){console.log("Exception occured when checking element "+d.id+", check the '"+h.method+"' method.",c)}throw c}}if(b){return}if(this.objectLength(i)){this.successList.push(d)}return true},customDataMessage:function(b,c){return a(b).data("msg-"+c.toLowerCase())||(b.attributes&&a(b).attr("data-msg-"+c.toLowerCase()))},customMessage:function(d,c){var b=this.settings.messages[d];return b&&(b.constructor===String?b:b[c])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}return undefined},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customDataMessage(b,c),!this.settings.ignoreTitle&&b.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(b,d){var c=this.defaultMessage(b,d.method),e=/\$?\{(\d+)\}/g;if(typeof c==="function"){c=c.call(this,d.parameters,b)}else{if(e.test(c)){c=a.validator.format(c.replace(e,"{$1}"),d.parameters)}}this.errorList.push({message:c,element:b});this.errorMap[b.name]=c;this.submitted[b.name]=c},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){var d,b;for(d=0;this.errorList[d];d++){var c=this.errorList[d];if(this.settings.highlight){this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(c.element,c.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(d=0;this.successList[d];d++){this.showLabel(this.successList[d])}}if(this.settings.unhighlight){for(d=0,b=this.validElements();b[d];d++){this.settings.unhighlight.call(this,b[d],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,d){var c=this.errorsFor(b);if(c.length){c.removeClass(this.settings.validClass).addClass(this.settings.errorClass);c.html(d)}else{c=a("<"+this.settings.errorElement+">").attr("for",this.idOrName(b)).addClass(this.settings.errorClass).html(d||"");if(this.settings.wrapper){c=c.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(c).length){if(this.settings.errorPlacement){this.settings.errorPlacement(c,a(b))}else{c.insertAfter(b)}}}if(!d&&this.settings.success){c.text("");if(typeof this.settings.success==="string"){c.addClass(this.settings.success)}else{this.settings.success(c,b)}}this.toShow=this.toShow.add(c)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")===c})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return(/radio|checkbox/i).test(b.type)},findByName:function(b){return a(this.currentForm).find("[name='"+b+"']")},getLength:function(c,b){switch(b.nodeName.toLowerCase()){case"select":return a("option:selected",b).length;case"input":if(this.checkable(b)){return this.findByName(b.name).filter(":checked").length}}return c.length},depend:function(c,b){return this.dependTypes[typeof c]?this.dependTypes[typeof c](c,b):true},dependTypes:{"boolean":function(c,b){return c},string:function(c,b){return !!a(c,b.form).length},"function":function(c,b){return c(b)}},optional:function(b){var c=this.elementValue(b);return !a.validator.methods.required.call(this,c,b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(b,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[b.name];if(c&&this.pendingRequest===0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest===0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(b,c){if(b.constructor===String){this.classRuleSettings[b]=c}else{a.extend(this.classRuleSettings,b)}},classRules:function(c){var d={};var b=a(c).attr("class");if(b){a.each(b.split(" "),function(){if(this in a.validator.classRuleSettings){a.extend(d,a.validator.classRuleSettings[this])}})}return d},attributeRules:function(c){var e={};var b=a(c);for(var d in a.validator.methods){var f;if(d==="required"){f=b.get(0).getAttribute(d);if(f===""){f=true}f=!!f}else{f=b.attr(d)}if(f){e[d]=f}else{if(b[0].getAttribute("type")===d){e[d]=true}}}if(e.maxlength&&/-1|2147483647|524288/.test(e.maxlength)){delete e.maxlength}return e},dataRules:function(c){var d,f,e={},b=a(c);for(d in a.validator.methods){f=b.data("rule-"+d.toLowerCase());if(f!==undefined){e[d]=f}}return e},staticRules:function(b){var c={};var d=a.data(b.form,"validator");if(d.settings.rules){c=a.validator.normalizeRule(d.settings.rules[b.name])||{}}return c},normalizeRules:function(c,b){a.each(c,function(e,f){if(f===false){delete c[e];return}if(f.param||f.depends){var d=true;switch(typeof f.depends){case"string":d=!!a(f.depends,b.form).length;break;case"function":d=f.depends.call(b,b);break}if(d){c[e]=f.param!==undefined?f.param:true}else{delete c[e]}}});a.each(c,function(e,d){c[e]=a.isFunction(d)?d(b):d});a.each(["minlength","maxlength"],function(){if(c[this]){c[this]=Number(c[this])}});a.each(["rangelength"],function(){var d;if(c[this]){if(a.isArray(c[this])){c[this]=[Number(c[this][0]),Number(c[this][1])]}else{if(typeof c[this]==="string"){d=c[this].split(/[\s,]+/);c[this]=[Number(d[0]),Number(d[1])]}}}});if(a.validator.autoCreateRanges){if(c.min&&c.max){c.range=[c.min,c.max];delete c.min;delete c.max}if(c.minlength&&c.maxlength){c.rangelength=[c.minlength,c.maxlength];delete c.minlength;delete c.maxlength}}return c},normalizeRule:function(b){if(typeof b==="string"){var c={};a.each(b.split(/\s/),function(){c[this]=true});b=c}return b},addMethod:function(d,c,b){a.validator.methods[d]=c;a.validator.messages[d]=b!==undefined?b:a.validator.messages[d];if(c.length<3){a.validator.addClassRules(d,a.validator.normalizeRule(d))}},methods:{required:function(e,b,c){if(!this.depend(c,b)){return"dependency-mismatch"}if(b.nodeName.toLowerCase()==="select"){var d=a(b).val();return d&&d.length>0}if(this.checkable(b)){return this.getLength(e,b)>0}return a.trim(e).length>0},remote:function(g,c,d){if(this.optional(c)){return"dependency-mismatch"}var e=this.previousValue(c);if(!this.settings.messages[c.name]){this.settings.messages[c.name]={}}e.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=e.message;d=typeof d==="string"&&{url:d}||d;if(e.old===g){return e.valid}e.old=g;var f=this;this.startRequest(c);var b={};b[c.name]=g;a.ajax(a.extend(true,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:b,success:function(j){f.settings.messages[c.name].remote=e.originalMessage;var l=j===true||j==="true";if(l){var k=f.formSubmitted;f.prepareElement(c);f.formSubmitted=k;f.successList.push(c);delete f.invalid[c.name];f.showErrors()}else{var h={};var i=j||f.defaultMessage(c,"remote");h[c.name]=e.message=a.isFunction(i)?i(g):i;f.invalid[c.name]=true;f.showErrors(h)}e.valid=l;f.stopRequest(c,l)}},d));return"pending"},minlength:function(e,b,d){var c=a.isArray(e)?e.length:this.getLength(a.trim(e),b);return this.optional(b)||c>=d},maxlength:function(e,b,d){var c=a.isArray(e)?e.length:this.getLength(a.trim(e),b);return this.optional(b)||c<=d},rangelength:function(e,b,d){var c=a.isArray(e)?e.length:this.getLength(a.trim(e),b);return this.optional(b)||(c>=d[0]&&c<=d[1])},min:function(d,b,c){return this.optional(b)||d>=c},max:function(d,b,c){return this.optional(b)||d<=c},range:function(d,b,c){return this.optional(b)||(d>=c[0]&&d<=c[1])},email:function(c,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(c)},url:function(c,b){return this.optional(b)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(c)},date:function(c,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(c).toString())},dateISO:function(c,b){return this.optional(b)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(c)},number:function(c,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(c)},digits:function(c,b){return this.optional(b)||/^\d+$/.test(c)},creditcard:function(h,d){if(this.optional(d)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(h)){return false}var f=0,g=0,b=false;h=h.replace(/\D/g,"");for(var e=h.length-1;e>=0;e--){var c=h.charAt(e);g=parseInt(c,10);if(b){if((g*=2)>9){g-=9}}f+=g;b=!b}return(f%10)===0},equalTo:function(e,b,c){var d=a(c);if(this.settings.onfocusout){d.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(b).valid()})}return e===d.val()}}});a.format=a.validator.format}(jQuery));(function(a){var c={};if(a.ajaxPrefilter){a.ajaxPrefilter(function(f,d,g){var e=f.port;if(f.mode==="abort"){if(c[e]){c[e].abort()}c[e]=g}})}else{var b=a.ajax;a.ajax=function(f){var d=("mode" in f?f:a.ajaxSettings).mode,e=("port" in f?f:a.ajaxSettings).port;if(d==="abort"){if(c[e]){c[e].abort()}return(c[e]=b.apply(this,arguments))}return b.apply(this,arguments)}}}(jQuery));(function(a){a.extend(a.fn,{validateDelegate:function(b,d,c){return this.bind(d,function(e){var f=a(e.target);if(f.is(b)){return c.apply(f,arguments)}})}})}(jQuery));/*
 * Globalize
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(y,x){var k,q,r,s,t,b,c,e,l,m,n,u,v,w,z,a,d,f,g,j,h,i,o,p;k=function(A){return new k.prototype.init(A)};if(typeof require!=="undefined"&&typeof exports!=="undefined"&&typeof module!=="undefined"){module.exports=k}else{y.Globalize=k}k.cultures={};k.prototype={constructor:k,init:function(A){this.cultures=k.cultures;this.cultureSelector=A;return this}};k.prototype.init.prototype=k.prototype;k.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:false,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-","NaN":"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy\u0027-\u0027MM\u0027-\u0027dd\u0027T\u0027HH\u0027:\u0027mm\u0027:\u0027ss"}}},messages:{}};k.cultures["default"].calendar=k.cultures["default"].calendars.standard;k.cultures.en=k.cultures["default"];k.cultureSelector="en";q=/^0x[a-f0-9]+$/i;r=/^[+\-]?infinity$/i;s=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;t=/^\s+|\s+$/g;b=function(A,C){if(A.indexOf){return A.indexOf(C)}for(var B=0,D=A.length;B<D;B++){if(A[B]===C){return B}}return -1};c=function(B,A){return B.substr(B.length-A.length)===A};e=function(){var H,G,I,B,C,A,J=arguments[0]||{},E=1,F=arguments.length,D=false;if(typeof J==="boolean"){D=J;J=arguments[1]||{};E=2}if(typeof J!=="object"&&!m(J)){J={}}for(;E<F;E++){if((H=arguments[E])!=null){for(G in H){I=J[G];B=H[G];if(J===B){continue}if(D&&B&&(n(B)||(C=l(B)))){if(C){C=false;A=I&&l(I)?I:[]}else{A=I&&n(I)?I:{}}J[G]=e(D,A,B)}else{if(B!==x){J[G]=B}}}}}return J};l=Array.isArray||function(A){return Object.prototype.toString.call(A)==="[object Array]"};m=function(A){return Object.prototype.toString.call(A)==="[object Function]"};n=function(A){return Object.prototype.toString.call(A)==="[object Object]"};u=function(B,A){return B.indexOf(A)===0};v=function(A){return(A+"").replace(t,"")};w=function(A){if(isNaN(A)){return NaN}return Math[A<0?"ceil":"floor"](A)};z=function(D,A,C){var B;for(B=D.length;B<A;B+=1){D=(C?("0"+D):(D+"0"))}return D};a=function(E,G){var F=0,B=false;for(var C=0,D=E.length;C<D;C++){var A=E.charAt(C);switch(A){case"'":if(B){G.push("'")}else{F++}B=false;break;case"\\":if(B){G.push("\\")}B=!B;break;default:G.push(A);B=false;break}}return F};d=function(A,B){B=B||"F";var D,E=A.patterns,C=B.length;if(C===1){D=E[B];if(!D){throw"Invalid date format string '"+B+"'."}B=D}else{if(C===2&&B.charAt(0)==="%"){B=B.charAt(1)}}return B};f=function(aa,M,G){var B=G.calendar,E=B.convert,X;if(!M||!M.length||M==="i"){if(G&&G.name.length){if(E){X=f(aa,B.patterns.F,G)}else{var K=new Date(aa.getTime()),J=h(aa,B.eras);K.setFullYear(i(aa,B,J));X=K.toLocaleString()}}else{X=aa.toString()}return X}var L=B.eras,Y=M==="s";M=d(B,M);X=[];var Q,ab=["0","00","000"],N,C,I=/([^d]|^)(d|dd)([^d]|$)/g,W=0,Z=j(),F;function T(ad,ac){var ae,af=ad+"";if(ac>1&&af.length<ac){ae=(ab[ac-2]+af);return ae.substr(ae.length-ac,ac)}else{ae=af}return ae}function P(){if(N||C){return N}N=I.test(M);C=true;return N}function O(ac,ad){if(F){return F[ad]}switch(ad){case 0:return ac.getFullYear();case 1:return ac.getMonth();case 2:return ac.getDate();default:throw"Invalid part value "+ad}}if(!Y&&E){F=E.fromGregorian(aa)}for(;;){var R=Z.lastIndex,A=Z.exec(M);var V=M.slice(R,A?A.index:M.length);W+=a(V,X);if(!A){break}if(W%2){X.push(A[0]);continue}var H=A[0],D=H.length;switch(H){case"ddd":case"dddd":var S=(D===3)?B.days.namesAbbr:B.days.names;X.push(S[aa.getDay()]);break;case"d":case"dd":N=true;X.push(T(O(aa,2),D));break;case"MMM":case"MMMM":var U=O(aa,1);X.push((B.monthsGenitive&&P())?(B.monthsGenitive[D===3?"namesAbbr":"names"][U]):(B.months[D===3?"namesAbbr":"names"][U]));break;case"M":case"MM":X.push(T(O(aa,1)+1,D));break;case"y":case"yy":case"yyyy":U=F?F[0]:i(aa,B,h(aa,L),Y);if(D<4){U=U%100}X.push(T(U,D));break;case"h":case"hh":Q=aa.getHours()%12;if(Q===0){Q=12}X.push(T(Q,D));break;case"H":case"HH":X.push(T(aa.getHours(),D));break;case"m":case"mm":X.push(T(aa.getMinutes(),D));break;case"s":case"ss":X.push(T(aa.getSeconds(),D));break;case"t":case"tt":U=aa.getHours()<12?(B.AM?B.AM[0]:" "):(B.PM?B.PM[0]:" ");X.push(D===1?U.charAt(0):U);break;case"f":case"ff":case"fff":X.push(T(aa.getMilliseconds(),3).substr(0,D));break;case"z":case"zz":Q=aa.getTimezoneOffset()/60;X.push((Q<=0?"+":"-")+T(Math.floor(Math.abs(Q)),D));break;case"zzz":Q=aa.getTimezoneOffset()/60;X.push((Q<=0?"+":"-")+T(Math.floor(Math.abs(Q)),2)+":"+T(Math.abs(aa.getTimezoneOffset()%60),2));break;case"g":case"gg":if(B.eras){X.push(B.eras[h(aa,L)].name)}break;case"/":X.push(B["/"]);break;default:throw"Invalid date format pattern '"+H+"'."}}return X.join("")};(function(){var A;A=function(H,J,F){var G=F.groupSizes,C=G[0],B=1,E=Math.pow(10,J),M=Math.round(H*E)/E;if(!isFinite(M)){M=H}H=M;var I=H+"",L="",O=I.split(/e/i),D=O.length>1?parseInt(O[1],10):0;I=O[0];O=I.split(".");I=O[0];L=O.length>1?O[1]:"";if(D>0){L=z(L,D,false);I+=L.slice(0,D);L=L.substr(D)}else{if(D<0){D=-D;I=z(I,D+1,true);L=I.slice(-D,I.length)+L;I=I.slice(0,-D)}}if(J>0){L=F["."]+((L.length>J)?L.slice(0,J):z(L,J))}else{L=""}var P=I.length-1,N=F[","],K="";while(P>=0){if(C===0||C>P){return I.slice(0,P+1)+(K.length?(N+K+L):L)}K=I.slice(P-C+1,P+1)+(K.length?(N+K):"");P-=C;if(B<G.length){C=G[B];B++}}return I.slice(0,P+1)+N+K+L};g=function(N,E,C){if(!isFinite(N)){if(N===Infinity){return C.numberFormat.positiveInfinity}if(N===-Infinity){return C.numberFormat.negativeInfinity}return C.numberFormat.NaN}if(!E||E==="i"){return C.name.length?N.toLocaleString():N.toString()}E=E||"D";var H=C.numberFormat,I=Math.abs(N),L=-1,J;if(E.length>1){L=parseInt(E.slice(1),10)}var D=E.charAt(0).toUpperCase(),F;switch(D){case"D":J="n";I=w(I);if(L!==-1){I=z(""+I,L,true)}if(N<0){I="-"+I}break;case"N":F=H;case"C":F=F||H.currency;case"P":F=F||H.percent;J=N<0?F.pattern[0]:(F.pattern[1]||"n");if(L===-1){L=F.decimals}I=A(I*(D==="P"?100:1),L,F);break;default:throw"Bad number format specifier: "+D}var K=/n|\$|-|%/g,M="";for(;;){var G=K.lastIndex,B=K.exec(J);M+=J.slice(G,B?B.index:J.length);if(!B){break}switch(B[0]){case"n":M+=I;break;case"$":M+=H.currency.symbol;break;case"-":if(/[1-9]/.test(I)){M+=H["-"]}break;case"%":M+=H.percent.symbol;break}}return M}}());j=function(){return(/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g)};h=function(A,B){if(!B){return 0}var E,F=A.getTime();for(var C=0,D=B.length;C<D;C++){E=B[C].start;if(E===null||F>=E){return C}}return 0};i=function(B,A,C,D){var E=B.getFullYear();if(!D&&A.eras){E-=A.eras[C].offset}return E};(function(){var A,B,C,D,E,F,G;A=function(H,M){if(M<100){var K=new Date(),J=h(K),I=i(K,H,J),L=H.twoDigitYearMax;L=typeof L==="string"?new Date().getFullYear()%100+parseInt(L,10):L;M+=I-(I%100);if(M>L){M-=100}}return M};B=function(I,M,H){var K,J=I.days,L=I._upperDays;if(!L){I._upperDays=L=[G(J.names),G(J.namesAbbr),G(J.namesShort)]}M=F(M);if(H){K=b(L[1],M);if(K===-1){K=b(L[2],M)}}else{K=b(L[0],M)}return K};C=function(I,O,H){var K=I.months,L=I.monthsGenitive||I.months,M=I._upperMonths,N=I._upperMonthsGen;if(!M){I._upperMonths=M=[G(K.names),G(K.namesAbbr)];I._upperMonthsGen=N=[G(L.names),G(L.namesAbbr)]}O=F(O);var J=b(H?M[1]:M[0],O);if(J<0){J=b(H?N[1]:N[0],O)}return J};D=function(I,K){var T=I._parseRegExp;if(!T){I._parseRegExp=T={}}else{var U=T[K];if(U){return U}}var J=d(I,K).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),V=["^"],L=[],M=0,S=0,X=j(),P;while((P=X.exec(J))!==null){var R=J.slice(M,P.index);M=X.lastIndex;S+=a(R,V);if(S%2){V.push(P[0]);continue}var O=P[0],N=O.length,H;switch(O){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":H="(\\D+)";break;case"tt":case"t":H="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":H="(\\d{"+N+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":H="(\\d\\d?)";break;case"zzz":H="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":H="([+-]?\\d\\d?)";break;case"/":H="(\\/)";break;default:throw"Invalid date format pattern '"+O+"'."}if(H){V.push(H)}L.push(P[0])}a(J.slice(M),V);V.push("$");var W=V.join("").replace(/\s+/g,"\\s+"),Q={regExp:W,groups:L};return T[K]=Q};E=function(J,I,H){return J<I||J>H};F=function(H){return H.split("\u00A0").join(" ").toUpperCase()};G=function(H){var K=[];for(var I=0,J=H.length;I<J;I++){K[I]=F(H[I])}return K};o=function(am,R,L){am=v(am);var I=L.calendar,ah=D(I,R),Z=new RegExp(ah.regExp).exec(am);if(Z===null){return null}var S=ah.groups,P=null,ao=null,ae=null,N=null,an=null,T=0,U,ac=0,ak=0,af=0,al=null,ai=false;for(var W=0,X=S.length;W<X;W++){var aa=Z[W+1];if(aa){var M=S[W],J=M.length,ab=parseInt(aa,10);switch(M){case"dd":case"d":N=ab;if(E(N,1,31)){return null}break;case"MMM":case"MMMM":ae=C(I,aa,J===3);if(E(ae,0,11)){return null}break;case"M":case"MM":ae=ab-1;if(E(ae,0,11)){return null}break;case"y":case"yy":case"yyyy":ao=J<4?A(I,ab):ab;if(E(ao,0,9999)){return null}break;case"h":case"hh":T=ab;if(T===12){T=0}if(E(T,0,11)){return null}break;case"H":case"HH":T=ab;if(E(T,0,23)){return null}break;case"m":case"mm":ac=ab;if(E(ac,0,59)){return null}break;case"s":case"ss":ak=ab;if(E(ak,0,59)){return null}break;case"tt":case"t":ai=I.PM&&(aa===I.PM[0]||aa===I.PM[1]||aa===I.PM[2]);if(!ai&&(!I.AM||(aa!==I.AM[0]&&aa!==I.AM[1]&&aa!==I.AM[2]))){return null}break;case"f":case"ff":case"fff":af=ab*Math.pow(10,3-J);if(E(af,0,999)){return null}break;case"ddd":case"dddd":an=B(I,aa,J===3);if(E(an,0,6)){return null}break;case"zzz":var ag=aa.split(/:/);if(ag.length!==2){return null}U=parseInt(ag[0],10);if(E(U,-12,13)){return null}var ad=parseInt(ag[1],10);if(E(ad,0,59)){return null}al=(U*60)+(u(aa,"-")?-ad:ad);break;case"z":case"zz":U=ab;if(E(U,-12,13)){return null}al=U*60;break;case"g":case"gg":var Q=aa;if(!Q||!I.eras){return null}Q=v(Q.toLowerCase());for(var V=0,Y=I.eras.length;V<Y;V++){if(Q===I.eras[V].name.toLowerCase()){P=V;break}}if(P===null){return null}break}}}var aj=new Date(),O,K=I.convert;O=K?K.fromGregorian(aj)[0]:aj.getFullYear();if(ao===null){ao=O}else{if(I.eras){ao+=I.eras[(P||0)].offset}}if(ae===null){ae=0}if(N===null){N=1}if(K){aj=K.toGregorian(ao,ae,N);if(aj===null){return null}}else{aj.setFullYear(ao,ae,N);if(aj.getDate()!==N){return null}if(an!==null&&aj.getDay()!==an){return null}}if(ai&&T<12){T+=12}aj.setHours(T,ac,ak,af);if(al!==null){var H=aj.getMinutes()-(al+aj.getTimezoneOffset());aj.setHours(aj.getHours()+parseInt(H/60,10),H%60)}return aj}}());p=function(F,C,B){var A=C["-"],D=C["+"],E;switch(B){case"n -":A=" "+A;D=" "+D;case"n-":if(c(F,A)){E=["-",F.substr(0,F.length-A.length)]}else{if(c(F,D)){E=["+",F.substr(0,F.length-D.length)]}}break;case"- n":A+=" ";D+=" ";case"-n":if(u(F,A)){E=["-",F.substr(A.length)]}else{if(u(F,D)){E=["+",F.substr(D.length)]}}break;case"(n)":if(u(F,"(")&&c(F,")")){E=["-",F.substr(1,F.length-2)]}break}return E||["",F]};k.prototype.findClosestCulture=function(A){return k.findClosestCulture.call(this,A)};k.prototype.format=function(C,B,A){return k.format.call(this,C,B,A)};k.prototype.localize=function(B,A){return k.localize.call(this,B,A)};k.prototype.parseInt=function(C,B,A){return k.parseInt.call(this,C,B,A)};k.prototype.parseFloat=function(C,B,A){return k.parseFloat.call(this,C,B,A)};k.prototype.culture=function(A){return k.culture.call(this,A)};k.addCultureInfo=function(C,B,D){var A={},E=false;if(typeof C!=="string"){D=C;C=this.culture().name;A=this.cultures[C]}else{if(typeof B!=="string"){D=B;E=(this.cultures[C]==null);A=this.cultures[C]||this.cultures["default"]}else{E=true;A=this.cultures[B]}}this.cultures[C]=e(true,{},A,D);if(E){this.cultures[C].calendar=this.cultures[C].calendars.standard}};k.findClosestCulture=function(J){var I;if(!J){return this.findClosestCulture(this.cultureSelector)||this.cultures["default"]}if(typeof J==="string"){J=J.split(",")}if(l(J)){var G,C=this.cultures,H=J,D,F=H.length,M=[];for(D=0;D<F;D++){J=v(H[D]);var L,K=J.split(";");G=v(K[0]);if(K.length===1){L=1}else{J=v(K[1]);if(J.indexOf("q=")===0){J=J.substr(2);L=parseFloat(J);L=isNaN(L)?0:L}else{L=1}}M.push({lang:G,pri:L})}M.sort(function(N,O){if(N.pri<O.pri){return 1}else{if(N.pri>O.pri){return -1}}return 0});for(D=0;D<F;D++){G=M[D].lang;I=C[G];if(I){return I}}for(D=0;D<F;D++){G=M[D].lang;do{var E=G.lastIndexOf("-");if(E===-1){break}G=G.substr(0,E);I=C[G];if(I){return I}}while(1)}for(D=0;D<F;D++){G=M[D].lang;for(var B in C){var A=C[B];if(A.language===G){return A}}}}else{if(typeof J==="object"){return J}}return I||null};k.format=function(D,C,B){var A=this.findClosestCulture(B);if(D instanceof Date){D=f(D,C,A)}else{if(typeof D==="number"){D=g(D,C,A)}}return D};k.localize=function(B,A){return this.findClosestCulture(A).messages[B]||this.cultures["default"].messages[B]};k.parseDate=function(I,D,A){A=this.findClosestCulture(A);var B,H,G;if(D){if(typeof D==="string"){D=[D]}if(D.length){for(var E=0,F=D.length;E<F;E++){var C=D[E];if(C){B=o(I,C,A);if(B){break}}}}}else{G=A.calendar.patterns;for(H in G){B=o(I,G[H],A);if(B){break}}}return B||null};k.parseInt=function(C,B,A){return w(k.parseFloat(C,B,A))};k.parseFloat=function(T,P,C){if(typeof P!=="number"){C=P;P=10}var B=this.findClosestCulture(C);var Q=NaN,M=B.numberFormat;if(T.indexOf(B.numberFormat.currency.symbol)>-1){T=T.replace(B.numberFormat.currency.symbol,"");T=T.replace(B.numberFormat.currency["."],B.numberFormat["."])}if(T.indexOf(B.numberFormat.percent.symbol)>-1){T=T.replace(B.numberFormat.percent.symbol,"")}T=T.replace(/ /g,"");if(r.test(T)){Q=parseFloat(T)}else{if(!P&&q.test(T)){Q=parseInt(T,16)}else{var S=p(T,M,M.pattern[0]),R=S[0],N=S[1];if(R===""&&M.pattern[0]!=="(n)"){S=p(T,M,"(n)");R=S[0];N=S[1]}if(R===""&&M.pattern[0]!=="-n"){S=p(T,M,"-n");R=S[0];N=S[1]}R=R||"+";var F,K,G=N.indexOf("e");if(G<0){G=N.indexOf("E")}if(G<0){K=N;F=null}else{K=N.substr(0,G);F=N.substr(G+1)}var L,I,E=M["."],D=K.indexOf(E);if(D<0){L=K;I=null}else{L=K.substr(0,D);I=K.substr(D+E.length)}var J=M[","];L=L.split(J).join("");var A=J.replace(/\u00A0/g," ");if(J!==A){L=L.split(A).join("")}var O=R+L;if(I!==null){O+="."+I}if(F!==null){var H=p(F,M,"-n");O+="e"+(H[0]||"+")+H[1]}if(s.test(O)){Q=parseFloat(O)}}}return Q};k.culture=function(A){if(typeof A!=="undefined"){this.cultureSelector=A}return this.findClosestCulture(A)||this.cultures["default"]}}(this));/*
** An extension to the jQuery Validation Plugin which makes it use Globalize.js for number and date parsing 
** Copyright (c) 2013 John Reilly
*/
(function(a,b){var c={min:a.validator.methods.min,max:a.validator.methods.max,range:a.validator.methods.range};a.validator.methods.number=function(f,d){var e=b.parseFloat(f);return this.optional(d)||(a.isNumeric(e))};a.validator.methods.date=function(f,d){var e=b.parseDate(f);return this.optional(d)||(e)};a.validator.methods.min=function(g,d,e){var f=b.parseFloat(g);return c.min.call(this,f,d,e)};a.validator.methods.max=function(g,d,e){var f=b.parseFloat(g);return c.max.call(this,f,d,e)};a.validator.methods.range=function(g,d,e){var f=b.parseFloat(g);return c.range.call(this,f,d,e)}}(jQuery,Globalize));jQuery.fn.sortElements=(function(){var a=[].sort;return function(b,c){c=c||function(){return this};var d=this.map(function(){var g=c.call(this),f=g.parentNode,e=f.insertBefore(document.createTextNode(""),g.nextSibling);return function(){if(f===this){throw new Error("You can't sort elements if any one is a descendant of another.")}f.insertBefore(this,e);f.removeChild(e)}});return a.call(this,b).each(function(e){d[e].call(c.call(this))})}})();(function(a){a.fn.tabby=function(f){var g=a.extend({},a.fn.tabby.defaults,f);var h=a.fn.tabby.pressed;return this.each(function(){$this=a(this);var i=a.meta?a.extend({},g,$this.data()):g;$this.bind("keydown",function(j){var k=a.fn.tabby.catch_kc(j);if(16==k){h.shft=true}if(17==k){h.ctrl=true;setTimeout("$.fn.tabby.pressed.ctrl = false;",1000)}if(18==k){h.alt=true;setTimeout("$.fn.tabby.pressed.alt = false;",1000)}if(9==k&&!h.ctrl&&!h.alt){j.preventDefault;h.last=k;setTimeout("$.fn.tabby.pressed.last = null;",0);e(a(j.target).get(0),h.shft,i);return false}}).bind("keyup",function(j){if(16==a.fn.tabby.catch_kc(j)){h.shft=false}}).bind("blur",function(j){if(9==h.last){a(j.target).one("focus",function(k){h.last=null}).get(0).focus()}})})};a.fn.tabby.catch_kc=function(f){return f.keyCode?f.keyCode:f.charCode?f.charCode:f.which};a.fn.tabby.pressed={shft:false,ctrl:false,alt:false,last:null};function b(f){if(window.console&&window.console.log){window.console.log("textarea count: "+f.size())}}function e(f,i,g){var h=f.scrollTop;if(f.setSelectionRange){c(f,i,g)}else{if(document.selection){d(f,i,g)}}f.scrollTop=h}a.fn.tabby.defaults={tabString:String.fromCharCode(9)};function c(p,t,q){var v=p.selectionStart;var g=p.selectionEnd;if(v==g){if(t){if("\t"==p.value.substring(v-q.tabString.length,v)){p.value=p.value.substring(0,v-q.tabString.length)+p.value.substring(v);p.focus();p.setSelectionRange(v-q.tabString.length,v-q.tabString.length)}else{if("\t"==p.value.substring(v,v+q.tabString.length)){p.value=p.value.substring(0,v)+p.value.substring(v+q.tabString.length);p.focus();p.setSelectionRange(v,v)}}}else{p.value=p.value.substring(0,v)+q.tabString+p.value.substring(v);p.focus();p.setSelectionRange(v+q.tabString.length,v+q.tabString.length)}}else{var k=p.value.split("\n");var j=new Array();var u=0;var f=0;var s=false;for(var h in k){f=u+k[h].length;j.push({start:u,end:f,selected:(u<=v&&f>v)||(f>=g&&u<g)||(u>v&&f<g)});u=f+1}var l=0;for(var h in j){if(j[h].selected){var r=j[h].start+l;if(t&&q.tabString==p.value.substring(r,r+q.tabString.length)){p.value=p.value.substring(0,r)+p.value.substring(r+q.tabString.length);l-=q.tabString.length}else{if(!t){p.value=p.value.substring(0,r)+q.tabString+p.value.substring(r);l+=q.tabString.length}}}}p.focus();var n=v+((l>0)?q.tabString.length:(l<0)?-q.tabString.length:0);var m=g+l;p.setSelectionRange(n,m)}}function d(t,z,u){var v=document.selection.createRange();if(t==v.parentElement()){if(""==v.text){if(z){var m=v.getBookmark();v.moveStart("character",-u.tabString.length);if(u.tabString==v.text){v.text=""}else{v.moveToBookmark(m);v.moveEnd("character",u.tabString.length);if(u.tabString==v.text){v.text=""}}v.collapse(true);v.select()}else{v.text=u.tabString;v.collapse(false);v.select()}}else{var y=v.text;var x=y.length;var w=y.split("\r\n");var k=document.body.createTextRange();k.moveToElementText(t);k.setEndPoint("EndToStart",v);var l=k.text;var h=l.split("\r\n");var j=l.length;var f=document.body.createTextRange();f.moveToElementText(t);f.setEndPoint("StartToEnd",v);var g=f.text;var p=document.body.createTextRange();p.moveToElementText(t);p.setEndPoint("StartToEnd",k);var q=p.text;var n=a(t).html();a("#r3").text(j+" + "+x+" + "+g.length+" = "+n.length);if((j+q.length)<n.length){h.push("");j+=2;if(z&&u.tabString==w[0].substring(0,u.tabString.length)){w[0]=w[0].substring(u.tabString.length)}else{if(!z){w[0]=u.tabString+w[0]}}}else{if(z&&u.tabString==h[h.length-1].substring(0,u.tabString.length)){h[h.length-1]=h[h.length-1].substring(u.tabString.length)}else{if(!z){h[h.length-1]=u.tabString+h[h.length-1]}}}for(var r=1;r<w.length;r++){if(z&&u.tabString==w[r].substring(0,u.tabString.length)){w[r]=w[r].substring(u.tabString.length)}else{if(!z){w[r]=u.tabString+w[r]}}}if(1==h.length&&0==j){if(z&&u.tabString==w[0].substring(0,u.tabString.length)){w[0]=w[0].substring(u.tabString.length)}else{if(!z){w[0]=u.tabString+w[0]}}}if((j+x+g.length)<n.length){w.push("");x+=2}k.text=h.join("\r\n");v.text=w.join("\r\n");var s=document.body.createTextRange();s.moveToElementText(t);if(0<j){s.setEndPoint("StartToEnd",k)}else{s.setEndPoint("StartToStart",k)}s.setEndPoint("EndToEnd",v);s.select()}}}})(jQuery);(function(a){var e={},c,l,k,g=a.browser.msie&&/MSIE\s(5\.5|6\.)/.test(navigator.userAgent),m=false;a.tooltip={blocked:false,defaults:{delay:200,fade:false,showURL:true,extraClass:"",top:15,left:15,id:"tooltip"},block:function(){a.tooltip.blocked=!a.tooltip.blocked}};a.fn.extend({tooltip:function(p){p=a.extend({},a.tooltip.defaults,p);b(p);return this.each(function(){a.data(this,"tooltip",p);this.tOpacity=e.parent.css("opacity");this.tooltipText=this.title;a(this).removeAttr("title");this.alt=""}).mouseover(h).mouseout(f).click(f)},fixPNG:g?function(){return this.each(function(){var p=a(this).css("backgroundImage");if(p.match(/^url\(["']?(.*\.png)["']?\)$/i)){p=RegExp.$1;a(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+p+"')"}).each(function(){var q=a(this).css("position");if(q!="absolute"&&q!="relative"){a(this).css("position","relative")}})}})}:function(){return this},unfixPNG:g?function(){return this.each(function(){a(this).css({filter:"",backgroundImage:""})})}:function(){return this},hideWhenEmpty:function(){return this.each(function(){a(this)[a(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}});function b(p){if(e.parent){return}e.parent=a('<div id="'+p.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide();if(a.fn.bgiframe){e.parent.bgiframe()}e.title=a("h3",e.parent);e.body=a("div.body",e.parent);e.url=a("div.url",e.parent)}function i(p){return a.data(p,"tooltip")}function d(p){if(i(this).delay){k=setTimeout(j,i(this).delay)}else{j()}m=!!i(this).track;a(document.body).bind("mousemove",n);n(p)}function h(){if(a.tooltip.blocked||this==c||(!this.tooltipText&&!i(this).bodyHandler)){return}c=this;l=this.tooltipText;if(i(this).bodyHandler){e.title.hide();var p=i(this).bodyHandler.call(this);if(p.nodeType||p.jquery){e.body.empty().append(p)}else{e.body.html(p)}e.body.show()}else{if(i(this).showBody){var s=l.split(i(this).showBody);e.title.html(s.shift()).show();e.body.empty();for(var q=0,r;(r=s[q]);q++){if(q>0){e.body.append("<br/>")}e.body.append(r)}e.body.hideWhenEmpty()}else{e.title.html(l).show();e.body.hide()}}if(i(this).showURL&&a(this).url()){e.url.html(a(this).url().replace("http://","")).show()}else{e.url.hide()}e.parent.addClass(i(this).extraClass);if(i(this).fixPNG){e.parent.fixPNG()}d.apply(this,arguments)}function j(){k=null;var p=i(c);if((!g||!a.fn.bgiframe)&&p&&p.fade){if(e.parent.is(":animated")){e.parent.stop().show().fadeTo(i(c).fade,c.tOpacity)}else{e.parent.is(":visible")?e.parent.fadeTo(i(c).fade,c.tOpacity):e.parent.fadeIn(i(c).fade)}}else{e.parent.show()}n()}function n(q){if(a.tooltip.blocked){return}if(q&&q.target.tagName=="OPTION"){return}if(!m&&e.parent.is(":visible")){a(document.body).unbind("mousemove",n)}if(c==null){a(document.body).unbind("mousemove",n);return}e.parent.removeClass("viewport-right").removeClass("viewport-bottom");var s=e.parent[0].offsetLeft;var w=e.parent[0].offsetTop;if(q){var u=i(c);if(u==null){s=0;w=0}else{s=q.pageX+i(c).left;w=q.pageY+i(c).top}var t="auto";var p=i(c);if(p&&p.positionLeft){t=a(window).width()-s;s="auto"}e.parent.css({left:s,right:t,top:w})}var x=o(),r=e.parent[0];if(x.x+x.cx<r.offsetLeft+r.offsetWidth){s-=r.offsetWidth+20+i(c).left;e.parent.css({left:s+"px"}).addClass("viewport-right")}if(x.y+x.cy<r.offsetTop+r.offsetHeight){w-=r.offsetHeight+20+i(c).top;e.parent.css({top:w+"px"}).addClass("viewport-bottom")}}function o(){return{x:a(window).scrollLeft(),y:a(window).scrollTop(),cx:a(window).width(),cy:a(window).height()}}function f(q){if(a.tooltip.blocked){return}if(k){clearTimeout(k)}c=null;var r=i(this);function p(){e.parent.removeClass(r.extraClass).hide().css("opacity","")}if((!g||!a.fn.bgiframe)&&r.fade){if(e.parent.is(":animated")){e.parent.stop().fadeTo(r.fade,0,p)}else{e.parent.stop().fadeOut(r.fade,p)}}else{p()}if(i(this).fixPNG){e.parent.unfixPNG()}}})(jQuery);(function(a){var e=false;var p="1.1";a.fn.hiddenPosition=function(q){var r=a.extend({},a.fn.hiddenPosition.defaults,q);return this.each(function(){var s=a(this);var t=a.metadata?a.extend({},r,s.metadata()):r;n(s,t)})};function n(t,x){var s=k(t);var v=k(a(x.of));var u=j(x.my);var q=j(x.at);var w=l(x.offset);f("my",u);f("at",q);f("myDims",s);f("targetDims",v);var r=g(v);switch(q.h){case"center":r.left+=v.width/2;break;case"right":r.left+=v.width;break;default:break}switch(q.v){case"center":r.top+=v.height/2;break;case"bottom":r.top+=v.height;break;default:break}switch(u.h){case"center":r.left-=s.width/2;break;case"right":r.left-=s.width;break;default:break}switch(u.v){case"center":r.top-=s.height/2;break;case"bottom":r.top-=s.height;break;default:break}r.top+=w.v;r.left+=w.h;r=c(t,r,s,u,q,x);if(s.position=="relative"){r=o(t,r,s)}if(x.using){x.using(r,t)}else{m(t,r)}}function m(r,q){r.css("left",q.left+"px").css("top",q.top+"px")}function o(s,q,r){f("to coordinates",q);f("dims",r);q.top-=r.offsetTop-r.top;q.left-=r.offsetLeft-r.left;f("transformed coordinates",q);return q}function c(u,s,t,v,q,w){if(w.collision.match(/flip|fit/g)){d("CHECK COLLISION!",w.collision);var r={h:"none",v:"none"};var x=w.collision.split(" ");if(x.length==1){r.h=x[0];r.v=x[0]}else{if(x.length>1){r.h=x[0];r.v=x[1]}}var y=null;if(w.viewport){y=k(a(w.viewport))}else{y={position:"absolute",top:0,left:0,offsetTop:0,offsetLeft:0,width:a(window).width(),height:a(window).height(),innerWidth:a(window).width(),innerHeight:a(window).height()}}f("viewport",y);s=b(r.h,"h",u,s,t,y,v,q);s=b(r.v,"v",u,s,t,y,v,q)}return s}function b(v,t,u,r,s,y,w,q){if(v!="none"){var x=g(y);if(t=="h"){if(r.left<x.left){if(v=="fit"){r.left=x.left}else{if(v=="flip"){if(w.h=="right"&&(r.left+s.width>=x.left)){r.left+=s.width}}}}else{if(r.left+s.width>x.left+y.innerWidth){if(v=="fit"){r.left-=((r.left+s.width)-(x.left+y.innerWidth))}else{if(v=="flip"){if(w.h=="left"&&(r.left<=x.left+y.innerWidth)){r.left-=s.width}}}}}}else{if(t=="v"){if(r.top<x.top){if(v=="fit"){r.top=x.top}else{if(v=="flip"){if(w.v=="bottom"&&(r.top+s.height>=x.top)){r.top+=s.height}}}}else{if(r.top+s.height>x.top+y.innerHeight){if(v=="fit"){r.top-=((r.top+s.height)-(x.top+y.innerHeight))}else{if(v=="flip"){if(w.v=="top"&&(r.top<=x.top+y.innerHeight)){r.top-=s.height}}}}}}}}return r}function g(r){var q={top:r.offsetTop,left:r.offsetLeft};if(r.position=="absolute"||r.position=="fixed"){if(r.top){q.top=r.top}if(r.left){q.left=r.left}}return q}function l(r){var q={h:0,v:0};if(r){var s=r.split(" ");if(s.length>0){q.h=Number(s[0])}if(s.length>1){q.v=Number(s[1])}}return q}function j(r){var q={h:"center",v:"center"};if(r){var s=r.split(" ");if(s.length>0){q=i(s[0],q)}if(s.length>1){q=i(s[1],q)}}return q}function i(r,q){switch(r){case"top":q.v="top";break;case"bottom":q.v="bottom";break;case"left":q.h="left";break;case"right":q.h="right";break;default:break}return q}function h(q){var r=a(q).offset();return{position:a(q).css("position"),top:Number(a(q).css("top").replace(/[^\d\.-]/g,"")),left:Number(a(q).css("left").replace(/[^\d\.-]/g,"")),offsetTop:r.top,offsetLeft:r.left,width:a(q).outerWidth(),height:a(q).outerHeight(),innerWidth:a(q).innerWidth(),innerHeight:a(q).innerHeight()}}function k(t){var r=null,v=0,x,s;while((s=t[v++])){var u=a(s).parents().andSelf().filter(":hidden");if(!u.length){r=h(s)}else{d("hidden");var q=[];u.each(function(){var y=a(this).attr("style");y=typeof y=="undefined"?"":y;d("style",y);q.push(y);a(this).attr("style",y+" ; display: block !important;");d("style",a(this).attr("style"))});var w=u.eq(0).css("left");d("left",w);u.eq(0).css("left",-10000);r=h(s);u.eq(0).css("top",-10000).css("left",w);r.offsetLeft=h(s).offsetLeft;r.left=h(s).left;u.each(function(){a(this).attr("style",q.shift())})}}return r}a.fn.hiddenPosition.defaults={my:"center",at:"center",of:null,offset:null,using:null,collision:"flip",viewport:null};a.fn.hiddenPosition.getHiddenDimensions=function(q){return k(q)};a.fn.hiddenPosition.toggleDebug=function(){e=!e};function d(s,r){try{if(e&&window.console&&window.console.log){window.console.log(s+": "+r)}}catch(q){}}function f(s,r){try{if(!r){r=s}d(s,r);if(e&&window.console&&window.console.log&&(a.browser.msie||a.browser.opera)){window.console.log(a.param(r))}else{if(e&&window.console&&window.console.debug){window.console.debug(r)}}}catch(q){}}})(jQuery);(function(){var a,e,f,g,d,c={}.hasOwnProperty,b=function(h,k){for(var j in k){if(c.call(k,j)){h[j]=k[j]}}function i(){this.constructor=h}i.prototype=k.prototype;h.prototype=new i();h.__super__=k.prototype;return h};g=(function(){function h(){this.options_index=0;this.parsed=[]}h.prototype.add_node=function(i){if(i.nodeName.toUpperCase()==="OPTGROUP"){return this.add_group(i)}else{return this.add_option(i)}};h.prototype.add_group=function(m){var n,o,i,j,k,l;n=this.parsed.length;this.parsed.push({array_index:n,group:true,label:this.escapeExpression(m.label),children:0,disabled:m.disabled});k=m.childNodes;l=[];for(i=0,j=k.length;i<j;i++){o=k[i];l.push(this.add_option(o,n,m.disabled))}return l};h.prototype.add_option=function(k,j,i){if(k.nodeName.toUpperCase()==="OPTION"){if(k.text!==""){if(j!=null){this.parsed[j].children+=1}this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:k.value,text:k.text,html:k.innerHTML,selected:k.selected,disabled:i===true?i:k.disabled,group_array_index:j,classes:k.className,style:k.style.cssText})}else{this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:true})}return this.options_index+=1}};h.prototype.escapeExpression=function(j){var i,k;if((j==null)||j===false){return""}if(!/[\&\<\>\"\'\`]/.test(j)){return j}i={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};k=/&(?!\w+;)|[\<\>\"\'\`]/g;return j.replace(k,function(l){return i[l]||"&amp;"})};return h})();g.select_to_array=function(m){var k,l,h,i,j;l=new g();j=m.childNodes;for(h=0,i=j.length;h<i;h++){k=j[h];l.add_node(k)}return l.parsed};e=(function(){function h(i,j){this.form_field=i;this.options=j!=null?j:{};if(!h.browser_is_supported()){return}this.is_multiple=this.form_field.multiple;this.set_default_text();this.set_default_values();this.setup();this.set_up_html();this.register_observers()}h.prototype.set_default_values=function(){var i=this;this.click_test_action=function(j){return i.test_active_click(j)};this.activate_action=function(j){return i.activate_field(j)};this.active_field=false;this.mouse_on_container=false;this.results_showing=false;this.result_highlighted=null;this.result_single_selected=null;this.allow_single_deselect=(this.options.allow_single_deselect!=null)&&(this.form_field.options[0]!=null)&&this.form_field.options[0].text===""?this.options.allow_single_deselect:false;this.disable_search_threshold=this.options.disable_search_threshold||0;this.disable_search=this.options.disable_search||false;this.enable_split_word_search=this.options.enable_split_word_search!=null?this.options.enable_split_word_search:true;this.group_search=this.options.group_search!=null?this.options.group_search:true;this.search_contains=this.options.search_contains||false;this.single_backstroke_delete=this.options.single_backstroke_delete!=null?this.options.single_backstroke_delete:true;this.max_selected_options=this.options.max_selected_options||Infinity;this.inherit_select_classes=this.options.inherit_select_classes||false;this.display_selected_options=this.options.display_selected_options!=null?this.options.display_selected_options:true;return this.display_disabled_options=this.options.display_disabled_options!=null?this.options.display_disabled_options:true};h.prototype.set_default_text=function(){if(this.form_field.getAttribute("data-placeholder")){this.default_text=this.form_field.getAttribute("data-placeholder")}else{if(this.is_multiple){this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||h.default_multiple_text}else{this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||h.default_single_text}}return this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||h.default_no_result_text};h.prototype.mouse_enter=function(){return this.mouse_on_container=true};h.prototype.mouse_leave=function(){return this.mouse_on_container=false};h.prototype.input_focus=function(j){var i=this;if(this.is_multiple){if(!this.active_field){return setTimeout((function(){return i.container_mousedown()}),50)}}else{if(!this.active_field){return this.activate_field()}}};h.prototype.input_blur=function(j){var i=this;if(!this.mouse_on_container){this.active_field=false;return setTimeout((function(){return i.blur_test()}),100)}};h.prototype.results_option_build=function(n){var l,m,i,j,k;l="";k=this.results_data;for(i=0,j=k.length;i<j;i++){m=k[i];if(m.group){l+=this.result_add_group(m)}else{l+=this.result_add_option(m)}if(n!=null?n.first:void 0){if(m.selected&&this.is_multiple){this.choice_build(m)}else{if(m.selected&&!this.is_multiple){this.single_set_selected_text(m.text)}}}}return l};h.prototype.result_add_option=function(j){var i,k;if(!j.search_match){return""}if(!this.include_option_in_results(j)){return""}i=[];if(!j.disabled&&!(j.selected&&this.is_multiple)){i.push("active-result")}if(j.disabled&&!(j.selected&&this.is_multiple)){i.push("disabled-result")}if(j.selected){i.push("result-selected")}if(j.group_array_index!=null){i.push("group-option")}if(j.classes!==""){i.push(j.classes)}k=j.style.cssText!==""?' style="'+j.style+'"':"";return'<li class="'+(i.join(" "))+'"'+k+' data-option-array-index="'+j.array_index+'">'+j.search_text+"</li>"};h.prototype.result_add_group=function(i){if(!(i.search_match||i.group_match)){return""}if(!(i.active_options>0)){return""}return'<li class="group-result">'+i.search_text+"</li>"};h.prototype.results_update_field=function(){this.set_default_text();if(!this.is_multiple){this.results_reset_cleanup()}this.result_clear_highlight();this.result_single_selected=null;this.results_build();if(this.results_showing){return this.winnow_results()}};h.prototype.results_toggle=function(){if(this.results_showing){return this.results_hide()}else{return this.results_show()}};h.prototype.results_search=function(i){if(this.results_showing){return this.winnow_results()}else{return this.results_show()}};h.prototype.winnow_results=function(){var l,m,n,o,p,q,r,s,t,u,i,j,k;this.no_results_clear();p=0;r=this.get_search_text();l=r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");o=this.search_contains?"":"^";n=new RegExp(o+l,"i");u=new RegExp(l,"i");k=this.results_data;for(i=0,j=k.length;i<j;i++){m=k[i];m.search_match=false;q=null;if(this.include_option_in_results(m)){if(m.group){m.group_match=false;m.active_options=0}if((m.group_array_index!=null)&&this.results_data[m.group_array_index]){q=this.results_data[m.group_array_index];if(q.active_options===0&&q.search_match){p+=1}q.active_options+=1}if(!(m.group&&!this.group_search)){m.search_text=m.group?m.label:m.html;m.search_match=this.search_string_match(m.search_text,n);if(m.search_match&&!m.group){p+=1}if(m.search_match){if(r.length){s=m.search_text.search(u);t=m.search_text.substr(0,s+r.length)+"</em>"+m.search_text.substr(s+r.length);m.search_text=t.substr(0,s)+"<em>"+t.substr(s)}if(q!=null){q.group_match=true}}else{if((m.group_array_index!=null)&&this.results_data[m.group_array_index].search_match){m.search_match=true}}}}}this.result_clear_highlight();if(p<1&&r.length){this.update_results_content("");return this.no_results(r)}else{this.update_results_content(this.results_option_build());return this.winnow_results_set_highlight()}};h.prototype.search_string_match=function(n,m){var k,l,i,j;if(m.test(n)){return true}else{if(this.enable_split_word_search&&(n.indexOf(" ")>=0||n.indexOf("[")===0)){l=n.replace(/\[|\]/g,"").split(" ");if(l.length){for(i=0,j=l.length;i<j;i++){k=l[i];if(m.test(k)){return true}}}}}};h.prototype.choices_count=function(){var l,i,j,k;if(this.selected_option_count!=null){return this.selected_option_count}this.selected_option_count=0;k=this.form_field.options;for(i=0,j=k.length;i<j;i++){l=k[i];if(l.selected){this.selected_option_count+=1}}return this.selected_option_count};h.prototype.choices_click=function(i){i.preventDefault();if(!(this.results_showing||this.is_disabled)){return this.results_show()}};h.prototype.keyup_checker=function(j){var k,i;k=(i=j.which)!=null?i:j.keyCode;this.search_field_scale();switch(k){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0){return this.keydown_backstroke()}else{if(!this.pending_backstroke){this.result_clear_highlight();return this.results_search()}}break;case 13:j.preventDefault();if(this.results_showing){return this.result_select(j)}break;case 27:if(this.results_showing){this.results_hide()}return true;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}};h.prototype.container_width=function(){if(this.options.width!=null){return this.options.width}else{return""+this.form_field.offsetWidth+"px"}};h.prototype.include_option_in_results=function(i){if(this.is_multiple&&(!this.display_selected_options&&i.selected)){return false}if(!this.display_disabled_options&&i.disabled){return false}if(i.empty){return false}return true};h.browser_is_supported=function(){if(window.navigator.appName==="Microsoft Internet Explorer"){return document.documentMode>=8}if(/iP(od|hone)/i.test(window.navigator.userAgent)){return false}if(/Android/i.test(window.navigator.userAgent)){if(/Mobile/i.test(window.navigator.userAgent)){return false}}return true};h.default_multiple_text="Select Some Options";h.default_single_text="Select an Option";h.default_no_result_text="No results match";return h})();a=jQuery;a.fn.extend({chosen:function(h){if(!e.browser_is_supported()){return this}return this.each(function(k){var i,j;i=a(this);j=i.data("chosen");if(h==="destroy"&&j){j.destroy()}else{if(!j){i.data("chosen",new f(this,h))}}})}});f=(function(h){b(i,h);function i(){d=i.__super__.constructor.apply(this,arguments);return d}i.prototype.setup=function(){this.form_field_jq=a(this.form_field);this.current_selectedIndex=this.form_field.selectedIndex;return this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")};i.prototype.set_up_html=function(){var j,k;j=["chosen-container"];j.push("chosen-container-"+(this.is_multiple?"multi":"single"));if(this.inherit_select_classes&&this.form_field.className){j.push(this.form_field.className)}if(this.is_rtl){j.push("chosen-rtl")}k={"class":j.join(" "),style:"width: "+(this.container_width())+";",title:this.form_field.title};if(this.form_field.id.length){k.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"}this.container=a("<div />",k);if(this.is_multiple){this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>')}else{this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>')}this.form_field_jq.hide().after(this.container);this.dropdown=this.container.find("div.chosen-drop").first();this.search_field=this.container.find("input").first();this.search_results=this.container.find("ul.chosen-results").first();this.search_field_scale();this.search_no_results=this.container.find("li.no-results").first();if(this.is_multiple){this.search_choices=this.container.find("ul.chosen-choices").first();this.search_container=this.container.find("li.search-field").first()}else{this.search_container=this.container.find("div.chosen-search").first();this.selected_item=this.container.find(".chosen-single").first()}this.results_build();this.set_tab_index();this.set_label_behavior();return this.form_field_jq.trigger("chosen:ready",{chosen:this})};i.prototype.register_observers=function(){var j=this;this.container.bind("mousedown.chosen",function(k){j.container_mousedown(k)});this.container.bind("mouseup.chosen",function(k){j.container_mouseup(k)});this.container.bind("mouseenter.chosen",function(k){j.mouse_enter(k)});this.container.bind("mouseleave.chosen",function(k){j.mouse_leave(k)});this.search_results.bind("mouseup.chosen",function(k){j.search_results_mouseup(k)});this.search_results.bind("mouseover.chosen",function(k){j.search_results_mouseover(k)});this.search_results.bind("mouseout.chosen",function(k){j.search_results_mouseout(k)});this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(k){j.search_results_mousewheel(k)});this.form_field_jq.bind("chosen:updated.chosen",function(k){j.results_update_field(k)});this.form_field_jq.bind("chosen:activate.chosen",function(k){j.activate_field(k)});this.form_field_jq.bind("chosen:open.chosen",function(k){j.container_mousedown(k)});this.search_field.bind("blur.chosen",function(k){j.input_blur(k)});this.search_field.bind("keyup.chosen",function(k){j.keyup_checker(k)});this.search_field.bind("keydown.chosen",function(k){j.keydown_checker(k)});this.search_field.bind("focus.chosen",function(k){j.input_focus(k)});if(this.is_multiple){return this.search_choices.bind("click.chosen",function(k){j.choices_click(k)})}else{return this.container.bind("click.chosen",function(k){k.preventDefault()})}};i.prototype.destroy=function(){a(document).unbind("click.chosen",this.click_test_action);if(this.search_field[0].tabIndex){this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex}this.container.remove();this.form_field_jq.removeData("chosen");return this.form_field_jq.show()};i.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled){this.container.addClass("chosen-disabled");this.search_field[0].disabled=true;if(!this.is_multiple){this.selected_item.unbind("focus.chosen",this.activate_action)}return this.close_field()}else{this.container.removeClass("chosen-disabled");this.search_field[0].disabled=false;if(!this.is_multiple){return this.selected_item.bind("focus.chosen",this.activate_action)}}};i.prototype.container_mousedown=function(j){if(!this.is_disabled){if(j&&j.type==="mousedown"&&!this.results_showing){j.preventDefault()}if(!((j!=null)&&(a(j.target)).hasClass("search-choice-close"))){if(!this.active_field){if(this.is_multiple){this.search_field.val("")}a(document).bind("click.chosen",this.click_test_action);this.results_show()}else{if(!this.is_multiple&&j&&((a(j.target)[0]===this.selected_item[0])||a(j.target).parents("a.chosen-single").length)){j.preventDefault();this.results_toggle()}}return this.activate_field()}}};i.prototype.container_mouseup=function(j){if(j.target.nodeName==="ABBR"&&!this.is_disabled){return this.results_reset(j)}};i.prototype.search_results_mousewheel=function(m){var l,j,k;l=-((j=m.originalEvent)!=null?j.wheelDelta:void 0)||((k=m.originialEvent)!=null?k.detail:void 0);if(l!=null){m.preventDefault();if(m.type==="DOMMouseScroll"){l=l*40}return this.search_results.scrollTop(l+this.search_results.scrollTop())}};i.prototype.blur_test=function(j){if(!this.active_field&&this.container.hasClass("chosen-container-active")){return this.close_field()}};i.prototype.close_field=function(){a(document).unbind("click.chosen",this.click_test_action);this.active_field=false;this.results_hide();this.container.removeClass("chosen-container-active");this.clear_backstroke();this.show_search_field_default();return this.search_field_scale()};i.prototype.activate_field=function(){this.container.addClass("chosen-container-active");this.active_field=true;this.search_field.val(this.search_field.val());return this.search_field.focus()};i.prototype.test_active_click=function(j){if(this.container.is(a(j.target).closest(".chosen-container"))){return this.active_field=true}else{return this.close_field()}};i.prototype.results_build=function(){this.parsing=true;this.selected_option_count=null;this.results_data=g.select_to_array(this.form_field);if(this.is_multiple){this.search_choices.find("li.search-choice").remove()}else{if(!this.is_multiple){this.single_set_selected_text();if(this.disable_search||this.form_field.options.length<=this.disable_search_threshold){this.search_field[0].readOnly=true;this.container.addClass("chosen-container-single-nosearch")}else{this.search_field[0].readOnly=false;this.container.removeClass("chosen-container-single-nosearch")}}}this.update_results_content(this.results_option_build({first:true}));this.search_field_disabled();this.show_search_field_default();this.search_field_scale();return this.parsing=false};i.prototype.result_do_highlight=function(j){var k,l,m,n,o;if(j.length){this.result_clear_highlight();this.result_highlight=j;this.result_highlight.addClass("highlighted");m=parseInt(this.search_results.css("maxHeight"),10);o=this.search_results.scrollTop();n=m+o;l=this.result_highlight.position().top+this.search_results.scrollTop();k=l+this.result_highlight.outerHeight();if(k>=n){return this.search_results.scrollTop((k-m)>0?k-m:0)}else{if(l<o){return this.search_results.scrollTop(l)}}}};i.prototype.result_clear_highlight=function(){if(this.result_highlight){this.result_highlight.removeClass("highlighted")}return this.result_highlight=null};i.prototype.results_show=function(){if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}this.container.addClass("chosen-with-drop");this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this});this.results_showing=true;this.search_field.focus();this.search_field.val(this.search_field.val());return this.winnow_results()};i.prototype.update_results_content=function(j){return this.search_results.html(j)};i.prototype.results_hide=function(){if(this.results_showing){this.result_clear_highlight();this.container.removeClass("chosen-with-drop");this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})}return this.results_showing=false};i.prototype.set_tab_index=function(j){var k;if(this.form_field.tabIndex){k=this.form_field.tabIndex;this.form_field.tabIndex=-1;return this.search_field[0].tabIndex=k}};i.prototype.set_label_behavior=function(){var j=this;this.form_field_label=this.form_field_jq.parents("label");if(!this.form_field_label.length&&this.form_field.id.length){this.form_field_label=a("label[for='"+this.form_field.id+"']")}if(this.form_field_label.length>0){return this.form_field_label.bind("click.chosen",function(k){if(j.is_multiple){return j.container_mousedown(k)}else{return j.activate_field()}})}};i.prototype.show_search_field_default=function(){if(this.is_multiple&&this.choices_count()<1&&!this.active_field){this.search_field.val(this.default_text);return this.search_field.addClass("default")}else{this.search_field.val("");return this.search_field.removeClass("default")}};i.prototype.search_results_mouseup=function(j){var k;k=a(j.target).hasClass("active-result")?a(j.target):a(j.target).parents(".active-result").first();if(k.length){this.result_highlight=k;this.result_select(j);return this.search_field.focus()}};i.prototype.search_results_mouseover=function(j){var k;k=a(j.target).hasClass("active-result")?a(j.target):a(j.target).parents(".active-result").first();if(k){return this.result_do_highlight(k)}};i.prototype.search_results_mouseout=function(j){if(a(j.target).hasClass("active-result"||a(j.target).parents(".active-result").first())){return this.result_clear_highlight()}};i.prototype.choice_build=function(m){var k,l,j=this;k=a("<li />",{"class":"search-choice"}).html("<span>"+m.html+"</span>");if(m.disabled){k.addClass("search-choice-disabled")}else{l=a("<a />",{"class":"search-choice-close","data-option-array-index":m.array_index});l.bind("click.chosen",function(n){return j.choice_destroy_link_click(n)});k.append(l)}return this.search_container.before(k)};i.prototype.choice_destroy_link_click=function(j){j.preventDefault();j.stopPropagation();if(!this.is_disabled){return this.choice_destroy(a(j.target))}};i.prototype.choice_destroy=function(j){if(this.result_deselect(j[0].getAttribute("data-option-array-index"))){this.show_search_field_default();if(this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1){this.results_hide()}j.parents("li").first().remove();return this.search_field_scale()}};i.prototype.results_reset=function(){this.form_field.options[0].selected=true;this.selected_option_count=null;this.single_set_selected_text();this.show_search_field_default();this.results_reset_cleanup();this.form_field_jq.trigger("change");if(this.active_field){return this.results_hide()}};i.prototype.results_reset_cleanup=function(){this.current_selectedIndex=this.form_field.selectedIndex;return this.selected_item.find("abbr").remove()};i.prototype.result_select=function(j){var k,l,m;if(this.result_highlight){k=this.result_highlight;this.result_clear_highlight();if(this.is_multiple&&this.max_selected_options<=this.choices_count()){this.form_field_jq.trigger("chosen:maxselected",{chosen:this});return false}if(this.is_multiple){k.removeClass("active-result")}else{if(this.result_single_selected){this.result_single_selected.removeClass("result-selected");m=this.result_single_selected[0].getAttribute("data-option-array-index");this.results_data[m].selected=false}this.result_single_selected=k}k.addClass("result-selected");l=this.results_data[k[0].getAttribute("data-option-array-index")];l.selected=true;this.form_field.options[l.options_index].selected=true;this.selected_option_count=null;if(this.is_multiple){this.choice_build(l)}else{this.single_set_selected_text(l.text)}if(!((j.metaKey||j.ctrlKey)&&this.is_multiple)){this.results_hide()}this.search_field.val("");if(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex){this.form_field_jq.trigger("change",{selected:this.form_field.options[l.options_index].value})}this.current_selectedIndex=this.form_field.selectedIndex;return this.search_field_scale()}};i.prototype.single_set_selected_text=function(j){if(j==null){j=this.default_text}if(j===this.default_text){this.selected_item.addClass("chosen-default")}else{this.single_deselect_control_build();this.selected_item.removeClass("chosen-default")}return this.selected_item.find("span").text(j)};i.prototype.result_deselect=function(j){var k;k=this.results_data[j];if(!this.form_field.options[k.options_index].disabled){k.selected=false;this.form_field.options[k.options_index].selected=false;this.selected_option_count=null;this.result_clear_highlight();if(this.results_showing){this.winnow_results()}this.form_field_jq.trigger("change",{deselected:this.form_field.options[k.options_index].value});this.search_field_scale();return true}else{return false}};i.prototype.single_deselect_control_build=function(){if(!this.allow_single_deselect){return}if(!this.selected_item.find("abbr").length){this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')}return this.selected_item.addClass("chosen-single-with-deselect")};i.prototype.get_search_text=function(){if(this.search_field.val()===this.default_text){return""}else{return a("<div/>").text(a.trim(this.search_field.val())).html()}};i.prototype.winnow_results_set_highlight=function(){var j,k;k=!this.is_multiple?this.search_results.find(".result-selected.active-result"):[];j=k.length?k.first():this.search_results.find(".active-result").first();if(j!=null){return this.result_do_highlight(j)}};i.prototype.no_results=function(k){var j;j=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>');j.find("span").first().html(k);return this.search_results.append(j)};i.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()};i.prototype.keydown_arrow=function(){var j;if(this.results_showing&&this.result_highlight){j=this.result_highlight.nextAll("li.active-result").first();if(j){return this.result_do_highlight(j)}}else{return this.results_show()}};i.prototype.keyup_arrow=function(){var j;if(!this.results_showing&&!this.is_multiple){return this.results_show()}else{if(this.result_highlight){j=this.result_highlight.prevAll("li.active-result");if(j.length){return this.result_do_highlight(j.first())}else{if(this.choices_count()>0){this.results_hide()}return this.result_clear_highlight()}}}};i.prototype.keydown_backstroke=function(){var j;if(this.pending_backstroke){this.choice_destroy(this.pending_backstroke.find("a").first());return this.clear_backstroke()}else{j=this.search_container.siblings("li.search-choice").last();if(j.length&&!j.hasClass("search-choice-disabled")){this.pending_backstroke=j;if(this.single_backstroke_delete){return this.keydown_backstroke()}else{return this.pending_backstroke.addClass("search-choice-focus")}}}};i.prototype.clear_backstroke=function(){if(this.pending_backstroke){this.pending_backstroke.removeClass("search-choice-focus")}return this.pending_backstroke=null};i.prototype.keydown_checker=function(k){var l,j;l=(j=k.which)!=null?j:k.keyCode;this.search_field_scale();if(l!==8&&this.pending_backstroke){this.clear_backstroke()}switch(l){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:if(this.results_showing&&!this.is_multiple){this.result_select(k)}this.mouse_on_container=false;break;case 13:k.preventDefault();break;case 38:k.preventDefault();this.keyup_arrow();break;case 40:k.preventDefault();this.keydown_arrow();break}};i.prototype.search_field_scale=function(){var l,m,n,o,p,q,r,j,k;if(this.is_multiple){n=0;r=0;p="position:absolute; left: -1000px; top: -1000px; display:none;";q=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(j=0,k=q.length;j<k;j++){o=q[j];p+=o+":"+this.search_field.css(o)+";"}l=a("<div />",{style:p});l.text(this.search_field.val());a("body").append(l);r=l.width()+25;l.remove();m=this.container.outerWidth();if(r>m-10){r=m-10}return this.search_field.css({width:r+"px"})}};return i})(e)}).call(this);$(function(){$("body").on("click","input[name='toggletarget']",function(a){if($('a.target[target="people"]').length==0){$("a.target").attr("target","people");$("input[name='toggletarget']").attr("checked",true)}else{$("a.target").removeAttr("target");$("input[name='toggletarget']").removeAttr("checked")}})});$(document).ready(function(){var a=$("div.navbar-fixed-top").outerHeight();$("body").css("padding-top",a+"px")});$(document).ready(function(){$(document).on("click","a.dialog-options",function(b){b.preventDefault();var a=$(this);$("<div id='dialog-options' />").load(a.data("target"),function(){var c=$(this);var e=c.find("form");if(a[0].title){e.find("h3.title").text(a[0].title)}e.modal("show");e.attr("action",a[0].href);e.on("hidden",function(){c.remove()});e.validate({submitHandler:function(d){if(d.method.toUpperCase()==="GET"){d.submit()}else{var f=e.serialize();$.post(d.action,f,function(g){if(g){$.growlUI("",g)}if(a.data("callback")){$.InitFunctions[a.data("callback")](a)}})}e.modal("hide")},highlight:function(d){$(d).closest(".control-group").addClass("error")},unhighlight:function(d){$(d).closest(".control-group").removeClass("error")}})});return false});if(!$.InitFunctions){$.InitFunctions={}}$.InitFunctions.TagAllCallBack=function(b){$(".taguntag:visible").text("Remove")};$("#UnTagAll").live("click",function(b){b.preventDefault();var a=$(this);$.block();$.post(this.href,null,function(c){$(".taguntag:visible").text(c);$('[data-toggle="dropdown"]').parent().removeClass("open");$.unblock()});return false});$(document).on("click","#AddContact",function(a){a.preventDefault();var b=this.href;bootbox.confirm("Are you sure you want to add a contact for all these people?",function(c){if(c===true){$.block();$.post(b,null,function(d){$.unblock();if(d<0){$.growlUI("error","too many people to add to a contact (max 100)")}else{if(d==0){$.growlUI("error","no results")}else{window.location=d}}})}});return false});$(document).on("click","#AddTasks",function(a){a.preventDefault();var b="Are you sure you want to add a task for all these people?";if(window.location.pathname.contains("/Person")){b="Are you sure you want to add a task for this person?"}var c=this.href;bootbox.confirm(b,function(d){if(d===true){$.block();$.post(c,null,function(e){$.unblock();if(e>100){$.growlUI("error","too many people to add tasks for (max 100)")}else{if(e==0){$.growlUI("error","no results")}else{window.location="/Task"}}})}});return false});$.QueryString=function(b,a){var c=new Object();$.each(b.split("&"),function(){var d=this.split("=");c[d[0]]=d[1]});return c[a]};$.block=function(a){if(!a){a="<h1>working on it...</h1>"}$.blockUI({message:a,overlayCSS:{opacity:0},css:{border:"3px",padding:"15px",backgroundColor:"#aaa","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.9,color:"#000",width:"500px"}})};$.unblock=function(){$.unblockUI()};$.navigate=function(b,a){b+=(b.match(/\?/)?"&":"?")+a;window.location=b};$.DateValid=function(a,b){var c=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i;if($.dateFormat.startsWith("d")){c=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i}var e=true;if(!c.test(a)){if(b==true){$.growlUI("error","enter valid date")}e=false}return e};$.SortableDate=function(c){var a;if($.dateFormat.startsWith("d")){a=new Date(c.split("/")[2],c.split("/")[1]-1,c.split("/")[0])}else{a=new Date(c.split("/")[2],c.split("/")[0]-1,c.split("/")[1])}var b=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate();return b};jQuery.fn.center=function(a){if(a){a=this.parent()}else{a=window}this.css({position:"absolute",top:((($(a).height()-this.outerHeight())/2)+$(a).scrollTop()+"px"),left:((($(a).width()-this.outerWidth())/2)+$(a).scrollLeft()+"px")});return this}});function getISODateTime(a){var b=function(c){return(""+c).length<2?"0"+c:""+c};if(typeof a==="undefined"){var a=new Date()}return a.getFullYear()+"-"+b(a.getMonth()+1)+"-"+b(a.getDate())+" "+b(a.getHours())+":"+b(a.getMinutes())+":"+b(a.getSeconds())}if(!String.prototype.format){String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})}};$(function(){$("a.tutorial").click(function(a){a.preventDefault();startTutorial($(this).attr("href"))});$("a.hide-tip").live("click",function(a){a.preventDefault();$.post("/HideTip",{tip:$(this).data("hidetip")})});$(".warntip").tooltip({delay:150,showBody:"|",showURL:false});$.QueryString=function(b,a){var c=new Object();$.each(b.split("&"),function(){var d=this.split("=");c[d[0]]=d[1]});return c[a]};$("#cleartag").click(function(a){a.preventDefault();var b=this.href;if(confirm("are you sure you want to empty the active tag?")){$.post(b,{},function(){window.location.reload()})}});$.block=function(a){if(!a){a="<h1>working on it...</h1>"}$.blockUI({message:a,overlayCSS:{opacity:0},css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0.5,color:"#fff"}})};$.unblock=function(){$.unblockUI()};$.navigate=function(b,a){b+=(b.match(/\?/)?"&":"?")+a;window.location=b};$.validator.methods.date=function(b,a){return this.optional(a)||Globalize.parseDate(b,$.dtoptions.format,$.dtoptions.cul)};$.DateValid=function(a,b){var c=/^(0?[1-9]|1[012])[\/-](0?[1-9]|[12][0-9]|3[01])[\/-]((19|20)?[0-9]{2})$/i;if($.dtoptions.format.startsWith("d")){c=/^(0?[1-9]|[12][0-9]|3[01])[\/-](0?[1-9]|1[012])[\/-]((19|20)?[0-9]{2})$/i}var e=true;if(!c.test(a)){if(b==true){$.growlUI("error","enter valid date")}e=false}return e};jQuery.fn.center=function(a){if(a){a=this.parent()}else{a=window}this.css({position:"absolute",top:((($(a).height()-this.outerHeight())/2)+$(a).scrollTop()+"px"),left:((($(a).width()-this.outerWidth())/2)+$(a).scrollLeft()+"px")});return this};$.fn.alert=function(a){this.html('<div class="alert"><a class="close" data-dismiss="alert"></a><span>'+a+"</span></div>")};$("button.dropdown-toggle").click(function(a){$("li.hideAlt").hide()});$(document).keydown(function(a){if(a.keyCode==17&&$("ul.dropdown-menu").is(":visible")){$("li.hideAlt").not(".hidy").show()}})});function dimOff(){$("#darkLayer").hide()}function dimOn(){$("#darkLayer").show()}String.prototype.startsWith=function(b,a){return(b==this.substring(0,b.length))};String.prototype.appendQuery=function(a){if(this&&this.length>0){if(this.contains("&")||this.contains("?")){return this+"&"+a}else{return this+"?"+a}}return a};String.prototype.contains=function(a){return this.indexOf(a)!=-1};String.prototype.endsWith=function(b,a){return(b==this.substring(this.length-b.length))};String.prototype.addCommas=function(){var b=this.split(".");var c=b[0];var d=b.length>1?"."+b[1]:"";var a=/(\d+)(\d{3})/;while(a.test(c)){c=c.replace(a,"$1,$2")}return c+d};String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})};/*
 * typeahead.js 0.9.3
 * https://github.com/twitter/typeahead
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(a){var l="0.9.3";var k={isMsie:function(){var m=/(msie) ([\w.]+)/i.exec(navigator.userAgent);return m?parseInt(m[2],10):false},isBlankString:function(m){return !m||/^\s*$/.test(m)},escapeRegExChars:function(m){return m.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(m){return typeof m==="string"},isNumber:function(m){return typeof m==="number"},isFunction:function(m){return typeof m==="function"},isArray:a.isArray,isFunction:a.isFunction,isObject:a.isPlainObject,isUndefined:function(m){return typeof m==="undefined"},bind:a.proxy,bindAll:function(n){var o;for(var m in n){a.isFunction(o=n[m])&&(n[m]=a.proxy(o,n))}},indexOf:function(m,o){for(var n=0;n<m.length;n++){if(m[n]===o){return n}}return -1},each:a.each,map:a.map,filter:a.grep,every:function(m,o){var n=true;if(!m){return n}a.each(m,function(p,q){if(!(n=o.call(null,q,p,m))){return false}});return !!n},some:function(m,o){var n=false;if(!m){return n}a.each(m,function(p,q){if(n=o.call(null,q,p,m)){return false}});return !!n},mixin:a.extend,getUniqueId:function(){var m=0;return function(){return m++}}(),defer:function(m){setTimeout(m,0)},debounce:function(m,q,n){var p,o;return function(){var t=this,r=arguments,u,s;u=function(){p=null;if(!n){o=m.apply(t,r)}};s=n&&!p;clearTimeout(p);p=setTimeout(u,q);if(s){o=m.apply(t,r)}return o}},throttle:function(o,t){var n,m,s,r,q,p;q=0;p=function(){q=new Date();s=null;r=o.apply(n,m)};return function(){var u=new Date(),v=t-(u-q);n=this;m=arguments;if(v<=0){clearTimeout(s);s=null;q=u;r=o.apply(n,m)}else{if(!s){s=setTimeout(p,v)}}return r}},tokenizeQuery:function(m){return a.trim(m).toLowerCase().split(/[\s]+/)},tokenizeText:function(m){return a.trim(m).toLowerCase().split(/[\s\-_]+/)},getProtocol:function(){return location.protocol},noop:function(){}};var e=function(){var m=/\s+/;return{on:function(p,n){var o;if(!n){return this}this._callbacks=this._callbacks||{};p=p.split(m);while(o=p.shift()){this._callbacks[o]=this._callbacks[o]||[];this._callbacks[o].push(n)}return this},trigger:function(q,o){var p,n;if(!this._callbacks){return this}q=q.split(m);while(p=q.shift()){if(n=this._callbacks[p]){for(var r=0;r<n.length;r+=1){n[r].call(this,{type:p,data:o})}}}return this}}}();var d=function(){var n="typeahead:";function m(p){if(!p||!p.el){a.error("EventBus initialized without el")}this.$el=a(p.el)}k.mixin(m.prototype,{trigger:function(p){var o=[].slice.call(arguments,1);this.$el.trigger(n+p,o)}});return m}();var g=function(){var p,q;try{p=window.localStorage;p.setItem("~~~","!");p.removeItem("~~~")}catch(o){p=null}function s(t){this.prefix=["__",t,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(p&&window.JSON){q={_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){if(this.isExpired(t)){this.remove(t)}return m(p.getItem(this._prefix(t)))},set:function(t,v,u){if(k.isNumber(u)){p.setItem(this._ttlKey(t),n(r()+u))}else{p.removeItem(this._ttlKey(t))}return p.setItem(this._prefix(t),n(v))},remove:function(t){p.removeItem(this._ttlKey(t));p.removeItem(this._prefix(t));return this},clear:function(){var t,u,v=[],w=p.length;for(t=0;t<w;t++){if((u=p.key(t)).match(this.keyMatcher)){v.push(u.replace(this.keyMatcher,""))}}for(t=v.length;t--;){this.remove(v[t])}return this},isExpired:function(t){var u=m(p.getItem(this._ttlKey(t)));return k.isNumber(u)&&r()>u?true:false}}}else{q={get:k.noop,set:k.noop,remove:k.noop,clear:k.noop,isExpired:k.noop}}k.mixin(s.prototype,q);return s;function r(){return new Date().getTime()}function n(t){return JSON.stringify(k.isUndefined(t)?null:t)}function m(t){return JSON.parse(t)}}();var h=function(){function m(n){k.bindAll(this);n=n||{};this.sizeLimit=n.sizeLimit||10;this.cache={};this.cachedKeysByAge=[]}k.mixin(m.prototype,{get:function(n){return this.cache[n]},set:function(p,o){var n;if(this.cachedKeysByAge.length===this.sizeLimit){n=this.cachedKeysByAge.shift();delete this.cache[n]}this.cache[p]=o;this.cachedKeysByAge.push(p)}});return m}();var i=function(){var r=0,q={},p,s;function t(u){k.bindAll(this);u=k.isString(u)?{url:u}:u;s=s||new h();p=k.isNumber(u.maxParallelRequests)?u.maxParallelRequests:p||6;this.url=u.url;this.wildcard=u.wildcard||"%QUERY";this.filter=u.filter;this.replace=u.replace;this.ajaxSettings={type:"post",cache:u.cache,timeout:u.timeout,dataType:u.dataType||"json",beforeSend:u.beforeSend};this._get=(/^throttle$/i.test(u.rateLimitFn)?k.throttle:k.debounce)(this._get,u.rateLimitWait||300)}k.mixin(t.prototype,{_get:function(x,u){var w=this;if(m()){this._sendRequest(x).done(v)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}function v(z){var y=w.filter?w.filter(z):z;u&&u(y);s.set(x,z)}},_sendRequest:function(x){var w=this,v=q[x];if(!v){o();v=q[x]=a.ajax(x,this.ajaxSettings).always(u)}return v;function u(){n();q[x]=null;if(w.onDeckRequestArgs){w._get.apply(w,w.onDeckRequestArgs);w.onDeckRequestArgs=null}}},get:function(w,u){var y=this,v=encodeURIComponent(w||""),z,x;u=u||k.noop;z=this.replace?this.replace(this.url,v):this.url.replace(this.wildcard,v);if(x=s.get(z)){k.defer(function(){u(y.filter?y.filter(x):x)})}else{this._get(z,u)}return !!x}});return t;function o(){r++}function n(){r--}function m(){return r<p}}();var b=function(){var o={thumbprint:"thumbprint",protocol:"protocol",itemHash:"itemHash",adjacencyList:"adjacencyList"};function n(p){k.bindAll(this);if(k.isString(p.template)&&!p.engine){a.error("no template engine specified")}if(!p.local&&!p.prefetch&&!p.remote){a.error("one of local, prefetch, or remote is required")}if(p.minLength===0&&!(p.local||p.prefetch)){a.error("local or prefetch required to use default suggestions")}this.name=p.name||k.getUniqueId();this.limit=p.limit||5;this.minLength=p.minLength==null?1:p.minLength;this.header=p.header;this.footer=p.footer;this.valueKey=p.valueKey||"value";this.template=m(p.template,p.engine,this.valueKey);this.defaultSort=p.defaultSort;this.local=p.local;this.prefetch=p.prefetch;this.remote=p.remote;this.itemHash={};this.adjacencyList={};this.defaultOrder=[];this.storage=p.name?new g(p.name):null}k.mixin(n.prototype,{_processLocalData:function(p){this._mergeProcessedData(this._processData(p))},_loadPrefetchData:function(r){var x=this,y=l+(r.thumbprint||""),w,v,u,t,q,p;if(this.storage){w=this.storage.get(o.thumbprint);v=this.storage.get(o.protocol);u=this.storage.get(o.itemHash);t=this.storage.get(o.adjacencyList)}q=w!==y||v!==k.getProtocol();r=k.isString(r)?{url:r}:r;r.ttl=k.isNumber(r.ttl)?r.ttl:24*60*60*1000;if(u&&t&&!q){this._mergeProcessedData({itemHash:u,adjacencyList:t});p=a.Deferred().resolve()}else{p=a.getJSON(r.url).done(s)}return p;function s(A){var B=r.filter?r.filter(A):A,D=x._processData(B),C=D.itemHash,z=D.adjacencyList;if(x.storage){x.storage.set(o.itemHash,C,r.ttl);x.storage.set(o.adjacencyList,z,r.ttl);x.storage.set(o.thumbprint,y,r.ttl);x.storage.set(o.protocol,k.getProtocol(),r.ttl)}x._mergeProcessedData(D)}},_transformDatum:function(p){var s=k.isString(p)?p:p[this.valueKey],r=p.tokens||k.tokenizeText(s),q={value:s,tokens:r};if(k.isString(p)){q.datum={};q.datum[this.valueKey]=p}else{q.datum=p}q.tokens=k.filter(q.tokens,function(t){return !k.isBlankString(t)});q.tokens=k.map(q.tokens,function(t){return t.toLowerCase()});return q},_processData:function(q){var s=this,r={},p={};k.each(q,function(u,t){var w=s._transformDatum(t),v=k.getUniqueId(w.value);r[v]=w;k.each(w.tokens,function(z,A){var y=A.charAt(0),x=p[y]||(p[y]=[v]);!~k.indexOf(x,v)&&x.push(v)})});return{itemHash:r,adjacencyList:p}},_mergeProcessedData:function(q){var r=this;k.mixin(this.itemHash,q.itemHash);k.each(q.adjacencyList,function(t,s){var u=r.adjacencyList[t];r.adjacencyList[t]=u?u.concat(s):s});if(this.minLength===0){for(var p in q.itemHash){this.defaultOrder.push(p)}if(k.isFunction(this.defaultSort)){this.defaultOrder.sort(function(s,t){return r.defaultSort(r.itemHash[s],r.itemHash[t])})}}},_getDefaultList:function(){var p=[];for(var q=0;q<this.limit;q++){p.push(this.itemHash[this.defaultOrder[q]])}return p},_getLocalSuggestions:function(t){var u=this,p=[],q=[],r,s=[];k.each(t,function(w,x){var v=x.charAt(0);!~k.indexOf(p,v)&&p.push(v)});k.each(p,function(w,v){var x=u.adjacencyList[v];if(!x){return false}q.push(x);if(!r||x.length<r.length){r=x}});if(q.length<p.length){return[]}k.each(r,function(v,w){var z=u.itemHash[w],x,y;x=k.every(q,function(A){return ~k.indexOf(A,w)});y=x&&k.every(t,function(A){return k.some(z.tokens,function(B){return B.indexOf(A)===0})});y&&s.push(z)});return s},initialize:function(){var p;this.local&&this._processLocalData(this.local);this.transport=this.remote?new i(this.remote):null;p=this.prefetch?this._loadPrefetchData(this.prefetch):a.Deferred().resolve();this.local=this.prefetch=this.remote=null;this.initialize=function(){return p};return p},getSuggestions:function(s,q){var v=this,u,t,p=false;if(s.length<this.minLength){return}if(s.length==0){return q(this._getDefaultList())}u=k.tokenizeQuery(s);t=this._getLocalSuggestions(u).slice(0,this.limit);if(t.length<this.limit&&this.transport){p=this.transport.get(s,r)}!p&&q&&q(t);function r(w){t=t.slice(0);k.each(w,function(y,x){var A=v._transformDatum(x),z;z=k.some(t,function(B){return A.value===B.value});!z&&t.push(A);return t.length<v.limit});q&&q(t)}}});return n;function m(s,q,t){var r,p;if(k.isFunction(s)){r=s}else{if(k.isString(s)){p=q.compile(s);r=k.bind(p.render,p)}else{r=function(u){return"<p>"+u[t]+"</p>"}}}return r}}();var f=function(){function o(p){var q=this;k.bindAll(this);this.specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};this.$hint=a(p.hint);this.$input=a(p.input).on("blur.tt",this._handleBlur).on("focus.tt",this._handleFocus).on("keydown.tt",this._handleSpecialKeyEvent);if(!k.isMsie()){this.$input.on("input.tt",this._compareQueryToInputValue)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(r){if(q.specialKeyCodeMap[r.which||r.keyCode]){return}k.defer(q._compareQueryToInputValue)})}this.query=this.$input.val();this.$overflowHelper=m(this.$input)}k.mixin(o.prototype,e,{_handleFocus:function(){this.trigger("focused")},_handleBlur:function(){this.trigger("blured")},_handleSpecialKeyEvent:function(p){var q=this.specialKeyCodeMap[p.which||p.keyCode];q&&this.trigger(q+"Keyed",p)},_compareQueryToInputValue:function(){var p=this.getInputValue(),q=n(this.query,p),r=q?this.query.length!==p.length:false;if(r){this.trigger("whitespaceChanged",{value:this.query})}else{if(!q){this.trigger("queryChanged",{value:this.query=p})}}},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(p){this.query=p},getInputValue:function(){return this.$input.val()},setInputValue:function(q,p){this.$input.val(q);!p&&this._compareQueryToInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(p){this.$hint.val(p)},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},isOverflow:function(){this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>this.$input.width()},isCursorAtEnd:function(){var r=this.$input.val().length,q=this.$input[0].selectionStart,p;if(k.isNumber(q)){return q===r}else{if(document.selection){p=document.selection.createRange();p.moveStart("character",-r);return r===p.text.length}}return true}});return o;function m(p){return a("<span></span>").css({position:"absolute",left:"-9999px",visibility:"hidden",whiteSpace:"nowrap",fontFamily:p.css("font-family"),fontSize:p.css("font-size"),fontStyle:p.css("font-style"),fontVariant:p.css("font-variant"),fontWeight:p.css("font-weight"),wordSpacing:p.css("word-spacing"),letterSpacing:p.css("letter-spacing"),textIndent:p.css("text-indent"),textRendering:p.css("text-rendering"),textTransform:p.css("text-transform")}).insertAfter(p)}function n(p,q){p=(p||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");q=(q||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ");return p===q}}();var c=function(){var p={suggestionsList:'<span class="tt-suggestions"></span>'},m={suggestionsList:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"nowrap"}};function n(q){k.bindAll(this);this.isOpen=false;this.isEmpty=true;this.isMouseOverDropdown=false;this.showDefaultSuggestions=q.showDefaultSuggestions;this.$menu=a(q.menu).on("mouseenter.tt",this._handleMouseenter).on("mouseleave.tt",this._handleMouseleave).on("click.tt",".tt-suggestion",this._handleSelection).on("mouseover.tt",".tt-suggestion",this._handleMouseover)}k.mixin(n.prototype,e,{_handleMouseenter:function(){this.isMouseOverDropdown=true},_handleMouseleave:function(){this.isMouseOverDropdown=false},_handleMouseover:function(q){var r=a(q.currentTarget);this._getSuggestions().removeClass("tt-is-under-cursor");r.addClass("tt-is-under-cursor")},_handleSelection:function(q){var r=a(q.currentTarget);this.trigger("suggestionSelected",o(r))},_show:function(){this.$menu.css("display","block")},_hide:function(){this.$menu.hide()},_moveCursor:function(t){var r,q,u,s;if(!this.isVisible()){return}r=this._getSuggestions();q=r.filter(".tt-is-under-cursor");q.removeClass("tt-is-under-cursor");u=r.index(q)+t;u=(u+1)%(r.length+1)-1;if(u===-1){this.trigger("cursorRemoved");return}else{if(u<-1){u=r.length-1}}s=r.eq(u).addClass("tt-is-under-cursor");this._ensureVisibility(s);this.trigger("cursorMoved",o(s))},_getSuggestions:function(){return this.$menu.find(".tt-suggestions > .tt-suggestion")},_ensureVisibility:function(q){var t=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),u=this.$menu.scrollTop(),s=q.position().top,r=s+q.outerHeight(true);if(s<0){this.$menu.scrollTop(u+s)}else{if(t<r){this.$menu.scrollTop(u+(r-t))}}},destroy:function(){this.$menu.off(".tt");this.$menu=null},isVisible:function(){return this.isOpen&&!this.isEmpty},closeUnlessMouseIsOverDropdown:function(){if(!this.isMouseOverDropdown){this.close()}},close:function(){if(this.isOpen){this.isOpen=false;this.isMouseOverDropdown=false;this._hide();this.$menu.find(".tt-suggestions > .tt-suggestion").removeClass("tt-is-under-cursor");this.trigger("closed")}},open:function(){if(!this.isOpen){this.isOpen=true;if(this.showDefaultSuggestions||!this.isEmpty){this._show()}this.trigger("opened")}},setLanguageDirection:function(q){var r={left:"0",right:"auto"},s={left:"auto",right:" 0"};q==="ltr"?this.$menu.css(r):this.$menu.css(s)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(+1)},getSuggestionUnderCursor:function(){var q=this._getSuggestions().filter(".tt-is-under-cursor").first();return q.length>0?o(q):null},getFirstSuggestion:function(){var q=this._getSuggestions().first();return q.length>0?o(q):null},renderSuggestions:function(u,y){var v="tt-dataset-"+u.name,z='<div class="tt-suggestion">%body</div>',t,s,q=this.$menu.find("."+v),w,x,r;if(q.length===0){s=a(p.suggestionsList).css(m.suggestionsList);q=a("<div></div>").addClass(v).append(u.header).append(s).append(u.footer).appendTo(this.$menu)}if(y.length>0){this.isEmpty=false;this.isOpen&&this._show();w=document.createElement("div");x=document.createDocumentFragment();k.each(y,function(A,B){if(typeof(B)!=="undefined"){B.dataset=u.name;t=u.template(B.datum);w.innerHTML=z.replace("%body",t);r=a(w.firstChild).css(m.suggestion).data("suggestion",B);r.children().each(function(){a(this).css(m.suggestionChild)});x.appendChild(r[0])}});q.show().find(".tt-suggestions").html(x)}else{this.clearSuggestions(u.name)}this.trigger("suggestionsRendered")},clearSuggestions:function(s){var q=s?this.$menu.find(".tt-dataset-"+s):this.$menu.find('[class^="tt-dataset-"]'),r=q.find(".tt-suggestions");q.hide();r.empty();if(this._getSuggestions().length===0){this.isEmpty=true;this._hide()}}});return n;function o(q){return q.data("suggestion")}}();var j=function(){var p={wrapper:'<span class="twitter-typeahead"></span>',hint:'<input class="tt-hint" type="text" autocomplete="off" spellcheck="off" disabled>',dropdown:'<span class="tt-dropdown-menu"></span>'},n={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},query:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"}};if(k.isMsie()){k.mixin(n.query,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(k.isMsie()&&k.isMsie()<=7){k.mixin(n.wrapper,{display:"inline",zoom:"1"});k.mixin(n.query,{marginTop:"-1px"})}function q(v){var t,s,r;k.bindAll(this);this.$node=m(v.input);this.datasets=v.datasets;this.dir=null;this.showDefaultSuggestions=false;this.eventBus=v.eventBus;t=this.$node.find(".tt-dropdown-menu");s=this.$node.find(".tt-query");r=this.$node.find(".tt-hint");for(var u=0;u<this.datasets.length;u++){if(this.datasets[u].minLength===0){this.showDefaultSuggestions=true}}this.dropdownView=new c({menu:t,showDefaultSuggestions:this.showDefaultSuggestions}).on("suggestionSelected",this._handleSelection).on("cursorMoved",this._clearHint).on("cursorMoved",this._setInputValueToSuggestionUnderCursor).on("cursorRemoved",this._setInputValueToQuery).on("cursorRemoved",this._updateHint).on("suggestionsRendered",this._updateHint).on("opened",this._updateHint).on("closed",this._clearHint).on("opened closed",this._propagateEvent);this.inputView=new f({input:s,hint:r}).on("focused",this._handleFocus).on("blured",this._closeDropdown).on("blured",this._setInputValueToQuery).on("enterKeyed tabKeyed",this._handleSelection).on("queryChanged",this._clearHint).on("queryChanged",this._clearSuggestions).on("queryChanged",this._getSuggestions).on("whitespaceChanged",this._updateHint).on("queryChanged whitespaceChanged",this._openDropdown).on("queryChanged whitespaceChanged",this._setLanguageDirection).on("escKeyed",this._closeDropdown).on("escKeyed",this._setInputValueToQuery).on("tabKeyed upKeyed downKeyed",this._managePreventDefault).on("upKeyed downKeyed",this._moveDropdownCursor).on("upKeyed downKeyed",this._openDropdown).on("tabKeyed leftKeyed rightKeyed",this._autocomplete)}k.mixin(q.prototype,e,{_managePreventDefault:function(s){var r=s.data,t,u,v=false;switch(s.type){case"tabKeyed":t=this.inputView.getHintValue();u=this.inputView.getInputValue();v=t&&t!==u;break;case"upKeyed":case"downKeyed":v=!r.shiftKey&&!r.ctrlKey&&!r.metaKey;break}v&&r.preventDefault()},_setLanguageDirection:function(){var r=this.inputView.getLanguageDirection();if(r!==this.dir){this.dir=r;this.$node.css("direction",r);this.dropdownView.setLanguageDirection(r)}},_updateHint:function(){var z=this.dropdownView.getFirstSuggestion(),u=z?z.value:null,s=this.dropdownView.isVisible(),v=this.inputView.isOverflow(),w,y,t,r,x;if(u&&s&&!v){w=this.inputView.getInputValue();if(!w){return}y=w.replace(/\s{2,}/g," ").replace(/^\s+/g,"");t=k.escapeRegExChars(y);r=new RegExp("^(?:"+t+")(.*$)","i");x=r.exec(u);this.inputView.setHintValue(w+(x?x[1]:""))}},_clearHint:function(){this.inputView.setHintValue("")},_clearSuggestions:function(){this.dropdownView.clearSuggestions()},_setInputValueToQuery:function(){this.inputView.setInputValue(this.inputView.getQuery())},_setInputValueToSuggestionUnderCursor:function(r){var s=r.data;this.inputView.setInputValue(s.value,true)},_handleFocus:function(){if(this.showDefaultSuggestions){this._getSuggestions()}this._openDropdown()},_openDropdown:function(){this.dropdownView.open()},_closeDropdown:function(r){this.dropdownView[r.type==="blured"?"closeUnlessMouseIsOverDropdown":"close"]()},_moveDropdownCursor:function(s){var r=s.data;if(!r.shiftKey&&!r.ctrlKey&&!r.metaKey){this.dropdownView[s.type==="upKeyed"?"moveCursorUp":"moveCursorDown"]()}},_handleSelection:function(s){var r=s.type==="suggestionSelected",t=r?s.data:this.dropdownView.getSuggestionUnderCursor();if(t){this.inputView.setInputValue(t.value);r?this.inputView.focus():s.data.preventDefault();r&&k.isMsie()?k.defer(this.dropdownView.close):this.dropdownView.close();this.eventBus.trigger("selected",t.datum,t.dataset)}},_getSuggestions:function(){var s=this,r=this.inputView.getQuery();if(k.isBlankString(r)&&!this.showDefaultSuggestions){return}k.each(this.datasets,function(u,t){t.getSuggestions(r,function(v){if(r===s.inputView.getQuery()){s.dropdownView.renderSuggestions(t,v)}})})},_autocomplete:function(r){var u,t,v,s,w;if(r.type==="rightKeyed"||r.type==="leftKeyed"){u=this.inputView.isCursorAtEnd();t=this.inputView.getLanguageDirection()==="ltr"?r.type==="leftKeyed":r.type==="rightKeyed";if(!u||t){return}}v=this.inputView.getQuery();s=this.inputView.getHintValue();if(s!==""&&v!==s){w=this.dropdownView.getFirstSuggestion();this.inputView.setInputValue(w.value);this.eventBus.trigger("autocompleted",w.datum,w.dataset)}},_propagateEvent:function(r){this.eventBus.trigger(r.type)},destroy:function(){this.inputView.destroy();this.dropdownView.destroy();o(this.$node);this.$node=null},setQuery:function(r){this.inputView.setQuery(r);this.inputView.setInputValue(r);this._clearHint();this._clearSuggestions();this._getSuggestions()}});return q;function m(w){var u=a(p.wrapper),r=a(p.dropdown),t=a(w),s=a(p.hint);u=u.css(n.wrapper);r=r.css(n.dropdown);s.css(n.hint).css({backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")});t.data("ttAttrs",{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")});t.addClass("tt-query").attr({autocomplete:"off",spellcheck:false}).css(n.query);try{!t.attr("dir")&&t.attr("dir","auto")}catch(v){}return t.wrap(u).parent().prepend(s).append(r)}function o(s){var r=s.find(".tt-query");k.each(r.data("ttAttrs"),function(t,u){k.isUndefined(u)?r.removeAttr(t):r.attr(t,u)});r.detach().removeData("ttAttrs").removeClass("tt-query").insertAfter(s);s.remove()}}();(function(){var m={},o="ttView",n;n={initialize:function(p){var q;p=k.isArray(p)?p:[p];if(p.length===0){a.error("no datasets provided")}q=k.map(p,function(t){var s=m[t.name]?m[t.name]:new b(t);if(t.name){m[t.name]=s}return s});return this.each(r);function r(){var s=a(this),t,u=new d({el:s});t=k.map(q,function(v){return v.initialize()});s.data(o,new j({input:s,eventBus:u=new d({el:s}),datasets:q}));a.when.apply(a,t).always(function(){k.defer(function(){u.trigger("initialized")})})}},destroy:function(){return this.each(p);function p(){var q=a(this),r=q.data(o);if(r){r.destroy();q.removeData(o)}}},setQuery:function(p){return this.each(q);function q(){var r=a(this).data(o);r&&r.setQuery(p)}}};jQuery.fn.typeahead=function(p){if(n[p]){return n[p].apply(this,[].slice.call(arguments,1))}else{return n.initialize.apply(this,arguments)}}})()})(window.jQuery);$(function(){$("#SearchText").typeahead({name:"search",valueKey:"url",limit:25,beforeSend:function(a,b){$.SetLoadingIndicator()},remote:"/FastSearch?q=%QUERY",prefetch:{url:"/FastSearchPrefetch",ttl:1},minLength:0,template:"dummy string",engine:{compile:function(a){return{render:function(b){var c="<div{2}>{0}{1}</div>".format(b.line1,b.line2?"<br>"+b.line2:"",b.addmargin?" style='margin-bottom:.7em'":"");return c}}}}});$("#SearchText").bind("typeahead:selected",function(c,a,b){window.location=a.url})});String.prototype.format=function(){var a=arguments;return this.replace(/{(\d+)}/g,function(b,c){return typeof a[c]!="undefined"?a[c]:b})};$(function(){$.AttachFormElements=function(){$("form.ajax input.ajax-typeahead").typeahead({minLength:3,remote:{url:"test",beforeSend:function(b,c){$.SetLoadingIndicator()},replace:function(c,b){return $("input:focus").data("link")+"?query="+b}}});$.DatePickersAndChosen()};$.DatePickersAndChosen=function(){$("form.ajax .date").datepicker({autoclose:true,orientation:"auto",forceParse:false,format:$.dtoptions.format});$("form.ajax select:not([plain])").chosen();$("form.ajax a.editable").editable()};$("ul.nav-tabs a.ajax,a.ajax.ui-tabs-anchor").live("click",function(f){var b=$(this);var c=b.data("clicked");if(c){return false}b.data("clicked",true);var g=b.attr("href")||b.data("target");var e=$(g);var h=e.data("link");if(!e.hasClass("loaded")){$.ajax({type:"POST",url:h,data:{},success:function(d,i){e.addClass("loaded");e.html(d).ready(function(){var j=e.find("form.ajax");if(j.data("init")){$.InitFunctions[j.data("init")]()}if(j.data("init2")){$.InitFunctions[j.data("init2")]()}})}})}return true});$("div.tab-pane").on("click","a.ajax-refresh",function(c){c.preventDefault();var b=$(this).closest("div.tab-pane");$.formAjaxClick($(this),b.data("link"));return false});$("form.ajax a.submit").live("click",function(b){b.preventDefault();var c=$(this);if(c.data("confirm")){bootbox.confirm(c.data("confirm"),function(d){if(d==true){$.formAjaxSubmit(c)}})}else{$.formAjaxSubmit(c)}return false});$.formAjaxSubmit=function(c){var b=c.closest("form.ajax");b.attr("action",c[0].href);b.submit()};$("form.ajax a.ajax").live("click",function(b){b.preventDefault();var c=$(this);if(c.data("confirm")){bootbox.confirm(c.data("confirm"),function(d){if(d===true){$.formAjaxClick(c)}})}else{$.formAjaxClick(c)}return false});$.formAjaxClick=function(c,e){var b=c.closest("form.ajax");var f=e||c.data("link");if(typeof f==="undefined"){f=c[0].href}var d=b.serialize();if(d.length===0){d={}}if(!c.hasClass("validate")||b.valid()){$.ajax({type:"POST",url:f,data:d,success:function(h,i){if(c.data("redirect")){window.location=h}else{if(b.hasClass("modal")){b.html(h).ready(function(){b.removeClass("hide");var j=($(window).height()-b.height())/2;if(j<10){j=10}b.css({"margin-top":j,top:"0"});$.AttachFormElements();if(c.data("callback")){$.InitFunctions[c.data("callback")]()}})}else{var g=$(b.data("results")||b);g.replaceWith(h).ready(function(){$.AttachFormElements();if(b.data("init")){$.InitFunctions[b.data("init")]()}if(b.data("init2")){$.InitFunctions[b.data("init2")]()}if(c.data("callback")){$.InitFunctions[c.data("callback")]()}})}}},error:function(i,g,h){alert(i.status);alert(h)}})}return false};$.validator.addMethod("unallowedcode",function(d,b,c){return d!==c.code},"required, select item");var a=0;$.ajaxSetup({beforeSend:function(){$.SetLoadingIndicator()},complete:function(){a--;if(a===0){$("#loading-indicator").hide()}}});$.SetLoadingIndicator=function(){$("#loading-indicator").css({position:"absolute",left:$(window).width()/2,top:$(window).height()/2,"z-index":2000}).show();a++};if(!$.InitFunctions){$.InitFunctions={}}});$(function(){$("a.extravalue").live("click",function(b){b.preventDefault();var a=$(this);$("<div />").load($(this).attr("href"),{},function(){var c=$(this);var e=c.find("form");e.modal("show");$.AttachFormElements();$(this).validate({highlight:function(d){$(d).closest(".control-group").addClass("error")},unhighlight:function(d){$(d).closest(".control-group").removeClass("error")}});e.on("hidden",function(){c.remove();e.remove()});var g=function(){$("#ExtraValueBitPrefix").parent().parent().addClass("hide");$("#ExtraValueCheckboxes").parent().parent().addClass("hide");$("#ExtraValueCodes").parent().parent().addClass("hide");switch($("#ExtraValueType_Value").val()){case"Code":$("#ExtraValueCodes").parent().parent().removeClass("hide");break;case"Bits":$("#ExtraValueBitPrefix").parent().parent().removeClass("hide");$("#ExtraValueCheckboxes").parent().parent().removeClass("hide");break;case"Codes":$("#ExtraValueCodes").parent().parent().removeClass("hide");break}};$("#ExtraValueType_Value").live("change",g)});$.InitFunctions.StandardExtraValueDialogCallback=function(){if($("#StandardExtraValueError").length==0){$("#extravalue-dialog").modal("hide");var c=a.closest("form").find("a.ajax-refresh");if(c.length>0){c.click()}}};$.InitFunctions.EditStandardExtraValueDialogCallback=function(){if($("#EditStandardExtraValueError").length==0){$("#editextravalue-dialog").modal("hide");var c=a.closest("form").find("a.ajax-refresh");if(c.length>0){c.click()}}};$.InitFunctions.DeleteStandardCallback=function(c){$(c.data("rowid")).remove()};$("#CloseListStandard").live("click",function(c){c.preventDefault();$.InitFunctions.StandardExtraValueDialogCallback()})});$("a.adhoc-extravalue").live("click",function(b){b.preventDefault();var a=$(this);$("<div />").load(a.attr("href"),{},function(){var c=$(this);var e=c.find("form");e.modal("show");$.AttachFormElements();e.validate({highlight:function(d){$(d).closest(".control-group").addClass("error")},unhighlight:function(d){$(d).closest(".control-group").removeClass("error")}});e.on("hidden",function(){c.remove();e.remove()});var g=function(){$("#ExtraValueTextBox").parent().parent().addClass("hide");$("#ExtraValueTextArea").parent().parent().addClass("hide");$("#ExtraValueCheckbox").parent().parent().addClass("hide");$("#ExtraValueDate").parent().parent().parent().addClass("hide");$("#ExtraValueInteger").parent().parent().addClass("hide");switch($("#AdhocExtraValueType_Value").val()){case"Code":$("#ExtraValueTextBox").parent().parent().removeClass("hide");break;case"Text":$("#ExtraValueTextArea").parent().parent().removeClass("hide");break;case"Bit":$("#ExtraValueCheckbox").parent().parent().removeClass("hide");break;case"Date":$("#ExtraValueDate").parent().parent().parent().removeClass("hide");break;case"Int":$("#ExtraValueInteger").parent().parent().removeClass("hide");break}};$("#AdhocExtraValueType_Value").live("change",g)});$.InitFunctions.AdhocDialogCallback=function(){if($("#ExtraValueError").length==0){$("#extravalue-dialog").modal("hide");var c=a.closest("form").find("a.ajax.reload");if(c.length>0){c.click()}}}});$.InitFunctions.ExtraEditable=function(){$.fn.editabletypes.abstractinput.prototype.value2input=function(a){this.$input.val((a||"").toString())};$("a.click-Code").editable({mode:"inline"});$("a.click-Text").editable({mode:"inline"});$("a.click-Int").editable({mode:"inline"});$("a.click-Text2,a.click-Data").editable({type:"textarea",mode:"inline",inputclass:"width100",showbuttons:"bottom"}).on("shown",function(a,b){b.input.$input.closest("span.editable-inline").css("width","100%");b.input.$input.closest("div.editable-input").css("width","100%")});$("a.click-Code-Select").editable({type:"select",mode:"inline"});$("a.click-Bits").editable({type:"checklist",mode:"inline"});$("a.click-Date").editable({type:"date",mode:"inline",format:$.dtoptions.format});$("a.click-Bit").editable({type:"checklist",mode:"inline",source:{True:"True"},emptytext:"False"})}});$(function(){$("a.searchadd").live("click",function(d){d.preventDefault();$("<form id='search-add' class='modal fade hide validate ajax form-horizontal' data-width='700' data-keyboard='false' data-backdrop='static' />").load($(this).attr("href"),{},function(){$(this).modal("show");$.AttachFormElements();$(this).validate({highlight:function(e){$(e).closest(".control-group").addClass("error")},unhighlight:function(e){$(e).closest(".control-group").removeClass("error")}});$(this).on("hidden",function(){$(this).remove()})})});$("#search-add a.commit").live("click",function(g){g.preventDefault();var d=$(this);var e=d.data("clicked");if(e){return false}d.data("clicked",true);var h=d.closest("form");var j=h.serialize();var i=d.attr("href");$.post(i,j,function(f){h.modal("hide");if(f.message){alert(f.message)}else{if(f.from==="Menu"){window.location="/Person2/"+f.pid}else{AddSelected(f)}}});return false});$(document).on("shown","#search-add",function(){$("#search-add #Name").focus();$("#search-add input").live("keydown",function(d){if(d.keyCode===13){d.preventDefault();$("#searchperson").click();return false}else{return true}})});$.fn.loadWith=function(g,e){var d=$(this);$.post(g,function(f){d.replaceWith(f).ready(e)})};$("#search-add a.clear").live("click",function(d){d.preventDefault();$("#Name").val("");$("#Phone").val("");$("#Address").val("");$("#dob").val("");return false});$("form.ajax tbody > tr a.reveal").live("click",function(d){d.stopPropagation()});$.NotReveal=function(d){if($(d.target).is("a")){if(!$(d.target).is(".reveal")){return true}}return false};$("form.ajax tr.section").live("click",function(d){if($.NotReveal(d)){return}d.preventDefault();c($(this))});$('form.ajax a[rel="reveal"]').live("click",function(d){d.preventDefault();c($(this).parents("tr"))});var c=function(d){if(d.hasClass("notshown")){b(d)}else{if(d.hasClass("shown")){a(d)}else{d.next("tr").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("toggle")}}};var b=function(d){d.nextUntil("tr.section").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("show");d.removeClass("notshown").addClass("shown");d.find("i").removeClass("fa-caret-right").addClass("fa-caret-down")};var a=function(d){d.nextUntil("tr.section").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("hide");d.removeClass("shown").addClass("notshown");d.find("i").removeClass("fa-caret-down").addClass("fa-caret-right")};$("form.ajax tr.master").live("click",function(d){if($.NotReveal(d)){return}d.preventDefault();$(this).next("tr").find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("toggle")});$("form.ajax tr.details").live("click",function(d){if($.NotReveal(d)){return}d.preventDefault();d.stopPropagation();$(this).find("div.collapse").off("hidden").on("hidden",function(f){f.stopPropagation()}).collapse("hide")})});